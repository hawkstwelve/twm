function Qv(_,w){for(var C=0;C<w.length;C++){const A=w[C];if(typeof A!="string"&&!Array.isArray(A)){for(const k in A)if(k!=="default"&&!(k in _)){const N=Object.getOwnPropertyDescriptor(A,k);N&&Object.defineProperty(_,k,N.get?N:{enumerable:!0,get:()=>A[k]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}(function(){const w=document.createElement("link").relList;if(w&&w.supports&&w.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))A(k);new MutationObserver(k=>{for(const N of k)if(N.type==="childList")for(const M of N.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&A(M)}).observe(document,{childList:!0,subtree:!0});function C(k){const N={};return k.integrity&&(N.integrity=k.integrity),k.referrerPolicy&&(N.referrerPolicy=k.referrerPolicy),k.crossOrigin==="use-credentials"?N.credentials="include":k.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function A(k){if(k.ep)return;k.ep=!0;const N=C(k);fetch(k.href,N)}})();function xm(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var $m={exports:{}},Qf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function Jv(){if(Zg)return Qf;Zg=1;var _=Symbol.for("react.transitional.element"),w=Symbol.for("react.fragment");function C(A,k,N){var M=null;if(N!==void 0&&(M=""+N),k.key!==void 0&&(M=""+k.key),"key"in k){N={};for(var d in k)d!=="key"&&(N[d]=k[d])}else N=k;return k=N.ref,{$$typeof:_,type:A,key:M,ref:k!==void 0?k:null,props:N}}return Qf.Fragment=w,Qf.jsx=C,Qf.jsxs=C,Qf}var Gg;function ex(){return Gg||(Gg=1,$m.exports=Jv()),$m.exports}var be=ex(),Xm={exports:{}},di={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function tx(){if($g)return di;$g=1;var _=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),M=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),H=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),X=Symbol.iterator;function $(se){return se===null||typeof se!="object"?null:(se=X&&se[X]||se["@@iterator"],typeof se=="function"?se:null)}var ge={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Se=Object.assign,ce={};function _e(se,je,Je){this.props=se,this.context=je,this.refs=ce,this.updater=Je||ge}_e.prototype.isReactComponent={},_e.prototype.setState=function(se,je){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,je,"setState")},_e.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function Me(){}Me.prototype=_e.prototype;function Ie(se,je,Je){this.props=se,this.context=je,this.refs=ce,this.updater=Je||ge}var Pe=Ie.prototype=new Me;Pe.constructor=Ie,Se(Pe,_e.prototype),Pe.isPureReactComponent=!0;var qe=Array.isArray,Ze={H:null,A:null,T:null,S:null,V:null},mt=Object.prototype.hasOwnProperty;function it(se,je,Je,st,bt,$t){return Je=$t.ref,{$$typeof:_,type:se,key:je,ref:Je!==void 0?Je:null,props:$t}}function Lt(se,je){return it(se.type,je,void 0,void 0,void 0,se.props)}function Nt(se){return typeof se=="object"&&se!==null&&se.$$typeof===_}function Gt(se){var je={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(Je){return je[Je]})}var ot=/\/+/g;function lt(se,je){return typeof se=="object"&&se!==null&&se.key!=null?Gt(""+se.key):je.toString(36)}function Ft(){}function Rt(se){switch(se.status){case"fulfilled":return se.value;case"rejected":throw se.reason;default:switch(typeof se.status=="string"?se.then(Ft,Ft):(se.status="pending",se.then(function(je){se.status==="pending"&&(se.status="fulfilled",se.value=je)},function(je){se.status==="pending"&&(se.status="rejected",se.reason=je)})),se.status){case"fulfilled":return se.value;case"rejected":throw se.reason}}throw se}function qt(se,je,Je,st,bt){var $t=typeof se;($t==="undefined"||$t==="boolean")&&(se=null);var Et=!1;if(se===null)Et=!0;else switch($t){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(se.$$typeof){case _:case w:Et=!0;break;case J:return Et=se._init,qt(Et(se._payload),je,Je,st,bt)}}if(Et)return bt=bt(se),Et=st===""?"."+lt(se,0):st,qe(bt)?(Je="",Et!=null&&(Je=Et.replace(ot,"$&/")+"/"),qt(bt,je,Je,"",function(Ii){return Ii})):bt!=null&&(Nt(bt)&&(bt=Lt(bt,Je+(bt.key==null||se&&se.key===bt.key?"":(""+bt.key).replace(ot,"$&/")+"/")+Et)),je.push(bt)),1;Et=0;var Tt=st===""?".":st+":";if(qe(se))for(var Ct=0;Ct<se.length;Ct++)st=se[Ct],$t=Tt+lt(st,Ct),Et+=qt(st,je,Je,$t,bt);else if(Ct=$(se),typeof Ct=="function")for(se=Ct.call(se),Ct=0;!(st=se.next()).done;)st=st.value,$t=Tt+lt(st,Ct++),Et+=qt(st,je,Je,$t,bt);else if($t==="object"){if(typeof se.then=="function")return qt(Rt(se),je,Je,st,bt);throw je=String(se),Error("Objects are not valid as a React child (found: "+(je==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":je)+"). If you meant to render a collection of children, use an array instead.")}return Et}function De(se,je,Je){if(se==null)return se;var st=[],bt=0;return qt(se,st,"","",function($t){return je.call(Je,$t,bt++)}),st}function Ge(se){if(se._status===-1){var je=se._result;je=je(),je.then(function(Je){(se._status===0||se._status===-1)&&(se._status=1,se._result=Je)},function(Je){(se._status===0||se._status===-1)&&(se._status=2,se._result=Je)}),se._status===-1&&(se._status=0,se._result=je)}if(se._status===1)return se._result.default;throw se._result}var Qe=typeof reportError=="function"?reportError:function(se){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var je=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof se=="object"&&se!==null&&typeof se.message=="string"?String(se.message):String(se),error:se});if(!window.dispatchEvent(je))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",se);return}console.error(se)};function Mt(){}return di.Children={map:De,forEach:function(se,je,Je){De(se,function(){je.apply(this,arguments)},Je)},count:function(se){var je=0;return De(se,function(){je++}),je},toArray:function(se){return De(se,function(je){return je})||[]},only:function(se){if(!Nt(se))throw Error("React.Children.only expected to receive a single React element child.");return se}},di.Component=_e,di.Fragment=C,di.Profiler=k,di.PureComponent=Ie,di.StrictMode=A,di.Suspense=G,di.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ze,di.__COMPILER_RUNTIME={__proto__:null,c:function(se){return Ze.H.useMemoCache(se)}},di.cache=function(se){return function(){return se.apply(null,arguments)}},di.cloneElement=function(se,je,Je){if(se==null)throw Error("The argument must be a React element, but you passed "+se+".");var st=Se({},se.props),bt=se.key,$t=void 0;if(je!=null)for(Et in je.ref!==void 0&&($t=void 0),je.key!==void 0&&(bt=""+je.key),je)!mt.call(je,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&je.ref===void 0||(st[Et]=je[Et]);var Et=arguments.length-2;if(Et===1)st.children=Je;else if(1<Et){for(var Tt=Array(Et),Ct=0;Ct<Et;Ct++)Tt[Ct]=arguments[Ct+2];st.children=Tt}return it(se.type,bt,void 0,void 0,$t,st)},di.createContext=function(se){return se={$$typeof:M,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null},se.Provider=se,se.Consumer={$$typeof:N,_context:se},se},di.createElement=function(se,je,Je){var st,bt={},$t=null;if(je!=null)for(st in je.key!==void 0&&($t=""+je.key),je)mt.call(je,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(bt[st]=je[st]);var Et=arguments.length-2;if(Et===1)bt.children=Je;else if(1<Et){for(var Tt=Array(Et),Ct=0;Ct<Et;Ct++)Tt[Ct]=arguments[Ct+2];bt.children=Tt}if(se&&se.defaultProps)for(st in Et=se.defaultProps,Et)bt[st]===void 0&&(bt[st]=Et[st]);return it(se,$t,void 0,void 0,null,bt)},di.createRef=function(){return{current:null}},di.forwardRef=function(se){return{$$typeof:d,render:se}},di.isValidElement=Nt,di.lazy=function(se){return{$$typeof:J,_payload:{_status:-1,_result:se},_init:Ge}},di.memo=function(se,je){return{$$typeof:H,type:se,compare:je===void 0?null:je}},di.startTransition=function(se){var je=Ze.T,Je={};Ze.T=Je;try{var st=se(),bt=Ze.S;bt!==null&&bt(Je,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(Mt,Qe)}catch($t){Qe($t)}finally{Ze.T=je}},di.unstable_useCacheRefresh=function(){return Ze.H.useCacheRefresh()},di.use=function(se){return Ze.H.use(se)},di.useActionState=function(se,je,Je){return Ze.H.useActionState(se,je,Je)},di.useCallback=function(se,je){return Ze.H.useCallback(se,je)},di.useContext=function(se){return Ze.H.useContext(se)},di.useDebugValue=function(){},di.useDeferredValue=function(se,je){return Ze.H.useDeferredValue(se,je)},di.useEffect=function(se,je,Je){var st=Ze.H;if(typeof Je=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(se,je)},di.useId=function(){return Ze.H.useId()},di.useImperativeHandle=function(se,je,Je){return Ze.H.useImperativeHandle(se,je,Je)},di.useInsertionEffect=function(se,je){return Ze.H.useInsertionEffect(se,je)},di.useLayoutEffect=function(se,je){return Ze.H.useLayoutEffect(se,je)},di.useMemo=function(se,je){return Ze.H.useMemo(se,je)},di.useOptimistic=function(se,je){return Ze.H.useOptimistic(se,je)},di.useReducer=function(se,je,Je){return Ze.H.useReducer(se,je,Je)},di.useRef=function(se){return Ze.H.useRef(se)},di.useState=function(se){return Ze.H.useState(se)},di.useSyncExternalStore=function(se,je,Je){return Ze.H.useSyncExternalStore(se,je,Je)},di.useTransition=function(){return Ze.H.useTransition()},di.version="19.1.1",di}var Xg;function Cg(){return Xg||(Xg=1,Xm.exports=tx()),Xm.exports}var ee=Cg();const Pc=xm(ee),ix=Qv({__proto__:null,default:Pc},[ee]);var Ym={exports:{}},Jf={},Km={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function nx(){return Yg||(Yg=1,(function(_){function w(De,Ge){var Qe=De.length;De.push(Ge);e:for(;0<Qe;){var Mt=Qe-1>>>1,se=De[Mt];if(0<k(se,Ge))De[Mt]=Ge,De[Qe]=se,Qe=Mt;else break e}}function C(De){return De.length===0?null:De[0]}function A(De){if(De.length===0)return null;var Ge=De[0],Qe=De.pop();if(Qe!==Ge){De[0]=Qe;e:for(var Mt=0,se=De.length,je=se>>>1;Mt<je;){var Je=2*(Mt+1)-1,st=De[Je],bt=Je+1,$t=De[bt];if(0>k(st,Qe))bt<se&&0>k($t,st)?(De[Mt]=$t,De[bt]=Qe,Mt=bt):(De[Mt]=st,De[Je]=Qe,Mt=Je);else if(bt<se&&0>k($t,Qe))De[Mt]=$t,De[bt]=Qe,Mt=bt;else break e}}return Ge}function k(De,Ge){var Qe=De.sortIndex-Ge.sortIndex;return Qe!==0?Qe:De.id-Ge.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var N=performance;_.unstable_now=function(){return N.now()}}else{var M=Date,d=M.now();_.unstable_now=function(){return M.now()-d}}var G=[],H=[],J=1,X=null,$=3,ge=!1,Se=!1,ce=!1,_e=!1,Me=typeof setTimeout=="function"?setTimeout:null,Ie=typeof clearTimeout=="function"?clearTimeout:null,Pe=typeof setImmediate<"u"?setImmediate:null;function qe(De){for(var Ge=C(H);Ge!==null;){if(Ge.callback===null)A(H);else if(Ge.startTime<=De)A(H),Ge.sortIndex=Ge.expirationTime,w(G,Ge);else break;Ge=C(H)}}function Ze(De){if(ce=!1,qe(De),!Se)if(C(G)!==null)Se=!0,mt||(mt=!0,lt());else{var Ge=C(H);Ge!==null&&qt(Ze,Ge.startTime-De)}}var mt=!1,it=-1,Lt=5,Nt=-1;function Gt(){return _e?!0:!(_.unstable_now()-Nt<Lt)}function ot(){if(_e=!1,mt){var De=_.unstable_now();Nt=De;var Ge=!0;try{e:{Se=!1,ce&&(ce=!1,Ie(it),it=-1),ge=!0;var Qe=$;try{t:{for(qe(De),X=C(G);X!==null&&!(X.expirationTime>De&&Gt());){var Mt=X.callback;if(typeof Mt=="function"){X.callback=null,$=X.priorityLevel;var se=Mt(X.expirationTime<=De);if(De=_.unstable_now(),typeof se=="function"){X.callback=se,qe(De),Ge=!0;break t}X===C(G)&&A(G),qe(De)}else A(G);X=C(G)}if(X!==null)Ge=!0;else{var je=C(H);je!==null&&qt(Ze,je.startTime-De),Ge=!1}}break e}finally{X=null,$=Qe,ge=!1}Ge=void 0}}finally{Ge?lt():mt=!1}}}var lt;if(typeof Pe=="function")lt=function(){Pe(ot)};else if(typeof MessageChannel<"u"){var Ft=new MessageChannel,Rt=Ft.port2;Ft.port1.onmessage=ot,lt=function(){Rt.postMessage(null)}}else lt=function(){Me(ot,0)};function qt(De,Ge){it=Me(function(){De(_.unstable_now())},Ge)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(De){De.callback=null},_.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Lt=0<De?Math.floor(1e3/De):5},_.unstable_getCurrentPriorityLevel=function(){return $},_.unstable_next=function(De){switch($){case 1:case 2:case 3:var Ge=3;break;default:Ge=$}var Qe=$;$=Ge;try{return De()}finally{$=Qe}},_.unstable_requestPaint=function(){_e=!0},_.unstable_runWithPriority=function(De,Ge){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var Qe=$;$=De;try{return Ge()}finally{$=Qe}},_.unstable_scheduleCallback=function(De,Ge,Qe){var Mt=_.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?Mt+Qe:Mt):Qe=Mt,De){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Qe+se,De={id:J++,callback:Ge,priorityLevel:De,startTime:Qe,expirationTime:se,sortIndex:-1},Qe>Mt?(De.sortIndex=Qe,w(H,De),C(G)===null&&De===C(H)&&(ce?(Ie(it),it=-1):ce=!0,qt(Ze,Qe-Mt))):(De.sortIndex=se,w(G,De),Se||ge||(Se=!0,mt||(mt=!0,lt()))),De},_.unstable_shouldYield=Gt,_.unstable_wrapCallback=function(De){var Ge=$;return function(){var Qe=$;$=Ge;try{return De.apply(this,arguments)}finally{$=Qe}}}})(Wm)),Wm}var Kg;function rx(){return Kg||(Kg=1,Km.exports=nx()),Km.exports}var Qm={exports:{}},oa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function ax(){if(Wg)return oa;Wg=1;var _=Cg();function w(G){var H="https://react.dev/errors/"+G;if(1<arguments.length){H+="?args[]="+encodeURIComponent(arguments[1]);for(var J=2;J<arguments.length;J++)H+="&args[]="+encodeURIComponent(arguments[J])}return"Minified React error #"+G+"; visit "+H+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function C(){}var A={d:{f:C,r:function(){throw Error(w(522))},D:C,C,L:C,m:C,X:C,S:C,M:C},p:0,findDOMNode:null},k=Symbol.for("react.portal");function N(G,H,J){var X=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:k,key:X==null?null:""+X,children:G,containerInfo:H,implementation:J}}var M=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(G,H){if(G==="font")return"";if(typeof H=="string")return H==="use-credentials"?H:""}return oa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,oa.createPortal=function(G,H){var J=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H||H.nodeType!==1&&H.nodeType!==9&&H.nodeType!==11)throw Error(w(299));return N(G,H,null,J)},oa.flushSync=function(G){var H=M.T,J=A.p;try{if(M.T=null,A.p=2,G)return G()}finally{M.T=H,A.p=J,A.d.f()}},oa.preconnect=function(G,H){typeof G=="string"&&(H?(H=H.crossOrigin,H=typeof H=="string"?H==="use-credentials"?H:"":void 0):H=null,A.d.C(G,H))},oa.prefetchDNS=function(G){typeof G=="string"&&A.d.D(G)},oa.preinit=function(G,H){if(typeof G=="string"&&H&&typeof H.as=="string"){var J=H.as,X=d(J,H.crossOrigin),$=typeof H.integrity=="string"?H.integrity:void 0,ge=typeof H.fetchPriority=="string"?H.fetchPriority:void 0;J==="style"?A.d.S(G,typeof H.precedence=="string"?H.precedence:void 0,{crossOrigin:X,integrity:$,fetchPriority:ge}):J==="script"&&A.d.X(G,{crossOrigin:X,integrity:$,fetchPriority:ge,nonce:typeof H.nonce=="string"?H.nonce:void 0})}},oa.preinitModule=function(G,H){if(typeof G=="string")if(typeof H=="object"&&H!==null){if(H.as==null||H.as==="script"){var J=d(H.as,H.crossOrigin);A.d.M(G,{crossOrigin:J,integrity:typeof H.integrity=="string"?H.integrity:void 0,nonce:typeof H.nonce=="string"?H.nonce:void 0})}}else H==null&&A.d.M(G)},oa.preload=function(G,H){if(typeof G=="string"&&typeof H=="object"&&H!==null&&typeof H.as=="string"){var J=H.as,X=d(J,H.crossOrigin);A.d.L(G,J,{crossOrigin:X,integrity:typeof H.integrity=="string"?H.integrity:void 0,nonce:typeof H.nonce=="string"?H.nonce:void 0,type:typeof H.type=="string"?H.type:void 0,fetchPriority:typeof H.fetchPriority=="string"?H.fetchPriority:void 0,referrerPolicy:typeof H.referrerPolicy=="string"?H.referrerPolicy:void 0,imageSrcSet:typeof H.imageSrcSet=="string"?H.imageSrcSet:void 0,imageSizes:typeof H.imageSizes=="string"?H.imageSizes:void 0,media:typeof H.media=="string"?H.media:void 0})}},oa.preloadModule=function(G,H){if(typeof G=="string")if(H){var J=d(H.as,H.crossOrigin);A.d.m(G,{as:typeof H.as=="string"&&H.as!=="script"?H.as:void 0,crossOrigin:J,integrity:typeof H.integrity=="string"?H.integrity:void 0})}else A.d.m(G)},oa.requestFormReset=function(G){A.d.r(G)},oa.unstable_batchedUpdates=function(G,H){return G(H)},oa.useFormState=function(G,H,J){return M.H.useFormState(G,H,J)},oa.useFormStatus=function(){return M.H.useHostTransitionStatus()},oa.version="19.1.1",oa}var Qg;function Ly(){if(Qg)return Qm.exports;Qg=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(w){console.error(w)}}return _(),Qm.exports=ax(),Qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function sx(){if(Jg)return Jf;Jg=1;var _=rx(),w=Cg(),C=Ly();function A(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function k(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function N(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function M(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(N(i)!==i)throw Error(A(188))}function G(i){var a=i.alternate;if(!a){if(a=N(i),a===null)throw Error(A(188));return a!==i?null:i}for(var l=i,f=a;;){var v=l.return;if(v===null)break;var E=v.alternate;if(E===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===l)return d(v),i;if(E===f)return d(v),a;E=E.sibling}throw Error(A(188))}if(l.return!==f.return)l=v,f=E;else{for(var F=!1,K=v.child;K;){if(K===l){F=!0,l=v,f=E;break}if(K===f){F=!0,f=v,l=E;break}K=K.sibling}if(!F){for(K=E.child;K;){if(K===l){F=!0,l=E,f=v;break}if(K===f){F=!0,f=E,l=v;break}K=K.sibling}if(!F)throw Error(A(189))}}if(l.alternate!==f)throw Error(A(190))}if(l.tag!==3)throw Error(A(188));return l.stateNode.current===l?i:a}function H(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=H(i),a!==null)return a;i=i.sibling}return null}var J=Object.assign,X=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),ge=Symbol.for("react.portal"),Se=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),Ie=Symbol.for("react.consumer"),Pe=Symbol.for("react.context"),qe=Symbol.for("react.forward_ref"),Ze=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Nt=Symbol.for("react.activity"),Gt=Symbol.for("react.memo_cache_sentinel"),ot=Symbol.iterator;function lt(i){return i===null||typeof i!="object"?null:(i=ot&&i[ot]||i["@@iterator"],typeof i=="function"?i:null)}var Ft=Symbol.for("react.client.reference");function Rt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Ft?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Se:return"Fragment";case _e:return"Profiler";case ce:return"StrictMode";case Ze:return"Suspense";case mt:return"SuspenseList";case Nt:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case ge:return"Portal";case Pe:return(i.displayName||"Context")+".Provider";case Ie:return(i._context.displayName||"Context")+".Consumer";case qe:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case it:return a=i.displayName||null,a!==null?a:Rt(i.type)||"Memo";case Lt:a=i._payload,i=i._init;try{return Rt(i(a))}catch{}}return null}var qt=Array.isArray,De=w.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge=C.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe={pending:!1,data:null,method:null,action:null},Mt=[],se=-1;function je(i){return{current:i}}function Je(i){0>se||(i.current=Mt[se],Mt[se]=null,se--)}function st(i,a){se++,Mt[se]=i.current,i.current=a}var bt=je(null),$t=je(null),Et=je(null),Tt=je(null);function Ct(i,a){switch(st(Et,a),st($t,i),st(bt,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?wd(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=wd(a),i=Yf(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Je(bt),st(bt,i)}function Ii(){Je(bt),Je($t),Je(Et)}function pi(i){i.memoizedState!==null&&st(Tt,i);var a=bt.current,l=Yf(a,i.type);a!==l&&(st($t,i),st(bt,l))}function Si(i){$t.current===i&&(Je(bt),Je($t)),Tt.current===i&&(Je(Tt),Ri._currentValue=Qe)}var Ti=Object.prototype.hasOwnProperty,an=_.unstable_scheduleCallback,Bn=_.unstable_cancelCallback,wa=_.unstable_shouldYield,Ne=_.unstable_requestPaint,An=_.unstable_now,Nl=_.unstable_getCurrentPriorityLevel,xi=_.unstable_ImmediatePriority,Wi=_.unstable_UserBlockingPriority,ys=_.unstable_NormalPriority,_s=_.unstable_LowPriority,Sa=_.unstable_IdlePriority,ko=_.log,Yr=_.unstable_setDisableYieldValue,Ha=null,Gn=null;function rt(i){if(typeof ko=="function"&&Yr(i),Gn&&typeof Gn.setStrictMode=="function")try{Gn.setStrictMode(Ha,i)}catch{}}var un=Math.clz32?Math.clz32:vs,cr=Math.log,Ta=Math.LN2;function vs(i){return i>>>=0,i===0?32:31-(cr(i)/Ta|0)|0}var ht=256,ei=4194304;function jt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function $n(i,a,l){var f=i.pendingLanes;if(f===0)return 0;var v=0,E=i.suspendedLanes,F=i.pingedLanes;i=i.warmLanes;var K=f&134217727;return K!==0?(f=K&~E,f!==0?v=jt(f):(F&=K,F!==0?v=jt(F):l||(l=K&~i,l!==0&&(v=jt(l))))):(K=f&~E,K!==0?v=jt(K):F!==0?v=jt(F):l||(l=f&~i,l!==0&&(v=jt(l)))),v===0?0:a!==0&&a!==v&&(a&E)===0&&(E=v&-v,l=a&-a,E>=l||E===32&&(l&4194048)!==0)?a:v}function ur(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Qt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function la(){var i=ht;return ht<<=1,(ht&4194048)===0&&(ht=256),i}function Ea(){var i=ei;return ei<<=1,(ei&62914560)===0&&(ei=4194304),i}function Aa(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Rr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function oe(i,a,l,f,v,E){var F=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var K=i.entanglements,fe=i.expirationTimes,Oe=i.hiddenUpdates;for(l=F&~l;0<l;){var Ye=31-un(l),et=1<<Ye;K[Ye]=0,fe[Ye]=-1;var Fe=Oe[Ye];if(Fe!==null)for(Oe[Ye]=null,Ye=0;Ye<Fe.length;Ye++){var Ve=Fe[Ye];Ve!==null&&(Ve.lane&=-536870913)}l&=~et}f!==0&&V(i,f,0),E!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=E&~(F&~a))}function V(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-un(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|l&4194090}function U(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var f=31-un(l),v=1<<f;v&a|i[f]&a&&(i[f]|=a),l&=~v}}function W(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ae(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ye(){var i=Ge.p;return i!==0?i:(i=window.event,i===void 0?32:Ad(i.type))}function xe(i,a){var l=Ge.p;try{return Ge.p=i,a()}finally{Ge.p=l}}var Ae=Math.random().toString(36).slice(2),ue="__reactFiber$"+Ae,Le="__reactProps$"+Ae,Xe="__reactContainer$"+Ae,Be="__reactEvents$"+Ae,dt="__reactListeners$"+Ae,Pt="__reactHandles$"+Ae,Ot="__reactResources$"+Ae,ci="__reactMarker$"+Ae;function Wt(i){delete i[ue],delete i[Le],delete i[Be],delete i[dt],delete i[Pt]}function li(i){var a=i[ue];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Xe]||l[ue]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=R(i);i!==null;){if(l=i[ue])return l;i=R(i)}return a}i=l,l=i.parentNode}return null}function ni(i){if(i=i[ue]||i[Xe]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Qi(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(A(33))}function Bi(i){var a=i[Ot];return a||(a=i[Ot]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ut(i){i[ci]=!0}var Mi=new Set,Hi={};function Ji(i,a){hn(i,a),hn(i+"Capture",a)}function hn(i,a){for(Hi[i]=a,i=0;i<a.length;i++)Mi.add(a[i])}var hr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ks={},zi={};function Bu(i){return Ti.call(zi,i)?!0:Ti.call(Ks,i)?!1:hr.test(i)?zi[i]=!0:(Ks[i]=!0,!1)}function Po(i,a,l){if(Bu(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Qn(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function yn(i,a,l,f){if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+f)}}var Nu,qr;function Nn(i){if(Nu===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Nu=a&&a[1]||"",qr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nu+i+qr}var xs=!1;function Za(i,a){if(!i||xs)return"";xs=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(Ve){var Fe=Ve}Reflect.construct(i,[],et)}else{try{et.call()}catch(Ve){Fe=Ve}i.call(et.prototype)}}else{try{throw Error()}catch(Ve){Fe=Ve}(et=i())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(Ve){if(Ve&&Fe&&typeof Ve.stack=="string")return[Ve.stack,Fe.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=f.DetermineComponentFrameRoot(),F=E[0],K=E[1];if(F&&K){var fe=F.split(`
`),Oe=K.split(`
`);for(v=f=0;f<fe.length&&!fe[f].includes("DetermineComponentFrameRoot");)f++;for(;v<Oe.length&&!Oe[v].includes("DetermineComponentFrameRoot");)v++;if(f===fe.length||v===Oe.length)for(f=fe.length-1,v=Oe.length-1;1<=f&&0<=v&&fe[f]!==Oe[v];)v--;for(;1<=f&&0<=v;f--,v--)if(fe[f]!==Oe[v]){if(f!==1||v!==1)do if(f--,v--,0>v||fe[f]!==Oe[v]){var Ye=`
`+fe[f].replace(" at new "," at ");return i.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",i.displayName)),Ye}while(1<=f&&0<=v);break}}}finally{xs=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Nn(l):""}function Cn(i){switch(i.tag){case 26:case 27:case 5:return Nn(i.type);case 16:return Nn("Lazy");case 13:return Nn("Suspense");case 19:return Nn("SuspenseList");case 0:case 15:return Za(i.type,!1);case 11:return Za(i.type.render,!1);case 1:return Za(i.type,!0);case 31:return Nn("Activity");default:return""}}function Lo(i){try{var a="";do a+=Cn(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function dn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function fn(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Fc(i){var a=fn(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,E=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(F){f=""+F,E.call(this,F)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(F){f=""+F},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ir(i){i._valueTracker||(i._valueTracker=Fc(i))}function jc(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),f="";return i&&(f=fn(i)?i.checked?"true":"false":i.value),i=f,i!==l?(a.setValue(i),!0):!1}function kr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var qd=/[\n"\\]/g;function dr(i){return i.replace(qd,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ga(i,a,l,f,v,E,F,K){i.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?i.type=F:i.removeAttribute("type"),a!=null?F==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+dn(a)):i.value!==""+dn(a)&&(i.value=""+dn(a)):F!=="submit"&&F!=="reset"||i.removeAttribute("value"),a!=null?mi(i,F,dn(a)):l!=null?mi(i,F,dn(l)):f!=null&&i.removeAttribute("value"),v==null&&E!=null&&(i.defaultChecked=!!E),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?i.name=""+dn(K):i.removeAttribute("name")}function $a(i,a,l,f,v,E,F,K){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.type=E),a!=null||l!=null){if(!(E!=="submit"&&E!=="reset"||a!=null))return;l=l!=null?""+dn(l):"",a=a!=null?""+dn(a):l,K||a===i.value||(i.value=a),i.defaultValue=a}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=K?i.checked:!!f,i.defaultChecked=!!f,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(i.name=F)}function mi(i,a,l){a==="number"&&kr(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function bs(i,a,l,f){if(i=i.options,a){a={};for(var v=0;v<l.length;v++)a["$"+l[v]]=!0;for(l=0;l<i.length;l++)v=a.hasOwnProperty("$"+i[l].value),i[l].selected!==v&&(i[l].selected=v),v&&f&&(i[l].defaultSelected=!0)}else{for(l=""+dn(l),a=null,v=0;v<i.length;v++){if(i[v].value===l){i[v].selected=!0,f&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function Uc(i,a,l){if(a!=null&&(a=""+dn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+dn(l):""}function Ws(i,a,l,f){if(a==null){if(f!=null){if(l!=null)throw Error(A(92));if(qt(f)){if(1<f.length)throw Error(A(93));f=f[0]}l=f}l==null&&(l=""),a=l}l=dn(a),i.defaultValue=l,f=i.textContent,f===l&&f!==""&&f!==null&&(i.value=f)}function ws(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Vc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oo(i,a,l){var f=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,l):typeof l!="number"||l===0||Vc.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Fl(i,a,l){if(a!=null&&typeof a!="object")throw Error(A(62));if(i=i.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var v in a)f=a[v],a.hasOwnProperty(v)&&l[v]!==f&&Oo(i,v,f)}else for(var E in a)a.hasOwnProperty(E)&&Oo(i,E,a[E])}function Ss(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(i){return Hd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Fu=null;function Xa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ca=null,Rn=null;function fr(i){var a=ni(i);if(a&&(i=a.stateNode)){var l=i[Le]||null;e:switch(i=a.stateNode,a.type){case"input":if(Ga(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+dr(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var f=l[a];if(f!==i&&f.form===i.form){var v=f[Le]||null;if(!v)throw Error(A(90));Ga(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<l.length;a++)f=l[a],f.form===i.form&&jc(f)}break e;case"textarea":Uc(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&bs(i,!!l.multiple,a,!1)}}}var Bo=!1;function Ul(i,a,l){if(Bo)return i(a,l);Bo=!0;try{var f=i(a);return f}finally{if(Bo=!1,(Ca!==null||Rn!==null)&&(bu(),Ca&&(a=Ca,i=Rn,Rn=Ca=null,fr(a),i)))for(a=0;a<i.length;a++)fr(i[a])}}function Ts(i,a){var l=i.stateNode;if(l===null)return null;var f=l[Le]||null;if(f===null)return null;l=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(A(231,a,typeof l));return l}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Es=!1;if(Ma)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){Es=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{Es=!1}var Ya=null,qc=null,Hc=null;function Th(){if(Hc)return Hc;var i,a=qc,l=a.length,f,v="value"in Ya?Ya.value:Ya.textContent,E=v.length;for(i=0;i<l&&a[i]===v[i];i++);var F=l-i;for(f=1;f<=F&&a[l-f]===v[E-f];f++);return Hc=v.slice(i,1<f?1-f:void 0)}function ql(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function As(){return!0}function Zc(){return!1}function Xn(i){function a(l,f,v,E,F){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=E,this.target=F,this.currentTarget=null;for(var K in i)i.hasOwnProperty(K)&&(l=i[K],this[K]=l?l(E):E[K]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?As:Zc,this.isPropagationStopped=Zc,this}return J(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),a}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=Xn(Ka),Pr=J({},Ka,{view:0,detail:0}),Zd=Xn(Pr),Hl,Wa,Kr,gi=J({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$c,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Kr&&(Kr&&i.type==="mousemove"?(Hl=i.screenX-Kr.screenX,Wa=i.screenY-Kr.screenY):Wa=Hl=0,Kr=i),Hl)},movementY:function(i){return"movementY"in i?i.movementY:Wa}}),Zl=Xn(gi),Gd=J({},gi,{dataTransfer:0}),Fo=Xn(Gd),$d=J({},Pr,{relatedTarget:0}),Gc=Xn($d),Xd=J({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Eh=Xn(Xd),ju=J({},Ka,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ah=Xn(ju),Ch=J({},Ka,{data:0}),Uu=Xn(Ch),Mh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=zh[i])?!!a[i]:!1}function $c(){return Yd}var Gl=J({},Pr,{key:function(i){if(i.key){var a=Mh[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ql(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Qs[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$c,charCode:function(i){return i.type==="keypress"?ql(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ql(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Kd=Xn(Gl),Xc=J({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dh=Xn(Xc),Wd=J({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$c}),Rh=Xn(Wd),Ih=J({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),kh=Xn(Ih),Vu=J({},gi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ph=Xn(Vu),Yc=J({},Ka,{newState:0,oldState:0}),Qa=Xn(Yc),qu=[9,13,27,32],$l=Ma&&"CompositionEvent"in window,Js=null;Ma&&"documentMode"in document&&(Js=document.documentMode);var Kc=Ma&&"TextEvent"in window&&!Js,Wc=Ma&&(!$l||Js&&8<Js&&11>=Js),Cs=" ",Qc=!1;function Lh(i,a){switch(i){case"keyup":return qu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sn(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var jo=!1;function oi(i,a){switch(i){case"compositionend":return sn(a);case"keypress":return a.which!==32?null:(Qc=!0,Cs);case"textInput":return i=a.data,i===Cs&&Qc?null:i;default:return null}}function Jc(i,a){if(jo)return i==="compositionend"||!$l&&Lh(i,a)?(i=Th(),Hc=qc=Ya=null,jo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Wc&&a.locale!=="ko"?null:a.data;default:return null}}var ji={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ki(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ji[i.type]:a==="textarea"}function Ms(i,a,l,f){Ca?Rn?Rn.push(f):Rn=[f]:Ca=f,a=Ln(a,"onChange"),0<a.length&&(l=new No("onChange","change",null,l,f),i.push({event:l,listeners:a}))}var Ja=null,es=null;function Hu(i){Hf(i,0)}function za(i){var a=Qi(i);if(jc(a))return i}function eo(i,a){if(i==="change")return a}var Hr=!1;if(Ma){var Xl;if(Ma){var Yl="oninput"in document;if(!Yl){var eu=document.createElement("div");eu.setAttribute("oninput","return;"),Yl=typeof eu.oninput=="function"}Xl=Yl}else Xl=!1;Hr=Xl&&(!document.documentMode||9<document.documentMode)}function zs(){Ja&&(Ja.detachEvent("onpropertychange",Uo),es=Ja=null)}function Uo(i){if(i.propertyName==="value"&&za(es)){var a=[];Ms(a,es,i,Xa(i)),Ul(Hu,a)}}function Kl(i,a,l){i==="focusin"?(zs(),Ja=a,es=l,Ja.attachEvent("onpropertychange",Uo)):i==="focusout"&&zs()}function Vo(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return za(es)}function Wl(i,a){if(i==="click")return za(a)}function tu(i,a){if(i==="input"||i==="change")return za(a)}function qo(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Fn=typeof Object.is=="function"?Object.is:qo;function Ho(i,a){if(Fn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),f=Object.keys(a);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!Ti.call(a,v)||!Fn(i[v],a[v]))return!1}return!0}function iu(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function yi(i,a){var l=iu(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=a&&f>=a)return{node:l,offset:a-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=iu(l)}}function Ql(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Ql(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Oh(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=kr(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=kr(i.document)}return a}function nu(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var Zo=Ma&&"documentMode"in document&&11>=document.documentMode,to=null,Go=null,$o=null,ru=!1;function Jl(i,a,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ru||to==null||to!==kr(f)||(f=to,"selectionStart"in f&&nu(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),$o&&Ho($o,f)||($o=f,f=Ln(Go,"onSelect"),0<f.length&&(a=new No("onSelect","select",null,a,l),i.push({event:a,listeners:f}),a.target=to)))}function Da(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var ca={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Ds={},io={};Ma&&(io=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function ts(i){if(Ds[i])return Ds[i];if(!ca[i])return i;var a=ca[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in io)return Ds[i]=a[l];return i}var no=ts("animationend"),Xo=ts("animationiteration"),ec=ts("animationstart"),au=ts("transitionrun"),Zu=ts("transitionstart"),Qd=ts("transitioncancel"),Gu=ts("transitionend"),tc=new Map,ic="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ic.push("scrollEnd");function pr(i,a){tc.set(i,a),Ji(a,[i])}var Yo=new WeakMap;function Ui(i,a){if(typeof i=="object"&&i!==null){var l=Yo.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Lo(a)},Yo.set(i,a),a)}return{value:i,source:a,stack:Lo(a)}}var jn=[],ro=0,su=0;function Yi(){for(var i=ro,a=su=ro=0;a<i;){var l=jn[a];jn[a++]=null;var f=jn[a];jn[a++]=null;var v=jn[a];jn[a++]=null;var E=jn[a];if(jn[a++]=null,f!==null&&v!==null){var F=f.pending;F===null?v.next=v:(v.next=F.next,F.next=v),f.pending=v}E!==0&&ou(l,v,E)}}function Lr(i,a,l,f){jn[ro++]=i,jn[ro++]=a,jn[ro++]=l,jn[ro++]=f,su|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function mr(i,a,l,f){return Lr(i,a,l,f),ao(i)}function Ra(i,a){return Lr(i,null,null,a),ao(i)}function ou(i,a,l){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l);for(var v=!1,E=i.return;E!==null;)E.childLanes|=l,f=E.alternate,f!==null&&(f.childLanes|=l),E.tag===22&&(i=E.stateNode,i===null||i._visibility&1||(v=!0)),i=E,E=E.return;return i.tag===3?(E=i.stateNode,v&&a!==null&&(v=31-un(l),i=E.hiddenUpdates,f=i[v],f===null?i[v]=[a]:f.push(a),a.lane=l|536870912),E):null}function ao(i){if(50<Cc)throw Cc=0,Df=null,Error(A(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ua={};function is(i,a,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(i,a,l,f){return new is(i,a,l,f)}function Ko(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ha(i,a){var l=i.alternate;return l===null?(l=gr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function nc(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Wo(i,a,l,f,v,E){var F=0;if(f=i,typeof i=="function")Ko(i)&&(F=1);else if(typeof i=="string")F=Nr(i,l,bt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Nt:return i=gr(31,l,a,v),i.elementType=Nt,i.lanes=E,i;case Se:return ns(l.children,v,E,a);case ce:F=8,v|=24;break;case _e:return i=gr(12,l,a,v|2),i.elementType=_e,i.lanes=E,i;case Ze:return i=gr(13,l,a,v),i.elementType=Ze,i.lanes=E,i;case mt:return i=gr(19,l,a,v),i.elementType=mt,i.lanes=E,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Me:case Pe:F=10;break e;case Ie:F=9;break e;case qe:F=11;break e;case it:F=14;break e;case Lt:F=16,f=null;break e}F=29,l=Error(A(130,i===null?"null":typeof i,"")),f=null}return a=gr(F,l,a,v),a.elementType=i,a.type=f,a.lanes=E,a}function ns(i,a,l,f){return i=gr(7,i,f,a),i.lanes=l,i}function rs(i,a,l){return i=gr(6,i,null,a),i.lanes=l,i}function Qo(i,a,l){return a=gr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Ia=[],Rs=0,Jo=null,el=0,Or=[],yr=0,da=null,ka=1,Mn="";function Jn(i,a){Ia[Rs++]=el,Ia[Rs++]=Jo,Jo=i,el=a}function lu(i,a,l){Or[yr++]=ka,Or[yr++]=Mn,Or[yr++]=da,da=i;var f=ka;i=Mn;var v=32-un(f)-1;f&=~(1<<v),l+=1;var E=32-un(a)+v;if(30<E){var F=v-v%5;E=(f&(1<<F)-1).toString(32),f>>=F,v-=F,ka=1<<32-un(a)+v|l<<v|f,Mn=E+i}else ka=1<<E|l<<v|f,Mn=i}function Zr(i){i.return!==null&&(Jn(i,1),lu(i,1,0))}function as(i){for(;i===Jo;)Jo=Ia[--Rs],Ia[Rs]=null,el=Ia[--Rs],Ia[Rs]=null;for(;i===da;)da=Or[--yr],Or[yr]=null,Mn=Or[--yr],Or[yr]=null,ka=Or[--yr],Or[yr]=null}var _r=null,pn=null,Ei=!1,Is=null,Wr=!1,ks=Error(A(519));function Un(i){var a=Error(A(418,""));throw Pa(Ui(a,i)),ks}function wt(i){var a=i.stateNode,l=i.type,f=i.memoizedProps;switch(a[ue]=i,a[Le]=f,l){case"dialog":hi("cancel",a),hi("close",a);break;case"iframe":case"object":case"embed":hi("load",a);break;case"video":case"audio":for(l=0;l<Au.length;l++)hi(Au[l],a);break;case"source":hi("error",a);break;case"img":case"image":case"link":hi("error",a),hi("load",a);break;case"details":hi("toggle",a);break;case"input":hi("invalid",a),$a(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Ir(a);break;case"select":hi("invalid",a);break;case"textarea":hi("invalid",a),Ws(a,f.value,f.defaultValue,f.children),Ir(a)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||f.suppressHydrationWarning===!0||Jp(a.textContent,l)?(f.popover!=null&&(hi("beforetoggle",a),hi("toggle",a)),f.onScroll!=null&&hi("scroll",a),f.onScrollEnd!=null&&hi("scrollend",a),f.onClick!=null&&(a.onclick=dh),a=!0):a=!1,a||Un(i)}function rc(i){for(_r=i.return;_r;)switch(_r.tag){case 5:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:_r=_r.return}}function so(i){if(i!==_r)return!1;if(!Ei)return rc(i),Ei=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||ph(i.type,i.memoizedProps)),l=!l),l&&pn&&Un(i),rc(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){pn=S(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}pn=null}}else a===27?(a=pn,t(i.type)?(i=D,D=null,pn=i):pn=a):pn=_r?S(i.stateNode.nextSibling):null;return!0}function tl(){pn=_r=null,Ei=!1}function oo(){var i=Is;return i!==null&&(ar===null?ar=i:ar.push.apply(ar,i),Is=null),i}function Pa(i){Is===null?Is=[i]:Is.push(i)}var ac=je(null),ri=null,fa=null;function Ps(i,a,l){st(ac,a._currentValue),a._currentValue=l}function pa(i){i._currentValue=ac.current,Je(ac)}function $u(i,a,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===l)break;i=i.return}}function Ls(i,a,l,f){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var E=v.dependencies;if(E!==null){var F=v.child;E=E.firstContext;e:for(;E!==null;){var K=E;E=v;for(var fe=0;fe<a.length;fe++)if(K.context===a[fe]){E.lanes|=l,K=E.alternate,K!==null&&(K.lanes|=l),$u(E.return,l,i),f||(F=null);break e}E=K.next}}else if(v.tag===18){if(F=v.return,F===null)throw Error(A(341));F.lanes|=l,E=F.alternate,E!==null&&(E.lanes|=l),$u(F,l,i),F=null}else F=v.child;if(F!==null)F.return=v;else for(F=v;F!==null;){if(F===i){F=null;break}if(v=F.sibling,v!==null){v.return=F.return,F=v;break}F=F.return}v=F}}function il(i,a,l,f){i=null;for(var v=a,E=!1;v!==null;){if(!E){if((v.flags&524288)!==0)E=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var F=v.alternate;if(F===null)throw Error(A(387));if(F=F.memoizedProps,F!==null){var K=v.type;Fn(v.pendingProps.value,F.value)||(i!==null?i.push(K):i=[K])}}else if(v===Tt.current){if(F=v.alternate,F===null)throw Error(A(387));F.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Ri):i=[Ri])}v=v.return}i!==null&&Ls(a,i,l,f),a.flags|=262144}function nl(i){for(i=i.firstContext;i!==null;){if(!Fn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Os(i){ri=i,fa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function er(i){return Bh(ri,i)}function rl(i,a){return ri===null&&Os(i),Bh(i,a)}function Bh(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},fa===null){if(i===null)throw Error(A(308));fa=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else fa=fa.next=a;return l}var Jd=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},Gr=_.unstable_scheduleCallback,Zi=_.unstable_NormalPriority,en={$$typeof:Pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function al(){return{controller:new Jd,data:new Map,refCount:0}}function Bs(i){i.refCount--,i.refCount===0&&Gr(Zi,function(){i.controller.abort()})}var sl=null,lo=0,La=0,vr=null;function sc(i,a){if(sl===null){var l=sl=[];lo=0,La=yd(),vr={status:"pending",value:void 0,then:function(f){l.push(f)}}}return lo++,a.then(zt,zt),a}function zt(){if(--lo===0&&sl!==null){vr!==null&&(vr.status="fulfilled");var i=sl;sl=null,La=0,vr=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function Ht(i,a){var l=[],f={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var v=0;v<l.length;v++)(0,l[v])(a)},function(v){for(f.status="rejected",f.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),f}var oc=De.S;De.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&sc(i,a),oc!==null&&oc(i,a)};var Oa=je(null);function lc(){var i=Oa.current;return i!==null?i:tn.pooledCache}function m(i,a){a===null?st(Oa,Oa.current):st(Oa,a.pool)}function e(){var i=lc();return i===null?null:{parent:en._currentValue,pool:i}}var s=Error(A(460)),c=Error(A(474)),u=Error(A(542)),p={then:function(){}};function b(i){return i=i.status,i==="fulfilled"||i==="rejected"}function T(){}function z(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(T,T),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,O(i),i;default:if(typeof a.status=="string")a.then(T,T);else{if(i=tn,i!==null&&100<i.shellSuspendCounter)throw Error(A(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=f}},function(f){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,O(i),i}throw I=a,s}}var I=null;function L(){if(I===null)throw Error(A(459));var i=I;return I=null,i}function O(i){if(i===s||i===u)throw Error(A(483))}var q=!1;function Q(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function te(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ne(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function le(i,a,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Vi&2)!==0){var v=f.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),f.pending=a,a=ao(i),ou(i,null,l),a}return Lr(i,f,a,l),ao(i)}function de(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,l|=f,a.lanes=l,U(i,l)}}function pe(i,a){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var F={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};E===null?v=E=F:E=E.next=F,l=l.next}while(l!==null);E===null?v=E=a:E=E.next=a}else v=E=a;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:f.shared,callbacks:f.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var re=!1;function ve(){if(re){var i=vr;if(i!==null)throw i}}function Te(i,a,l,f){re=!1;var v=i.updateQueue;q=!1;var E=v.firstBaseUpdate,F=v.lastBaseUpdate,K=v.shared.pending;if(K!==null){v.shared.pending=null;var fe=K,Oe=fe.next;fe.next=null,F===null?E=Oe:F.next=Oe,F=fe;var Ye=i.alternate;Ye!==null&&(Ye=Ye.updateQueue,K=Ye.lastBaseUpdate,K!==F&&(K===null?Ye.firstBaseUpdate=Oe:K.next=Oe,Ye.lastBaseUpdate=fe))}if(E!==null){var et=v.baseState;F=0,Ye=Oe=fe=null,K=E;do{var Fe=K.lane&-536870913,Ve=Fe!==K.lane;if(Ve?(vi&Fe)===Fe:(f&Fe)===Fe){Fe!==0&&Fe===La&&(re=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var ai=i,Jt=K;Fe=a;var rn=l;switch(Jt.tag){case 1:if(ai=Jt.payload,typeof ai=="function"){et=ai.call(rn,et,Fe);break e}et=ai;break e;case 3:ai.flags=ai.flags&-65537|128;case 0:if(ai=Jt.payload,Fe=typeof ai=="function"?ai.call(rn,et,Fe):ai,Fe==null)break e;et=J({},et,Fe);break e;case 2:q=!0}}Fe=K.callback,Fe!==null&&(i.flags|=64,Ve&&(i.flags|=8192),Ve=v.callbacks,Ve===null?v.callbacks=[Fe]:Ve.push(Fe))}else Ve={lane:Fe,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Ye===null?(Oe=Ye=Ve,fe=et):Ye=Ye.next=Ve,F|=Fe;if(K=K.next,K===null){if(K=v.shared.pending,K===null)break;Ve=K,K=Ve.next,Ve.next=null,v.lastBaseUpdate=Ve,v.shared.pending=null}}while(!0);Ye===null&&(fe=et),v.baseState=fe,v.firstBaseUpdate=Oe,v.lastBaseUpdate=Ye,E===null&&(v.shared.lanes=0),xo|=F,i.lanes=F,i.memoizedState=et}}function Re(i,a){if(typeof i!="function")throw Error(A(191,i));i.call(a)}function $e(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Re(l[i],a)}var nt=je(null),pt=je(0);function xt(i,a){i=vo,st(pt,i),st(nt,a),vo=i|a.baseLanes}function ut(){st(pt,vo),st(nt,nt.current)}function ct(){vo=pt.current,Je(nt),Je(pt)}var St=0,ft=null,Ke=null,at=null,Xt=!1,Di=!1,Kt=!1,si=0,Pi=0,_n=null,ma=0;function ti(){throw Error(A(321))}function tr(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Fn(i[l],a[l]))return!1;return!0}function Yn(i,a,l,f,v,E){return St=E,ft=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,De.H=i===null||i.memoizedState===null?wr:fc,Kt=!1,E=l(f,v),Kt=!1,Di&&(E=ir(a,l,f,v)),Kn(i),E}function Kn(i){De.H=$h;var a=Ke!==null&&Ke.next!==null;if(St=0,at=Ke=ft=null,Xt=!1,Pi=0,_n=null,a)throw Error(A(300));i===null||Hn||(i=i.dependencies,i!==null&&nl(i)&&(Hn=!0))}function ir(i,a,l,f){ft=i;var v=0;do{if(Di&&(_n=null),Pi=0,Di=!1,25<=v)throw Error(A(301));if(v+=1,at=Ke=null,i.updateQueue!=null){var E=i.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}De.H=uf,E=a(l,f)}while(Di);return E}function Ba(){var i=De.H,a=i.useState()[0];return a=typeof a.then=="function"?nr(a):a,i=i.useState()[0],(Ke!==null?Ke.memoizedState:null)!==i&&(ft.flags|=1024),a}function Ns(){var i=si!==0;return si=0,i}function ol(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Fs(i){if(Xt){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Xt=!1}St=0,at=Ke=ft=null,Di=!1,Pi=si=0,_n=null}function Ki(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?ft.memoizedState=at=i:at=at.next=i,at}function on(){if(Ke===null){var i=ft.alternate;i=i!==null?i.memoizedState:null}else i=Ke.next;var a=at===null?ft.memoizedState:at.next;if(a!==null)at=a,Ke=i;else{if(i===null)throw ft.alternate===null?Error(A(467)):Error(A(310));Ke=i,i={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},at===null?ft.memoizedState=at=i:at=at.next=i}return at}function cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nr(i){var a=Pi;return Pi+=1,_n===null&&(_n=[]),i=z(_n,i,a),a=ft,(at===null?a.memoizedState:at.next)===null&&(a=a.alternate,De.H=a===null||a.memoizedState===null?wr:fc),i}function xr(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return nr(i);if(i.$$typeof===Pe)return er(i)}throw Error(A(438,String(i)))}function Na(i){var a=null,l=ft.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var f=ft.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=cc(),ft.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),f=0;f<i;f++)l[f]=Gt;return a.index++,l}function In(i,a){return typeof a=="function"?a(i):a}function zn(i){var a=on();return Vn(a,Ke,i)}function Vn(i,a,l){var f=i.queue;if(f===null)throw Error(A(311));f.lastRenderedReducer=l;var v=i.baseQueue,E=f.pending;if(E!==null){if(v!==null){var F=v.next;v.next=E.next,E.next=F}a.baseQueue=v=E,f.pending=null}if(E=i.baseState,v===null)i.memoizedState=E;else{a=v.next;var K=F=null,fe=null,Oe=a,Ye=!1;do{var et=Oe.lane&-536870913;if(et!==Oe.lane?(vi&et)===et:(St&et)===et){var Fe=Oe.revertLane;if(Fe===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),et===La&&(Ye=!0);else if((St&Fe)===Fe){Oe=Oe.next,Fe===La&&(Ye=!0);continue}else et={lane:0,revertLane:Oe.revertLane,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},fe===null?(K=fe=et,F=E):fe=fe.next=et,ft.lanes|=Fe,xo|=Fe;et=Oe.action,Kt&&l(E,et),E=Oe.hasEagerState?Oe.eagerState:l(E,et)}else Fe={lane:et,revertLane:Oe.revertLane,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},fe===null?(K=fe=Fe,F=E):fe=fe.next=Fe,ft.lanes|=et,xo|=et;Oe=Oe.next}while(Oe!==null&&Oe!==a);if(fe===null?F=E:fe.next=K,!Fn(E,i.memoizedState)&&(Hn=!0,Ye&&(l=vr,l!==null)))throw l;i.memoizedState=E,i.baseState=F,i.baseQueue=fe,f.lastRenderedState=E}return v===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function br(i){var a=on(),l=a.queue;if(l===null)throw Error(A(311));l.lastRenderedReducer=i;var f=l.dispatch,v=l.pending,E=a.memoizedState;if(v!==null){l.pending=null;var F=v=v.next;do E=i(E,F.action),F=F.next;while(F!==v);Fn(E,a.memoizedState)||(Hn=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),l.lastRenderedState=E}return[E,f]}function ui(i,a,l){var f=ft,v=on(),E=Ei;if(E){if(l===void 0)throw Error(A(407));l=l()}else l=a();var F=!Fn((Ke||v).memoizedState,l);F&&(v.memoizedState=l,Hn=!0),v=v.queue;var K=uo.bind(null,f,v,i);if(Fa(2048,8,K,[i]),v.getSnapshot!==a||F||at!==null&&at.memoizedState.tag&1){if(f.flags|=2048,Us(9,fo(),co.bind(null,f,v,l,a),null),tn===null)throw Error(A(349));E||(St&124)!==0||js(f,a,l)}return l}function js(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=ft.updateQueue,a===null?(a=cc(),ft.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function co(i,a,l,f){a.value=l,a.getSnapshot=f,Xu(a)&&Nh(i)}function uo(i,a,l){return l(function(){Xu(a)&&Nh(i)})}function Xu(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Fn(i,l)}catch{return!0}}function Nh(i){var a=Ra(i,2);a!==null&&ra(a,i,2)}function cu(i){var a=Ki();if(typeof i=="function"){var l=i;if(i=l(),Kt){rt(!0);try{l()}finally{rt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:i},a}function ss(i,a,l,f){return i.baseState=l,Vn(i,Ke,typeof f=="function"?f:In)}function Fh(i,a,l,f,v){if(dc(i))throw Error(A(485));if(i=a.action,i!==null){var E={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){E.listeners.push(F)}};De.T!==null?l(!0):E.isTransition=!1,f(E),l=a.pending,l===null?(E.next=a.pending=E,uc(a,E)):(E.next=l.next,a.pending=l.next=E)}}function uc(i,a){var l=a.action,f=a.payload,v=i.state;if(a.isTransition){var E=De.T,F={};De.T=F;try{var K=l(v,f),fe=De.S;fe!==null&&fe(F,K),ll(i,a,K)}catch(Oe){cl(i,a,Oe)}finally{De.T=E}}else try{E=l(v,f),ll(i,a,E)}catch(Oe){cl(i,a,Oe)}}function ll(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){hc(i,a,f)},function(f){return cl(i,a,f)}):hc(i,a,l)}function hc(i,a,l){a.status="fulfilled",a.value=l,ho(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,uc(i,l)))}function cl(i,a,l){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=l,ho(a),a=a.next;while(a!==f)}i.action=null}function ho(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function ul(i,a){return a}function Yu(i,a){if(Ei){var l=tn.formState;if(l!==null){e:{var f=ft;if(Ei){if(pn){t:{for(var v=pn,E=Wr;v.nodeType!==8;){if(!E){v=null;break t}if(v=S(v.nextSibling),v===null){v=null;break t}}E=v.data,v=E==="F!"||E==="F"?v:null}if(v){pn=S(v.nextSibling),f=v.data==="F!";break e}}Un(f)}f=!1}f&&(a=l[0])}}return l=Ki(),l.memoizedState=l.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:a},l.queue=f,l=fp.bind(null,ft,f),f.dispatch=l,f=cu(!1),E=du.bind(null,ft,!1,f.queue),f=Ki(),v={state:a,dispatch:null,action:i,pending:null},f.queue=v,l=Fh.bind(null,ft,v,E,l),v.dispatch=l,f.memoizedState=i,[a,l,!1]}function ef(i){var a=on();return tf(a,Ke,i)}function tf(i,a,l){if(a=Vn(i,a,ul)[0],i=zn(In)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=nr(a)}catch(F){throw F===s?u:F}else f=a;a=on();var v=a.queue,E=v.dispatch;return l!==a.memoizedState&&(ft.flags|=2048,Us(9,fo(),Om.bind(null,v,l),null)),[f,E,i]}function Om(i,a){i.action=a}function jh(i){var a=on(),l=Ke;if(l!==null)return tf(a,l,i);on(),a=a.memoizedState,l=on();var f=l.queue.dispatch;return l.memoizedState=i,[a,f,!1]}function Us(i,a,l,f){return i={tag:i,create:l,deps:f,inst:a,next:null},a=ft.updateQueue,a===null&&(a=cc(),ft.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,a.lastEffect=i),i}function fo(){return{destroy:void 0,resource:void 0}}function Vs(){return on().memoizedState}function Qr(i,a,l,f){var v=Ki();f=f===void 0?null:f,ft.flags|=i,v.memoizedState=Us(1|a,fo(),l,f)}function Fa(i,a,l,f){var v=on();f=f===void 0?null:f;var E=v.memoizedState.inst;Ke!==null&&f!==null&&tr(f,Ke.memoizedState.deps)?v.memoizedState=Us(a,E,l,f):(ft.flags|=i,v.memoizedState=Us(1|a,E,l,f))}function nf(i,a){Qr(8390656,8,i,a)}function hl(i,a){Fa(2048,8,i,a)}function up(i,a){return Fa(4,2,i,a)}function rf(i,a){return Fa(4,4,i,a)}function vn(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Uh(i,a,l){l=l!=null?l.concat([i]):null,Fa(4,4,vn.bind(null,a,i),l)}function Vh(){}function dl(i,a){var l=on();a=a===void 0?null:a;var f=l.memoizedState;return a!==null&&tr(a,f[1])?f[0]:(l.memoizedState=[i,a],i)}function fl(i,a){var l=on();a=a===void 0?null:a;var f=l.memoizedState;if(a!==null&&tr(a,f[1]))return f[0];if(f=i(),Kt){rt(!0);try{i()}finally{rt(!1)}}return l.memoizedState=[f,a],f}function uu(i,a,l){return l===void 0||(St&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=Rf(),ft.lanes|=i,xo|=i,l)}function qh(i,a,l,f){return Fn(l,a)?l:nt.current!==null?(i=uu(i,l,f),Fn(i,a)||(Hn=!0),i):(St&42)===0?(Hn=!0,i.memoizedState=l):(i=Rf(),ft.lanes|=i,xo|=i,a)}function af(i,a,l,f,v){var E=Ge.p;Ge.p=E!==0&&8>E?E:8;var F=De.T,K={};De.T=K,du(i,!1,a,l);try{var fe=v(),Oe=De.S;if(Oe!==null&&Oe(K,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ye=Ht(fe,f);po(i,a,Ye,ya(i))}else po(i,a,f,ya(i))}catch(et){po(i,a,{then:function(){},status:"rejected",reason:et},ya())}finally{Ge.p=E,De.T=F}}function Bm(){}function Hh(i,a,l,f){if(i.tag!==5)throw Error(A(476));var v=hp(i).queue;af(i,v,a,Qe,l===null?Bm:function(){return Zh(i),l(f)})}function hp(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Qe,baseState:Qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:Qe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Zh(i){var a=hp(i).next.queue;po(i,a,{},ya())}function sf(){return er(Ri)}function Gh(){return on().memoizedState}function of(){return on().memoizedState}function dp(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=ya();i=ne(l);var f=le(a,i,l);f!==null&&(ra(f,a,l),de(f,a,l)),a={cache:al()},i.payload=a;return}a=a.return}}function hu(i,a,l){var f=ya();l={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},dc(i)?lf(a,l):(l=mr(i,a,l,f),l!==null&&(ra(l,i,f),cf(l,a,f)))}function fp(i,a,l){var f=ya();po(i,a,l,f)}function po(i,a,l,f){var v={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(dc(i))lf(a,v);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var F=a.lastRenderedState,K=E(F,l);if(v.hasEagerState=!0,v.eagerState=K,Fn(K,F))return Lr(i,a,v,0),tn===null&&Yi(),!1}catch{}finally{}if(l=mr(i,a,v,f),l!==null)return ra(l,i,f),cf(l,a,f),!0}return!1}function du(i,a,l,f){if(f={lane:2,revertLane:yd(),action:f,hasEagerState:!1,eagerState:null,next:null},dc(i)){if(a)throw Error(A(479))}else a=mr(i,l,f,2),a!==null&&ra(a,i,2)}function dc(i){var a=i.alternate;return i===ft||a!==null&&a===ft}function lf(i,a){Di=Xt=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function cf(i,a,l){if((l&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,l|=f,a.lanes=l,U(i,l)}}var $h={readContext:er,use:xr,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useLayoutEffect:ti,useInsertionEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useSyncExternalStore:ti,useId:ti,useHostTransitionStatus:ti,useFormState:ti,useActionState:ti,useOptimistic:ti,useMemoCache:ti,useCacheRefresh:ti},wr={readContext:er,use:xr,useCallback:function(i,a){return Ki().memoizedState=[i,a===void 0?null:a],i},useContext:er,useEffect:nf,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Qr(4194308,4,vn.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Qr(4194308,4,i,a)},useInsertionEffect:function(i,a){Qr(4,2,i,a)},useMemo:function(i,a){var l=Ki();a=a===void 0?null:a;var f=i();if(Kt){rt(!0);try{i()}finally{rt(!1)}}return l.memoizedState=[f,a],f},useReducer:function(i,a,l){var f=Ki();if(l!==void 0){var v=l(a);if(Kt){rt(!0);try{l(a)}finally{rt(!1)}}}else v=a;return f.memoizedState=f.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},f.queue=i,i=i.dispatch=hu.bind(null,ft,i),[f.memoizedState,i]},useRef:function(i){var a=Ki();return i={current:i},a.memoizedState=i},useState:function(i){i=cu(i);var a=i.queue,l=fp.bind(null,ft,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Vh,useDeferredValue:function(i,a){var l=Ki();return uu(l,i,a)},useTransition:function(){var i=cu(!1);return i=af.bind(null,ft,i.queue,!0,!1),Ki().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var f=ft,v=Ki();if(Ei){if(l===void 0)throw Error(A(407));l=l()}else{if(l=a(),tn===null)throw Error(A(349));(vi&124)!==0||js(f,a,l)}v.memoizedState=l;var E={value:l,getSnapshot:a};return v.queue=E,nf(uo.bind(null,f,E,i),[i]),f.flags|=2048,Us(9,fo(),co.bind(null,f,E,l,a),null),l},useId:function(){var i=Ki(),a=tn.identifierPrefix;if(Ei){var l=Mn,f=ka;l=(f&~(1<<32-un(f)-1)).toString(32)+l,a=""+a+"R"+l,l=si++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=ma++,a=""+a+"r"+l.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:sf,useFormState:Yu,useActionState:Yu,useOptimistic:function(i){var a=Ki();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=du.bind(null,ft,!0,l),l.dispatch=a,[i,a]},useMemoCache:Na,useCacheRefresh:function(){return Ki().memoizedState=dp.bind(null,ft)}},fc={readContext:er,use:xr,useCallback:dl,useContext:er,useEffect:hl,useImperativeHandle:Uh,useInsertionEffect:up,useLayoutEffect:rf,useMemo:fl,useReducer:zn,useRef:Vs,useState:function(){return zn(In)},useDebugValue:Vh,useDeferredValue:function(i,a){var l=on();return qh(l,Ke.memoizedState,i,a)},useTransition:function(){var i=zn(In)[0],a=on().memoizedState;return[typeof i=="boolean"?i:nr(i),a]},useSyncExternalStore:ui,useId:Gh,useHostTransitionStatus:sf,useFormState:ef,useActionState:ef,useOptimistic:function(i,a){var l=on();return ss(l,Ke,i,a)},useMemoCache:Na,useCacheRefresh:of},uf={readContext:er,use:xr,useCallback:dl,useContext:er,useEffect:hl,useImperativeHandle:Uh,useInsertionEffect:up,useLayoutEffect:rf,useMemo:fl,useReducer:br,useRef:Vs,useState:function(){return br(In)},useDebugValue:Vh,useDeferredValue:function(i,a){var l=on();return Ke===null?uu(l,i,a):qh(l,Ke.memoizedState,i,a)},useTransition:function(){var i=br(In)[0],a=on().memoizedState;return[typeof i=="boolean"?i:nr(i),a]},useSyncExternalStore:ui,useId:Gh,useHostTransitionStatus:sf,useFormState:jh,useActionState:jh,useOptimistic:function(i,a){var l=on();return Ke!==null?ss(l,Ke,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Na,useCacheRefresh:of},pc=null,mo=0;function Xh(i){var a=mo;return mo+=1,pc===null&&(pc=[]),z(pc,i,a)}function pl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Yh(i,a){throw a.$$typeof===X?Error(A(525)):(i=Object.prototype.toString.call(a),Error(A(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function hf(i){var a=i._init;return a(i._payload)}function df(i){function a(ze,we){if(i){var ke=ze.deletions;ke===null?(ze.deletions=[we],ze.flags|=16):ke.push(we)}}function l(ze,we){if(!i)return null;for(;we!==null;)a(ze,we),we=we.sibling;return null}function f(ze){for(var we=new Map;ze!==null;)ze.key!==null?we.set(ze.key,ze):we.set(ze.index,ze),ze=ze.sibling;return we}function v(ze,we){return ze=ha(ze,we),ze.index=0,ze.sibling=null,ze}function E(ze,we,ke){return ze.index=ke,i?(ke=ze.alternate,ke!==null?(ke=ke.index,ke<we?(ze.flags|=67108866,we):ke):(ze.flags|=67108866,we)):(ze.flags|=1048576,we)}function F(ze){return i&&ze.alternate===null&&(ze.flags|=67108866),ze}function K(ze,we,ke,We){return we===null||we.tag!==6?(we=rs(ke,ze.mode,We),we.return=ze,we):(we=v(we,ke),we.return=ze,we)}function fe(ze,we,ke,We){var Bt=ke.type;return Bt===Se?Ye(ze,we,ke.props.children,We,ke.key):we!==null&&(we.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===Lt&&hf(Bt)===we.type)?(we=v(we,ke.props),pl(we,ke),we.return=ze,we):(we=Wo(ke.type,ke.key,ke.props,null,ze.mode,We),pl(we,ke),we.return=ze,we)}function Oe(ze,we,ke,We){return we===null||we.tag!==4||we.stateNode.containerInfo!==ke.containerInfo||we.stateNode.implementation!==ke.implementation?(we=Qo(ke,ze.mode,We),we.return=ze,we):(we=v(we,ke.children||[]),we.return=ze,we)}function Ye(ze,we,ke,We,Bt){return we===null||we.tag!==7?(we=ns(ke,ze.mode,We,Bt),we.return=ze,we):(we=v(we,ke),we.return=ze,we)}function et(ze,we,ke){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=rs(""+we,ze.mode,ke),we.return=ze,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case $:return ke=Wo(we.type,we.key,we.props,null,ze.mode,ke),pl(ke,we),ke.return=ze,ke;case ge:return we=Qo(we,ze.mode,ke),we.return=ze,we;case Lt:var We=we._init;return we=We(we._payload),et(ze,we,ke)}if(qt(we)||lt(we))return we=ns(we,ze.mode,ke,null),we.return=ze,we;if(typeof we.then=="function")return et(ze,Xh(we),ke);if(we.$$typeof===Pe)return et(ze,rl(ze,we),ke);Yh(ze,we)}return null}function Fe(ze,we,ke,We){var Bt=we!==null?we.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Bt!==null?null:K(ze,we,""+ke,We);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case $:return ke.key===Bt?fe(ze,we,ke,We):null;case ge:return ke.key===Bt?Oe(ze,we,ke,We):null;case Lt:return Bt=ke._init,ke=Bt(ke._payload),Fe(ze,we,ke,We)}if(qt(ke)||lt(ke))return Bt!==null?null:Ye(ze,we,ke,We,null);if(typeof ke.then=="function")return Fe(ze,we,Xh(ke),We);if(ke.$$typeof===Pe)return Fe(ze,we,rl(ze,ke),We);Yh(ze,ke)}return null}function Ve(ze,we,ke,We,Bt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return ze=ze.get(ke)||null,K(we,ze,""+We,Bt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case $:return ze=ze.get(We.key===null?ke:We.key)||null,fe(we,ze,We,Bt);case ge:return ze=ze.get(We.key===null?ke:We.key)||null,Oe(we,ze,We,Bt);case Lt:var wi=We._init;return We=wi(We._payload),Ve(ze,we,ke,We,Bt)}if(qt(We)||lt(We))return ze=ze.get(ke)||null,Ye(we,ze,We,Bt,null);if(typeof We.then=="function")return Ve(ze,we,ke,Xh(We),Bt);if(We.$$typeof===Pe)return Ve(ze,we,ke,rl(we,We),Bt);Yh(we,We)}return null}function ai(ze,we,ke,We){for(var Bt=null,wi=null,Yt=we,ii=we=0,Vr=null;Yt!==null&&ii<ke.length;ii++){Yt.index>ii?(Vr=Yt,Yt=null):Vr=Yt.sibling;var Ni=Fe(ze,Yt,ke[ii],We);if(Ni===null){Yt===null&&(Yt=Vr);break}i&&Yt&&Ni.alternate===null&&a(ze,Yt),we=E(Ni,we,ii),wi===null?Bt=Ni:wi.sibling=Ni,wi=Ni,Yt=Vr}if(ii===ke.length)return l(ze,Yt),Ei&&Jn(ze,ii),Bt;if(Yt===null){for(;ii<ke.length;ii++)Yt=et(ze,ke[ii],We),Yt!==null&&(we=E(Yt,we,ii),wi===null?Bt=Yt:wi.sibling=Yt,wi=Yt);return Ei&&Jn(ze,ii),Bt}for(Yt=f(Yt);ii<ke.length;ii++)Vr=Ve(Yt,ze,ii,ke[ii],We),Vr!==null&&(i&&Vr.alternate!==null&&Yt.delete(Vr.key===null?ii:Vr.key),we=E(Vr,we,ii),wi===null?Bt=Vr:wi.sibling=Vr,wi=Vr);return i&&Yt.forEach(function(zu){return a(ze,zu)}),Ei&&Jn(ze,ii),Bt}function Jt(ze,we,ke,We){if(ke==null)throw Error(A(151));for(var Bt=null,wi=null,Yt=we,ii=we=0,Vr=null,Ni=ke.next();Yt!==null&&!Ni.done;ii++,Ni=ke.next()){Yt.index>ii?(Vr=Yt,Yt=null):Vr=Yt.sibling;var zu=Fe(ze,Yt,Ni.value,We);if(zu===null){Yt===null&&(Yt=Vr);break}i&&Yt&&zu.alternate===null&&a(ze,Yt),we=E(zu,we,ii),wi===null?Bt=zu:wi.sibling=zu,wi=zu,Yt=Vr}if(Ni.done)return l(ze,Yt),Ei&&Jn(ze,ii),Bt;if(Yt===null){for(;!Ni.done;ii++,Ni=ke.next())Ni=et(ze,Ni.value,We),Ni!==null&&(we=E(Ni,we,ii),wi===null?Bt=Ni:wi.sibling=Ni,wi=Ni);return Ei&&Jn(ze,ii),Bt}for(Yt=f(Yt);!Ni.done;ii++,Ni=ke.next())Ni=Ve(Yt,ze,ii,Ni.value,We),Ni!==null&&(i&&Ni.alternate!==null&&Yt.delete(Ni.key===null?ii:Ni.key),we=E(Ni,we,ii),wi===null?Bt=Ni:wi.sibling=Ni,wi=Ni);return i&&Yt.forEach(function(Wv){return a(ze,Wv)}),Ei&&Jn(ze,ii),Bt}function rn(ze,we,ke,We){if(typeof ke=="object"&&ke!==null&&ke.type===Se&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case $:e:{for(var Bt=ke.key;we!==null;){if(we.key===Bt){if(Bt=ke.type,Bt===Se){if(we.tag===7){l(ze,we.sibling),We=v(we,ke.props.children),We.return=ze,ze=We;break e}}else if(we.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===Lt&&hf(Bt)===we.type){l(ze,we.sibling),We=v(we,ke.props),pl(We,ke),We.return=ze,ze=We;break e}l(ze,we);break}else a(ze,we);we=we.sibling}ke.type===Se?(We=ns(ke.props.children,ze.mode,We,ke.key),We.return=ze,ze=We):(We=Wo(ke.type,ke.key,ke.props,null,ze.mode,We),pl(We,ke),We.return=ze,ze=We)}return F(ze);case ge:e:{for(Bt=ke.key;we!==null;){if(we.key===Bt)if(we.tag===4&&we.stateNode.containerInfo===ke.containerInfo&&we.stateNode.implementation===ke.implementation){l(ze,we.sibling),We=v(we,ke.children||[]),We.return=ze,ze=We;break e}else{l(ze,we);break}else a(ze,we);we=we.sibling}We=Qo(ke,ze.mode,We),We.return=ze,ze=We}return F(ze);case Lt:return Bt=ke._init,ke=Bt(ke._payload),rn(ze,we,ke,We)}if(qt(ke))return ai(ze,we,ke,We);if(lt(ke)){if(Bt=lt(ke),typeof Bt!="function")throw Error(A(150));return ke=Bt.call(ke),Jt(ze,we,ke,We)}if(typeof ke.then=="function")return rn(ze,we,Xh(ke),We);if(ke.$$typeof===Pe)return rn(ze,we,rl(ze,ke),We);Yh(ze,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,we!==null&&we.tag===6?(l(ze,we.sibling),We=v(we,ke),We.return=ze,ze=We):(l(ze,we),We=rs(ke,ze.mode,We),We.return=ze,ze=We),F(ze)):l(ze,we)}return function(ze,we,ke,We){try{mo=0;var Bt=rn(ze,we,ke,We);return pc=null,Bt}catch(Yt){if(Yt===s||Yt===u)throw Yt;var wi=gr(29,Yt,null,ze.mode);return wi.lanes=We,wi.return=ze,wi}finally{}}}var mc=df(!0),pp=df(!1),Jr=je(null),os=null;function qs(i){var a=i.alternate;st(kn,kn.current&1),st(Jr,i),os===null&&(a===null||nt.current!==null||a.memoizedState!==null)&&(os=i)}function fu(i){if(i.tag===22){if(st(kn,kn.current),st(Jr,i),os===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(os=i)}}else qn()}function qn(){st(kn,kn.current),st(Jr,Jr.current)}function Hs(i){Je(Jr),os===i&&(os=null),Je(kn)}var kn=je(0);function Kh(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||y(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Wh(i,a,l,f){a=i.memoizedState,l=l(f,a),l=l==null?a:J({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var ff={enqueueSetState:function(i,a,l){i=i._reactInternals;var f=ya(),v=ne(f);v.payload=a,l!=null&&(v.callback=l),a=le(i,v,f),a!==null&&(ra(a,i,f),de(a,i,f))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var f=ya(),v=ne(f);v.tag=1,v.payload=a,l!=null&&(v.callback=l),a=le(i,v,f),a!==null&&(ra(a,i,f),de(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=ya(),f=ne(l);f.tag=2,a!=null&&(f.callback=a),a=le(i,f,l),a!==null&&(ra(a,i,l),de(a,i,l))}};function mp(i,a,l,f,v,E,F){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,E,F):a.prototype&&a.prototype.isPureReactComponent?!Ho(l,f)||!Ho(v,E):!0}function gp(i,a,l,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,f),a.state!==i&&ff.enqueueReplaceState(a,a.state,null)}function gc(i,a){var l=a;if("ref"in a){l={};for(var f in a)f!=="ref"&&(l[f]=a[f])}if(i=i.defaultProps){l===a&&(l=J({},l));for(var v in i)l[v]===void 0&&(l[v]=i[v])}return l}var Ku=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function pf(i){Ku(i)}function ml(i){console.error(i)}function pu(i){Ku(i)}function Qh(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function yp(i,a,l){try{var f=i.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function mf(i,a,l){return l=ne(l),l.tag=3,l.payload={element:null},l.callback=function(){Qh(i,a)},l}function _p(i){return i=ne(i),i.tag=3,i}function vp(i,a,l,f){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var E=f.value;i.payload=function(){return v(E)},i.callback=function(){yp(a,l,f)}}var F=l.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(i.callback=function(){yp(a,l,f),typeof v!="function"&&(Tl===null?Tl=new Set([this]):Tl.add(this));var K=f.stack;this.componentDidCatch(f.value,{componentStack:K!==null?K:""})})}function Nm(i,a,l,f,v){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=l.alternate,a!==null&&il(a,l,v,!0),l=Jr.current,l!==null){switch(l.tag){case 13:return os===null?oh():l.alternate===null&&Dn===0&&(Dn=3),l.flags&=-257,l.flags|=65536,l.lanes=v,f===p?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([f]):a.add(f),md(i,f,v)),!1;case 22:return l.flags|=65536,f===p?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([f]):l.add(f)),md(i,f,v)),!1}throw Error(A(435,l.tag))}return md(i,f,v),oh(),!1}if(Ei)return a=Jr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,f!==ks&&(i=Error(A(422),{cause:f}),Pa(Ui(i,l)))):(f!==ks&&(a=Error(A(423),{cause:f}),Pa(Ui(a,l))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,f=Ui(f,l),v=mf(i.stateNode,f,v),pe(i,v),Dn!==4&&(Dn=2)),!1;var E=Error(A(520),{cause:f});if(E=Ui(E,l),Ua===null?Ua=[E]:Ua.push(E),Dn!==4&&(Dn=2),a===null)return!0;f=Ui(f,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=v&-v,l.lanes|=i,i=mf(l.stateNode,f,i),pe(l,i),!1;case 1:if(a=l.type,E=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Tl===null||!Tl.has(E))))return l.flags|=65536,v&=-v,l.lanes|=v,v=_p(v),vp(v,i,l,f),pe(l,v),!1}l=l.return}while(l!==null);return!1}var xp=Error(A(461)),Hn=!1;function Sr(i,a,l,f){a.child=i===null?pp(a,null,l,f):mc(a,i.child,l,f)}function yc(i,a,l,f,v){l=l.render;var E=a.ref;if("ref"in f){var F={};for(var K in f)K!=="ref"&&(F[K]=f[K])}else F=f;return Os(a),f=Yn(i,a,l,F,E,v),K=Ns(),i!==null&&!Hn?(ol(i,a,v),go(i,a,v)):(Ei&&K&&Zr(a),a.flags|=1,Sr(i,a,f,v),a.child)}function bp(i,a,l,f,v){if(i===null){var E=l.type;return typeof E=="function"&&!Ko(E)&&E.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=E,mn(i,a,E,f,v)):(i=Wo(l.type,null,f,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(E=i.child,!xf(i,v)){var F=E.memoizedProps;if(l=l.compare,l=l!==null?l:Ho,l(F,f)&&i.ref===a.ref)return go(i,a,v)}return a.flags|=1,i=ha(E,f),i.ref=a.ref,i.return=a,a.child=i}function mn(i,a,l,f,v){if(i!==null){var E=i.memoizedProps;if(Ho(E,f)&&i.ref===a.ref)if(Hn=!1,a.pendingProps=f=E,xf(i,v))(i.flags&131072)!==0&&(Hn=!0);else return a.lanes=i.lanes,go(i,a,v)}return mu(i,a,l,f,v)}function Wu(i,a,l){var f=a.pendingProps,v=f.children,E=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((a.flags&128)!==0){if(f=E!==null?E.baseLanes|l:l,i!==null){for(v=a.child=i.child,E=0;v!==null;)E=E|v.lanes|v.childLanes,v=v.sibling;a.childLanes=E&~f}else a.childLanes=0,a.child=null;return gf(i,a,f,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&m(a,E!==null?E.cachePool:null),E!==null?xt(a,E):ut(),fu(a);else return a.lanes=a.childLanes=536870912,gf(i,a,E!==null?E.baseLanes|l:l,l)}else E!==null?(m(a,E.cachePool),xt(a,E),qn(),a.memoizedState=null):(i!==null&&m(a,null),ut(),qn());return Sr(i,a,v,l),a.child}function gf(i,a,l,f){var v=lc();return v=v===null?null:{parent:en._currentValue,pool:v},a.memoizedState={baseLanes:l,cachePool:v},i!==null&&m(a,null),ut(),fu(a),i!==null&&il(i,a,f,!0),null}function _c(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(A(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function mu(i,a,l,f,v){return Os(a),l=Yn(i,a,l,f,void 0,v),f=Ns(),i!==null&&!Hn?(ol(i,a,v),go(i,a,v)):(Ei&&f&&Zr(a),a.flags|=1,Sr(i,a,l,v),a.child)}function gu(i,a,l,f,v,E){return Os(a),a.updateQueue=null,l=ir(a,f,l,v),Kn(i),f=Ns(),i!==null&&!Hn?(ol(i,a,E),go(i,a,E)):(Ei&&f&&Zr(a),a.flags|=1,Sr(i,a,l,E),a.child)}function yf(i,a,l,f,v){if(Os(a),a.stateNode===null){var E=ua,F=l.contextType;typeof F=="object"&&F!==null&&(E=er(F)),E=new l(f,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=ff,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=f,E.state=a.memoizedState,E.refs={},Q(a),F=l.contextType,E.context=typeof F=="object"&&F!==null?er(F):ua,E.state=a.memoizedState,F=l.getDerivedStateFromProps,typeof F=="function"&&(Wh(a,l,F,f),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(F=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),F!==E.state&&ff.enqueueReplaceState(E,E.state,null),Te(a,f,E,v),ve(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){E=a.stateNode;var K=a.memoizedProps,fe=gc(l,K);E.props=fe;var Oe=E.context,Ye=l.contextType;F=ua,typeof Ye=="object"&&Ye!==null&&(F=er(Ye));var et=l.getDerivedStateFromProps;Ye=typeof et=="function"||typeof E.getSnapshotBeforeUpdate=="function",K=a.pendingProps!==K,Ye||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(K||Oe!==F)&&gp(a,E,f,F),q=!1;var Fe=a.memoizedState;E.state=Fe,Te(a,f,E,v),ve(),Oe=a.memoizedState,K||Fe!==Oe||q?(typeof et=="function"&&(Wh(a,l,et,f),Oe=a.memoizedState),(fe=q||mp(a,l,fe,f,Fe,Oe,F))?(Ye||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=Oe),E.props=f,E.state=Oe,E.context=F,f=fe):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{E=a.stateNode,te(i,a),F=a.memoizedProps,Ye=gc(l,F),E.props=Ye,et=a.pendingProps,Fe=E.context,Oe=l.contextType,fe=ua,typeof Oe=="object"&&Oe!==null&&(fe=er(Oe)),K=l.getDerivedStateFromProps,(Oe=typeof K=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(F!==et||Fe!==fe)&&gp(a,E,f,fe),q=!1,Fe=a.memoizedState,E.state=Fe,Te(a,f,E,v),ve();var Ve=a.memoizedState;F!==et||Fe!==Ve||q||i!==null&&i.dependencies!==null&&nl(i.dependencies)?(typeof K=="function"&&(Wh(a,l,K,f),Ve=a.memoizedState),(Ye=q||mp(a,l,Ye,f,Fe,Ve,fe)||i!==null&&i.dependencies!==null&&nl(i.dependencies))?(Oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(f,Ve,fe),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(f,Ve,fe)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||F===i.memoizedProps&&Fe===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&Fe===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Ve),E.props=f,E.state=Ve,E.context=fe,f=Ye):(typeof E.componentDidUpdate!="function"||F===i.memoizedProps&&Fe===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||F===i.memoizedProps&&Fe===i.memoizedState||(a.flags|=1024),f=!1)}return E=f,_c(i,a),f=(a.flags&128)!==0,E||f?(E=a.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,i!==null&&f?(a.child=mc(a,i.child,null,v),a.child=mc(a,null,l,v)):Sr(i,a,l,v),a.memoizedState=E.state,i=a.child):i=go(i,a,v),i}function _f(i,a,l,f){return tl(),a.flags|=256,Sr(i,a,l,f),a.child}var vc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qu(i){return{baseLanes:i,cachePool:e()}}function Ju(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=na),i}function Jh(i,a,l){var f=a.pendingProps,v=!1,E=(a.flags&128)!==0,F;if((F=E)||(F=i!==null&&i.memoizedState===null?!1:(kn.current&2)!==0),F&&(v=!0,a.flags&=-129),F=(a.flags&32)!==0,a.flags&=-33,i===null){if(Ei){if(v?qs(a):qn(),Ei){var K=pn,fe;if(fe=K){e:{for(fe=K,K=Wr;fe.nodeType!==8;){if(!K){K=null;break e}if(fe=S(fe.nextSibling),fe===null){K=null;break e}}K=fe}K!==null?(a.memoizedState={dehydrated:K,treeContext:da!==null?{id:ka,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},fe=gr(18,null,null,0),fe.stateNode=K,fe.return=a,a.child=fe,_r=a,pn=null,fe=!0):fe=!1}fe||Un(a)}if(K=a.memoizedState,K!==null&&(K=K.dehydrated,K!==null))return y(K)?a.lanes=32:a.lanes=536870912,null;Hs(a)}return K=f.children,f=f.fallback,v?(qn(),v=a.mode,K=th({mode:"hidden",children:K},v),f=ns(f,v,l,null),K.return=a,f.return=a,K.sibling=f,a.child=K,v=a.child,v.memoizedState=Qu(l),v.childLanes=Ju(i,F,l),a.memoizedState=vc,f):(qs(a),eh(a,K))}if(fe=i.memoizedState,fe!==null&&(K=fe.dehydrated,K!==null)){if(E)a.flags&256?(qs(a),a.flags&=-257,a=ed(i,a,l)):a.memoizedState!==null?(qn(),a.child=i.child,a.flags|=128,a=null):(qn(),v=f.fallback,K=a.mode,f=th({mode:"visible",children:f.children},K),v=ns(v,K,l,null),v.flags|=2,f.return=a,v.return=a,f.sibling=v,a.child=f,mc(a,i.child,null,l),f=a.child,f.memoizedState=Qu(l),f.childLanes=Ju(i,F,l),a.memoizedState=vc,a=v);else if(qs(a),y(K)){if(F=K.nextSibling&&K.nextSibling.dataset,F)var Oe=F.dgst;F=Oe,f=Error(A(419)),f.stack="",f.digest=F,Pa({value:f,source:null,stack:null}),a=ed(i,a,l)}else if(Hn||il(i,a,l,!1),F=(l&i.childLanes)!==0,Hn||F){if(F=tn,F!==null&&(f=l&-l,f=(f&42)!==0?1:W(f),f=(f&(F.suspendedLanes|l))!==0?0:f,f!==0&&f!==fe.retryLane))throw fe.retryLane=f,Ra(i,f),ra(F,i,f),xp;K.data==="$?"||oh(),a=ed(i,a,l)}else K.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=fe.treeContext,pn=S(K.nextSibling),_r=a,Ei=!0,Is=null,Wr=!1,i!==null&&(Or[yr++]=ka,Or[yr++]=Mn,Or[yr++]=da,ka=i.id,Mn=i.overflow,da=a),a=eh(a,f.children),a.flags|=4096);return a}return v?(qn(),v=f.fallback,K=a.mode,fe=i.child,Oe=fe.sibling,f=ha(fe,{mode:"hidden",children:f.children}),f.subtreeFlags=fe.subtreeFlags&65011712,Oe!==null?v=ha(Oe,v):(v=ns(v,K,l,null),v.flags|=2),v.return=a,f.return=a,f.sibling=v,a.child=f,f=v,v=a.child,K=i.child.memoizedState,K===null?K=Qu(l):(fe=K.cachePool,fe!==null?(Oe=en._currentValue,fe=fe.parent!==Oe?{parent:Oe,pool:Oe}:fe):fe=e(),K={baseLanes:K.baseLanes|l,cachePool:fe}),v.memoizedState=K,v.childLanes=Ju(i,F,l),a.memoizedState=vc,f):(qs(a),l=i.child,i=l.sibling,l=ha(l,{mode:"visible",children:f.children}),l.return=a,l.sibling=null,i!==null&&(F=a.deletions,F===null?(a.deletions=[i],a.flags|=16):F.push(i)),a.child=l,a.memoizedState=null,l)}function eh(i,a){return a=th({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function th(i,a){return i=gr(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function ed(i,a,l){return mc(a,i.child,null,l),i=eh(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function wp(i,a,l){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),$u(i.return,a,l)}function vf(i,a,l,f,v){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=l,E.tailMode=v)}function Sp(i,a,l){var f=a.pendingProps,v=f.revealOrder,E=f.tail;if(Sr(i,a,f.children,l),f=kn.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wp(i,l,a);else if(i.tag===19)wp(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(st(kn,f),v){case"forwards":for(l=a.child,v=null;l!==null;)i=l.alternate,i!==null&&Kh(i)===null&&(v=l),l=l.sibling;l=v,l===null?(v=a.child,a.child=null):(v=l.sibling,l.sibling=null),vf(a,!1,v,l,E);break;case"backwards":for(l=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&Kh(i)===null){a.child=v;break}i=v.sibling,v.sibling=l,l=v,v=i}vf(a,!0,l,null,E);break;case"together":vf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function go(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),xo|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(il(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(A(153));if(a.child!==null){for(i=a.child,l=ha(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=ha(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function xf(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&nl(i)))}function gl(i,a,l){switch(a.tag){case 3:Ct(a,a.stateNode.containerInfo),Ps(a,en,i.memoizedState.cache),tl();break;case 27:case 5:pi(a);break;case 4:Ct(a,a.stateNode.containerInfo);break;case 10:Ps(a,a.type,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(qs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Jh(i,a,l):(qs(a),i=go(i,a,l),i!==null?i.sibling:null);qs(a);break;case 19:var v=(i.flags&128)!==0;if(f=(l&a.childLanes)!==0,f||(il(i,a,l,!1),f=(l&a.childLanes)!==0),v){if(f)return Sp(i,a,l);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),st(kn,kn.current),f)break;return null;case 22:case 23:return a.lanes=0,Wu(i,a,l);case 24:Ps(a,en,i.memoizedState.cache)}return go(i,a,l)}function Tp(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)Hn=!0;else{if(!xf(i,l)&&(a.flags&128)===0)return Hn=!1,gl(i,a,l);Hn=(i.flags&131072)!==0}else Hn=!1,Ei&&(a.flags&1048576)!==0&&lu(a,el,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var f=a.elementType,v=f._init;if(f=v(f._payload),a.type=f,typeof f=="function")Ko(f)?(i=gc(f,i),a.tag=1,a=yf(null,a,f,i,l)):(a.tag=0,a=mu(null,a,f,i,l));else{if(f!=null){if(v=f.$$typeof,v===qe){a.tag=11,a=yc(null,a,f,i,l);break e}else if(v===it){a.tag=14,a=bp(null,a,f,i,l);break e}}throw a=Rt(f)||f,Error(A(306,a,""))}}return a;case 0:return mu(i,a,a.type,a.pendingProps,l);case 1:return f=a.type,v=gc(f,a.pendingProps),yf(i,a,f,v,l);case 3:e:{if(Ct(a,a.stateNode.containerInfo),i===null)throw Error(A(387));f=a.pendingProps;var E=a.memoizedState;v=E.element,te(i,a),Te(a,f,null,l);var F=a.memoizedState;if(f=F.cache,Ps(a,en,f),f!==E.cache&&Ls(a,[en],l,!0),ve(),f=F.element,E.isDehydrated)if(E={element:f,isDehydrated:!1,cache:F.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=_f(i,a,f,l);break e}else if(f!==v){v=Ui(Error(A(424)),a),Pa(v),a=_f(i,a,f,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(pn=S(i.firstChild),_r=a,Ei=!0,Is=null,Wr=!0,l=pp(a,null,f,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(tl(),f===v){a=go(i,a,l);break e}Sr(i,a,f,l)}a=a.child}return a;case 26:return _c(i,a),i===null?(l=At(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ei||(l=a.type,i=a.pendingProps,f=zl(Et.current).createElement(l),f[ue]=a,f[Le]=i,sr(f,l,i),Ut(f),a.stateNode=f):a.memoizedState=At(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return pi(a),i===null&&Ei&&(f=a.stateNode=P(a.type,a.pendingProps,Et.current),_r=a,Wr=!0,v=pn,t(a.type)?(D=v,pn=S(f.firstChild)):pn=v),Sr(i,a,a.pendingProps.children,l),_c(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Ei&&((v=f=pn)&&(f=h(f,a.type,a.pendingProps,Wr),f!==null?(a.stateNode=f,_r=a,pn=S(f.firstChild),Wr=!1,v=!0):v=!1),v||Un(a)),pi(a),v=a.type,E=a.pendingProps,F=i!==null?i.memoizedProps:null,f=E.children,ph(v,E)?f=null:F!==null&&ph(v,F)&&(a.flags|=32),a.memoizedState!==null&&(v=Yn(i,a,Ba,null,null,l),Ri._currentValue=v),_c(i,a),Sr(i,a,f,l),a.child;case 6:return i===null&&Ei&&((i=l=pn)&&(l=g(l,a.pendingProps,Wr),l!==null?(a.stateNode=l,_r=a,pn=null,i=!0):i=!1),i||Un(a)),null;case 13:return Jh(i,a,l);case 4:return Ct(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=mc(a,null,f,l):Sr(i,a,f,l),a.child;case 11:return yc(i,a,a.type,a.pendingProps,l);case 7:return Sr(i,a,a.pendingProps,l),a.child;case 8:return Sr(i,a,a.pendingProps.children,l),a.child;case 12:return Sr(i,a,a.pendingProps.children,l),a.child;case 10:return f=a.pendingProps,Ps(a,a.type,f.value),Sr(i,a,f.children,l),a.child;case 9:return v=a.type._context,f=a.pendingProps.children,Os(a),v=er(v),f=f(v),a.flags|=1,Sr(i,a,f,l),a.child;case 14:return bp(i,a,a.type,a.pendingProps,l);case 15:return mn(i,a,a.type,a.pendingProps,l);case 19:return Sp(i,a,l);case 31:return f=a.pendingProps,l=a.mode,f={mode:f.mode,children:f.children},i===null?(l=th(f,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=ha(i.child,f),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return Wu(i,a,l);case 24:return Os(a),f=er(en),i===null?(v=lc(),v===null&&(v=tn,E=al(),v.pooledCache=E,E.refCount++,E!==null&&(v.pooledCacheLanes|=l),v=E),a.memoizedState={parent:f,cache:v},Q(a),Ps(a,en,v)):((i.lanes&l)!==0&&(te(i,a),Te(a,null,null,l),ve()),v=i.memoizedState,E=a.memoizedState,v.parent!==f?(v={parent:f,cache:f},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),Ps(a,en,f)):(f=E.cache,Ps(a,en,f),f!==v.cache&&Ls(a,[en],l,!0))),Sr(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(A(156,a.tag))}function Zs(i){i.flags|=4}function xc(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!cn(a)){if(a=Jr.current,a!==null&&((vi&4194048)===vi?os!==null:(vi&62914560)!==vi&&(vi&536870912)===0||a!==os))throw I=p,c;i.flags|=8192}}function td(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Ea():536870912,i.lanes|=a,wc|=a)}function ih(i,a){if(!Ei)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function xn(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(a)for(var v=i.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=f,i.childLanes=l,a}function Ep(i,a,l){var f=a.pendingProps;switch(as(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(a),null;case 1:return xn(a),null;case 3:return l=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),pa(en),Ii(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(so(a)?Zs(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,oo())),xn(a),null;case 26:return l=a.memoizedState,i===null?(Zs(a),l!==null?(xn(a),xc(a,l)):(xn(a),a.flags&=-16777217)):l?l!==i.memoizedState?(Zs(a),xn(a),xc(a,l)):(xn(a),a.flags&=-16777217):(i.memoizedProps!==f&&Zs(a),xn(a),a.flags&=-16777217),null;case 27:Si(a),l=Et.current;var v=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Zs(a);else{if(!f){if(a.stateNode===null)throw Error(A(166));return xn(a),null}i=bt.current,so(a)?wt(a):(i=P(v,f,l),a.stateNode=i,Zs(a))}return xn(a),null;case 5:if(Si(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Zs(a);else{if(!f){if(a.stateNode===null)throw Error(A(166));return xn(a),null}if(i=bt.current,so(a))wt(a);else{switch(v=zl(Et.current),i){case 1:i=v.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=v.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?v.createElement(l,{is:f.is}):v.createElement(l)}}i[ue]=a,i[Le]=f;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)i.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=i;e:switch(sr(i,l,f),l){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Zs(a)}}return xn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&Zs(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(A(166));if(i=Et.current,so(a)){if(i=a.stateNode,l=a.memoizedProps,f=null,v=_r,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}i[ue]=a,i=!!(i.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||Jp(i.nodeValue,l)),i||Un(a)}else i=zl(i).createTextNode(f),i[ue]=a,a.stateNode=i}return xn(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=so(a),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(A(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(A(317));v[ue]=a}else tl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xn(a),v=!1}else v=oo(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(Hs(a),a):(Hs(a),null)}if(Hs(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=f!==null,i=i!==null&&i.memoizedState!==null,l){f=a.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool);var E=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(E=f.memoizedState.cachePool.pool),E!==v&&(f.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),td(a,a.updateQueue),xn(a),null;case 4:return Ii(),i===null&&Zf(a.stateNode.containerInfo),xn(a),null;case 10:return pa(a.type),xn(a),null;case 19:if(Je(kn),v=a.memoizedState,v===null)return xn(a),null;if(f=(a.flags&128)!==0,E=v.rendering,E===null)if(f)ih(v,!1);else{if(Dn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(E=Kh(i),E!==null){for(a.flags|=128,ih(v,!1),i=E.updateQueue,a.updateQueue=i,td(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)nc(l,i),l=l.sibling;return st(kn,kn.current&1|2),a.child}i=i.sibling}v.tail!==null&&An()>Tc&&(a.flags|=128,f=!0,ih(v,!1),a.lanes=4194304)}else{if(!f)if(i=Kh(E),i!==null){if(a.flags|=128,f=!0,i=i.updateQueue,a.updateQueue=i,td(a,i),ih(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!Ei)return xn(a),null}else 2*An()-v.renderingStartTime>Tc&&l!==536870912&&(a.flags|=128,f=!0,ih(v,!1),a.lanes=4194304);v.isBackwards?(E.sibling=a.child,a.child=E):(i=v.last,i!==null?i.sibling=E:a.child=E,v.last=E)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=An(),a.sibling=null,i=kn.current,st(kn,f?i&1|2:i&1),a):(xn(a),null);case 22:case 23:return Hs(a),ct(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(l&536870912)!==0&&(a.flags&128)===0&&(xn(a),a.subtreeFlags&6&&(a.flags|=8192)):xn(a),l=a.updateQueue,l!==null&&td(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==l&&(a.flags|=2048),i!==null&&Je(Oa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),pa(en),xn(a),null;case 25:return null;case 30:return null}throw Error(A(156,a.tag))}function Ap(i,a){switch(as(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return pa(en),Ii(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Si(a),null;case 13:if(Hs(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(A(340));tl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Je(kn),null;case 4:return Ii(),null;case 10:return pa(a.type),null;case 22:case 23:return Hs(a),ct(),i!==null&&Je(Oa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return pa(en),null;case 25:return null;default:return null}}function Cp(i,a){switch(as(a),a.tag){case 3:pa(en),Ii();break;case 26:case 27:case 5:Si(a);break;case 4:Ii();break;case 13:Hs(a);break;case 19:Je(kn);break;case 10:pa(a.type);break;case 22:case 23:Hs(a),ct(),i!==null&&Je(Oa);break;case 24:pa(en)}}function nh(i,a){try{var l=a.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&i)===i){f=void 0;var E=l.create,F=l.inst;f=E(),F.destroy=f}l=l.next}while(l!==v)}}catch(K){$i(a,a.return,K)}}function yl(i,a,l){try{var f=a.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var E=v.next;f=E;do{if((f.tag&i)===i){var F=f.inst,K=F.destroy;if(K!==void 0){F.destroy=void 0,v=a;var fe=l,Oe=K;try{Oe()}catch(Ye){$i(v,fe,Ye)}}}f=f.next}while(f!==E)}}catch(Ye){$i(a,a.return,Ye)}}function Mp(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{$e(a,l)}catch(f){$i(i,i.return,f)}}}function id(i,a,l){l.props=gc(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(f){$i(i,a,f)}}function yo(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof l=="function"?i.refCleanup=l(f):l.current=f}}catch(v){$i(i,a,v)}}function ja(i,a){var l=i.ref,f=i.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(v){$i(i,a,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){$i(i,a,v)}else l.current=null}function zp(i){var a=i.type,l=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(v){$i(i,i.return,v)}}function bf(i,a,l){try{var f=i.stateNode;Xf(f,i.type,l,a),f[Le]=a}catch(v){$i(i,i.return,v)}}function wf(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&t(i.type)||i.tag===4}function Sf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||wf(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&t(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Tf(i,a,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=dh));else if(f!==4&&(f===27&&t(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Tf(i,a,l),i=i.sibling;i!==null;)Tf(i,a,l),i=i.sibling}function _l(i,a,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(f!==4&&(f===27&&t(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(_l(i,a,l),i=i.sibling;i!==null;)_l(i,a,l),i=i.sibling}function Ef(i){var a=i.stateNode,l=i.memoizedProps;try{for(var f=i.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);sr(a,f,l),a[ue]=i,a[Le]=l}catch(E){$i(i,i.return,E)}}var _o=!1,Pn=!1,Af=!1,Dp=typeof WeakSet=="function"?WeakSet:Set,rr=null;function Fm(i,a){if(i=i.containerInfo,fh=Ur,i=Oh(i),nu(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,E=f.focusNode;f=f.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break e}var F=0,K=-1,fe=-1,Oe=0,Ye=0,et=i,Fe=null;t:for(;;){for(var Ve;et!==l||v!==0&&et.nodeType!==3||(K=F+v),et!==E||f!==0&&et.nodeType!==3||(fe=F+f),et.nodeType===3&&(F+=et.nodeValue.length),(Ve=et.firstChild)!==null;)Fe=et,et=Ve;for(;;){if(et===i)break t;if(Fe===l&&++Oe===v&&(K=F),Fe===E&&++Ye===f&&(fe=F),(Ve=et.nextSibling)!==null)break;et=Fe,Fe=et.parentNode}et=Ve}l=K===-1||fe===-1?null:{start:K,end:fe}}else l=null}l=l||{start:0,end:0}}else l=null;for(bd={focusedElem:i,selectionRange:l},Ur=!1,rr=a;rr!==null;)if(a=rr,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,rr=i;else for(;rr!==null;){switch(a=rr,E=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&E!==null){i=void 0,l=a,v=E.memoizedProps,E=E.memoizedState,f=l.stateNode;try{var ai=gc(l.type,v,l.elementType===l.type);i=f.getSnapshotBeforeUpdate(ai,E),f.__reactInternalSnapshotBeforeUpdate=i}catch(Jt){$i(l,l.return,Jt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)o(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":o(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(A(163))}if(i=a.sibling,i!==null){i.return=a.return,rr=i;break}rr=a.return}}function Cf(i,a,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:vl(i,l),f&4&&nh(5,l);break;case 1:if(vl(i,l),f&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(F){$i(l,l.return,F)}else{var v=gc(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(v,a,i.__reactInternalSnapshotBeforeUpdate)}catch(F){$i(l,l.return,F)}}f&64&&Mp(l),f&512&&yo(l,l.return);break;case 3:if(vl(i,l),f&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{$e(i,a)}catch(F){$i(l,l.return,F)}}break;case 27:a===null&&f&4&&Ef(l);case 26:case 5:vl(i,l),a===null&&f&4&&zp(l),f&512&&yo(l,l.return);break;case 12:vl(i,l);break;case 13:vl(i,l),f&4&&rh(i,l),f&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=Zp.bind(null,l),x(i,l))));break;case 22:if(f=l.memoizedState!==null||_o,!f){a=a!==null&&a.memoizedState!==null||Pn,v=_o;var E=Pn;_o=f,(Pn=a)&&!E?Gi(i,l,(l.subtreeFlags&8772)!==0):vl(i,l),_o=v,Pn=E}break;case 30:break;default:vl(i,l)}}function nd(i){var a=i.alternate;a!==null&&(i.alternate=null,nd(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Wt(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ln=null,$r=!1;function Gs(i,a,l){for(l=l.child;l!==null;)Rp(i,a,l),l=l.sibling}function Rp(i,a,l){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Ha,l)}catch{}switch(l.tag){case 26:Pn||ja(l,a),Gs(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Pn||ja(l,a);var f=ln,v=$r;t(l.type)&&(ln=l.stateNode,$r=!1),Gs(i,a,l),B(l.stateNode),ln=f,$r=v;break;case 5:Pn||ja(l,a);case 6:if(f=ln,v=$r,ln=null,Gs(i,a,l),ln=f,$r=v,ln!==null)if($r)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(l.stateNode)}catch(E){$i(l,a,E)}else try{ln.removeChild(l.stateNode)}catch(E){$i(l,a,E)}break;case 18:ln!==null&&($r?(i=ln,r(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Dr(i)):r(ln,l.stateNode));break;case 4:f=ln,v=$r,ln=l.stateNode.containerInfo,$r=!0,Gs(i,a,l),ln=f,$r=v;break;case 0:case 11:case 14:case 15:Pn||yl(2,l,a),Pn||yl(4,l,a),Gs(i,a,l);break;case 1:Pn||(ja(l,a),f=l.stateNode,typeof f.componentWillUnmount=="function"&&id(l,a,f)),Gs(i,a,l);break;case 21:Gs(i,a,l);break;case 22:Pn=(f=Pn)||l.memoizedState!==null,Gs(i,a,l),Pn=f;break;default:Gs(i,a,l)}}function rh(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Dr(i)}catch(l){$i(a,a.return,l)}}function jm(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Dp),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Dp),a;default:throw Error(A(435,i.tag))}}function rd(i,a){var l=jm(i);a.forEach(function(f){var v=Of.bind(null,i,f);l.has(f)||(l.add(f),f.then(v,v))})}function ga(i,a){var l=a.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f],E=i,F=a,K=F;e:for(;K!==null;){switch(K.tag){case 27:if(t(K.type)){ln=K.stateNode,$r=!1;break e}break;case 5:ln=K.stateNode,$r=!1;break e;case 3:case 4:ln=K.stateNode.containerInfo,$r=!0;break e}K=K.return}if(ln===null)throw Error(A(160));Rp(E,F,v),ln=null,$r=!1,E=v.alternate,E!==null&&(E.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Ip(a,i),a=a.sibling}var ls=null;function Ip(i,a){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ga(a,i),ea(i),f&4&&(yl(3,i,i.return),nh(3,i),yl(5,i,i.return));break;case 1:ga(a,i),ea(i),f&512&&(Pn||l===null||ja(l,l.return)),f&64&&_o&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var v=ls;if(ga(a,i),ea(i),f&512&&(Pn||l===null||ja(l,l.return)),f&4){var E=l!==null?l.memoizedState:null;if(f=i.memoizedState,l===null)if(f===null)if(i.stateNode===null){e:{f=i.type,l=i.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":E=v.getElementsByTagName("title")[0],(!E||E[ci]||E[ue]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=v.createElement(f),v.head.insertBefore(E,v.querySelector("head > title"))),sr(E,f,l),E[ue]=i,Ut(E),f=E;break e;case"link":var F=Ar("link","href",v).get(f+(l.href||""));if(F){for(var K=0;K<F.length;K++)if(E=F[K],E.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&E.getAttribute("rel")===(l.rel==null?null:l.rel)&&E.getAttribute("title")===(l.title==null?null:l.title)&&E.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){F.splice(K,1);break t}}E=v.createElement(f),sr(E,f,l),v.head.appendChild(E);break;case"meta":if(F=Ar("meta","content",v).get(f+(l.content||""))){for(K=0;K<F.length;K++)if(E=F[K],E.getAttribute("content")===(l.content==null?null:""+l.content)&&E.getAttribute("name")===(l.name==null?null:l.name)&&E.getAttribute("property")===(l.property==null?null:l.property)&&E.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&E.getAttribute("charset")===(l.charSet==null?null:l.charSet)){F.splice(K,1);break t}}E=v.createElement(f),sr(E,f,l),v.head.appendChild(E);break;default:throw Error(A(468,f))}E[ue]=i,Ut(E),f=E}i.stateNode=f}else Cr(v,i.type,i.stateNode);else i.stateNode=Oi(v,f,i.memoizedProps);else E!==f?(E===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):E.count--,f===null?Cr(v,i.type,i.stateNode):Oi(v,f,i.memoizedProps)):f===null&&i.stateNode!==null&&bf(i,i.memoizedProps,l.memoizedProps)}break;case 27:ga(a,i),ea(i),f&512&&(Pn||l===null||ja(l,l.return)),l!==null&&f&4&&bf(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ga(a,i),ea(i),f&512&&(Pn||l===null||ja(l,l.return)),i.flags&32){v=i.stateNode;try{ws(v,"")}catch(Ve){$i(i,i.return,Ve)}}f&4&&i.stateNode!=null&&(v=i.memoizedProps,bf(i,v,l!==null?l.memoizedProps:v)),f&1024&&(Af=!0);break;case 6:if(ga(a,i),ea(i),f&4){if(i.stateNode===null)throw Error(A(162));f=i.memoizedProps,l=i.stateNode;try{l.nodeValue=f}catch(Ve){$i(i,i.return,Ve)}}break;case 3:if(wn=null,v=ls,ls=Y(a.containerInfo),ga(a,i),ls=v,ea(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Dr(a.containerInfo)}catch(Ve){$i(i,i.return,Ve)}Af&&(Af=!1,kp(i));break;case 4:f=ls,ls=Y(i.stateNode.containerInfo),ga(a,i),ea(i),ls=f;break;case 12:ga(a,i),ea(i);break;case 13:ga(a,i),ea(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Sl=An()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,rd(i,f)));break;case 22:v=i.memoizedState!==null;var fe=l!==null&&l.memoizedState!==null,Oe=_o,Ye=Pn;if(_o=Oe||v,Pn=Ye||fe,ga(a,i),Pn=Ye,_o=Oe,ea(i),f&8192)e:for(a=i.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(l===null||fe||_o||Pn||cs(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){fe=l=a;try{if(E=fe.stateNode,v)F=E.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{K=fe.stateNode;var et=fe.memoizedProps.style,Fe=et!=null&&et.hasOwnProperty("display")?et.display:null;K.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(Ve){$i(fe,fe.return,Ve)}}}else if(a.tag===6){if(l===null){fe=a;try{fe.stateNode.nodeValue=v?"":fe.memoizedProps}catch(Ve){$i(fe,fe.return,Ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,rd(i,l))));break;case 19:ga(a,i),ea(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,rd(i,f)));break;case 30:break;case 21:break;default:ga(a,i),ea(i)}}function ea(i){var a=i.flags;if(a&2){try{for(var l,f=i.return;f!==null;){if(wf(f)){l=f;break}f=f.return}if(l==null)throw Error(A(160));switch(l.tag){case 27:var v=l.stateNode,E=Sf(i);_l(i,E,v);break;case 5:var F=l.stateNode;l.flags&32&&(ws(F,""),l.flags&=-33);var K=Sf(i);_l(i,K,F);break;case 3:case 4:var fe=l.stateNode.containerInfo,Oe=Sf(i);Tf(i,Oe,fe);break;default:throw Error(A(161))}}catch(Ye){$i(i,i.return,Ye)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function kp(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;kp(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function vl(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Cf(i,a.alternate,a),a=a.sibling}function cs(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:yl(4,a,a.return),cs(a);break;case 1:ja(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&id(a,a.return,l),cs(a);break;case 27:B(a.stateNode);case 26:case 5:ja(a,a.return),cs(a);break;case 22:a.memoizedState===null&&cs(a);break;case 30:cs(a);break;default:cs(a)}i=i.sibling}}function Gi(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,v=i,E=a,F=E.flags;switch(E.tag){case 0:case 11:case 15:Gi(v,E,l),nh(4,E);break;case 1:if(Gi(v,E,l),f=E,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Oe){$i(f,f.return,Oe)}if(f=E,v=f.updateQueue,v!==null){var K=f.stateNode;try{var fe=v.shared.hiddenCallbacks;if(fe!==null)for(v.shared.hiddenCallbacks=null,v=0;v<fe.length;v++)Re(fe[v],K)}catch(Oe){$i(f,f.return,Oe)}}l&&F&64&&Mp(E),yo(E,E.return);break;case 27:Ef(E);case 26:case 5:Gi(v,E,l),l&&f===null&&F&4&&zp(E),yo(E,E.return);break;case 12:Gi(v,E,l);break;case 13:Gi(v,E,l),l&&F&4&&rh(v,E);break;case 22:E.memoizedState===null&&Gi(v,E,l),yo(E,E.return);break;case 30:break;default:Gi(v,E,l)}a=a.sibling}}function ad(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Bs(l))}function sd(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Bs(i))}function us(i,a,l,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Li(i,a,l,f),a=a.sibling}function Li(i,a,l,f){var v=a.flags;switch(a.tag){case 0:case 11:case 15:us(i,a,l,f),v&2048&&nh(9,a);break;case 1:us(i,a,l,f);break;case 3:us(i,a,l,f),v&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Bs(i)));break;case 12:if(v&2048){us(i,a,l,f),i=a.stateNode;try{var E=a.memoizedProps,F=E.id,K=E.onPostCommit;typeof K=="function"&&K(F,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(fe){$i(a,a.return,fe)}}else us(i,a,l,f);break;case 13:us(i,a,l,f);break;case 23:break;case 22:E=a.stateNode,F=a.alternate,a.memoizedState!==null?E._visibility&2?us(i,a,l,f):yu(i,a):E._visibility&2?us(i,a,l,f):(E._visibility|=2,xl(i,a,l,f,(a.subtreeFlags&10256)!==0)),v&2048&&ad(F,a);break;case 24:us(i,a,l,f),v&2048&&sd(a.alternate,a);break;default:us(i,a,l,f)}}function xl(i,a,l,f,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var E=i,F=a,K=l,fe=f,Oe=F.flags;switch(F.tag){case 0:case 11:case 15:xl(E,F,K,fe,v),nh(8,F);break;case 23:break;case 22:var Ye=F.stateNode;F.memoizedState!==null?Ye._visibility&2?xl(E,F,K,fe,v):yu(E,F):(Ye._visibility|=2,xl(E,F,K,fe,v)),v&&Oe&2048&&ad(F.alternate,F);break;case 24:xl(E,F,K,fe,v),v&&Oe&2048&&sd(F.alternate,F);break;default:xl(E,F,K,fe,v)}a=a.sibling}}function yu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,f=a,v=f.flags;switch(f.tag){case 22:yu(l,f),v&2048&&ad(f.alternate,f);break;case 24:yu(l,f),v&2048&&sd(f.alternate,f);break;default:yu(l,f)}a=a.sibling}}var _u=8192;function ta(i){if(i.subtreeFlags&_u)for(i=i.child;i!==null;)bc(i),i=i.sibling}function bc(i){switch(i.tag){case 26:ta(i),i.flags&_u&&i.memoizedState!==null&&or(ls,i.memoizedState,i.memoizedProps);break;case 5:ta(i);break;case 3:case 4:var a=ls;ls=Y(i.stateNode.containerInfo),ta(i),ls=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=_u,_u=16777216,ta(i),_u=a):ta(i));break;default:ta(i)}}function Mf(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function ah(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var f=a[l];rr=f,Lp(f,i)}Mf(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Pp(i),i=i.sibling}function Pp(i){switch(i.tag){case 0:case 11:case 15:ah(i),i.flags&2048&&yl(9,i,i.return);break;case 3:ah(i);break;case 12:ah(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,od(i)):ah(i);break;default:ah(i)}}function od(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var f=a[l];rr=f,Lp(f,i)}Mf(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:yl(8,a,a.return),od(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,od(a));break;default:od(a)}i=i.sibling}}function Lp(i,a){for(;rr!==null;){var l=rr;switch(l.tag){case 0:case 11:case 15:yl(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Bs(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,rr=f;else e:for(l=i;rr!==null;){f=rr;var v=f.sibling,E=f.return;if(nd(f),f===l){rr=null;break e}if(v!==null){v.return=E,rr=v;break e}rr=E}}}var Um={getCacheForType:function(i){var a=er(en),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},Vm=typeof WeakMap=="function"?WeakMap:Map,Vi=0,tn=null,_i=null,vi=0,Ai=0,ia=null,$s=!1,bl=!1,zf=!1,vo=0,Dn=0,xo=0,wl=0,Tr=0,na=0,wc=0,Ua=null,ar=null,Sc=!1,Sl=0,Tc=1/0,Ec=null,Tl=null,Er=0,bo=null,Ac=null,vu=0,ld=0,cd=null,ud=null,Cc=0,Df=null;function ya(){if((Vi&2)!==0&&vi!==0)return vi&-vi;if(De.T!==null){var i=La;return i!==0?i:yd()}return ye()}function Rf(){na===0&&(na=(vi&536870912)===0||Ei?la():536870912);var i=Jr.current;return i!==null&&(i.flags|=32),na}function ra(i,a,l){(i===tn&&(Ai===2||Ai===9)||i.cancelPendingCommit!==null)&&(wu(i,0),wo(i,vi,na,!1)),Rr(i,l),((Vi&2)===0||i!==tn)&&(i===tn&&((Vi&2)===0&&(wl|=l),Dn===4&&wo(i,vi,na,!1)),ds(i))}function xu(i,a,l){if((Vi&6)!==0)throw Error(A(327));var f=!l&&(a&124)===0&&(a&i.expiredLanes)===0||ur(i,a),v=f?Bp(i,a):lh(i,a,!0),E=f;do{if(v===0){bl&&!f&&wo(i,a,0,!1);break}else{if(l=i.current.alternate,E&&!El(l)){v=lh(i,a,!1),E=!1;continue}if(v===2){if(E=a,i.errorRecoveryDisabledLanes&E)var F=0;else F=i.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){a=F;e:{var K=i;v=Ua;var fe=K.current.memoizedState.isDehydrated;if(fe&&(wu(K,F).flags|=256),F=lh(K,F,!1),F!==2){if(zf&&!fe){K.errorRecoveryDisabledLanes|=E,wl|=E,v=4;break e}E=ar,ar=v,E!==null&&(ar===null?ar=E:ar.push.apply(ar,E))}v=F}if(E=!1,v!==2)continue}}if(v===1){wu(i,0),wo(i,a,0,!0);break}e:{switch(f=i,E=v,E){case 0:case 1:throw Error(A(345));case 4:if((a&4194048)!==a)break;case 6:wo(f,a,na,!$s);break e;case 2:ar=null;break;case 3:case 5:break;default:throw Error(A(329))}if((a&62914560)===a&&(v=Sl+300-An(),10<v)){if(wo(f,a,na,!$s),$n(f,0,!0)!==0)break e;f.timeoutHandle=Sd(hs.bind(null,f,l,ar,Ec,Sc,a,na,wl,wc,$s,E,2,-0,0),v);break e}hs(f,l,ar,Ec,Sc,a,na,wl,wc,$s,E,0,-0,0)}}break}while(!0);ds(i)}function hs(i,a,l,f,v,E,F,K,fe,Oe,Ye,et,Fe,Ve){if(i.timeoutHandle=-1,et=a.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(gn={stylesheets:null,count:0,unsuspend:Mr},bc(a),et=Fr(),et!==null)){i.cancelPendingCommit=et(jp.bind(null,i,a,E,l,f,v,F,K,fe,Ye,1,Fe,Ve)),wo(i,E,F,!Oe);return}jp(i,a,E,l,f,v,F,K,fe)}function El(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var v=l[f],E=v.getSnapshot;v=v.value;try{if(!Fn(E(),v))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function wo(i,a,l,f){a&=~Tr,a&=~wl,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var v=a;0<v;){var E=31-un(v),F=1<<E;f[E]=-1,v&=~F}l!==0&&V(i,l,a)}function bu(){return(Vi&6)===0?(Tu(0),!1):!0}function If(){if(_i!==null){if(Ai===0)var i=_i.return;else i=_i,fa=ri=null,Fs(i),pc=null,mo=0,i=_i;for(;i!==null;)Cp(i.alternate,i),i=i.return;_i=null}}function wu(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,Kf(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),If(),tn=i,_i=l=ha(i.current,null),vi=a,Ai=0,ia=null,$s=!1,bl=ur(i,a),zf=!1,wc=na=Tr=wl=xo=Dn=0,ar=Ua=null,Sc=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var v=31-un(f),E=1<<v;a|=i[v],f&=~E}return vo=a,Yi(),l}function sh(i,a){ft=null,De.H=$h,a===s||a===u?(a=L(),Ai=3):a===c?(a=L(),Ai=4):Ai=a===xp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ia=a,_i===null&&(Dn=1,Qh(i,Ui(a,i.current)))}function hd(){var i=De.H;return De.H=$h,i===null?$h:i}function Op(){var i=De.A;return De.A=Um,i}function oh(){Dn=4,$s||(vi&4194048)!==vi&&Jr.current!==null||(bl=!0),(xo&134217727)===0&&(wl&134217727)===0||tn===null||wo(tn,vi,na,!1)}function lh(i,a,l){var f=Vi;Vi|=2;var v=hd(),E=Op();(tn!==i||vi!==a)&&(Ec=null,wu(i,a)),a=!1;var F=Dn;e:do try{if(Ai!==0&&_i!==null){var K=_i,fe=ia;switch(Ai){case 8:If(),F=6;break e;case 3:case 2:case 9:case 6:Jr.current===null&&(a=!0);var Oe=Ai;if(Ai=0,ia=null,So(i,K,fe,Oe),l&&bl){F=0;break e}break;default:Oe=Ai,Ai=0,ia=null,So(i,K,fe,Oe)}}Su(),F=Dn;break}catch(Ye){sh(i,Ye)}while(!0);return a&&i.shellSuspendCounter++,fa=ri=null,Vi=f,De.H=v,De.A=E,_i===null&&(tn=null,vi=0,Yi()),F}function Su(){for(;_i!==null;)dd(_i)}function Bp(i,a){var l=Vi;Vi|=2;var f=hd(),v=Op();tn!==i||vi!==a?(Ec=null,Tc=An()+500,wu(i,a)):bl=ur(i,a);e:do try{if(Ai!==0&&_i!==null){a=_i;var E=ia;t:switch(Ai){case 1:Ai=0,ia=null,So(i,a,E,1);break;case 2:case 9:if(b(E)){Ai=0,ia=null,kf(a);break}a=function(){Ai!==2&&Ai!==9||tn!==i||(Ai=7),ds(i)},E.then(a,a);break e;case 3:Ai=7;break e;case 4:Ai=5;break e;case 7:b(E)?(Ai=0,ia=null,kf(a)):(Ai=0,ia=null,So(i,a,E,7));break;case 5:var F=null;switch(_i.tag){case 26:F=_i.memoizedState;case 5:case 27:var K=_i;if(!F||cn(F)){Ai=0,ia=null;var fe=K.sibling;if(fe!==null)_i=fe;else{var Oe=K.return;Oe!==null?(_i=Oe,ch(Oe)):_i=null}break t}}Ai=0,ia=null,So(i,a,E,5);break;case 6:Ai=0,ia=null,So(i,a,E,6);break;case 8:If(),Dn=6;break e;default:throw Error(A(462))}}Np();break}catch(Ye){sh(i,Ye)}while(!0);return fa=ri=null,De.H=f,De.A=v,Vi=l,_i!==null?0:(tn=null,vi=0,Yi(),Dn)}function Np(){for(;_i!==null&&!wa();)dd(_i)}function dd(i){var a=Tp(i.alternate,i,vo);i.memoizedProps=i.pendingProps,a===null?ch(i):_i=a}function kf(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=gu(l,a,a.pendingProps,a.type,void 0,vi);break;case 11:a=gu(l,a,a.pendingProps,a.type.render,a.ref,vi);break;case 5:Fs(a);default:Cp(l,a),a=_i=nc(a,vo),a=Tp(l,a,vo)}i.memoizedProps=i.pendingProps,a===null?ch(i):_i=a}function So(i,a,l,f){fa=ri=null,Fs(a),pc=null,mo=0;var v=a.return;try{if(Nm(i,v,a,l,vi)){Dn=1,Qh(i,Ui(l,i.current)),_i=null;return}}catch(E){if(v!==null)throw _i=v,E;Dn=1,Qh(i,Ui(l,i.current)),_i=null;return}a.flags&32768?(Ei||f===1?i=!0:bl||(vi&536870912)!==0?i=!1:($s=i=!0,(f===2||f===9||f===3||f===6)&&(f=Jr.current,f!==null&&f.tag===13&&(f.flags|=16384))),Fp(a,i)):ch(a)}function ch(i){var a=i;do{if((a.flags&32768)!==0){Fp(a,$s);return}i=a.return;var l=Ep(a.alternate,a,vo);if(l!==null){_i=l;return}if(a=a.sibling,a!==null){_i=a;return}_i=a=i}while(a!==null);Dn===0&&(Dn=5)}function Fp(i,a){do{var l=Ap(i.alternate,i);if(l!==null){l.flags&=32767,_i=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){_i=i;return}_i=i=l}while(i!==null);Dn=6,_i=null}function jp(i,a,l,f,v,E,F,K,fe){i.cancelPendingCommit=null;do fd();while(Er!==0);if((Vi&6)!==0)throw Error(A(327));if(a!==null){if(a===i.current)throw Error(A(177));if(E=a.lanes|a.childLanes,E|=su,oe(i,l,E,F,K,fe),i===tn&&(_i=tn=null,vi=0),Ac=a,bo=i,vu=l,ld=E,cd=v,ud=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,uh(ys,function(){return pd(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=De.T,De.T=null,v=Ge.p,Ge.p=2,F=Vi,Vi|=4;try{Fm(i,a,l)}finally{Vi=F,Ge.p=v,De.T=f}}Er=1,Pf(),Up(),Vp()}}function Pf(){if(Er===1){Er=0;var i=bo,a=Ac,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=De.T,De.T=null;var f=Ge.p;Ge.p=2;var v=Vi;Vi|=4;try{Ip(a,i);var E=bd,F=Oh(i.containerInfo),K=E.focusedElem,fe=E.selectionRange;if(F!==K&&K&&K.ownerDocument&&Ql(K.ownerDocument.documentElement,K)){if(fe!==null&&nu(K)){var Oe=fe.start,Ye=fe.end;if(Ye===void 0&&(Ye=Oe),"selectionStart"in K)K.selectionStart=Oe,K.selectionEnd=Math.min(Ye,K.value.length);else{var et=K.ownerDocument||document,Fe=et&&et.defaultView||window;if(Fe.getSelection){var Ve=Fe.getSelection(),ai=K.textContent.length,Jt=Math.min(fe.start,ai),rn=fe.end===void 0?Jt:Math.min(fe.end,ai);!Ve.extend&&Jt>rn&&(F=rn,rn=Jt,Jt=F);var ze=yi(K,Jt),we=yi(K,rn);if(ze&&we&&(Ve.rangeCount!==1||Ve.anchorNode!==ze.node||Ve.anchorOffset!==ze.offset||Ve.focusNode!==we.node||Ve.focusOffset!==we.offset)){var ke=et.createRange();ke.setStart(ze.node,ze.offset),Ve.removeAllRanges(),Jt>rn?(Ve.addRange(ke),Ve.extend(we.node,we.offset)):(ke.setEnd(we.node,we.offset),Ve.addRange(ke))}}}}for(et=[],Ve=K;Ve=Ve.parentNode;)Ve.nodeType===1&&et.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<et.length;K++){var We=et[K];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}Ur=!!fh,bd=fh=null}finally{Vi=v,Ge.p=f,De.T=l}}i.current=a,Er=2}}function Up(){if(Er===2){Er=0;var i=bo,a=Ac,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=De.T,De.T=null;var f=Ge.p;Ge.p=2;var v=Vi;Vi|=4;try{Cf(i,a.alternate,a)}finally{Vi=v,Ge.p=f,De.T=l}}Er=3}}function Vp(){if(Er===4||Er===3){Er=0,Ne();var i=bo,a=Ac,l=vu,f=ud;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Er=5:(Er=0,Ac=bo=null,qp(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Tl=null),ae(l),a=a.stateNode,Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Ha,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=De.T,v=Ge.p,Ge.p=2,De.T=null;try{for(var E=i.onRecoverableError,F=0;F<f.length;F++){var K=f[F];E(K.value,{componentStack:K.stack})}}finally{De.T=a,Ge.p=v}}(vu&3)!==0&&fd(),ds(i),v=i.pendingLanes,(l&4194090)!==0&&(v&42)!==0?i===Df?Cc++:(Cc=0,Df=i):Cc=0,Tu(0)}}function qp(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Bs(a)))}function fd(i){return Pf(),Up(),Vp(),pd()}function pd(){if(Er!==5)return!1;var i=bo,a=ld;ld=0;var l=ae(vu),f=De.T,v=Ge.p;try{Ge.p=32>l?32:l,De.T=null,l=cd,cd=null;var E=bo,F=vu;if(Er=0,Ac=bo=null,vu=0,(Vi&6)!==0)throw Error(A(331));var K=Vi;if(Vi|=4,Pp(E.current),Li(E,E.current,F,l),Vi=K,Tu(0,!1),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Ha,E)}catch{}return!0}finally{Ge.p=v,De.T=f,qp(i,a)}}function To(i,a,l){a=Ui(l,a),a=mf(i.stateNode,a,2),i=le(i,a,2),i!==null&&(Rr(i,2),ds(i))}function $i(i,a,l){if(i.tag===3)To(i,i,l);else for(;a!==null;){if(a.tag===3){To(a,i,l);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Tl===null||!Tl.has(f))){i=Ui(l,i),l=_p(2),f=le(a,l,2),f!==null&&(vp(l,f,a,i),Rr(f,2),ds(f));break}}a=a.return}}function md(i,a,l){var f=i.pingCache;if(f===null){f=i.pingCache=new Vm;var v=new Set;f.set(a,v)}else v=f.get(a),v===void 0&&(v=new Set,f.set(a,v));v.has(l)||(zf=!0,v.add(l),i=Hp.bind(null,i,a,l),a.then(i,i))}function Hp(i,a,l){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,tn===i&&(vi&l)===l&&(Dn===4||Dn===3&&(vi&62914560)===vi&&300>An()-Sl?(Vi&2)===0&&wu(i,0):Tr|=l,wc===vi&&(wc=0)),ds(i)}function Lf(i,a){a===0&&(a=Ea()),i=Ra(i,a),i!==null&&(Rr(i,a),ds(i))}function Zp(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),Lf(i,l)}function Of(i,a){var l=0;switch(i.tag){case 13:var f=i.stateNode,v=i.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(A(314))}f!==null&&f.delete(a),Lf(i,l)}function uh(i,a){return an(i,a)}var hh=null,Al=null,gd=!1,Br=!1,Mc=!1,Cl=0;function ds(i){i!==Al&&i.next===null&&(Al===null?hh=Al=i:Al=Al.next=i),Br=!0,gd||(gd=!0,Ml())}function Tu(i,a){if(!Mc&&Br){Mc=!0;do for(var l=!1,f=hh;f!==null;){if(i!==0){var v=f.pendingLanes;if(v===0)var E=0;else{var F=f.suspendedLanes,K=f.pingedLanes;E=(1<<31-un(42|i)+1)-1,E&=v&~(F&~K),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(l=!0,Ff(f,E))}else E=vi,E=$n(f,f===tn?E:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(E&3)===0||ur(f,E)||(l=!0,Ff(f,E));f=f.next}while(l);Mc=!1}}function Gp(){Bf()}function Bf(){Br=gd=!1;var i=0;Cl!==0&&(mh()&&(i=Cl),Cl=0);for(var a=An(),l=null,f=hh;f!==null;){var v=f.next,E=Nf(f,a);E===0?(f.next=null,l===null?hh=v:l.next=v,v===null&&(Al=l)):(l=f,(i!==0||(E&3)!==0)&&(Br=!0)),f=v}Tu(i)}function Nf(i,a){for(var l=i.suspendedLanes,f=i.pingedLanes,v=i.expirationTimes,E=i.pendingLanes&-62914561;0<E;){var F=31-un(E),K=1<<F,fe=v[F];fe===-1?((K&l)===0||(K&f)!==0)&&(v[F]=Qt(K,a)):fe<=a&&(i.expiredLanes|=K),E&=~K}if(a=tn,l=vi,l=$n(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,l===0||i===a&&(Ai===2||Ai===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Bn(f),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||ur(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(f!==null&&Bn(f),ae(l)){case 2:case 8:l=Wi;break;case 32:l=ys;break;case 268435456:l=Sa;break;default:l=ys}return f=$p.bind(null,i),l=an(l,f),i.callbackPriority=a,i.callbackNode=l,a}return f!==null&&f!==null&&Bn(f),i.callbackPriority=2,i.callbackNode=null,2}function $p(i,a){if(Er!==0&&Er!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(fd()&&i.callbackNode!==l)return null;var f=vi;return f=$n(i,i===tn?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(xu(i,f,a),Nf(i,An()),i.callbackNode!=null&&i.callbackNode===l?$p.bind(null,i):null)}function Ff(i,a){if(fd())return null;xu(i,a,!0)}function Ml(){qm(function(){(Vi&6)!==0?an(xi,Gp):Bf()})}function yd(){return Cl===0&&(Cl=la()),Cl}function jf(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:jl(""+i)}function Uf(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function Xp(i,a,l,f,v){if(a==="submit"&&l&&l.stateNode===v){var E=jf((v[Le]||null).action),F=f.submitter;F&&(a=(a=F[Le]||null)?jf(a.formAction):F.getAttribute("formAction"),a!==null&&(E=a,F=null));var K=new No("action","action",null,f,v);i.push({event:K,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Cl!==0){var fe=F?Uf(v,F):new FormData(v);Hh(l,{pending:!0,data:fe,method:v.method,action:E},null,fe)}}else typeof E=="function"&&(K.preventDefault(),fe=F?Uf(v,F):new FormData(v),Hh(l,{pending:!0,data:fe,method:v.method,action:E},E,fe))},currentTarget:v}]})}}for(var Vf=0;Vf<ic.length;Vf++){var qf=ic[Vf],Yp=qf.toLowerCase(),Eu=qf[0].toUpperCase()+qf.slice(1);pr(Yp,"on"+Eu)}pr(no,"onAnimationEnd"),pr(Xo,"onAnimationIteration"),pr(ec,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(au,"onTransitionRun"),pr(Zu,"onTransitionStart"),pr(Qd,"onTransitionCancel"),pr(Gu,"onTransitionEnd"),hn("onMouseEnter",["mouseout","mouseover"]),hn("onMouseLeave",["mouseout","mouseover"]),hn("onPointerEnter",["pointerout","pointerover"]),hn("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_d=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Au));function Hf(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],v=f.event;f=f.listeners;e:{var E=void 0;if(a)for(var F=f.length-1;0<=F;F--){var K=f[F],fe=K.instance,Oe=K.currentTarget;if(K=K.listener,fe!==E&&v.isPropagationStopped())break e;E=K,v.currentTarget=Oe;try{E(v)}catch(Ye){Ku(Ye)}v.currentTarget=null,E=fe}else for(F=0;F<f.length;F++){if(K=f[F],fe=K.instance,Oe=K.currentTarget,K=K.listener,fe!==E&&v.isPropagationStopped())break e;E=K,v.currentTarget=Oe;try{E(v)}catch(Ye){Ku(Ye)}v.currentTarget=null,E=fe}}}}function hi(i,a){var l=a[Be];l===void 0&&(l=a[Be]=new Set);var f=i+"__bubble";l.has(f)||(Kp(a,i,2,!1),l.add(f))}function Cu(i,a,l){var f=0;a&&(f|=4),Kp(l,i,f,a)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Zf(i){if(!i[zc]){i[zc]=!0,Mi.forEach(function(l){l!=="selectionchange"&&(_d.has(l)||Cu(l,!1,i),Cu(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[zc]||(a[zc]=!0,Cu("selectionchange",!1,a))}}function Kp(i,a,l,f){switch(Ad(a)){case 2:var v=Wn;break;case 8:v=Eo;break;default:v=Rc}l=v.bind(null,a,l,i),v=void 0,!Es||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),f?v!==void 0?i.addEventListener(a,l,{capture:!0,passive:v}):i.addEventListener(a,l,!0):v!==void 0?i.addEventListener(a,l,{passive:v}):i.addEventListener(a,l,!1)}function Gf(i,a,l,f,v){var E=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var F=f.tag;if(F===3||F===4){var K=f.stateNode.containerInfo;if(K===v)break;if(F===4)for(F=f.return;F!==null;){var fe=F.tag;if((fe===3||fe===4)&&F.stateNode.containerInfo===v)return;F=F.return}for(;K!==null;){if(F=li(K),F===null)return;if(fe=F.tag,fe===5||fe===6||fe===26||fe===27){f=E=F;continue e}K=K.parentNode}}f=f.return}Ul(function(){var Oe=E,Ye=Xa(l),et=[];e:{var Fe=tc.get(i);if(Fe!==void 0){var Ve=No,ai=i;switch(i){case"keypress":if(ql(l)===0)break e;case"keydown":case"keyup":Ve=Kd;break;case"focusin":ai="focus",Ve=Gc;break;case"focusout":ai="blur",Ve=Gc;break;case"beforeblur":case"afterblur":Ve=Gc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Fo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Rh;break;case no:case Xo:case ec:Ve=Eh;break;case Gu:Ve=kh;break;case"scroll":case"scrollend":Ve=Zd;break;case"wheel":Ve=Ph;break;case"copy":case"cut":case"paste":Ve=Ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Dh;break;case"toggle":case"beforetoggle":Ve=Qa}var Jt=(a&4)!==0,rn=!Jt&&(i==="scroll"||i==="scrollend"),ze=Jt?Fe!==null?Fe+"Capture":null:Fe;Jt=[];for(var we=Oe,ke;we!==null;){var We=we;if(ke=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||ke===null||ze===null||(We=Ts(we,ze),We!=null&&Jt.push(Xs(we,We,ke))),rn)break;we=we.return}0<Jt.length&&(Fe=new Ve(Fe,ai,null,l,Ye),et.push({event:Fe,listeners:Jt}))}}if((a&7)===0){e:{if(Fe=i==="mouseover"||i==="pointerover",Ve=i==="mouseout"||i==="pointerout",Fe&&l!==Fu&&(ai=l.relatedTarget||l.fromElement)&&(li(ai)||ai[Xe]))break e;if((Ve||Fe)&&(Fe=Ye.window===Ye?Ye:(Fe=Ye.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,Ve?(ai=l.relatedTarget||l.toElement,Ve=Oe,ai=ai?li(ai):null,ai!==null&&(rn=N(ai),Jt=ai.tag,ai!==rn||Jt!==5&&Jt!==27&&Jt!==6)&&(ai=null)):(Ve=null,ai=Oe),Ve!==ai)){if(Jt=Zl,We="onMouseLeave",ze="onMouseEnter",we="mouse",(i==="pointerout"||i==="pointerover")&&(Jt=Dh,We="onPointerLeave",ze="onPointerEnter",we="pointer"),rn=Ve==null?Fe:Qi(Ve),ke=ai==null?Fe:Qi(ai),Fe=new Jt(We,we+"leave",Ve,l,Ye),Fe.target=rn,Fe.relatedTarget=ke,We=null,li(Ye)===Oe&&(Jt=new Jt(ze,we+"enter",ai,l,Ye),Jt.target=ke,Jt.relatedTarget=rn,We=Jt),rn=We,Ve&&ai)t:{for(Jt=Ve,ze=ai,we=0,ke=Jt;ke;ke=_a(ke))we++;for(ke=0,We=ze;We;We=_a(We))ke++;for(;0<we-ke;)Jt=_a(Jt),we--;for(;0<ke-we;)ze=_a(ze),ke--;for(;we--;){if(Jt===ze||ze!==null&&Jt===ze.alternate)break t;Jt=_a(Jt),ze=_a(ze)}Jt=null}else Jt=null;Ve!==null&&vd(et,Fe,Ve,Jt,!1),ai!==null&&rn!==null&&vd(et,rn,ai,Jt,!0)}}e:{if(Fe=Oe?Qi(Oe):window,Ve=Fe.nodeName&&Fe.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Fe.type==="file")var Bt=eo;else if(ki(Fe))if(Hr)Bt=tu;else{Bt=Vo;var wi=Kl}else Ve=Fe.nodeName,!Ve||Ve.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?Oe&&Ss(Oe.elementType)&&(Bt=eo):Bt=Wl;if(Bt&&(Bt=Bt(i,Oe))){Ms(et,Bt,l,Ye);break e}wi&&wi(i,Fe,Oe),i==="focusout"&&Oe&&Fe.type==="number"&&Oe.memoizedProps.value!=null&&mi(Fe,"number",Fe.value)}switch(wi=Oe?Qi(Oe):window,i){case"focusin":(ki(wi)||wi.contentEditable==="true")&&(to=wi,Go=Oe,$o=null);break;case"focusout":$o=Go=to=null;break;case"mousedown":ru=!0;break;case"contextmenu":case"mouseup":case"dragend":ru=!1,Jl(et,l,Ye);break;case"selectionchange":if(Zo)break;case"keydown":case"keyup":Jl(et,l,Ye)}var Yt;if($l)e:{switch(i){case"compositionstart":var ii="onCompositionStart";break e;case"compositionend":ii="onCompositionEnd";break e;case"compositionupdate":ii="onCompositionUpdate";break e}ii=void 0}else jo?Lh(i,l)&&(ii="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ii="onCompositionStart");ii&&(Wc&&l.locale!=="ko"&&(jo||ii!=="onCompositionStart"?ii==="onCompositionEnd"&&jo&&(Yt=Th()):(Ya=Ye,qc="value"in Ya?Ya.value:Ya.textContent,jo=!0)),wi=Ln(Oe,ii),0<wi.length&&(ii=new Uu(ii,i,null,l,Ye),et.push({event:ii,listeners:wi}),Yt?ii.data=Yt:(Yt=sn(l),Yt!==null&&(ii.data=Yt)))),(Yt=Kc?oi(i,l):Jc(i,l))&&(ii=Ln(Oe,"onBeforeInput"),0<ii.length&&(wi=new Uu("onBeforeInput","beforeinput",null,l,Ye),et.push({event:wi,listeners:ii}),wi.data=Yt)),Xp(et,i,Oe,l,Ye)}Hf(et,a)})}function Xs(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Ln(i,a){for(var l=a+"Capture",f=[];i!==null;){var v=i,E=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||E===null||(v=Ts(i,l),v!=null&&f.unshift(Xs(i,v,E)),v=Ts(i,a),v!=null&&f.push(Xs(i,v,E))),i.tag===3)return f;i=i.return}return[]}function _a(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function vd(i,a,l,f,v){for(var E=a._reactName,F=[];l!==null&&l!==f;){var K=l,fe=K.alternate,Oe=K.stateNode;if(K=K.tag,fe!==null&&fe===f)break;K!==5&&K!==26&&K!==27||Oe===null||(fe=Oe,v?(Oe=Ts(l,E),Oe!=null&&F.unshift(Xs(l,Oe,fe))):v||(Oe=Ts(l,E),Oe!=null&&F.push(Xs(l,Oe,fe)))),l=l.return}F.length!==0&&i.push({event:a,listeners:F})}var Wp=/\r\n?/g,Qp=/\u0000|\uFFFD/g;function xd(i){return(typeof i=="string"?i:""+i).replace(Wp,`
`).replace(Qp,"")}function Jp(i,a){return a=xd(a),xd(i)===a}function dh(){}function qi(i,a,l,f,v,E){switch(l){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||ws(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&ws(i,""+f);break;case"className":Qn(i,"class",f);break;case"tabIndex":Qn(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(i,l,f);break;case"style":Fl(i,f,E);break;case"data":if(a!=="object"){Qn(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=jl(""+f),i.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(l==="formAction"?(a!=="input"&&qi(i,a,"name",v.name,v,null),qi(i,a,"formEncType",v.formEncType,v,null),qi(i,a,"formMethod",v.formMethod,v,null),qi(i,a,"formTarget",v.formTarget,v,null)):(qi(i,a,"encType",v.encType,v,null),qi(i,a,"method",v.method,v,null),qi(i,a,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=jl(""+f),i.setAttribute(l,f);break;case"onClick":f!=null&&(i.onclick=dh);break;case"onScroll":f!=null&&hi("scroll",i);break;case"onScrollEnd":f!=null&&hi("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(A(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(A(60));i.innerHTML=l}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}l=jl(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""+f):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":f===!0?i.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,f):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(l,f):i.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(l):i.setAttribute(l,f);break;case"popover":hi("beforetoggle",i),hi("toggle",i),Po(i,"popover",f);break;case"xlinkActuate":yn(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":yn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":yn(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":yn(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":yn(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":yn(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":yn(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":yn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":yn(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Po(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Sh.get(l)||l,Po(i,l,f))}}function $f(i,a,l,f,v,E){switch(l){case"style":Fl(i,f,E);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(A(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(A(60));i.innerHTML=l}}break;case"children":typeof f=="string"?ws(i,f):(typeof f=="number"||typeof f=="bigint")&&ws(i,""+f);break;case"onScroll":f!=null&&hi("scroll",i);break;case"onScrollEnd":f!=null&&hi("scrollend",i);break;case"onClick":f!=null&&(i.onclick=dh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hi.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),a=l.slice(2,v?l.length-7:void 0),E=i[Le]||null,E=E!=null?E[l]:null,typeof E=="function"&&i.removeEventListener(a,E,v),typeof f=="function")){typeof E!="function"&&E!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,f,v);break e}l in i?i[l]=f:f===!0?i.setAttribute(l,""):Po(i,l,f)}}}function sr(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":hi("error",i),hi("load",i);var f=!1,v=!1,E;for(E in l)if(l.hasOwnProperty(E)){var F=l[E];if(F!=null)switch(E){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(A(137,a));default:qi(i,a,E,F,l,null)}}v&&qi(i,a,"srcSet",l.srcSet,l,null),f&&qi(i,a,"src",l.src,l,null);return;case"input":hi("invalid",i);var K=E=F=v=null,fe=null,Oe=null;for(f in l)if(l.hasOwnProperty(f)){var Ye=l[f];if(Ye!=null)switch(f){case"name":v=Ye;break;case"type":F=Ye;break;case"checked":fe=Ye;break;case"defaultChecked":Oe=Ye;break;case"value":E=Ye;break;case"defaultValue":K=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(A(137,a));break;default:qi(i,a,f,Ye,l,null)}}$a(i,E,K,fe,Oe,F,v,!1),Ir(i);return;case"select":hi("invalid",i),f=F=E=null;for(v in l)if(l.hasOwnProperty(v)&&(K=l[v],K!=null))switch(v){case"value":E=K;break;case"defaultValue":F=K;break;case"multiple":f=K;default:qi(i,a,v,K,l,null)}a=E,l=F,i.multiple=!!f,a!=null?bs(i,!!f,a,!1):l!=null&&bs(i,!!f,l,!0);return;case"textarea":hi("invalid",i),E=v=f=null;for(F in l)if(l.hasOwnProperty(F)&&(K=l[F],K!=null))switch(F){case"value":f=K;break;case"defaultValue":v=K;break;case"children":E=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(A(91));break;default:qi(i,a,F,K,l,null)}Ws(i,f,v,E),Ir(i);return;case"option":for(fe in l)if(l.hasOwnProperty(fe)&&(f=l[fe],f!=null))switch(fe){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:qi(i,a,fe,f,l,null)}return;case"dialog":hi("beforetoggle",i),hi("toggle",i),hi("cancel",i),hi("close",i);break;case"iframe":case"object":hi("load",i);break;case"video":case"audio":for(f=0;f<Au.length;f++)hi(Au[f],i);break;case"image":hi("error",i),hi("load",i);break;case"details":hi("toggle",i);break;case"embed":case"source":case"link":hi("error",i),hi("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in l)if(l.hasOwnProperty(Oe)&&(f=l[Oe],f!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(A(137,a));default:qi(i,a,Oe,f,l,null)}return;default:if(Ss(a)){for(Ye in l)l.hasOwnProperty(Ye)&&(f=l[Ye],f!==void 0&&$f(i,a,Ye,f,l,void 0));return}}for(K in l)l.hasOwnProperty(K)&&(f=l[K],f!=null&&qi(i,a,K,f,l,null))}function Xf(i,a,l,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,E=null,F=null,K=null,fe=null,Oe=null,Ye=null;for(Ve in l){var et=l[Ve];if(l.hasOwnProperty(Ve)&&et!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":fe=et;default:f.hasOwnProperty(Ve)||qi(i,a,Ve,null,f,et)}}for(var Fe in f){var Ve=f[Fe];if(et=l[Fe],f.hasOwnProperty(Fe)&&(Ve!=null||et!=null))switch(Fe){case"type":E=Ve;break;case"name":v=Ve;break;case"checked":Oe=Ve;break;case"defaultChecked":Ye=Ve;break;case"value":F=Ve;break;case"defaultValue":K=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(A(137,a));break;default:Ve!==et&&qi(i,a,Fe,Ve,f,et)}}Ga(i,F,K,fe,Oe,Ye,E,v);return;case"select":Ve=F=K=Fe=null;for(E in l)if(fe=l[E],l.hasOwnProperty(E)&&fe!=null)switch(E){case"value":break;case"multiple":Ve=fe;default:f.hasOwnProperty(E)||qi(i,a,E,null,f,fe)}for(v in f)if(E=f[v],fe=l[v],f.hasOwnProperty(v)&&(E!=null||fe!=null))switch(v){case"value":Fe=E;break;case"defaultValue":K=E;break;case"multiple":F=E;default:E!==fe&&qi(i,a,v,E,f,fe)}a=K,l=F,f=Ve,Fe!=null?bs(i,!!l,Fe,!1):!!f!=!!l&&(a!=null?bs(i,!!l,a,!0):bs(i,!!l,l?[]:"",!1));return;case"textarea":Ve=Fe=null;for(K in l)if(v=l[K],l.hasOwnProperty(K)&&v!=null&&!f.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:qi(i,a,K,null,f,v)}for(F in f)if(v=f[F],E=l[F],f.hasOwnProperty(F)&&(v!=null||E!=null))switch(F){case"value":Fe=v;break;case"defaultValue":Ve=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(A(91));break;default:v!==E&&qi(i,a,F,v,f,E)}Uc(i,Fe,Ve);return;case"option":for(var ai in l)if(Fe=l[ai],l.hasOwnProperty(ai)&&Fe!=null&&!f.hasOwnProperty(ai))switch(ai){case"selected":i.selected=!1;break;default:qi(i,a,ai,null,f,Fe)}for(fe in f)if(Fe=f[fe],Ve=l[fe],f.hasOwnProperty(fe)&&Fe!==Ve&&(Fe!=null||Ve!=null))switch(fe){case"selected":i.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:qi(i,a,fe,Fe,f,Ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Jt in l)Fe=l[Jt],l.hasOwnProperty(Jt)&&Fe!=null&&!f.hasOwnProperty(Jt)&&qi(i,a,Jt,null,f,Fe);for(Oe in f)if(Fe=f[Oe],Ve=l[Oe],f.hasOwnProperty(Oe)&&Fe!==Ve&&(Fe!=null||Ve!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(A(137,a));break;default:qi(i,a,Oe,Fe,f,Ve)}return;default:if(Ss(a)){for(var rn in l)Fe=l[rn],l.hasOwnProperty(rn)&&Fe!==void 0&&!f.hasOwnProperty(rn)&&$f(i,a,rn,void 0,f,Fe);for(Ye in f)Fe=f[Ye],Ve=l[Ye],!f.hasOwnProperty(Ye)||Fe===Ve||Fe===void 0&&Ve===void 0||$f(i,a,Ye,Fe,f,Ve);return}}for(var ze in l)Fe=l[ze],l.hasOwnProperty(ze)&&Fe!=null&&!f.hasOwnProperty(ze)&&qi(i,a,ze,null,f,Fe);for(et in f)Fe=f[et],Ve=l[et],!f.hasOwnProperty(et)||Fe===Ve||Fe==null&&Ve==null||qi(i,a,et,Fe,f,Ve)}var fh=null,bd=null;function zl(i){return i.nodeType===9?i:i.ownerDocument}function wd(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yf(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function ph(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Mu=null;function mh(){var i=window.event;return i&&i.type==="popstate"?i===Mu?!1:(Mu=i,!0):(Mu=null,!1)}var Sd=typeof setTimeout=="function"?setTimeout:void 0,Kf=typeof clearTimeout=="function"?clearTimeout:void 0,Td=typeof Promise=="function"?Promise:void 0,qm=typeof queueMicrotask=="function"?queueMicrotask:typeof Td<"u"?function(i){return Td.resolve(null).then(i).catch(n)}:Sd;function n(i){setTimeout(function(){throw i})}function t(i){return i==="head"}function r(i,a){var l=a,f=0,v=0;do{var E=l.nextSibling;if(i.removeChild(l),E&&E.nodeType===8)if(l=E.data,l==="/$"){if(0<f&&8>f){l=f;var F=i.ownerDocument;if(l&1&&B(F.documentElement),l&2&&B(F.body),l&4)for(l=F.head,B(l),F=l.firstChild;F;){var K=F.nextSibling,fe=F.nodeName;F[ci]||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&F.rel.toLowerCase()==="stylesheet"||l.removeChild(F),F=K}}if(v===0){i.removeChild(E),Dr(a);return}v--}else l==="$"||l==="$?"||l==="$!"?v++:f=l.charCodeAt(0)-48;else f=0;l=E}while(l);Dr(a)}function o(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":o(l),Wt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function h(i,a,l,f){for(;i.nodeType===1;){var v=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[ci])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(E=i.getAttribute("rel"),E==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(E!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(E=i.getAttribute("src"),(E!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&E&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var E=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===E)return i}else return i;if(i=S(i.nextSibling),i===null)break}return null}function g(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=S(i.nextSibling),i===null))return null;return i}function y(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function x(i,a){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")a();else{var f=function(){a(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function S(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var D=null;function R(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function P(i,a,l){switch(a=zl(l),i){case"html":if(i=a.documentElement,!i)throw Error(A(452));return i;case"head":if(i=a.head,!i)throw Error(A(453));return i;case"body":if(i=a.body,!i)throw Error(A(454));return i;default:throw Error(A(451))}}function B(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Wt(i)}var j=new Map,Z=new Set;function Y(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ie=Ge.d;Ge.d={f:he,r:Ce,D:Ue,C:tt,L:vt,m:Vt,X:gt,S:yt,M:It};function he(){var i=ie.f(),a=bu();return i||a}function Ce(i){var a=ni(i);a!==null&&a.tag===5&&a.type==="form"?Zh(a):ie.r(i)}var me=typeof document>"u"?null:document;function Ee(i,a,l){var f=me;if(f&&typeof a=="string"&&a){var v=dr(a);v='link[rel="'+i+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),Z.has(v)||(Z.add(v),i={rel:i,crossOrigin:l,href:a},f.querySelector(v)===null&&(a=f.createElement("link"),sr(a,"link",i),Ut(a),f.head.appendChild(a)))}}function Ue(i){ie.D(i),Ee("dns-prefetch",i,null)}function tt(i,a){ie.C(i,a),Ee("preconnect",i,a)}function vt(i,a,l){ie.L(i,a,l);var f=me;if(f&&i&&a){var v='link[rel="preload"][as="'+dr(a)+'"]';a==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+dr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+dr(l.imageSizes)+'"]')):v+='[href="'+dr(i)+'"]';var E=v;switch(a){case"style":E=_t(i);break;case"script":E=Zt(i)}j.has(E)||(i=J({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),j.set(E,i),f.querySelector(v)!==null||a==="style"&&f.querySelector(He(E))||a==="script"&&f.querySelector(Ci(E))||(a=f.createElement("link"),sr(a,"link",i),Ut(a),f.head.appendChild(a)))}}function Vt(i,a){ie.m(i,a);var l=me;if(l&&i){var f=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+dr(f)+'"][href="'+dr(i)+'"]',E=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Zt(i)}if(!j.has(E)&&(i=J({rel:"modulepreload",href:i},a),j.set(E,i),l.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ci(E)))return}f=l.createElement("link"),sr(f,"link",i),Ut(f),l.head.appendChild(f)}}}function yt(i,a,l){ie.S(i,a,l);var f=me;if(f&&i){var v=Bi(f).hoistableStyles,E=_t(i);a=a||"default";var F=v.get(E);if(!F){var K={loading:0,preload:null};if(F=f.querySelector(He(E)))K.loading=5;else{i=J({rel:"stylesheet",href:i,"data-precedence":a},l),(l=j.get(E))&&aa(i,l);var fe=F=f.createElement("link");Ut(fe),sr(fe,"link",i),fe._p=new Promise(function(Oe,Ye){fe.onload=Oe,fe.onerror=Ye}),fe.addEventListener("load",function(){K.loading|=1}),fe.addEventListener("error",function(){K.loading|=2}),K.loading|=4,bn(F,a,f)}F={type:"stylesheet",instance:F,count:1,state:K},v.set(E,F)}}}function gt(i,a){ie.X(i,a);var l=me;if(l&&i){var f=Bi(l).hoistableScripts,v=Zt(i),E=f.get(v);E||(E=l.querySelector(Ci(v)),E||(i=J({src:i,async:!0},a),(a=j.get(v))&&Zn(i,a),E=l.createElement("script"),Ut(E),sr(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},f.set(v,E))}}function It(i,a){ie.M(i,a);var l=me;if(l&&i){var f=Bi(l).hoistableScripts,v=Zt(i),E=f.get(v);E||(E=l.querySelector(Ci(v)),E||(i=J({src:i,async:!0,type:"module"},a),(a=j.get(v))&&Zn(i,a),E=l.createElement("script"),Ut(E),sr(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},f.set(v,E))}}function At(i,a,l,f){var v=(v=Et.current)?Y(v):null;if(!v)throw Error(A(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=_t(l.href),l=Bi(v).hoistableStyles,f=l.get(a),f||(f={type:"style",instance:null,count:0,state:null},l.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=_t(l.href);var E=Bi(v).hoistableStyles,F=E.get(i);if(F||(v=v.ownerDocument||v,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(i,F),(E=v.querySelector(He(i)))&&!E._p&&(F.instance=E,F.state.loading=5),j.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},j.set(i,l),E||Dt(v,i,l,F.state))),a&&f===null)throw Error(A(528,""));return F}if(a&&f!==null)throw Error(A(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Zt(l),l=Bi(v).hoistableScripts,f=l.get(a),f||(f={type:"script",instance:null,count:0,state:null},l.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(A(444,i))}}function _t(i){return'href="'+dr(i)+'"'}function He(i){return'link[rel="stylesheet"]['+i+"]"}function kt(i){return J({},i,{"data-precedence":i.precedence,precedence:null})}function Dt(i,a,l,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),sr(a,"link",l),Ut(a),i.head.appendChild(a))}function Zt(i){return'[src="'+dr(i)+'"]'}function Ci(i){return"script[async]"+i}function Oi(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+dr(l.href)+'"]');if(f)return a.instance=f,Ut(f),f;var v=J({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Ut(f),sr(f,"style",v),bn(f,l.precedence,i),a.instance=f;case"stylesheet":v=_t(l.href);var E=i.querySelector(He(v));if(E)return a.state.loading|=4,a.instance=E,Ut(E),E;f=kt(l),(v=j.get(v))&&aa(f,v),E=(i.ownerDocument||i).createElement("link"),Ut(E);var F=E;return F._p=new Promise(function(K,fe){F.onload=K,F.onerror=fe}),sr(E,"link",f),a.state.loading|=4,bn(E,l.precedence,i),a.instance=E;case"script":return E=Zt(l.src),(v=i.querySelector(Ci(E)))?(a.instance=v,Ut(v),v):(f=l,(v=j.get(E))&&(f=J({},l),Zn(f,v)),i=i.ownerDocument||i,v=i.createElement("script"),Ut(v),sr(v,"link",f),i.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(A(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,bn(f,l.precedence,i));return a.instance}function bn(i,a,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,E=v,F=0;F<f.length;F++){var K=f[F];if(K.dataset.precedence===a)E=K;else if(E!==v)break}E?E.parentNode.insertBefore(i,E.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function aa(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Zn(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var wn=null;function Ar(i,a,l){if(wn===null){var f=new Map,v=wn=new Map;v.set(l,f)}else v=wn,f=v.get(l),f||(f=new Map,v.set(l,f));if(f.has(i))return f;for(f.set(i,null),l=l.getElementsByTagName(i),v=0;v<l.length;v++){var E=l[v];if(!(E[ci]||E[ue]||i==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var F=E.getAttribute(a)||"";F=i+F;var K=f.get(F);K?K.push(E):f.set(F,[E])}}return f}function Cr(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function Nr(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function cn(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var gn=null;function Mr(){}function or(i,a,l){if(gn===null)throw Error(A(475));var f=gn;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=_t(l.href),E=i.querySelector(He(v));if(E){i=E._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=On.bind(f),i.then(f,f)),a.state.loading|=4,a.instance=E,Ut(E);return}E=i.ownerDocument||i,l=kt(l),(v=j.get(v))&&aa(l,v),E=E.createElement("link"),Ut(E);var F=E;F._p=new Promise(function(K,fe){F.onload=K,F.onerror=fe}),sr(E,"link",l),a.instance=E}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(f.count++,a=On.bind(f),i.addEventListener("load",a),i.addEventListener("error",a))}}function Fr(){if(gn===null)throw Error(A(475));var i=gn;return i.stylesheets&&i.count===0&&zr(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&zr(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function On(){if(this.count--,this.count===0){if(this.stylesheets)zr(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var jr=null;function zr(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,jr=new Map,a.forEach(bi,i),jr=null,On.call(i))}function bi(i,a){if(!(a.state.loading&4)){var l=jr.get(i);if(l)var f=l.get(null);else{l=new Map,jr.set(i,l);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<v.length;E++){var F=v[E];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(l.set(F.dataset.precedence,F),f=F)}f&&l.set(null,f)}v=a.instance,F=v.getAttribute("data-precedence"),E=l.get(F)||f,E===f&&l.set(null,v),l.set(F,v),this.count++,f=On.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),E?E.parentNode.insertBefore(v,E.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),a.state.loading|=4}}var Ri={$$typeof:Pe,Provider:null,Consumer:null,_currentValue:Qe,_currentValue2:Qe,_threadCount:0};function Xi(i,a,l,f,v,E,F,K){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Aa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Aa(0),this.hiddenUpdates=Aa(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=E,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Xr(i,a,l,f,v,E,F,K,fe,Oe,Ye,et){return i=new Xi(i,a,l,F,K,fe,Oe,et),a=1,E===!0&&(a|=24),E=gr(3,null,null,a),i.current=E,E.stateNode=i,a=al(),a.refCount++,i.pooledCache=a,a.refCount++,E.memoizedState={element:f,isDehydrated:l,cache:a},Q(E),i}function nn(i){return i?(i=ua,i):ua}function Dc(i,a,l,f,v,E){v=nn(v),f.context===null?f.context=v:f.pendingContext=v,f=ne(a),f.payload={element:l},E=E===void 0?null:E,E!==null&&(f.callback=E),l=le(i,f,a),l!==null&&(ra(l,i,a),de(l,i,a))}function fs(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Va(i,a){fs(i,a),(i=i.alternate)&&fs(i,a)}function va(i){if(i.tag===13){var a=Ra(i,67108864);a!==null&&ra(a,i,67108864),Va(i,67108864)}}var Ur=!0;function Wn(i,a,l,f){var v=De.T;De.T=null;var E=Ge.p;try{Ge.p=2,Rc(i,a,l,f)}finally{Ge.p=E,De.T=v}}function Eo(i,a,l,f){var v=De.T;De.T=null;var E=Ge.p;try{Ge.p=8,Rc(i,a,l,f)}finally{Ge.p=E,De.T=v}}function Rc(i,a,l,f){if(Ur){var v=Ed(f);if(v===null)Gf(i,a,f,gh,l),em(i,f);else if(Zm(v,i,a,l,f))f.stopPropagation();else if(em(i,f),a&4&&-1<Hm.indexOf(i)){for(;v!==null;){var E=ni(v);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var F=jt(E.pendingLanes);if(F!==0){var K=E;for(K.pendingLanes|=2,K.entangledLanes|=2;F;){var fe=1<<31-un(F);K.entanglements[1]|=fe,F&=~fe}ds(E),(Vi&6)===0&&(Tc=An()+500,Tu(0))}}break;case 13:K=Ra(E,2),K!==null&&ra(K,E,2),bu(),Va(E,2)}if(E=Ed(f),E===null&&Gf(i,a,f,gh,l),E===v)break;v=E}v!==null&&f.stopPropagation()}else Gf(i,a,f,null,l)}}function Ed(i){return i=Xa(i),yh(i)}var gh=null;function yh(i){if(gh=null,i=li(i),i!==null){var a=N(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=M(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return gh=i,null}function Ad(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nl()){case xi:return 2;case Wi:return 8;case ys:case _s:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var ps=!1,Ao=null,Co=null,Dl=null,_h=new Map,vh=new Map,Rl=[],Hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function em(i,a){switch(i){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":Dl=null;break;case"pointerover":case"pointerout":_h.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(a.pointerId)}}function xh(i,a,l,f,v,E){return i===null||i.nativeEvent!==E?(i={blockedOn:a,domEventName:l,eventSystemFlags:f,nativeEvent:E,targetContainers:[v]},a!==null&&(a=ni(a),a!==null&&va(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function Zm(i,a,l,f,v){switch(a){case"focusin":return Ao=xh(Ao,i,a,l,f,v),!0;case"dragenter":return Co=xh(Co,i,a,l,f,v),!0;case"mouseover":return Dl=xh(Dl,i,a,l,f,v),!0;case"pointerover":var E=v.pointerId;return _h.set(E,xh(_h.get(E)||null,i,a,l,f,v)),!0;case"gotpointercapture":return E=v.pointerId,vh.set(E,xh(vh.get(E)||null,i,a,l,f,v)),!0}return!1}function qa(i){var a=li(i.target);if(a!==null){var l=N(a);if(l!==null){if(a=l.tag,a===13){if(a=M(l),a!==null){i.blockedOn=a,xe(i.priority,function(){if(l.tag===13){var f=ya();f=W(f);var v=Ra(l,f);v!==null&&ra(v,l,f),Va(l,f)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ic(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Ed(i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);Fu=f,l.target.dispatchEvent(f),Fu=null}else return a=ni(l),a!==null&&va(a),i.blockedOn=l,!1;a.shift()}return!0}function Wf(i,a,l){Ic(i)&&l.delete(a)}function Gm(){ps=!1,Ao!==null&&Ic(Ao)&&(Ao=null),Co!==null&&Ic(Co)&&(Co=null),Dl!==null&&Ic(Dl)&&(Dl=null),_h.forEach(Wf),vh.forEach(Wf)}function Cd(i,a){i.blockedOn===a&&(i.blockedOn=null,ps||(ps=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,Gm)))}var Md=null;function lr(i){Md!==i&&(Md=i,_.unstable_scheduleCallback(_.unstable_NormalPriority,function(){Md===i&&(Md=null);for(var a=0;a<i.length;a+=3){var l=i[a],f=i[a+1],v=i[a+2];if(typeof f!="function"){if(yh(f||l)===null)continue;break}var E=ni(l);E!==null&&(i.splice(a,3),a-=3,Hh(E,{pending:!0,data:v,method:l.method,action:f},f,v))}}))}function Dr(i){function a(fe){return Cd(fe,i)}Ao!==null&&Cd(Ao,i),Co!==null&&Cd(Co,i),Dl!==null&&Cd(Dl,i),_h.forEach(a),vh.forEach(a);for(var l=0;l<Rl.length;l++){var f=Rl[l];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Rl.length&&(l=Rl[0],l.blockedOn===null);)qa(l),l.blockedOn===null&&Rl.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var v=l[f],E=l[f+1],F=v[Le]||null;if(typeof E=="function")F||lr(l);else if(F){var K=null;if(E&&E.hasAttribute("formAction")){if(v=E,F=E[Le]||null)K=F.formAction;else if(yh(v)!==null)continue}else K=F.action;typeof K=="function"?l[f+1]=K:(l.splice(f,3),f-=3),lr(l)}}}function Mo(i){this._internalRoot=i}sa.prototype.render=Mo.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(A(409));var l=a.current,f=ya();Dc(l,f,i,a,null,null)},sa.prototype.unmount=Mo.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Dc(i.current,2,null,i,null,null),bu(),a[Xe]=null}};function sa(i){this._internalRoot=i}sa.prototype.unstable_scheduleHydration=function(i){if(i){var a=ye();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Rl.length&&a!==0&&a<Rl[l].priority;l++);Rl.splice(l,0,i),l===0&&qa(i)}};var Il=w.version;if(Il!=="19.1.1")throw Error(A(527,Il,"19.1.1"));Ge.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(A(188)):(i=Object.keys(i).join(","),Error(A(268,i)));return i=G(a),i=i!==null?H(i):null,i=i===null?null:i.stateNode,i};var Ys={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:De,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{Ha=tm.inject(Ys),Gn=tm}catch{}}return Jf.createRoot=function(i,a){if(!k(i))throw Error(A(299));var l=!1,f="",v=pf,E=ml,F=pu,K=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(F=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(K=a.unstable_transitionCallbacks)),a=Xr(i,1,!1,null,null,l,f,v,E,F,K,null),i[Xe]=a.current,Zf(i),new Mo(a)},Jf.hydrateRoot=function(i,a,l){if(!k(i))throw Error(A(299));var f=!1,v="",E=pf,F=ml,K=pu,fe=null,Oe=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(F=l.onCaughtError),l.onRecoverableError!==void 0&&(K=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(fe=l.unstable_transitionCallbacks),l.formState!==void 0&&(Oe=l.formState)),a=Xr(i,1,!0,a,l??null,f,v,E,F,K,fe,Oe),a.context=nn(null),l=a.current,f=ya(),f=W(f),v=ne(f),v.callback=null,le(l,v,f),l=f,a.current.lanes=l,Rr(a,l),ds(a),i[Xe]=a.current,Zf(i),new sa(a)},Jf.version="19.1.1",Jf}var ey;function ox(){if(ey)return Ym.exports;ey=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(w){console.error(w)}}return _(),Ym.exports=sx(),Ym.exports}var lx=ox();const cx=xm(lx);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=_=>_.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hx=_=>_.replace(/^([A-Z])|[\s-_]+(\w)/g,(w,C,A)=>A?A.toUpperCase():C.toLowerCase()),ty=_=>{const w=hx(_);return w.charAt(0).toUpperCase()+w.slice(1)},Oy=(..._)=>_.filter((w,C,A)=>!!w&&w.trim()!==""&&A.indexOf(w)===C).join(" ").trim(),dx=_=>{for(const w in _)if(w.startsWith("aria-")||w==="role"||w==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=ee.forwardRef(({color:_="currentColor",size:w=24,strokeWidth:C=2,absoluteStrokeWidth:A,className:k="",children:N,iconNode:M,...d},G)=>ee.createElement("svg",{ref:G,...fx,width:w,height:w,stroke:_,strokeWidth:A?Number(C)*24/Number(w):C,className:Oy("lucide",k),...!N&&!dx(d)&&{"aria-hidden":"true"},...d},[...M.map(([H,J])=>ee.createElement(H,J)),...Array.isArray(N)?N:[N]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=(_,w)=>{const C=ee.forwardRef(({className:A,...k},N)=>ee.createElement(px,{ref:N,iconNode:w,className:Oy(`lucide-${ux(ty(_))}`,`lucide-${_}`,A),...k}));return C.displayName=ty(_),C};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gx=Nc("check",mx);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Mg=Nc("chevron-down",yx);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],By=Nc("chevron-up",_x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zg=Nc("circle-alert",vx);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ny=Nc("clock",xx);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],iy=Nc("cloud",bx);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Sx=Nc("globe",wx);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Ex=Nc("pause",Tx);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Cx=Nc("play",Ax);function ny(_,w){if(typeof _=="function")return _(w);_!=null&&(_.current=w)}function Fy(..._){return w=>{let C=!1;const A=_.map(k=>{const N=ny(k,w);return!C&&typeof N=="function"&&(C=!0),N});if(C)return()=>{for(let k=0;k<A.length;k++){const N=A[k];typeof N=="function"?N():ny(_[k],null)}}}}function Tn(..._){return ee.useCallback(Fy(..._),_)}var Ld=ee.forwardRef((_,w)=>{const{children:C,...A}=_,k=ee.Children.toArray(C),N=k.find(Mx);if(N){const M=N.props.children,d=k.map(G=>G===N?ee.Children.count(M)>1?ee.Children.only(null):ee.isValidElement(M)?M.props.children:null:G);return be.jsx(ug,{...A,ref:w,children:ee.isValidElement(M)?ee.cloneElement(M,void 0,d):null})}return be.jsx(ug,{...A,ref:w,children:C})});Ld.displayName="Slot";var ug=ee.forwardRef((_,w)=>{const{children:C,...A}=_;if(ee.isValidElement(C)){const k=Dx(C);return ee.cloneElement(C,{...zx(A,C.props),ref:w?Fy(w,k):k})}return ee.Children.count(C)>1?ee.Children.only(null):null});ug.displayName="SlotClone";var jy=({children:_})=>be.jsx(be.Fragment,{children:_});function Mx(_){return ee.isValidElement(_)&&_.type===jy}function zx(_,w){const C={...w};for(const A in w){const k=_[A],N=w[A];/^on[A-Z]/.test(A)?k&&N?C[A]=(...d)=>{N(...d),k(...d)}:k&&(C[A]=k):A==="style"?C[A]={...k,...N}:A==="className"&&(C[A]=[k,N].filter(Boolean).join(" "))}return{..._,...C}}function Dx(_){let w=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,C=w&&"isReactWarning"in w&&w.isReactWarning;return C?_.ref:(w=Object.getOwnPropertyDescriptor(_,"ref")?.get,C=w&&"isReactWarning"in w&&w.isReactWarning,C?_.props.ref:_.props.ref||_.ref)}function Uy(_){var w,C,A="";if(typeof _=="string"||typeof _=="number")A+=_;else if(typeof _=="object")if(Array.isArray(_)){var k=_.length;for(w=0;w<k;w++)_[w]&&(C=Uy(_[w]))&&(A&&(A+=" "),A+=C)}else for(C in _)_[C]&&(A&&(A+=" "),A+=C);return A}function Vy(){for(var _,w,C=0,A="",k=arguments.length;C<k;C++)(_=arguments[C])&&(w=Uy(_))&&(A&&(A+=" "),A+=w);return A}const ry=_=>typeof _=="boolean"?`${_}`:_===0?"0":_,ay=Vy,Rx=(_,w)=>C=>{var A;if(w?.variants==null)return ay(_,C?.class,C?.className);const{variants:k,defaultVariants:N}=w,M=Object.keys(k).map(H=>{const J=C?.[H],X=N?.[H];if(J===null)return null;const $=ry(J)||ry(X);return k[H][$]}),d=C&&Object.entries(C).reduce((H,J)=>{let[X,$]=J;return $===void 0||(H[X]=$),H},{}),G=w==null||(A=w.compoundVariants)===null||A===void 0?void 0:A.reduce((H,J)=>{let{class:X,className:$,...ge}=J;return Object.entries(ge).every(Se=>{let[ce,_e]=Se;return Array.isArray(_e)?_e.includes({...N,...d}[ce]):{...N,...d}[ce]===_e})?[...H,X,$]:H},[]);return ay(_,M,G,C?.class,C?.className)},Dg="-",Ix=_=>{const w=Px(_),{conflictingClassGroups:C,conflictingClassGroupModifiers:A}=_;return{getClassGroupId:M=>{const d=M.split(Dg);return d[0]===""&&d.length!==1&&d.shift(),qy(d,w)||kx(M)},getConflictingClassGroupIds:(M,d)=>{const G=C[M]||[];return d&&A[M]?[...G,...A[M]]:G}}},qy=(_,w)=>{if(_.length===0)return w.classGroupId;const C=_[0],A=w.nextPart.get(C),k=A?qy(_.slice(1),A):void 0;if(k)return k;if(w.validators.length===0)return;const N=_.join(Dg);return w.validators.find(({validator:M})=>M(N))?.classGroupId},sy=/^\[(.+)\]$/,kx=_=>{if(sy.test(_)){const w=sy.exec(_)[1],C=w?.substring(0,w.indexOf(":"));if(C)return"arbitrary.."+C}},Px=_=>{const{theme:w,prefix:C}=_,A={nextPart:new Map,validators:[]};return Ox(Object.entries(_.classGroups),C).forEach(([N,M])=>{hg(M,A,N,w)}),A},hg=(_,w,C,A)=>{_.forEach(k=>{if(typeof k=="string"){const N=k===""?w:oy(w,k);N.classGroupId=C;return}if(typeof k=="function"){if(Lx(k)){hg(k(A),w,C,A);return}w.validators.push({validator:k,classGroupId:C});return}Object.entries(k).forEach(([N,M])=>{hg(M,oy(w,N),C,A)})})},oy=(_,w)=>{let C=_;return w.split(Dg).forEach(A=>{C.nextPart.has(A)||C.nextPart.set(A,{nextPart:new Map,validators:[]}),C=C.nextPart.get(A)}),C},Lx=_=>_.isThemeGetter,Ox=(_,w)=>w?_.map(([C,A])=>{const k=A.map(N=>typeof N=="string"?w+N:typeof N=="object"?Object.fromEntries(Object.entries(N).map(([M,d])=>[w+M,d])):N);return[C,k]}):_,Bx=_=>{if(_<1)return{get:()=>{},set:()=>{}};let w=0,C=new Map,A=new Map;const k=(N,M)=>{C.set(N,M),w++,w>_&&(w=0,A=C,C=new Map)};return{get(N){let M=C.get(N);if(M!==void 0)return M;if((M=A.get(N))!==void 0)return k(N,M),M},set(N,M){C.has(N)?C.set(N,M):k(N,M)}}},Hy="!",Nx=_=>{const{separator:w,experimentalParseClassName:C}=_,A=w.length===1,k=w[0],N=w.length,M=d=>{const G=[];let H=0,J=0,X;for(let _e=0;_e<d.length;_e++){let Me=d[_e];if(H===0){if(Me===k&&(A||d.slice(_e,_e+N)===w)){G.push(d.slice(J,_e)),J=_e+N;continue}if(Me==="/"){X=_e;continue}}Me==="["?H++:Me==="]"&&H--}const $=G.length===0?d:d.substring(J),ge=$.startsWith(Hy),Se=ge?$.substring(1):$,ce=X&&X>J?X-J:void 0;return{modifiers:G,hasImportantModifier:ge,baseClassName:Se,maybePostfixModifierPosition:ce}};return C?d=>C({className:d,parseClassName:M}):M},Fx=_=>{if(_.length<=1)return _;const w=[];let C=[];return _.forEach(A=>{A[0]==="["?(w.push(...C.sort(),A),C=[]):C.push(A)}),w.push(...C.sort()),w},jx=_=>({cache:Bx(_.cacheSize),parseClassName:Nx(_),...Ix(_)}),Ux=/\s+/,Vx=(_,w)=>{const{parseClassName:C,getClassGroupId:A,getConflictingClassGroupIds:k}=w,N=[],M=_.trim().split(Ux);let d="";for(let G=M.length-1;G>=0;G-=1){const H=M[G],{modifiers:J,hasImportantModifier:X,baseClassName:$,maybePostfixModifierPosition:ge}=C(H);let Se=!!ge,ce=A(Se?$.substring(0,ge):$);if(!ce){if(!Se){d=H+(d.length>0?" "+d:d);continue}if(ce=A($),!ce){d=H+(d.length>0?" "+d:d);continue}Se=!1}const _e=Fx(J).join(":"),Me=X?_e+Hy:_e,Ie=Me+ce;if(N.includes(Ie))continue;N.push(Ie);const Pe=k(ce,Se);for(let qe=0;qe<Pe.length;++qe){const Ze=Pe[qe];N.push(Me+Ze)}d=H+(d.length>0?" "+d:d)}return d};function qx(){let _=0,w,C,A="";for(;_<arguments.length;)(w=arguments[_++])&&(C=Zy(w))&&(A&&(A+=" "),A+=C);return A}const Zy=_=>{if(typeof _=="string")return _;let w,C="";for(let A=0;A<_.length;A++)_[A]&&(w=Zy(_[A]))&&(C&&(C+=" "),C+=w);return C};function Hx(_,...w){let C,A,k,N=M;function M(G){const H=w.reduce((J,X)=>X(J),_());return C=jx(H),A=C.cache.get,k=C.cache.set,N=d,d(G)}function d(G){const H=A(G);if(H)return H;const J=Vx(G,C);return k(G,J),J}return function(){return N(qx.apply(null,arguments))}}const Sn=_=>{const w=C=>C[_]||[];return w.isThemeGetter=!0,w},Gy=/^\[(?:([a-z-]+):)?(.+)\]$/i,Zx=/^\d+\/\d+$/,Gx=new Set(["px","full","screen"]),$x=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Xx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Yx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Kx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wx=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kc=_=>Id(_)||Gx.has(_)||Zx.test(_),Du=_=>Nd(_,"length",a0),Id=_=>!!_&&!Number.isNaN(Number(_)),Jm=_=>Nd(_,"number",Id),ep=_=>!!_&&Number.isInteger(Number(_)),Qx=_=>_.endsWith("%")&&Id(_.slice(0,-1)),fi=_=>Gy.test(_),Ru=_=>$x.test(_),Jx=new Set(["length","size","percentage"]),e0=_=>Nd(_,Jx,$y),t0=_=>Nd(_,"position",$y),i0=new Set(["image","url"]),n0=_=>Nd(_,i0,o0),r0=_=>Nd(_,"",s0),tp=()=>!0,Nd=(_,w,C)=>{const A=Gy.exec(_);return A?A[1]?typeof w=="string"?A[1]===w:w.has(A[1]):C(A[2]):!1},a0=_=>Xx.test(_)&&!Yx.test(_),$y=()=>!1,s0=_=>Kx.test(_),o0=_=>Wx.test(_),l0=()=>{const _=Sn("colors"),w=Sn("spacing"),C=Sn("blur"),A=Sn("brightness"),k=Sn("borderColor"),N=Sn("borderRadius"),M=Sn("borderSpacing"),d=Sn("borderWidth"),G=Sn("contrast"),H=Sn("grayscale"),J=Sn("hueRotate"),X=Sn("invert"),$=Sn("gap"),ge=Sn("gradientColorStops"),Se=Sn("gradientColorStopPositions"),ce=Sn("inset"),_e=Sn("margin"),Me=Sn("opacity"),Ie=Sn("padding"),Pe=Sn("saturate"),qe=Sn("scale"),Ze=Sn("sepia"),mt=Sn("skew"),it=Sn("space"),Lt=Sn("translate"),Nt=()=>["auto","contain","none"],Gt=()=>["auto","hidden","clip","visible","scroll"],ot=()=>["auto",fi,w],lt=()=>[fi,w],Ft=()=>["",kc,Du],Rt=()=>["auto",Id,fi],qt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],De=()=>["solid","dashed","dotted","double","none"],Ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Qe=()=>["start","end","center","between","around","evenly","stretch"],Mt=()=>["","0",fi],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],je=()=>[Id,fi];return{cacheSize:500,separator:":",theme:{colors:[tp],spacing:[kc,Du],blur:["none","",Ru,fi],brightness:je(),borderColor:[_],borderRadius:["none","","full",Ru,fi],borderSpacing:lt(),borderWidth:Ft(),contrast:je(),grayscale:Mt(),hueRotate:je(),invert:Mt(),gap:lt(),gradientColorStops:[_],gradientColorStopPositions:[Qx,Du],inset:ot(),margin:ot(),opacity:je(),padding:lt(),saturate:je(),scale:je(),sepia:Mt(),skew:je(),space:lt(),translate:lt()},classGroups:{aspect:[{aspect:["auto","square","video",fi]}],container:["container"],columns:[{columns:[Ru]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...qt(),fi]}],overflow:[{overflow:Gt()}],"overflow-x":[{"overflow-x":Gt()}],"overflow-y":[{"overflow-y":Gt()}],overscroll:[{overscroll:Nt()}],"overscroll-x":[{"overscroll-x":Nt()}],"overscroll-y":[{"overscroll-y":Nt()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[ce]}],"inset-x":[{"inset-x":[ce]}],"inset-y":[{"inset-y":[ce]}],start:[{start:[ce]}],end:[{end:[ce]}],top:[{top:[ce]}],right:[{right:[ce]}],bottom:[{bottom:[ce]}],left:[{left:[ce]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ep,fi]}],basis:[{basis:ot()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fi]}],grow:[{grow:Mt()}],shrink:[{shrink:Mt()}],order:[{order:["first","last","none",ep,fi]}],"grid-cols":[{"grid-cols":[tp]}],"col-start-end":[{col:["auto",{span:["full",ep,fi]},fi]}],"col-start":[{"col-start":Rt()}],"col-end":[{"col-end":Rt()}],"grid-rows":[{"grid-rows":[tp]}],"row-start-end":[{row:["auto",{span:[ep,fi]},fi]}],"row-start":[{"row-start":Rt()}],"row-end":[{"row-end":Rt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fi]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fi]}],gap:[{gap:[$]}],"gap-x":[{"gap-x":[$]}],"gap-y":[{"gap-y":[$]}],"justify-content":[{justify:["normal",...Qe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Qe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Qe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[Ie]}],px:[{px:[Ie]}],py:[{py:[Ie]}],ps:[{ps:[Ie]}],pe:[{pe:[Ie]}],pt:[{pt:[Ie]}],pr:[{pr:[Ie]}],pb:[{pb:[Ie]}],pl:[{pl:[Ie]}],m:[{m:[_e]}],mx:[{mx:[_e]}],my:[{my:[_e]}],ms:[{ms:[_e]}],me:[{me:[_e]}],mt:[{mt:[_e]}],mr:[{mr:[_e]}],mb:[{mb:[_e]}],ml:[{ml:[_e]}],"space-x":[{"space-x":[it]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[it]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fi,w]}],"min-w":[{"min-w":[fi,w,"min","max","fit"]}],"max-w":[{"max-w":[fi,w,"none","full","min","max","fit","prose",{screen:[Ru]},Ru]}],h:[{h:[fi,w,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fi,w,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fi,w,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fi,w,"auto","min","max","fit"]}],"font-size":[{text:["base",Ru,Du]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Jm]}],"font-family":[{font:[tp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fi]}],"line-clamp":[{"line-clamp":["none",Id,Jm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",kc,fi]}],"list-image":[{"list-image":["none",fi]}],"list-style-type":[{list:["none","disc","decimal",fi]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[_]}],"placeholder-opacity":[{"placeholder-opacity":[Me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[_]}],"text-opacity":[{"text-opacity":[Me]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...De(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",kc,Du]}],"underline-offset":[{"underline-offset":["auto",kc,fi]}],"text-decoration-color":[{decoration:[_]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:lt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fi]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fi]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Me]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...qt(),t0]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",e0]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},n0]}],"bg-color":[{bg:[_]}],"gradient-from-pos":[{from:[Se]}],"gradient-via-pos":[{via:[Se]}],"gradient-to-pos":[{to:[Se]}],"gradient-from":[{from:[ge]}],"gradient-via":[{via:[ge]}],"gradient-to":[{to:[ge]}],rounded:[{rounded:[N]}],"rounded-s":[{"rounded-s":[N]}],"rounded-e":[{"rounded-e":[N]}],"rounded-t":[{"rounded-t":[N]}],"rounded-r":[{"rounded-r":[N]}],"rounded-b":[{"rounded-b":[N]}],"rounded-l":[{"rounded-l":[N]}],"rounded-ss":[{"rounded-ss":[N]}],"rounded-se":[{"rounded-se":[N]}],"rounded-ee":[{"rounded-ee":[N]}],"rounded-es":[{"rounded-es":[N]}],"rounded-tl":[{"rounded-tl":[N]}],"rounded-tr":[{"rounded-tr":[N]}],"rounded-br":[{"rounded-br":[N]}],"rounded-bl":[{"rounded-bl":[N]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[Me]}],"border-style":[{border:[...De(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Me]}],"divide-style":[{divide:De()}],"border-color":[{border:[k]}],"border-color-x":[{"border-x":[k]}],"border-color-y":[{"border-y":[k]}],"border-color-s":[{"border-s":[k]}],"border-color-e":[{"border-e":[k]}],"border-color-t":[{"border-t":[k]}],"border-color-r":[{"border-r":[k]}],"border-color-b":[{"border-b":[k]}],"border-color-l":[{"border-l":[k]}],"divide-color":[{divide:[k]}],"outline-style":[{outline:["",...De()]}],"outline-offset":[{"outline-offset":[kc,fi]}],"outline-w":[{outline:[kc,Du]}],"outline-color":[{outline:[_]}],"ring-w":[{ring:Ft()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[_]}],"ring-opacity":[{"ring-opacity":[Me]}],"ring-offset-w":[{"ring-offset":[kc,Du]}],"ring-offset-color":[{"ring-offset":[_]}],shadow:[{shadow:["","inner","none",Ru,r0]}],"shadow-color":[{shadow:[tp]}],opacity:[{opacity:[Me]}],"mix-blend":[{"mix-blend":[...Ge(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ge()}],filter:[{filter:["","none"]}],blur:[{blur:[C]}],brightness:[{brightness:[A]}],contrast:[{contrast:[G]}],"drop-shadow":[{"drop-shadow":["","none",Ru,fi]}],grayscale:[{grayscale:[H]}],"hue-rotate":[{"hue-rotate":[J]}],invert:[{invert:[X]}],saturate:[{saturate:[Pe]}],sepia:[{sepia:[Ze]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[C]}],"backdrop-brightness":[{"backdrop-brightness":[A]}],"backdrop-contrast":[{"backdrop-contrast":[G]}],"backdrop-grayscale":[{"backdrop-grayscale":[H]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[J]}],"backdrop-invert":[{"backdrop-invert":[X]}],"backdrop-opacity":[{"backdrop-opacity":[Me]}],"backdrop-saturate":[{"backdrop-saturate":[Pe]}],"backdrop-sepia":[{"backdrop-sepia":[Ze]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[M]}],"border-spacing-x":[{"border-spacing-x":[M]}],"border-spacing-y":[{"border-spacing-y":[M]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fi]}],duration:[{duration:je()}],ease:[{ease:["linear","in","out","in-out",fi]}],delay:[{delay:je()}],animate:[{animate:["none","spin","ping","pulse","bounce",fi]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[qe]}],"scale-x":[{"scale-x":[qe]}],"scale-y":[{"scale-y":[qe]}],rotate:[{rotate:[ep,fi]}],"translate-x":[{"translate-x":[Lt]}],"translate-y":[{"translate-y":[Lt]}],"skew-x":[{"skew-x":[mt]}],"skew-y":[{"skew-y":[mt]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fi]}],accent:[{accent:["auto",_]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fi]}],"caret-color":[{caret:[_]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":lt()}],"scroll-mx":[{"scroll-mx":lt()}],"scroll-my":[{"scroll-my":lt()}],"scroll-ms":[{"scroll-ms":lt()}],"scroll-me":[{"scroll-me":lt()}],"scroll-mt":[{"scroll-mt":lt()}],"scroll-mr":[{"scroll-mr":lt()}],"scroll-mb":[{"scroll-mb":lt()}],"scroll-ml":[{"scroll-ml":lt()}],"scroll-p":[{"scroll-p":lt()}],"scroll-px":[{"scroll-px":lt()}],"scroll-py":[{"scroll-py":lt()}],"scroll-ps":[{"scroll-ps":lt()}],"scroll-pe":[{"scroll-pe":lt()}],"scroll-pt":[{"scroll-pt":lt()}],"scroll-pr":[{"scroll-pr":lt()}],"scroll-pb":[{"scroll-pb":lt()}],"scroll-pl":[{"scroll-pl":lt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fi]}],fill:[{fill:[_,"none"]}],"stroke-w":[{stroke:[kc,Du,Jm]}],stroke:[{stroke:[_,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},c0=Hx(l0);function xa(..._){return c0(Vy(_))}const u0=Rx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Xy=ee.forwardRef(({className:_,variant:w,size:C,asChild:A=!1,...k},N)=>{const M=A?Ld:"button";return be.jsx(M,{className:xa(u0({variant:w,size:C,className:_})),ref:N,...k})});Xy.displayName="Button";function fm(_,[w,C]){return Math.min(C,Math.max(w,_))}function Fi(_,w,{checkForDefaultPrevented:C=!0}={}){return function(k){if(_?.(k),C===!1||!k.defaultPrevented)return w?.(k)}}function rp(_,w=[]){let C=[];function A(N,M){const d=ee.createContext(M),G=C.length;C=[...C,M];const H=X=>{const{scope:$,children:ge,...Se}=X,ce=$?.[_]?.[G]||d,_e=ee.useMemo(()=>Se,Object.values(Se));return be.jsx(ce.Provider,{value:_e,children:ge})};H.displayName=N+"Provider";function J(X,$){const ge=$?.[_]?.[G]||d,Se=ee.useContext(ge);if(Se)return Se;if(M!==void 0)return M;throw new Error(`\`${X}\` must be used within \`${N}\``)}return[H,J]}const k=()=>{const N=C.map(M=>ee.createContext(M));return function(d){const G=d?.[_]||N;return ee.useMemo(()=>({[`__scope${_}`]:{...d,[_]:G}}),[d,G])}};return k.scopeName=_,[A,h0(k,...w)]}function h0(..._){const w=_[0];if(_.length===1)return w;const C=()=>{const A=_.map(k=>({useScope:k(),scopeName:k.scopeName}));return function(N){const M=A.reduce((d,{useScope:G,scopeName:H})=>{const X=G(N)[`__scope${H}`];return{...d,...X}},{});return ee.useMemo(()=>({[`__scope${w.scopeName}`]:M}),[M])}};return C.scopeName=w.scopeName,C}function Lc(_){const w=ee.useRef(_);return ee.useEffect(()=>{w.current=_}),ee.useMemo(()=>(...C)=>w.current?.(...C),[])}function pm({prop:_,defaultProp:w,onChange:C=()=>{}}){const[A,k]=d0({defaultProp:w,onChange:C}),N=_!==void 0,M=N?_:A,d=Lc(C),G=ee.useCallback(H=>{if(N){const X=typeof H=="function"?H(_):H;X!==_&&d(X)}else k(H)},[N,_,k,d]);return[M,G]}function d0({defaultProp:_,onChange:w}){const C=ee.useState(_),[A]=C,k=ee.useRef(A),N=Lc(w);return ee.useEffect(()=>{k.current!==A&&(N(A),k.current=A)},[A,k,N]),C}var f0=ee.createContext(void 0);function Yy(_){const w=ee.useContext(f0);return _||w||"ltr"}function Ky(_){const w=ee.useRef({value:_,previous:_});return ee.useMemo(()=>(w.current.value!==_&&(w.current.previous=w.current.value,w.current.value=_),w.current.previous),[_])}var ba=globalThis?.document?ee.useLayoutEffect:()=>{};function Wy(_){const[w,C]=ee.useState(void 0);return ba(()=>{if(_){C({width:_.offsetWidth,height:_.offsetHeight});const A=new ResizeObserver(k=>{if(!Array.isArray(k)||!k.length)return;const N=k[0];let M,d;if("borderBoxSize"in N){const G=N.borderBoxSize,H=Array.isArray(G)?G[0]:G;M=H.inlineSize,d=H.blockSize}else M=_.offsetWidth,d=_.offsetHeight;C({width:M,height:d})});return A.observe(_,{box:"border-box"}),()=>A.unobserve(_)}else C(void 0)},[_]),w}var ap=Ly();const p0=xm(ap);var m0=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],En=m0.reduce((_,w)=>{const C=ee.forwardRef((A,k)=>{const{asChild:N,...M}=A,d=N?Ld:w;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),be.jsx(d,{...M,ref:k})});return C.displayName=`Primitive.${w}`,{..._,[w]:C}},{});function g0(_,w){_&&ap.flushSync(()=>_.dispatchEvent(w))}function Qy(_){const w=_+"CollectionProvider",[C,A]=rp(w),[k,N]=C(w,{collectionRef:{current:null},itemMap:new Map}),M=ge=>{const{scope:Se,children:ce}=ge,_e=Pc.useRef(null),Me=Pc.useRef(new Map).current;return be.jsx(k,{scope:Se,itemMap:Me,collectionRef:_e,children:ce})};M.displayName=w;const d=_+"CollectionSlot",G=Pc.forwardRef((ge,Se)=>{const{scope:ce,children:_e}=ge,Me=N(d,ce),Ie=Tn(Se,Me.collectionRef);return be.jsx(Ld,{ref:Ie,children:_e})});G.displayName=d;const H=_+"CollectionItemSlot",J="data-radix-collection-item",X=Pc.forwardRef((ge,Se)=>{const{scope:ce,children:_e,...Me}=ge,Ie=Pc.useRef(null),Pe=Tn(Se,Ie),qe=N(H,ce);return Pc.useEffect(()=>(qe.itemMap.set(Ie,{ref:Ie,...Me}),()=>void qe.itemMap.delete(Ie))),be.jsx(Ld,{[J]:"",ref:Pe,children:_e})});X.displayName=H;function $(ge){const Se=N(_+"CollectionConsumer",ge);return Pc.useCallback(()=>{const _e=Se.collectionRef.current;if(!_e)return[];const Me=Array.from(_e.querySelectorAll(`[${J}]`));return Array.from(Se.itemMap.values()).sort((qe,Ze)=>Me.indexOf(qe.ref.current)-Me.indexOf(Ze.ref.current))},[Se.collectionRef,Se.itemMap])}return[{Provider:M,Slot:G,ItemSlot:X},$,A]}var Jy=["PageUp","PageDown"],e_=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t_={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Fd="Slider",[dg,y0,_0]=Qy(Fd),[i_]=rp(Fd,[_0]),[v0,bm]=i_(Fd),n_=ee.forwardRef((_,w)=>{const{name:C,min:A=0,max:k=100,step:N=1,orientation:M="horizontal",disabled:d=!1,minStepsBetweenThumbs:G=0,defaultValue:H=[A],value:J,onValueChange:X=()=>{},onValueCommit:$=()=>{},inverted:ge=!1,form:Se,...ce}=_,_e=ee.useRef(new Set),Me=ee.useRef(0),Pe=M==="horizontal"?x0:b0,[qe=[],Ze]=pm({prop:J,defaultProp:H,onChange:ot=>{[..._e.current][Me.current]?.focus(),X(ot)}}),mt=ee.useRef(qe);function it(ot){const lt=A0(qe,ot);Gt(ot,lt)}function Lt(ot){Gt(ot,Me.current)}function Nt(){const ot=mt.current[Me.current];qe[Me.current]!==ot&&$(qe)}function Gt(ot,lt,{commit:Ft}={commit:!1}){const Rt=D0(N),qt=R0(Math.round((ot-A)/N)*N+A,Rt),De=fm(qt,[A,k]);Ze((Ge=[])=>{const Qe=T0(Ge,De,lt);if(z0(Qe,G*N)){Me.current=Qe.indexOf(De);const Mt=String(Qe)!==String(Ge);return Mt&&Ft&&$(Qe),Mt?Qe:Ge}else return Ge})}return be.jsx(v0,{scope:_.__scopeSlider,name:C,disabled:d,min:A,max:k,valueIndexToChangeRef:Me,thumbs:_e.current,values:qe,orientation:M,form:Se,children:be.jsx(dg.Provider,{scope:_.__scopeSlider,children:be.jsx(dg.Slot,{scope:_.__scopeSlider,children:be.jsx(Pe,{"aria-disabled":d,"data-disabled":d?"":void 0,...ce,ref:w,onPointerDown:Fi(ce.onPointerDown,()=>{d||(mt.current=qe)}),min:A,max:k,inverted:ge,onSlideStart:d?void 0:it,onSlideMove:d?void 0:Lt,onSlideEnd:d?void 0:Nt,onHomeKeyDown:()=>!d&&Gt(A,0,{commit:!0}),onEndKeyDown:()=>!d&&Gt(k,qe.length-1,{commit:!0}),onStepKeyDown:({event:ot,direction:lt})=>{if(!d){const qt=Jy.includes(ot.key)||ot.shiftKey&&e_.includes(ot.key)?10:1,De=Me.current,Ge=qe[De],Qe=N*qt*lt;Gt(Ge+Qe,De,{commit:!0})}}})})})})});n_.displayName=Fd;var[r_,a_]=i_(Fd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),x0=ee.forwardRef((_,w)=>{const{min:C,max:A,dir:k,inverted:N,onSlideStart:M,onSlideMove:d,onSlideEnd:G,onStepKeyDown:H,...J}=_,[X,$]=ee.useState(null),ge=Tn(w,Pe=>$(Pe)),Se=ee.useRef(void 0),ce=Yy(k),_e=ce==="ltr",Me=_e&&!N||!_e&&N;function Ie(Pe){const qe=Se.current||X.getBoundingClientRect(),Ze=[0,qe.width],it=Rg(Ze,Me?[C,A]:[A,C]);return Se.current=qe,it(Pe-qe.left)}return be.jsx(r_,{scope:_.__scopeSlider,startEdge:Me?"left":"right",endEdge:Me?"right":"left",direction:Me?1:-1,size:"width",children:be.jsx(s_,{dir:ce,"data-orientation":"horizontal",...J,ref:ge,style:{...J.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:Pe=>{const qe=Ie(Pe.clientX);M?.(qe)},onSlideMove:Pe=>{const qe=Ie(Pe.clientX);d?.(qe)},onSlideEnd:()=>{Se.current=void 0,G?.()},onStepKeyDown:Pe=>{const Ze=t_[Me?"from-left":"from-right"].includes(Pe.key);H?.({event:Pe,direction:Ze?-1:1})}})})}),b0=ee.forwardRef((_,w)=>{const{min:C,max:A,inverted:k,onSlideStart:N,onSlideMove:M,onSlideEnd:d,onStepKeyDown:G,...H}=_,J=ee.useRef(null),X=Tn(w,J),$=ee.useRef(void 0),ge=!k;function Se(ce){const _e=$.current||J.current.getBoundingClientRect(),Me=[0,_e.height],Pe=Rg(Me,ge?[A,C]:[C,A]);return $.current=_e,Pe(ce-_e.top)}return be.jsx(r_,{scope:_.__scopeSlider,startEdge:ge?"bottom":"top",endEdge:ge?"top":"bottom",size:"height",direction:ge?1:-1,children:be.jsx(s_,{"data-orientation":"vertical",...H,ref:X,style:{...H.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:ce=>{const _e=Se(ce.clientY);N?.(_e)},onSlideMove:ce=>{const _e=Se(ce.clientY);M?.(_e)},onSlideEnd:()=>{$.current=void 0,d?.()},onStepKeyDown:ce=>{const Me=t_[ge?"from-bottom":"from-top"].includes(ce.key);G?.({event:ce,direction:Me?-1:1})}})})}),s_=ee.forwardRef((_,w)=>{const{__scopeSlider:C,onSlideStart:A,onSlideMove:k,onSlideEnd:N,onHomeKeyDown:M,onEndKeyDown:d,onStepKeyDown:G,...H}=_,J=bm(Fd,C);return be.jsx(En.span,{...H,ref:w,onKeyDown:Fi(_.onKeyDown,X=>{X.key==="Home"?(M(X),X.preventDefault()):X.key==="End"?(d(X),X.preventDefault()):Jy.concat(e_).includes(X.key)&&(G(X),X.preventDefault())}),onPointerDown:Fi(_.onPointerDown,X=>{const $=X.target;$.setPointerCapture(X.pointerId),X.preventDefault(),J.thumbs.has($)?$.focus():A(X)}),onPointerMove:Fi(_.onPointerMove,X=>{X.target.hasPointerCapture(X.pointerId)&&k(X)}),onPointerUp:Fi(_.onPointerUp,X=>{const $=X.target;$.hasPointerCapture(X.pointerId)&&($.releasePointerCapture(X.pointerId),N(X))})})}),o_="SliderTrack",l_=ee.forwardRef((_,w)=>{const{__scopeSlider:C,...A}=_,k=bm(o_,C);return be.jsx(En.span,{"data-disabled":k.disabled?"":void 0,"data-orientation":k.orientation,...A,ref:w})});l_.displayName=o_;var fg="SliderRange",c_=ee.forwardRef((_,w)=>{const{__scopeSlider:C,...A}=_,k=bm(fg,C),N=a_(fg,C),M=ee.useRef(null),d=Tn(w,M),G=k.values.length,H=k.values.map($=>h_($,k.min,k.max)),J=G>1?Math.min(...H):0,X=100-Math.max(...H);return be.jsx(En.span,{"data-orientation":k.orientation,"data-disabled":k.disabled?"":void 0,...A,ref:d,style:{..._.style,[N.startEdge]:J+"%",[N.endEdge]:X+"%"}})});c_.displayName=fg;var pg="SliderThumb",u_=ee.forwardRef((_,w)=>{const C=y0(_.__scopeSlider),[A,k]=ee.useState(null),N=Tn(w,d=>k(d)),M=ee.useMemo(()=>A?C().findIndex(d=>d.ref.current===A):-1,[C,A]);return be.jsx(w0,{..._,ref:N,index:M})}),w0=ee.forwardRef((_,w)=>{const{__scopeSlider:C,index:A,name:k,...N}=_,M=bm(pg,C),d=a_(pg,C),[G,H]=ee.useState(null),J=Tn(w,Ie=>H(Ie)),X=G?M.form||!!G.closest("form"):!0,$=Wy(G),ge=M.values[A],Se=ge===void 0?0:h_(ge,M.min,M.max),ce=E0(A,M.values.length),_e=$?.[d.size],Me=_e?C0(_e,Se,d.direction):0;return ee.useEffect(()=>{if(G)return M.thumbs.add(G),()=>{M.thumbs.delete(G)}},[G,M.thumbs]),be.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${Se}% + ${Me}px)`},children:[be.jsx(dg.ItemSlot,{scope:_.__scopeSlider,children:be.jsx(En.span,{role:"slider","aria-label":_["aria-label"]||ce,"aria-valuemin":M.min,"aria-valuenow":ge,"aria-valuemax":M.max,"aria-orientation":M.orientation,"data-orientation":M.orientation,"data-disabled":M.disabled?"":void 0,tabIndex:M.disabled?void 0:0,...N,ref:J,style:ge===void 0?{display:"none"}:_.style,onFocus:Fi(_.onFocus,()=>{M.valueIndexToChangeRef.current=A})})}),X&&be.jsx(S0,{name:k??(M.name?M.name+(M.values.length>1?"[]":""):void 0),form:M.form,value:ge},A)]})});u_.displayName=pg;var S0=_=>{const{value:w,...C}=_,A=ee.useRef(null),k=Ky(w);return ee.useEffect(()=>{const N=A.current,M=window.HTMLInputElement.prototype,G=Object.getOwnPropertyDescriptor(M,"value").set;if(k!==w&&G){const H=new Event("input",{bubbles:!0});G.call(N,w),N.dispatchEvent(H)}},[k,w]),be.jsx("input",{style:{display:"none"},...C,ref:A,defaultValue:w})};function T0(_=[],w,C){const A=[..._];return A[C]=w,A.sort((k,N)=>k-N)}function h_(_,w,C){const N=100/(C-w)*(_-w);return fm(N,[0,100])}function E0(_,w){return w>2?`Value ${_+1} of ${w}`:w===2?["Minimum","Maximum"][_]:void 0}function A0(_,w){if(_.length===1)return 0;const C=_.map(k=>Math.abs(k-w)),A=Math.min(...C);return C.indexOf(A)}function C0(_,w,C){const A=_/2,N=Rg([0,50],[0,A]);return(A-N(w)*C)*C}function M0(_){return _.slice(0,-1).map((w,C)=>_[C+1]-w)}function z0(_,w){if(w>0){const C=M0(_);return Math.min(...C)>=w}return!0}function Rg(_,w){return C=>{if(_[0]===_[1]||w[0]===w[1])return w[0];const A=(w[1]-w[0])/(_[1]-_[0]);return w[0]+A*(C-_[0])}}function D0(_){return(String(_).split(".")[1]||"").length}function R0(_,w){const C=Math.pow(10,w);return Math.round(_*C)/C}var d_=n_,I0=l_,k0=c_,P0=u_;const Ig=ee.forwardRef(({className:_,...w},C)=>be.jsxs(d_,{ref:C,className:xa("relative flex w-full touch-none select-none items-center",_),...w,children:[be.jsx(I0,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:be.jsx(k0,{className:"absolute h-full bg-primary"})}),be.jsx(P0,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ig.displayName=d_.displayName;function L0(_,w=globalThis?.document){const C=Lc(_);ee.useEffect(()=>{const A=k=>{k.key==="Escape"&&C(k)};return w.addEventListener("keydown",A,{capture:!0}),()=>w.removeEventListener("keydown",A,{capture:!0})},[C,w])}var O0="DismissableLayer",mg="dismissableLayer.update",B0="dismissableLayer.pointerDownOutside",N0="dismissableLayer.focusOutside",ly,f_=ee.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kg=ee.forwardRef((_,w)=>{const{disableOutsidePointerEvents:C=!1,onEscapeKeyDown:A,onPointerDownOutside:k,onFocusOutside:N,onInteractOutside:M,onDismiss:d,...G}=_,H=ee.useContext(f_),[J,X]=ee.useState(null),$=J?.ownerDocument??globalThis?.document,[,ge]=ee.useState({}),Se=Tn(w,it=>X(it)),ce=Array.from(H.layers),[_e]=[...H.layersWithOutsidePointerEventsDisabled].slice(-1),Me=ce.indexOf(_e),Ie=J?ce.indexOf(J):-1,Pe=H.layersWithOutsidePointerEventsDisabled.size>0,qe=Ie>=Me,Ze=U0(it=>{const Lt=it.target,Nt=[...H.branches].some(Gt=>Gt.contains(Lt));!qe||Nt||(k?.(it),M?.(it),it.defaultPrevented||d?.())},$),mt=V0(it=>{const Lt=it.target;[...H.branches].some(Gt=>Gt.contains(Lt))||(N?.(it),M?.(it),it.defaultPrevented||d?.())},$);return L0(it=>{Ie===H.layers.size-1&&(A?.(it),!it.defaultPrevented&&d&&(it.preventDefault(),d()))},$),ee.useEffect(()=>{if(J)return C&&(H.layersWithOutsidePointerEventsDisabled.size===0&&(ly=$.body.style.pointerEvents,$.body.style.pointerEvents="none"),H.layersWithOutsidePointerEventsDisabled.add(J)),H.layers.add(J),cy(),()=>{C&&H.layersWithOutsidePointerEventsDisabled.size===1&&($.body.style.pointerEvents=ly)}},[J,$,C,H]),ee.useEffect(()=>()=>{J&&(H.layers.delete(J),H.layersWithOutsidePointerEventsDisabled.delete(J),cy())},[J,H]),ee.useEffect(()=>{const it=()=>ge({});return document.addEventListener(mg,it),()=>document.removeEventListener(mg,it)},[]),be.jsx(En.div,{...G,ref:Se,style:{pointerEvents:Pe?qe?"auto":"none":void 0,..._.style},onFocusCapture:Fi(_.onFocusCapture,mt.onFocusCapture),onBlurCapture:Fi(_.onBlurCapture,mt.onBlurCapture),onPointerDownCapture:Fi(_.onPointerDownCapture,Ze.onPointerDownCapture)})});kg.displayName=O0;var F0="DismissableLayerBranch",j0=ee.forwardRef((_,w)=>{const C=ee.useContext(f_),A=ee.useRef(null),k=Tn(w,A);return ee.useEffect(()=>{const N=A.current;if(N)return C.branches.add(N),()=>{C.branches.delete(N)}},[C.branches]),be.jsx(En.div,{..._,ref:k})});j0.displayName=F0;function U0(_,w=globalThis?.document){const C=Lc(_),A=ee.useRef(!1),k=ee.useRef(()=>{});return ee.useEffect(()=>{const N=d=>{if(d.target&&!A.current){let G=function(){p_(B0,C,H,{discrete:!0})};const H={originalEvent:d};d.pointerType==="touch"?(w.removeEventListener("click",k.current),k.current=G,w.addEventListener("click",k.current,{once:!0})):G()}else w.removeEventListener("click",k.current);A.current=!1},M=window.setTimeout(()=>{w.addEventListener("pointerdown",N)},0);return()=>{window.clearTimeout(M),w.removeEventListener("pointerdown",N),w.removeEventListener("click",k.current)}},[w,C]),{onPointerDownCapture:()=>A.current=!0}}function V0(_,w=globalThis?.document){const C=Lc(_),A=ee.useRef(!1);return ee.useEffect(()=>{const k=N=>{N.target&&!A.current&&p_(N0,C,{originalEvent:N},{discrete:!1})};return w.addEventListener("focusin",k),()=>w.removeEventListener("focusin",k)},[w,C]),{onFocusCapture:()=>A.current=!0,onBlurCapture:()=>A.current=!1}}function cy(){const _=new CustomEvent(mg);document.dispatchEvent(_)}function p_(_,w,C,{discrete:A}){const k=C.originalEvent.target,N=new CustomEvent(_,{bubbles:!1,cancelable:!0,detail:C});w&&k.addEventListener(_,w,{once:!0}),A?g0(k,N):k.dispatchEvent(N)}var q0=ix.useId||(()=>{}),H0=0;function wm(_){const[w,C]=ee.useState(q0());return ba(()=>{C(A=>A??String(H0++))},[_]),w?`radix-${w}`:""}const Z0=["top","right","bottom","left"],ku=Math.min,ms=Math.max,mm=Math.round,im=Math.floor,Ll=_=>({x:_,y:_}),G0={left:"right",right:"left",bottom:"top",top:"bottom"},$0={start:"end",end:"start"};function gg(_,w,C){return ms(_,ku(w,C))}function Oc(_,w){return typeof _=="function"?_(w):_}function Bc(_){return _.split("-")[0]}function jd(_){return _.split("-")[1]}function Pg(_){return _==="x"?"y":"x"}function Lg(_){return _==="y"?"height":"width"}const X0=new Set(["top","bottom"]);function Pl(_){return X0.has(Bc(_))?"y":"x"}function Og(_){return Pg(Pl(_))}function Y0(_,w,C){C===void 0&&(C=!1);const A=jd(_),k=Og(_),N=Lg(k);let M=k==="x"?A===(C?"end":"start")?"right":"left":A==="start"?"bottom":"top";return w.reference[N]>w.floating[N]&&(M=gm(M)),[M,gm(M)]}function K0(_){const w=gm(_);return[yg(_),w,yg(w)]}function yg(_){return _.replace(/start|end/g,w=>$0[w])}const uy=["left","right"],hy=["right","left"],W0=["top","bottom"],Q0=["bottom","top"];function J0(_,w,C){switch(_){case"top":case"bottom":return C?w?hy:uy:w?uy:hy;case"left":case"right":return w?W0:Q0;default:return[]}}function eb(_,w,C,A){const k=jd(_);let N=J0(Bc(_),C==="start",A);return k&&(N=N.map(M=>M+"-"+k),w&&(N=N.concat(N.map(yg)))),N}function gm(_){return _.replace(/left|right|bottom|top/g,w=>G0[w])}function tb(_){return{top:0,right:0,bottom:0,left:0,..._}}function m_(_){return typeof _!="number"?tb(_):{top:_,right:_,bottom:_,left:_}}function ym(_){const{x:w,y:C,width:A,height:k}=_;return{width:A,height:k,top:C,left:w,right:w+A,bottom:C+k,x:w,y:C}}function dy(_,w,C){let{reference:A,floating:k}=_;const N=Pl(w),M=Og(w),d=Lg(M),G=Bc(w),H=N==="y",J=A.x+A.width/2-k.width/2,X=A.y+A.height/2-k.height/2,$=A[d]/2-k[d]/2;let ge;switch(G){case"top":ge={x:J,y:A.y-k.height};break;case"bottom":ge={x:J,y:A.y+A.height};break;case"right":ge={x:A.x+A.width,y:X};break;case"left":ge={x:A.x-k.width,y:X};break;default:ge={x:A.x,y:A.y}}switch(jd(w)){case"start":ge[M]-=$*(C&&H?-1:1);break;case"end":ge[M]+=$*(C&&H?-1:1);break}return ge}async function ib(_,w){var C;w===void 0&&(w={});const{x:A,y:k,platform:N,rects:M,elements:d,strategy:G}=_,{boundary:H="clippingAncestors",rootBoundary:J="viewport",elementContext:X="floating",altBoundary:$=!1,padding:ge=0}=Oc(w,_),Se=m_(ge),_e=d[$?X==="floating"?"reference":"floating":X],Me=ym(await N.getClippingRect({element:(C=await(N.isElement==null?void 0:N.isElement(_e)))==null||C?_e:_e.contextElement||await(N.getDocumentElement==null?void 0:N.getDocumentElement(d.floating)),boundary:H,rootBoundary:J,strategy:G})),Ie=X==="floating"?{x:A,y:k,width:M.floating.width,height:M.floating.height}:M.reference,Pe=await(N.getOffsetParent==null?void 0:N.getOffsetParent(d.floating)),qe=await(N.isElement==null?void 0:N.isElement(Pe))?await(N.getScale==null?void 0:N.getScale(Pe))||{x:1,y:1}:{x:1,y:1},Ze=ym(N.convertOffsetParentRelativeRectToViewportRelativeRect?await N.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:Ie,offsetParent:Pe,strategy:G}):Ie);return{top:(Me.top-Ze.top+Se.top)/qe.y,bottom:(Ze.bottom-Me.bottom+Se.bottom)/qe.y,left:(Me.left-Ze.left+Se.left)/qe.x,right:(Ze.right-Me.right+Se.right)/qe.x}}const nb=async(_,w,C)=>{const{placement:A="bottom",strategy:k="absolute",middleware:N=[],platform:M}=C,d=N.filter(Boolean),G=await(M.isRTL==null?void 0:M.isRTL(w));let H=await M.getElementRects({reference:_,floating:w,strategy:k}),{x:J,y:X}=dy(H,A,G),$=A,ge={},Se=0;for(let _e=0;_e<d.length;_e++){var ce;const{name:Me,fn:Ie}=d[_e],{x:Pe,y:qe,data:Ze,reset:mt}=await Ie({x:J,y:X,initialPlacement:A,placement:$,strategy:k,middlewareData:ge,rects:H,platform:{...M,detectOverflow:(ce=M.detectOverflow)!=null?ce:ib},elements:{reference:_,floating:w}});J=Pe??J,X=qe??X,ge={...ge,[Me]:{...ge[Me],...Ze}},mt&&Se<=50&&(Se++,typeof mt=="object"&&(mt.placement&&($=mt.placement),mt.rects&&(H=mt.rects===!0?await M.getElementRects({reference:_,floating:w,strategy:k}):mt.rects),{x:J,y:X}=dy(H,$,G)),_e=-1)}return{x:J,y:X,placement:$,strategy:k,middlewareData:ge}},rb=_=>({name:"arrow",options:_,async fn(w){const{x:C,y:A,placement:k,rects:N,platform:M,elements:d,middlewareData:G}=w,{element:H,padding:J=0}=Oc(_,w)||{};if(H==null)return{};const X=m_(J),$={x:C,y:A},ge=Og(k),Se=Lg(ge),ce=await M.getDimensions(H),_e=ge==="y",Me=_e?"top":"left",Ie=_e?"bottom":"right",Pe=_e?"clientHeight":"clientWidth",qe=N.reference[Se]+N.reference[ge]-$[ge]-N.floating[Se],Ze=$[ge]-N.reference[ge],mt=await(M.getOffsetParent==null?void 0:M.getOffsetParent(H));let it=mt?mt[Pe]:0;(!it||!await(M.isElement==null?void 0:M.isElement(mt)))&&(it=d.floating[Pe]||N.floating[Se]);const Lt=qe/2-Ze/2,Nt=it/2-ce[Se]/2-1,Gt=ku(X[Me],Nt),ot=ku(X[Ie],Nt),lt=Gt,Ft=it-ce[Se]-ot,Rt=it/2-ce[Se]/2+Lt,qt=gg(lt,Rt,Ft),De=!G.arrow&&jd(k)!=null&&Rt!==qt&&N.reference[Se]/2-(Rt<lt?Gt:ot)-ce[Se]/2<0,Ge=De?Rt<lt?Rt-lt:Rt-Ft:0;return{[ge]:$[ge]+Ge,data:{[ge]:qt,centerOffset:Rt-qt-Ge,...De&&{alignmentOffset:Ge}},reset:De}}}),ab=function(_){return _===void 0&&(_={}),{name:"flip",options:_,async fn(w){var C,A;const{placement:k,middlewareData:N,rects:M,initialPlacement:d,platform:G,elements:H}=w,{mainAxis:J=!0,crossAxis:X=!0,fallbackPlacements:$,fallbackStrategy:ge="bestFit",fallbackAxisSideDirection:Se="none",flipAlignment:ce=!0,..._e}=Oc(_,w);if((C=N.arrow)!=null&&C.alignmentOffset)return{};const Me=Bc(k),Ie=Pl(d),Pe=Bc(d)===d,qe=await(G.isRTL==null?void 0:G.isRTL(H.floating)),Ze=$||(Pe||!ce?[gm(d)]:K0(d)),mt=Se!=="none";!$&&mt&&Ze.push(...eb(d,ce,Se,qe));const it=[d,...Ze],Lt=await G.detectOverflow(w,_e),Nt=[];let Gt=((A=N.flip)==null?void 0:A.overflows)||[];if(J&&Nt.push(Lt[Me]),X){const Rt=Y0(k,M,qe);Nt.push(Lt[Rt[0]],Lt[Rt[1]])}if(Gt=[...Gt,{placement:k,overflows:Nt}],!Nt.every(Rt=>Rt<=0)){var ot,lt;const Rt=(((ot=N.flip)==null?void 0:ot.index)||0)+1,qt=it[Rt];if(qt&&(!(X==="alignment"?Ie!==Pl(qt):!1)||Gt.every(Qe=>Pl(Qe.placement)===Ie?Qe.overflows[0]>0:!0)))return{data:{index:Rt,overflows:Gt},reset:{placement:qt}};let De=(lt=Gt.filter(Ge=>Ge.overflows[0]<=0).sort((Ge,Qe)=>Ge.overflows[1]-Qe.overflows[1])[0])==null?void 0:lt.placement;if(!De)switch(ge){case"bestFit":{var Ft;const Ge=(Ft=Gt.filter(Qe=>{if(mt){const Mt=Pl(Qe.placement);return Mt===Ie||Mt==="y"}return!0}).map(Qe=>[Qe.placement,Qe.overflows.filter(Mt=>Mt>0).reduce((Mt,se)=>Mt+se,0)]).sort((Qe,Mt)=>Qe[1]-Mt[1])[0])==null?void 0:Ft[0];Ge&&(De=Ge);break}case"initialPlacement":De=d;break}if(k!==De)return{reset:{placement:De}}}return{}}}};function fy(_,w){return{top:_.top-w.height,right:_.right-w.width,bottom:_.bottom-w.height,left:_.left-w.width}}function py(_){return Z0.some(w=>_[w]>=0)}const sb=function(_){return _===void 0&&(_={}),{name:"hide",options:_,async fn(w){const{rects:C,platform:A}=w,{strategy:k="referenceHidden",...N}=Oc(_,w);switch(k){case"referenceHidden":{const M=await A.detectOverflow(w,{...N,elementContext:"reference"}),d=fy(M,C.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:py(d)}}}case"escaped":{const M=await A.detectOverflow(w,{...N,altBoundary:!0}),d=fy(M,C.floating);return{data:{escapedOffsets:d,escaped:py(d)}}}default:return{}}}}},g_=new Set(["left","top"]);async function ob(_,w){const{placement:C,platform:A,elements:k}=_,N=await(A.isRTL==null?void 0:A.isRTL(k.floating)),M=Bc(C),d=jd(C),G=Pl(C)==="y",H=g_.has(M)?-1:1,J=N&&G?-1:1,X=Oc(w,_);let{mainAxis:$,crossAxis:ge,alignmentAxis:Se}=typeof X=="number"?{mainAxis:X,crossAxis:0,alignmentAxis:null}:{mainAxis:X.mainAxis||0,crossAxis:X.crossAxis||0,alignmentAxis:X.alignmentAxis};return d&&typeof Se=="number"&&(ge=d==="end"?Se*-1:Se),G?{x:ge*J,y:$*H}:{x:$*H,y:ge*J}}const lb=function(_){return _===void 0&&(_=0),{name:"offset",options:_,async fn(w){var C,A;const{x:k,y:N,placement:M,middlewareData:d}=w,G=await ob(w,_);return M===((C=d.offset)==null?void 0:C.placement)&&(A=d.arrow)!=null&&A.alignmentOffset?{}:{x:k+G.x,y:N+G.y,data:{...G,placement:M}}}}},cb=function(_){return _===void 0&&(_={}),{name:"shift",options:_,async fn(w){const{x:C,y:A,placement:k,platform:N}=w,{mainAxis:M=!0,crossAxis:d=!1,limiter:G={fn:Me=>{let{x:Ie,y:Pe}=Me;return{x:Ie,y:Pe}}},...H}=Oc(_,w),J={x:C,y:A},X=await N.detectOverflow(w,H),$=Pl(Bc(k)),ge=Pg($);let Se=J[ge],ce=J[$];if(M){const Me=ge==="y"?"top":"left",Ie=ge==="y"?"bottom":"right",Pe=Se+X[Me],qe=Se-X[Ie];Se=gg(Pe,Se,qe)}if(d){const Me=$==="y"?"top":"left",Ie=$==="y"?"bottom":"right",Pe=ce+X[Me],qe=ce-X[Ie];ce=gg(Pe,ce,qe)}const _e=G.fn({...w,[ge]:Se,[$]:ce});return{..._e,data:{x:_e.x-C,y:_e.y-A,enabled:{[ge]:M,[$]:d}}}}}},ub=function(_){return _===void 0&&(_={}),{options:_,fn(w){const{x:C,y:A,placement:k,rects:N,middlewareData:M}=w,{offset:d=0,mainAxis:G=!0,crossAxis:H=!0}=Oc(_,w),J={x:C,y:A},X=Pl(k),$=Pg(X);let ge=J[$],Se=J[X];const ce=Oc(d,w),_e=typeof ce=="number"?{mainAxis:ce,crossAxis:0}:{mainAxis:0,crossAxis:0,...ce};if(G){const Pe=$==="y"?"height":"width",qe=N.reference[$]-N.floating[Pe]+_e.mainAxis,Ze=N.reference[$]+N.reference[Pe]-_e.mainAxis;ge<qe?ge=qe:ge>Ze&&(ge=Ze)}if(H){var Me,Ie;const Pe=$==="y"?"width":"height",qe=g_.has(Bc(k)),Ze=N.reference[X]-N.floating[Pe]+(qe&&((Me=M.offset)==null?void 0:Me[X])||0)+(qe?0:_e.crossAxis),mt=N.reference[X]+N.reference[Pe]+(qe?0:((Ie=M.offset)==null?void 0:Ie[X])||0)-(qe?_e.crossAxis:0);Se<Ze?Se=Ze:Se>mt&&(Se=mt)}return{[$]:ge,[X]:Se}}}},hb=function(_){return _===void 0&&(_={}),{name:"size",options:_,async fn(w){var C,A;const{placement:k,rects:N,platform:M,elements:d}=w,{apply:G=()=>{},...H}=Oc(_,w),J=await M.detectOverflow(w,H),X=Bc(k),$=jd(k),ge=Pl(k)==="y",{width:Se,height:ce}=N.floating;let _e,Me;X==="top"||X==="bottom"?(_e=X,Me=$===(await(M.isRTL==null?void 0:M.isRTL(d.floating))?"start":"end")?"left":"right"):(Me=X,_e=$==="end"?"top":"bottom");const Ie=ce-J.top-J.bottom,Pe=Se-J.left-J.right,qe=ku(ce-J[_e],Ie),Ze=ku(Se-J[Me],Pe),mt=!w.middlewareData.shift;let it=qe,Lt=Ze;if((C=w.middlewareData.shift)!=null&&C.enabled.x&&(Lt=Pe),(A=w.middlewareData.shift)!=null&&A.enabled.y&&(it=Ie),mt&&!$){const Gt=ms(J.left,0),ot=ms(J.right,0),lt=ms(J.top,0),Ft=ms(J.bottom,0);ge?Lt=Se-2*(Gt!==0||ot!==0?Gt+ot:ms(J.left,J.right)):it=ce-2*(lt!==0||Ft!==0?lt+Ft:ms(J.top,J.bottom))}await G({...w,availableWidth:Lt,availableHeight:it});const Nt=await M.getDimensions(d.floating);return Se!==Nt.width||ce!==Nt.height?{reset:{rects:!0}}:{}}}};function Sm(){return typeof window<"u"}function Ud(_){return y_(_)?(_.nodeName||"").toLowerCase():"#document"}function gs(_){var w;return(_==null||(w=_.ownerDocument)==null?void 0:w.defaultView)||window}function Bl(_){var w;return(w=(y_(_)?_.ownerDocument:_.document)||window.document)==null?void 0:w.documentElement}function y_(_){return Sm()?_ instanceof Node||_ instanceof gs(_).Node:!1}function Ro(_){return Sm()?_ instanceof Element||_ instanceof gs(_).Element:!1}function Ol(_){return Sm()?_ instanceof HTMLElement||_ instanceof gs(_).HTMLElement:!1}function my(_){return!Sm()||typeof ShadowRoot>"u"?!1:_ instanceof ShadowRoot||_ instanceof gs(_).ShadowRoot}const db=new Set(["inline","contents"]);function sp(_){const{overflow:w,overflowX:C,overflowY:A,display:k}=Io(_);return/auto|scroll|overlay|hidden|clip/.test(w+A+C)&&!db.has(k)}const fb=new Set(["table","td","th"]);function pb(_){return fb.has(Ud(_))}const mb=[":popover-open",":modal"];function Tm(_){return mb.some(w=>{try{return _.matches(w)}catch{return!1}})}const gb=["transform","translate","scale","rotate","perspective"],yb=["transform","translate","scale","rotate","perspective","filter"],_b=["paint","layout","strict","content"];function Bg(_){const w=Ng(),C=Ro(_)?Io(_):_;return gb.some(A=>C[A]?C[A]!=="none":!1)||(C.containerType?C.containerType!=="normal":!1)||!w&&(C.backdropFilter?C.backdropFilter!=="none":!1)||!w&&(C.filter?C.filter!=="none":!1)||yb.some(A=>(C.willChange||"").includes(A))||_b.some(A=>(C.contain||"").includes(A))}function vb(_){let w=Pu(_);for(;Ol(w)&&!Od(w);){if(Bg(w))return w;if(Tm(w))return null;w=Pu(w)}return null}function Ng(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xb=new Set(["html","body","#document"]);function Od(_){return xb.has(Ud(_))}function Io(_){return gs(_).getComputedStyle(_)}function Em(_){return Ro(_)?{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}:{scrollLeft:_.scrollX,scrollTop:_.scrollY}}function Pu(_){if(Ud(_)==="html")return _;const w=_.assignedSlot||_.parentNode||my(_)&&_.host||Bl(_);return my(w)?w.host:w}function __(_){const w=Pu(_);return Od(w)?_.ownerDocument?_.ownerDocument.body:_.body:Ol(w)&&sp(w)?w:__(w)}function np(_,w,C){var A;w===void 0&&(w=[]),C===void 0&&(C=!0);const k=__(_),N=k===((A=_.ownerDocument)==null?void 0:A.body),M=gs(k);if(N){const d=_g(M);return w.concat(M,M.visualViewport||[],sp(k)?k:[],d&&C?np(d):[])}return w.concat(k,np(k,[],C))}function _g(_){return _.parent&&Object.getPrototypeOf(_.parent)?_.frameElement:null}function v_(_){const w=Io(_);let C=parseFloat(w.width)||0,A=parseFloat(w.height)||0;const k=Ol(_),N=k?_.offsetWidth:C,M=k?_.offsetHeight:A,d=mm(C)!==N||mm(A)!==M;return d&&(C=N,A=M),{width:C,height:A,$:d}}function Fg(_){return Ro(_)?_:_.contextElement}function kd(_){const w=Fg(_);if(!Ol(w))return Ll(1);const C=w.getBoundingClientRect(),{width:A,height:k,$:N}=v_(w);let M=(N?mm(C.width):C.width)/A,d=(N?mm(C.height):C.height)/k;return(!M||!Number.isFinite(M))&&(M=1),(!d||!Number.isFinite(d))&&(d=1),{x:M,y:d}}const bb=Ll(0);function x_(_){const w=gs(_);return!Ng()||!w.visualViewport?bb:{x:w.visualViewport.offsetLeft,y:w.visualViewport.offsetTop}}function wb(_,w,C){return w===void 0&&(w=!1),!C||w&&C!==gs(_)?!1:w}function bh(_,w,C,A){w===void 0&&(w=!1),C===void 0&&(C=!1);const k=_.getBoundingClientRect(),N=Fg(_);let M=Ll(1);w&&(A?Ro(A)&&(M=kd(A)):M=kd(_));const d=wb(N,C,A)?x_(N):Ll(0);let G=(k.left+d.x)/M.x,H=(k.top+d.y)/M.y,J=k.width/M.x,X=k.height/M.y;if(N){const $=gs(N),ge=A&&Ro(A)?gs(A):A;let Se=$,ce=_g(Se);for(;ce&&A&&ge!==Se;){const _e=kd(ce),Me=ce.getBoundingClientRect(),Ie=Io(ce),Pe=Me.left+(ce.clientLeft+parseFloat(Ie.paddingLeft))*_e.x,qe=Me.top+(ce.clientTop+parseFloat(Ie.paddingTop))*_e.y;G*=_e.x,H*=_e.y,J*=_e.x,X*=_e.y,G+=Pe,H+=qe,Se=gs(ce),ce=_g(Se)}}return ym({width:J,height:X,x:G,y:H})}function Am(_,w){const C=Em(_).scrollLeft;return w?w.left+C:bh(Bl(_)).left+C}function b_(_,w){const C=_.getBoundingClientRect(),A=C.left+w.scrollLeft-Am(_,C),k=C.top+w.scrollTop;return{x:A,y:k}}function Sb(_){let{elements:w,rect:C,offsetParent:A,strategy:k}=_;const N=k==="fixed",M=Bl(A),d=w?Tm(w.floating):!1;if(A===M||d&&N)return C;let G={scrollLeft:0,scrollTop:0},H=Ll(1);const J=Ll(0),X=Ol(A);if((X||!X&&!N)&&((Ud(A)!=="body"||sp(M))&&(G=Em(A)),Ol(A))){const ge=bh(A);H=kd(A),J.x=ge.x+A.clientLeft,J.y=ge.y+A.clientTop}const $=M&&!X&&!N?b_(M,G):Ll(0);return{width:C.width*H.x,height:C.height*H.y,x:C.x*H.x-G.scrollLeft*H.x+J.x+$.x,y:C.y*H.y-G.scrollTop*H.y+J.y+$.y}}function Tb(_){return Array.from(_.getClientRects())}function Eb(_){const w=Bl(_),C=Em(_),A=_.ownerDocument.body,k=ms(w.scrollWidth,w.clientWidth,A.scrollWidth,A.clientWidth),N=ms(w.scrollHeight,w.clientHeight,A.scrollHeight,A.clientHeight);let M=-C.scrollLeft+Am(_);const d=-C.scrollTop;return Io(A).direction==="rtl"&&(M+=ms(w.clientWidth,A.clientWidth)-k),{width:k,height:N,x:M,y:d}}const gy=25;function Ab(_,w){const C=gs(_),A=Bl(_),k=C.visualViewport;let N=A.clientWidth,M=A.clientHeight,d=0,G=0;if(k){N=k.width,M=k.height;const J=Ng();(!J||J&&w==="fixed")&&(d=k.offsetLeft,G=k.offsetTop)}const H=Am(A);if(H<=0){const J=A.ownerDocument,X=J.body,$=getComputedStyle(X),ge=J.compatMode==="CSS1Compat"&&parseFloat($.marginLeft)+parseFloat($.marginRight)||0,Se=Math.abs(A.clientWidth-X.clientWidth-ge);Se<=gy&&(N-=Se)}else H<=gy&&(N+=H);return{width:N,height:M,x:d,y:G}}const Cb=new Set(["absolute","fixed"]);function Mb(_,w){const C=bh(_,!0,w==="fixed"),A=C.top+_.clientTop,k=C.left+_.clientLeft,N=Ol(_)?kd(_):Ll(1),M=_.clientWidth*N.x,d=_.clientHeight*N.y,G=k*N.x,H=A*N.y;return{width:M,height:d,x:G,y:H}}function yy(_,w,C){let A;if(w==="viewport")A=Ab(_,C);else if(w==="document")A=Eb(Bl(_));else if(Ro(w))A=Mb(w,C);else{const k=x_(_);A={x:w.x-k.x,y:w.y-k.y,width:w.width,height:w.height}}return ym(A)}function w_(_,w){const C=Pu(_);return C===w||!Ro(C)||Od(C)?!1:Io(C).position==="fixed"||w_(C,w)}function zb(_,w){const C=w.get(_);if(C)return C;let A=np(_,[],!1).filter(d=>Ro(d)&&Ud(d)!=="body"),k=null;const N=Io(_).position==="fixed";let M=N?Pu(_):_;for(;Ro(M)&&!Od(M);){const d=Io(M),G=Bg(M);!G&&d.position==="fixed"&&(k=null),(N?!G&&!k:!G&&d.position==="static"&&!!k&&Cb.has(k.position)||sp(M)&&!G&&w_(_,M))?A=A.filter(J=>J!==M):k=d,M=Pu(M)}return w.set(_,A),A}function Db(_){let{element:w,boundary:C,rootBoundary:A,strategy:k}=_;const M=[...C==="clippingAncestors"?Tm(w)?[]:zb(w,this._c):[].concat(C),A],d=M[0],G=M.reduce((H,J)=>{const X=yy(w,J,k);return H.top=ms(X.top,H.top),H.right=ku(X.right,H.right),H.bottom=ku(X.bottom,H.bottom),H.left=ms(X.left,H.left),H},yy(w,d,k));return{width:G.right-G.left,height:G.bottom-G.top,x:G.left,y:G.top}}function Rb(_){const{width:w,height:C}=v_(_);return{width:w,height:C}}function Ib(_,w,C){const A=Ol(w),k=Bl(w),N=C==="fixed",M=bh(_,!0,N,w);let d={scrollLeft:0,scrollTop:0};const G=Ll(0);function H(){G.x=Am(k)}if(A||!A&&!N)if((Ud(w)!=="body"||sp(k))&&(d=Em(w)),A){const ge=bh(w,!0,N,w);G.x=ge.x+w.clientLeft,G.y=ge.y+w.clientTop}else k&&H();N&&!A&&k&&H();const J=k&&!A&&!N?b_(k,d):Ll(0),X=M.left+d.scrollLeft-G.x-J.x,$=M.top+d.scrollTop-G.y-J.y;return{x:X,y:$,width:M.width,height:M.height}}function eg(_){return Io(_).position==="static"}function _y(_,w){if(!Ol(_)||Io(_).position==="fixed")return null;if(w)return w(_);let C=_.offsetParent;return Bl(_)===C&&(C=C.ownerDocument.body),C}function S_(_,w){const C=gs(_);if(Tm(_))return C;if(!Ol(_)){let k=Pu(_);for(;k&&!Od(k);){if(Ro(k)&&!eg(k))return k;k=Pu(k)}return C}let A=_y(_,w);for(;A&&pb(A)&&eg(A);)A=_y(A,w);return A&&Od(A)&&eg(A)&&!Bg(A)?C:A||vb(_)||C}const kb=async function(_){const w=this.getOffsetParent||S_,C=this.getDimensions,A=await C(_.floating);return{reference:Ib(_.reference,await w(_.floating),_.strategy),floating:{x:0,y:0,width:A.width,height:A.height}}};function Pb(_){return Io(_).direction==="rtl"}const Lb={convertOffsetParentRelativeRectToViewportRelativeRect:Sb,getDocumentElement:Bl,getClippingRect:Db,getOffsetParent:S_,getElementRects:kb,getClientRects:Tb,getDimensions:Rb,getScale:kd,isElement:Ro,isRTL:Pb};function T_(_,w){return _.x===w.x&&_.y===w.y&&_.width===w.width&&_.height===w.height}function Ob(_,w){let C=null,A;const k=Bl(_);function N(){var d;clearTimeout(A),(d=C)==null||d.disconnect(),C=null}function M(d,G){d===void 0&&(d=!1),G===void 0&&(G=1),N();const H=_.getBoundingClientRect(),{left:J,top:X,width:$,height:ge}=H;if(d||w(),!$||!ge)return;const Se=im(X),ce=im(k.clientWidth-(J+$)),_e=im(k.clientHeight-(X+ge)),Me=im(J),Pe={rootMargin:-Se+"px "+-ce+"px "+-_e+"px "+-Me+"px",threshold:ms(0,ku(1,G))||1};let qe=!0;function Ze(mt){const it=mt[0].intersectionRatio;if(it!==G){if(!qe)return M();it?M(!1,it):A=setTimeout(()=>{M(!1,1e-7)},1e3)}it===1&&!T_(H,_.getBoundingClientRect())&&M(),qe=!1}try{C=new IntersectionObserver(Ze,{...Pe,root:k.ownerDocument})}catch{C=new IntersectionObserver(Ze,Pe)}C.observe(_)}return M(!0),N}function Bb(_,w,C,A){A===void 0&&(A={});const{ancestorScroll:k=!0,ancestorResize:N=!0,elementResize:M=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:G=!1}=A,H=Fg(_),J=k||N?[...H?np(H):[],...np(w)]:[];J.forEach(Me=>{k&&Me.addEventListener("scroll",C,{passive:!0}),N&&Me.addEventListener("resize",C)});const X=H&&d?Ob(H,C):null;let $=-1,ge=null;M&&(ge=new ResizeObserver(Me=>{let[Ie]=Me;Ie&&Ie.target===H&&ge&&(ge.unobserve(w),cancelAnimationFrame($),$=requestAnimationFrame(()=>{var Pe;(Pe=ge)==null||Pe.observe(w)})),C()}),H&&!G&&ge.observe(H),ge.observe(w));let Se,ce=G?bh(_):null;G&&_e();function _e(){const Me=bh(_);ce&&!T_(ce,Me)&&C(),ce=Me,Se=requestAnimationFrame(_e)}return C(),()=>{var Me;J.forEach(Ie=>{k&&Ie.removeEventListener("scroll",C),N&&Ie.removeEventListener("resize",C)}),X?.(),(Me=ge)==null||Me.disconnect(),ge=null,G&&cancelAnimationFrame(Se)}}const Nb=lb,Fb=cb,jb=ab,Ub=hb,Vb=sb,vy=rb,qb=ub,Hb=(_,w,C)=>{const A=new Map,k={platform:Lb,...C},N={...k.platform,_c:A};return nb(_,w,{...k,platform:N})};var Zb=typeof document<"u",Gb=function(){},cm=Zb?ee.useLayoutEffect:Gb;function _m(_,w){if(_===w)return!0;if(typeof _!=typeof w)return!1;if(typeof _=="function"&&_.toString()===w.toString())return!0;let C,A,k;if(_&&w&&typeof _=="object"){if(Array.isArray(_)){if(C=_.length,C!==w.length)return!1;for(A=C;A--!==0;)if(!_m(_[A],w[A]))return!1;return!0}if(k=Object.keys(_),C=k.length,C!==Object.keys(w).length)return!1;for(A=C;A--!==0;)if(!{}.hasOwnProperty.call(w,k[A]))return!1;for(A=C;A--!==0;){const N=k[A];if(!(N==="_owner"&&_.$$typeof)&&!_m(_[N],w[N]))return!1}return!0}return _!==_&&w!==w}function E_(_){return typeof window>"u"?1:(_.ownerDocument.defaultView||window).devicePixelRatio||1}function xy(_,w){const C=E_(_);return Math.round(w*C)/C}function tg(_){const w=ee.useRef(_);return cm(()=>{w.current=_}),w}function $b(_){_===void 0&&(_={});const{placement:w="bottom",strategy:C="absolute",middleware:A=[],platform:k,elements:{reference:N,floating:M}={},transform:d=!0,whileElementsMounted:G,open:H}=_,[J,X]=ee.useState({x:0,y:0,strategy:C,placement:w,middlewareData:{},isPositioned:!1}),[$,ge]=ee.useState(A);_m($,A)||ge(A);const[Se,ce]=ee.useState(null),[_e,Me]=ee.useState(null),Ie=ee.useCallback(Qe=>{Qe!==mt.current&&(mt.current=Qe,ce(Qe))},[]),Pe=ee.useCallback(Qe=>{Qe!==it.current&&(it.current=Qe,Me(Qe))},[]),qe=N||Se,Ze=M||_e,mt=ee.useRef(null),it=ee.useRef(null),Lt=ee.useRef(J),Nt=G!=null,Gt=tg(G),ot=tg(k),lt=tg(H),Ft=ee.useCallback(()=>{if(!mt.current||!it.current)return;const Qe={placement:w,strategy:C,middleware:$};ot.current&&(Qe.platform=ot.current),Hb(mt.current,it.current,Qe).then(Mt=>{const se={...Mt,isPositioned:lt.current!==!1};Rt.current&&!_m(Lt.current,se)&&(Lt.current=se,ap.flushSync(()=>{X(se)}))})},[$,w,C,ot,lt]);cm(()=>{H===!1&&Lt.current.isPositioned&&(Lt.current.isPositioned=!1,X(Qe=>({...Qe,isPositioned:!1})))},[H]);const Rt=ee.useRef(!1);cm(()=>(Rt.current=!0,()=>{Rt.current=!1}),[]),cm(()=>{if(qe&&(mt.current=qe),Ze&&(it.current=Ze),qe&&Ze){if(Gt.current)return Gt.current(qe,Ze,Ft);Ft()}},[qe,Ze,Ft,Gt,Nt]);const qt=ee.useMemo(()=>({reference:mt,floating:it,setReference:Ie,setFloating:Pe}),[Ie,Pe]),De=ee.useMemo(()=>({reference:qe,floating:Ze}),[qe,Ze]),Ge=ee.useMemo(()=>{const Qe={position:C,left:0,top:0};if(!De.floating)return Qe;const Mt=xy(De.floating,J.x),se=xy(De.floating,J.y);return d?{...Qe,transform:"translate("+Mt+"px, "+se+"px)",...E_(De.floating)>=1.5&&{willChange:"transform"}}:{position:C,left:Mt,top:se}},[C,d,De.floating,J.x,J.y]);return ee.useMemo(()=>({...J,update:Ft,refs:qt,elements:De,floatingStyles:Ge}),[J,Ft,qt,De,Ge])}const Xb=_=>{function w(C){return{}.hasOwnProperty.call(C,"current")}return{name:"arrow",options:_,fn(C){const{element:A,padding:k}=typeof _=="function"?_(C):_;return A&&w(A)?A.current!=null?vy({element:A.current,padding:k}).fn(C):{}:A?vy({element:A,padding:k}).fn(C):{}}}},Yb=(_,w)=>({...Nb(_),options:[_,w]}),Kb=(_,w)=>({...Fb(_),options:[_,w]}),Wb=(_,w)=>({...qb(_),options:[_,w]}),Qb=(_,w)=>({...jb(_),options:[_,w]}),Jb=(_,w)=>({...Ub(_),options:[_,w]}),e1=(_,w)=>({...Vb(_),options:[_,w]}),t1=(_,w)=>({...Xb(_),options:[_,w]});var i1="Arrow",A_=ee.forwardRef((_,w)=>{const{children:C,width:A=10,height:k=5,...N}=_;return be.jsx(En.svg,{...N,ref:w,width:A,height:k,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_.asChild?C:be.jsx("polygon",{points:"0,0 30,0 15,10"})})});A_.displayName=i1;var n1=A_,jg="Popper",[C_,Cm]=rp(jg),[r1,M_]=C_(jg),z_=_=>{const{__scopePopper:w,children:C}=_,[A,k]=ee.useState(null);return be.jsx(r1,{scope:w,anchor:A,onAnchorChange:k,children:C})};z_.displayName=jg;var D_="PopperAnchor",R_=ee.forwardRef((_,w)=>{const{__scopePopper:C,virtualRef:A,...k}=_,N=M_(D_,C),M=ee.useRef(null),d=Tn(w,M);return ee.useEffect(()=>{N.onAnchorChange(A?.current||M.current)}),A?null:be.jsx(En.div,{...k,ref:d})});R_.displayName=D_;var Ug="PopperContent",[a1,s1]=C_(Ug),I_=ee.forwardRef((_,w)=>{const{__scopePopper:C,side:A="bottom",sideOffset:k=0,align:N="center",alignOffset:M=0,arrowPadding:d=0,avoidCollisions:G=!0,collisionBoundary:H=[],collisionPadding:J=0,sticky:X="partial",hideWhenDetached:$=!1,updatePositionStrategy:ge="optimized",onPlaced:Se,...ce}=_,_e=M_(Ug,C),[Me,Ie]=ee.useState(null),Pe=Tn(w,Tt=>Ie(Tt)),[qe,Ze]=ee.useState(null),mt=Wy(qe),it=mt?.width??0,Lt=mt?.height??0,Nt=A+(N!=="center"?"-"+N:""),Gt=typeof J=="number"?J:{top:0,right:0,bottom:0,left:0,...J},ot=Array.isArray(H)?H:[H],lt=ot.length>0,Ft={padding:Gt,boundary:ot.filter(l1),altBoundary:lt},{refs:Rt,floatingStyles:qt,placement:De,isPositioned:Ge,middlewareData:Qe}=$b({strategy:"fixed",placement:Nt,whileElementsMounted:(...Tt)=>Bb(...Tt,{animationFrame:ge==="always"}),elements:{reference:_e.anchor},middleware:[Yb({mainAxis:k+Lt,alignmentAxis:M}),G&&Kb({mainAxis:!0,crossAxis:!1,limiter:X==="partial"?Wb():void 0,...Ft}),G&&Qb({...Ft}),Jb({...Ft,apply:({elements:Tt,rects:Ct,availableWidth:Ii,availableHeight:pi})=>{const{width:Si,height:Ti}=Ct.reference,an=Tt.floating.style;an.setProperty("--radix-popper-available-width",`${Ii}px`),an.setProperty("--radix-popper-available-height",`${pi}px`),an.setProperty("--radix-popper-anchor-width",`${Si}px`),an.setProperty("--radix-popper-anchor-height",`${Ti}px`)}}),qe&&t1({element:qe,padding:d}),c1({arrowWidth:it,arrowHeight:Lt}),$&&e1({strategy:"referenceHidden",...Ft})]}),[Mt,se]=L_(De),je=Lc(Se);ba(()=>{Ge&&je?.()},[Ge,je]);const Je=Qe.arrow?.x,st=Qe.arrow?.y,bt=Qe.arrow?.centerOffset!==0,[$t,Et]=ee.useState();return ba(()=>{Me&&Et(window.getComputedStyle(Me).zIndex)},[Me]),be.jsx("div",{ref:Rt.setFloating,"data-radix-popper-content-wrapper":"",style:{...qt,transform:Ge?qt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$t,"--radix-popper-transform-origin":[Qe.transformOrigin?.x,Qe.transformOrigin?.y].join(" "),...Qe.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:_.dir,children:be.jsx(a1,{scope:C,placedSide:Mt,onArrowChange:Ze,arrowX:Je,arrowY:st,shouldHideArrow:bt,children:be.jsx(En.div,{"data-side":Mt,"data-align":se,...ce,ref:Pe,style:{...ce.style,animation:Ge?void 0:"none"}})})})});I_.displayName=Ug;var k_="PopperArrow",o1={top:"bottom",right:"left",bottom:"top",left:"right"},P_=ee.forwardRef(function(w,C){const{__scopePopper:A,...k}=w,N=s1(k_,A),M=o1[N.placedSide];return be.jsx("span",{ref:N.onArrowChange,style:{position:"absolute",left:N.arrowX,top:N.arrowY,[M]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[N.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[N.placedSide],visibility:N.shouldHideArrow?"hidden":void 0},children:be.jsx(n1,{...k,ref:C,style:{...k.style,display:"block"}})})});P_.displayName=k_;function l1(_){return _!==null}var c1=_=>({name:"transformOrigin",options:_,fn(w){const{placement:C,rects:A,middlewareData:k}=w,M=k.arrow?.centerOffset!==0,d=M?0:_.arrowWidth,G=M?0:_.arrowHeight,[H,J]=L_(C),X={start:"0%",center:"50%",end:"100%"}[J],$=(k.arrow?.x??0)+d/2,ge=(k.arrow?.y??0)+G/2;let Se="",ce="";return H==="bottom"?(Se=M?X:`${$}px`,ce=`${-G}px`):H==="top"?(Se=M?X:`${$}px`,ce=`${A.floating.height+G}px`):H==="right"?(Se=`${-G}px`,ce=M?X:`${ge}px`):H==="left"&&(Se=`${A.floating.width+G}px`,ce=M?X:`${ge}px`),{data:{x:Se,y:ce}}}});function L_(_){const[w,C="center"]=_.split("-");return[w,C]}var O_=z_,B_=R_,N_=I_,F_=P_,u1="Portal",j_=ee.forwardRef((_,w)=>{const{container:C,...A}=_,[k,N]=ee.useState(!1);ba(()=>N(!0),[]);const M=C||k&&globalThis?.document?.body;return M?p0.createPortal(be.jsx(En.div,{...A,ref:w}),M):null});j_.displayName=u1;function h1(_,w){return ee.useReducer((C,A)=>w[C][A]??C,_)}var U_=_=>{const{present:w,children:C}=_,A=d1(w),k=typeof C=="function"?C({present:A.isPresent}):ee.Children.only(C),N=Tn(A.ref,f1(k));return typeof C=="function"||A.isPresent?ee.cloneElement(k,{ref:N}):null};U_.displayName="Presence";function d1(_){const[w,C]=ee.useState(),A=ee.useRef({}),k=ee.useRef(_),N=ee.useRef("none"),M=_?"mounted":"unmounted",[d,G]=h1(M,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ee.useEffect(()=>{const H=nm(A.current);N.current=d==="mounted"?H:"none"},[d]),ba(()=>{const H=A.current,J=k.current;if(J!==_){const $=N.current,ge=nm(H);_?G("MOUNT"):ge==="none"||H?.display==="none"?G("UNMOUNT"):G(J&&$!==ge?"ANIMATION_OUT":"UNMOUNT"),k.current=_}},[_,G]),ba(()=>{if(w){let H;const J=w.ownerDocument.defaultView??window,X=ge=>{const ce=nm(A.current).includes(ge.animationName);if(ge.target===w&&ce&&(G("ANIMATION_END"),!k.current)){const _e=w.style.animationFillMode;w.style.animationFillMode="forwards",H=J.setTimeout(()=>{w.style.animationFillMode==="forwards"&&(w.style.animationFillMode=_e)})}},$=ge=>{ge.target===w&&(N.current=nm(A.current))};return w.addEventListener("animationstart",$),w.addEventListener("animationcancel",X),w.addEventListener("animationend",X),()=>{J.clearTimeout(H),w.removeEventListener("animationstart",$),w.removeEventListener("animationcancel",X),w.removeEventListener("animationend",X)}}else G("ANIMATION_END")},[w,G]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:ee.useCallback(H=>{H&&(A.current=getComputedStyle(H)),C(H)},[])}}function nm(_){return _?.animationName||"none"}function f1(_){let w=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,C=w&&"isReactWarning"in w&&w.isReactWarning;return C?_.ref:(w=Object.getOwnPropertyDescriptor(_,"ref")?.get,C=w&&"isReactWarning"in w&&w.isReactWarning,C?_.props.ref:_.props.ref||_.ref)}var p1="VisuallyHidden",Vg=ee.forwardRef((_,w)=>be.jsx(En.span,{..._,ref:w,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._.style}}));Vg.displayName=p1;var m1=Vg,[Mm]=rp("Tooltip",[Cm]),zm=Cm(),V_="TooltipProvider",g1=700,vg="tooltip.open",[y1,qg]=Mm(V_),q_=_=>{const{__scopeTooltip:w,delayDuration:C=g1,skipDelayDuration:A=300,disableHoverableContent:k=!1,children:N}=_,[M,d]=ee.useState(!0),G=ee.useRef(!1),H=ee.useRef(0);return ee.useEffect(()=>{const J=H.current;return()=>window.clearTimeout(J)},[]),be.jsx(y1,{scope:w,isOpenDelayed:M,delayDuration:C,onOpen:ee.useCallback(()=>{window.clearTimeout(H.current),d(!1)},[]),onClose:ee.useCallback(()=>{window.clearTimeout(H.current),H.current=window.setTimeout(()=>d(!0),A)},[A]),isPointerInTransitRef:G,onPointerInTransitChange:ee.useCallback(J=>{G.current=J},[]),disableHoverableContent:k,children:N})};q_.displayName=V_;var Dm="Tooltip",[_1,Rm]=Mm(Dm),H_=_=>{const{__scopeTooltip:w,children:C,open:A,defaultOpen:k=!1,onOpenChange:N,disableHoverableContent:M,delayDuration:d}=_,G=qg(Dm,_.__scopeTooltip),H=zm(w),[J,X]=ee.useState(null),$=wm(),ge=ee.useRef(0),Se=M??G.disableHoverableContent,ce=d??G.delayDuration,_e=ee.useRef(!1),[Me=!1,Ie]=pm({prop:A,defaultProp:k,onChange:it=>{it?(G.onOpen(),document.dispatchEvent(new CustomEvent(vg))):G.onClose(),N?.(it)}}),Pe=ee.useMemo(()=>Me?_e.current?"delayed-open":"instant-open":"closed",[Me]),qe=ee.useCallback(()=>{window.clearTimeout(ge.current),ge.current=0,_e.current=!1,Ie(!0)},[Ie]),Ze=ee.useCallback(()=>{window.clearTimeout(ge.current),ge.current=0,Ie(!1)},[Ie]),mt=ee.useCallback(()=>{window.clearTimeout(ge.current),ge.current=window.setTimeout(()=>{_e.current=!0,Ie(!0),ge.current=0},ce)},[ce,Ie]);return ee.useEffect(()=>()=>{ge.current&&(window.clearTimeout(ge.current),ge.current=0)},[]),be.jsx(O_,{...H,children:be.jsx(_1,{scope:w,contentId:$,open:Me,stateAttribute:Pe,trigger:J,onTriggerChange:X,onTriggerEnter:ee.useCallback(()=>{G.isOpenDelayed?mt():qe()},[G.isOpenDelayed,mt,qe]),onTriggerLeave:ee.useCallback(()=>{Se?Ze():(window.clearTimeout(ge.current),ge.current=0)},[Ze,Se]),onOpen:qe,onClose:Ze,disableHoverableContent:Se,children:C})})};H_.displayName=Dm;var xg="TooltipTrigger",Z_=ee.forwardRef((_,w)=>{const{__scopeTooltip:C,...A}=_,k=Rm(xg,C),N=qg(xg,C),M=zm(C),d=ee.useRef(null),G=Tn(w,d,k.onTriggerChange),H=ee.useRef(!1),J=ee.useRef(!1),X=ee.useCallback(()=>H.current=!1,[]);return ee.useEffect(()=>()=>document.removeEventListener("pointerup",X),[X]),be.jsx(B_,{asChild:!0,...M,children:be.jsx(En.button,{"aria-describedby":k.open?k.contentId:void 0,"data-state":k.stateAttribute,...A,ref:G,onPointerMove:Fi(_.onPointerMove,$=>{$.pointerType!=="touch"&&!J.current&&!N.isPointerInTransitRef.current&&(k.onTriggerEnter(),J.current=!0)}),onPointerLeave:Fi(_.onPointerLeave,()=>{k.onTriggerLeave(),J.current=!1}),onPointerDown:Fi(_.onPointerDown,()=>{H.current=!0,document.addEventListener("pointerup",X,{once:!0})}),onFocus:Fi(_.onFocus,()=>{H.current||k.onOpen()}),onBlur:Fi(_.onBlur,k.onClose),onClick:Fi(_.onClick,k.onClose)})})});Z_.displayName=xg;var v1="TooltipPortal",[N2,x1]=Mm(v1,{forceMount:void 0}),Bd="TooltipContent",G_=ee.forwardRef((_,w)=>{const C=x1(Bd,_.__scopeTooltip),{forceMount:A=C.forceMount,side:k="top",...N}=_,M=Rm(Bd,_.__scopeTooltip);return be.jsx(U_,{present:A||M.open,children:M.disableHoverableContent?be.jsx($_,{side:k,...N,ref:w}):be.jsx(b1,{side:k,...N,ref:w})})}),b1=ee.forwardRef((_,w)=>{const C=Rm(Bd,_.__scopeTooltip),A=qg(Bd,_.__scopeTooltip),k=ee.useRef(null),N=Tn(w,k),[M,d]=ee.useState(null),{trigger:G,onClose:H}=C,J=k.current,{onPointerInTransitChange:X}=A,$=ee.useCallback(()=>{d(null),X(!1)},[X]),ge=ee.useCallback((Se,ce)=>{const _e=Se.currentTarget,Me={x:Se.clientX,y:Se.clientY},Ie=E1(Me,_e.getBoundingClientRect()),Pe=A1(Me,Ie),qe=C1(ce.getBoundingClientRect()),Ze=z1([...Pe,...qe]);d(Ze),X(!0)},[X]);return ee.useEffect(()=>()=>$(),[$]),ee.useEffect(()=>{if(G&&J){const Se=_e=>ge(_e,J),ce=_e=>ge(_e,G);return G.addEventListener("pointerleave",Se),J.addEventListener("pointerleave",ce),()=>{G.removeEventListener("pointerleave",Se),J.removeEventListener("pointerleave",ce)}}},[G,J,ge,$]),ee.useEffect(()=>{if(M){const Se=ce=>{const _e=ce.target,Me={x:ce.clientX,y:ce.clientY},Ie=G?.contains(_e)||J?.contains(_e),Pe=!M1(Me,M);Ie?$():Pe&&($(),H())};return document.addEventListener("pointermove",Se),()=>document.removeEventListener("pointermove",Se)}},[G,J,M,H,$]),be.jsx($_,{..._,ref:N})}),[w1,S1]=Mm(Dm,{isInside:!1}),$_=ee.forwardRef((_,w)=>{const{__scopeTooltip:C,children:A,"aria-label":k,onEscapeKeyDown:N,onPointerDownOutside:M,...d}=_,G=Rm(Bd,C),H=zm(C),{onClose:J}=G;return ee.useEffect(()=>(document.addEventListener(vg,J),()=>document.removeEventListener(vg,J)),[J]),ee.useEffect(()=>{if(G.trigger){const X=$=>{$.target?.contains(G.trigger)&&J()};return window.addEventListener("scroll",X,{capture:!0}),()=>window.removeEventListener("scroll",X,{capture:!0})}},[G.trigger,J]),be.jsx(kg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:N,onPointerDownOutside:M,onFocusOutside:X=>X.preventDefault(),onDismiss:J,children:be.jsxs(N_,{"data-state":G.stateAttribute,...H,...d,ref:w,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[be.jsx(jy,{children:A}),be.jsx(w1,{scope:C,isInside:!0,children:be.jsx(m1,{id:G.contentId,role:"tooltip",children:k||A})})]})})});G_.displayName=Bd;var X_="TooltipArrow",T1=ee.forwardRef((_,w)=>{const{__scopeTooltip:C,...A}=_,k=zm(C);return S1(X_,C).isInside?null:be.jsx(F_,{...k,...A,ref:w})});T1.displayName=X_;function E1(_,w){const C=Math.abs(w.top-_.y),A=Math.abs(w.bottom-_.y),k=Math.abs(w.right-_.x),N=Math.abs(w.left-_.x);switch(Math.min(C,A,k,N)){case N:return"left";case k:return"right";case C:return"top";case A:return"bottom";default:throw new Error("unreachable")}}function A1(_,w,C=5){const A=[];switch(w){case"top":A.push({x:_.x-C,y:_.y+C},{x:_.x+C,y:_.y+C});break;case"bottom":A.push({x:_.x-C,y:_.y-C},{x:_.x+C,y:_.y-C});break;case"left":A.push({x:_.x+C,y:_.y-C},{x:_.x+C,y:_.y+C});break;case"right":A.push({x:_.x-C,y:_.y-C},{x:_.x-C,y:_.y+C});break}return A}function C1(_){const{top:w,right:C,bottom:A,left:k}=_;return[{x:k,y:w},{x:C,y:w},{x:C,y:A},{x:k,y:A}]}function M1(_,w){const{x:C,y:A}=_;let k=!1;for(let N=0,M=w.length-1;N<w.length;M=N++){const d=w[N].x,G=w[N].y,H=w[M].x,J=w[M].y;G>A!=J>A&&C<(H-d)*(A-G)/(J-G)+d&&(k=!k)}return k}function z1(_){const w=_.slice();return w.sort((C,A)=>C.x<A.x?-1:C.x>A.x?1:C.y<A.y?-1:C.y>A.y?1:0),D1(w)}function D1(_){if(_.length<=1)return _.slice();const w=[];for(let A=0;A<_.length;A++){const k=_[A];for(;w.length>=2;){const N=w[w.length-1],M=w[w.length-2];if((N.x-M.x)*(k.y-M.y)>=(N.y-M.y)*(k.x-M.x))w.pop();else break}w.push(k)}w.pop();const C=[];for(let A=_.length-1;A>=0;A--){const k=_[A];for(;C.length>=2;){const N=C[C.length-1],M=C[C.length-2];if((N.x-M.x)*(k.y-M.y)>=(N.y-M.y)*(k.x-M.x))C.pop();else break}C.push(k)}return C.pop(),w.length===1&&C.length===1&&w[0].x===C[0].x&&w[0].y===C[0].y?w:w.concat(C)}var R1=q_,I1=H_,k1=Z_,Y_=G_;const P1=R1,L1=I1,O1=k1,K_=ee.forwardRef(({className:_,sideOffset:w=4,...C},A)=>be.jsx(Y_,{ref:A,sideOffset:w,className:xa("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_),...C}));K_.displayName=Y_.displayName;function B1(_,w){if(!_)return null;try{const C=new Date(_);if(Number.isNaN(C.getTime()))return null;const A=new Date(C.getTime()+w*60*60*1e3),k=new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"}).format(A),N=`FH ${w}`;return{primary:k,secondary:N}}catch{return null}}function N1({forecastHour:_,availableFrames:w,onForecastHourChange:C,isPlaying:A,setIsPlaying:k,runDateTimeISO:N,disabled:M}){const d=ee.useMemo(()=>B1(N,_),[N,_]),G=w.length>0,H=Math.max(0,w.indexOf(_));return be.jsx(P1,{delayDuration:300,children:be.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 z-40 flex items-end justify-center px-4 pb-5 sm:pb-6",children:be.jsxs("div",{className:"pointer-events-auto flex w-full max-w-3xl flex-col gap-3 rounded-md border border-border/50 bg-[hsl(var(--toolbar))]/95 px-5 py-3.5 shadow-2xl backdrop-blur-md sm:flex-row sm:items-center sm:gap-5",children:[be.jsx("div",{className:"flex shrink-0 items-center gap-2",children:be.jsxs(L1,{children:[be.jsx(O1,{asChild:!0,children:be.jsx(Xy,{variant:A?"default":"outline",size:"sm",onClick:()=>k(!A),disabled:M||!G,"aria-label":A?"Pause animation":"Play animation",className:"h-10 w-10 p-0 transition-all duration-150 hover:scale-105 active:scale-95",children:A?be.jsx(Ex,{className:"h-4 w-4"}):be.jsx(Cx,{className:"h-4 w-4 translate-x-px"})})}),be.jsxs(K_,{side:"top",children:[A?"Pause":"Play"," animation"]})]})}),be.jsxs("div",{className:"flex flex-1 flex-col gap-1.5",children:[be.jsxs("div",{className:"flex items-center justify-between",children:[be.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-medium uppercase tracking-wider text-muted-foreground/80",children:[be.jsx(Ny,{className:"h-3 w-3"}),"Forecast Hour"]}),be.jsxs("span",{className:"font-mono text-xs font-semibold tabular-nums tracking-tight text-foreground transition-all duration-150",children:[_,"h"]})]}),be.jsx(Ig,{value:[H],onValueChange:([J])=>{const X=w[Math.round(J??0)];Number.isFinite(X)&&C(X)},min:0,max:Math.max(0,w.length-1),step:1,disabled:M||A||!G,className:"w-full transition-opacity duration-150"})]}),be.jsx("div",{className:"flex shrink-0 flex-col items-end gap-1 border-l border-border/30 pl-5 sm:min-w-[220px]",children:d?be.jsxs(be.Fragment,{children:[be.jsx("span",{className:"text-sm font-semibold leading-tight tracking-tight text-foreground transition-all duration-200",children:d.primary}),be.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-muted-foreground/70 transition-all duration-200",children:d.secondary})]}):be.jsxs("div",{className:"flex items-center gap-1.5",children:[be.jsx(zg,{className:"h-3 w-3 text-muted-foreground"}),be.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Valid time unavailable"})]})})]})})})}var um={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var F1=um.exports,by;function j1(){return by||(by=1,(function(_,w){(function(C,A){_.exports=A()})(F1,(function(){var C={},A={};function k(M,d,G){if(A[M]=G,M==="index"){var H="var sharedModule = {}; ("+A.shared+")(sharedModule); ("+A.worker+")(sharedModule);",J={};return A.shared(J),A.index(C,J),typeof window<"u"&&C.setWorkerUrl(window.URL.createObjectURL(new Blob([H],{type:"text/javascript"}))),C}}k("shared",["exports"],(function(M){function d(n,t,r,o){return new(r||(r=Promise))((function(h,g){function y(D){try{S(o.next(D))}catch(R){g(R)}}function x(D){try{S(o.throw(D))}catch(R){g(R)}}function S(D){var R;D.done?h(D.value):(R=D.value,R instanceof r?R:new r((function(P){P(R)}))).then(y,x)}S((o=o.apply(n,t||[])).next())}))}function G(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}typeof SuppressedError=="function"&&SuppressedError;var H=J;function J(n,t){this.x=n,this.y=t}J.prototype={clone:function(){return new J(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,t){return this.clone()._rotateAround(n,t)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var t=n.x-this.x,r=n.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,t){return Math.atan2(this.x*t-this.y*n,this.x*n+this.y*t)},_matMult:function(n){var t=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=t,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var t=Math.cos(n),r=Math.sin(n),o=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=o,this},_rotateAround:function(n,t){var r=Math.cos(n),o=Math.sin(n),h=t.y+o*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-o*(this.y-t.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},J.convert=function(n){return n instanceof J?n:Array.isArray(n)?new J(n[0],n[1]):n};var X=G(H),$=ge;function ge(n,t,r,o){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=r,this.p2y=o}ge.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,o=0;o<8;o++){var h=this.sampleCurveX(r)-n;if(Math.abs(h)<t)return r;var g=this.sampleCurveDerivativeX(r);if(Math.abs(g)<1e-6)break;r-=h/g}var y=0,x=1;for(r=n,o=0;o<20&&(h=this.sampleCurveX(r),!(Math.abs(h-n)<t));o++)n>h?y=r:x=r,r=.5*(x-y)+y;return r},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var Se=G($);let ce,_e;function Me(){return ce==null&&(ce=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ce}function Ie(){if(_e==null&&(_e=!1,Me())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let o=0;o<25;o++){const h=4*o;t.fillStyle=`rgb(${h},${h+1},${h+2})`,t.fillRect(o%5,Math.floor(o/5),1,1)}const r=t.getImageData(0,0,5,5).data;for(let o=0;o<100;o++)if(o%4!=3&&r[o]!==o){_e=!0;break}}}return _e||!1}function Pe(n,t,r,o){const h=new Se(n,t,r,o);return g=>h.solve(g)}const qe=Pe(.25,.1,.25,1);function Ze(n,t,r){return Math.min(r,Math.max(t,n))}function mt(n,t,r){const o=r-t,h=((n-t)%o+o)%o+t;return h===t?r:h}function it(n,...t){for(const r of t)for(const o in r)n[o]=r[o];return n}let Lt=1;function Nt(n,t,r){const o={};for(const h in n)o[h]=t.call(this,n[h],h,n);return o}function Gt(n,t,r){const o={};for(const h in n)t.call(this,n[h],h,n)&&(o[h]=n[h]);return o}function ot(n){return Array.isArray(n)?n.map(ot):typeof n=="object"&&n?Nt(n,ot):n}const lt={};function Ft(n){lt[n]||(typeof console<"u"&&console.warn(n),lt[n]=!0)}function Rt(n,t,r){return(r.y-n.y)*(t.x-n.x)>(t.y-n.y)*(r.x-n.x)}function qt(n){return typeof WorkerGlobalScope<"u"&&n!==void 0&&n instanceof WorkerGlobalScope}let De=null;function Ge(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap}const Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Mt(n,t,r,o,h){return d(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const g=new VideoFrame(n,{timestamp:0});try{const y=g?.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);const x=y.startsWith("BGR"),S=new Uint8ClampedArray(o*h*4);if(yield g.copyTo(S,(function(D,R,P,B,j){const Z=4*Math.max(-R,0),Y=(Math.max(0,P)-P)*B*4+Z,ie=4*B,he=Math.max(0,R),Ce=Math.max(0,P);return{rect:{x:he,y:Ce,width:Math.min(D.width,R+B)-he,height:Math.min(D.height,P+j)-Ce},layout:[{offset:Y,stride:ie}]}})(n,t,r,o,h)),x)for(let D=0;D<S.length;D+=4){const R=S[D];S[D]=S[D+2],S[D+2]=R}return S}finally{g.close()}}))}let se,je;const Je="AbortError";function st(){return new Error(Je)}const bt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function $t(n){return bt.REGISTERED_PROTOCOLS[n.substring(0,n.indexOf("://"))]}const Et="global-dispatcher";class Tt extends Error{constructor(t,r,o,h){super(`AJAXError: ${r} (${t}): ${o}`),this.status=t,this.statusText=r,this.url=o,this.body=h}}const Ct=()=>qt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ii=function(n,t){if(/:\/\//.test(n.url)&&!/^https?:|^file:/.test(n.url)){const o=$t(n.url);if(o)return o(n,t);if(qt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:n,targetMapId:Et},t)}if(!(/^file:/.test(r=n.url)||/^file:/.test(Ct())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(o,h){return d(this,void 0,void 0,(function*(){const g=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Ct(),signal:h.signal});o.type!=="json"||g.headers.has("Accept")||g.headers.set("Accept","application/json");const y=yield fetch(g);if(!y.ok){const D=yield y.blob();throw new Tt(y.status,y.statusText,o.url,D)}let x;x=o.type==="arrayBuffer"||o.type==="image"?y.arrayBuffer():o.type==="json"?y.json():y.text();const S=yield x;if(h.signal.aborted)throw st();return{data:S,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}}))})(n,t);if(qt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:n,mustQueue:!0,targetMapId:Et},t)}var r;return(function(o,h){return new Promise(((g,y)=>{var x;const S=new XMLHttpRequest;S.open(o.method||"GET",o.url,!0),o.type!=="arrayBuffer"&&o.type!=="image"||(S.responseType="arraybuffer");for(const D in o.headers)S.setRequestHeader(D,o.headers[D]);o.type==="json"&&(S.responseType="text",!((x=o.headers)===null||x===void 0)&&x.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=o.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if(!h.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let D=S.response;if(o.type==="json")try{D=JSON.parse(S.response)}catch(R){return void y(R)}g({data:D,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const D=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new Tt(S.status,S.statusText,o.url,D))}},h.signal.addEventListener("abort",(()=>{S.abort(),y(st())})),S.send(o.body)}))})(n,t)};function pi(n){if(!n||n.indexOf("://")<=0||n.indexOf("data:image/")===0||n.indexOf("blob:")===0)return!0;const t=new URL(n),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function Si(n,t,r){r[n]&&r[n].indexOf(t)!==-1||(r[n]=r[n]||[],r[n].push(t))}function Ti(n,t,r){if(r&&r[n]){const o=r[n].indexOf(t);o!==-1&&r[n].splice(o,1)}}class an{constructor(t,r={}){it(this,r),this.type=t}}class Bn extends an{constructor(t,r={}){super("error",it({error:t},r))}}class wa{on(t,r){return this._listeners=this._listeners||{},Si(t,r,this._listeners),this}off(t,r){return Ti(t,r,this._listeners),Ti(t,r,this._oneTimeListeners),this}once(t,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Si(t,r,this._oneTimeListeners),this):new Promise((o=>this.once(t,o)))}fire(t,r){typeof t=="string"&&(t=new an(t,r||{}));const o=t.type;if(this.listens(o)){t.target=this;const h=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];for(const x of h)x.call(this,t);const g=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];for(const x of g)Ti(o,x,this._oneTimeListeners),x.call(this,t);const y=this._eventedParent;y&&(it(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(t))}else t instanceof Bn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,r){return this._eventedParent=t,this._eventedParentData=r,this}}var Ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const An=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Nl(n,t){const r={};for(const o in n)o!=="ref"&&(r[o]=n[o]);return An.forEach((o=>{o in t&&(r[o]=t[o])})),r}function xi(n,t){if(Array.isArray(n)){if(!Array.isArray(t)||n.length!==t.length)return!1;for(let r=0;r<n.length;r++)if(!xi(n[r],t[r]))return!1;return!0}if(typeof n=="object"&&n!==null&&t!==null){if(typeof t!="object"||Object.keys(n).length!==Object.keys(t).length)return!1;for(const r in n)if(!xi(n[r],t[r]))return!1;return!0}return n===t}function Wi(n,t){n.push(t)}function ys(n,t,r){Wi(r,{command:"addSource",args:[n,t[n]]})}function _s(n,t,r){Wi(t,{command:"removeSource",args:[n]}),r[n]=!0}function Sa(n,t,r,o){_s(n,r,o),ys(n,t,r)}function ko(n,t,r){let o;for(o in n[r])if(Object.prototype.hasOwnProperty.call(n[r],o)&&o!=="data"&&!xi(n[r][o],t[r][o]))return!1;for(o in t[r])if(Object.prototype.hasOwnProperty.call(t[r],o)&&o!=="data"&&!xi(n[r][o],t[r][o]))return!1;return!0}function Yr(n,t,r,o,h,g){n=n||{},t=t||{};for(const y in n)Object.prototype.hasOwnProperty.call(n,y)&&(xi(n[y],t[y])||r.push({command:g,args:[o,y,t[y],h]}));for(const y in t)Object.prototype.hasOwnProperty.call(t,y)&&!Object.prototype.hasOwnProperty.call(n,y)&&(xi(n[y],t[y])||r.push({command:g,args:[o,y,t[y],h]}))}function Ha(n){return n.id}function Gn(n,t){return n[t.id]=t,n}class rt{constructor(t,r,o,h){this.message=(t?`${t}: `:"")+o,h&&(this.identifier=h),r!=null&&r.__line__&&(this.line=r.__line__)}}function un(n,...t){for(const r of t)for(const o in r)n[o]=r[o];return n}class cr extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}class Ta{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[o,h]of r)this.bindings[o]=h}concat(t){return new Ta(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const vs={kind:"null"},ht={kind:"number"},ei={kind:"string"},jt={kind:"boolean"},$n={kind:"color"},ur={kind:"object"},Qt={kind:"value"},la={kind:"collator"},Ea={kind:"formatted"},Aa={kind:"padding"},Rr={kind:"resolvedImage"},oe={kind:"variableAnchorOffsetCollection"};function V(n,t){return{kind:"array",itemType:n,N:t}}function U(n){if(n.kind==="array"){const t=U(n.itemType);return typeof n.N=="number"?`array<${t}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${t}>`}return n.kind}const W=[vs,ht,ei,jt,$n,Ea,ur,V(Qt),Aa,Rr,oe];function ae(n,t){if(t.kind==="error")return null;if(n.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!ae(n.itemType,t.itemType))&&(typeof n.N!="number"||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if(n.kind==="value"){for(const r of W)if(!ae(r,t))return null}}return`Expected ${U(n)} but found ${U(t)} instead.`}function ye(n,t){return t.some((r=>r.kind===n.kind))}function xe(n,t){return t.some((r=>r==="null"?n===null:r==="array"?Array.isArray(n):r==="object"?n&&!Array.isArray(n)&&typeof n=="object":r===typeof n))}function Ae(n,t){return n.kind==="array"&&t.kind==="array"?n.itemType.kind===t.itemType.kind&&typeof n.N=="number":n.kind===t.kind}const ue=.96422,Le=.82521,Xe=4/29,Be=6/29,dt=3*Be*Be,Pt=Be*Be*Be,Ot=Math.PI/180,ci=180/Math.PI;function Wt(n){return(n%=360)<0&&(n+=360),n}function li([n,t,r,o]){let h,g;const y=Qi((.2225045*(n=ni(n))+.7168786*(t=ni(t))+.0606169*(r=ni(r)))/1);n===t&&t===r?h=g=y:(h=Qi((.4360747*n+.3850649*t+.1430804*r)/ue),g=Qi((.0139322*n+.0971045*t+.7141733*r)/Le));const x=116*y-16;return[x<0?0:x,500*(h-y),200*(y-g),o]}function ni(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Qi(n){return n>Pt?Math.pow(n,1/3):n/dt+Xe}function Bi([n,t,r,o]){let h=(n+16)/116,g=isNaN(t)?h:h+t/500,y=isNaN(r)?h:h-r/200;return h=1*Mi(h),g=ue*Mi(g),y=Le*Mi(y),[Ut(3.1338561*g-1.6168667*h-.4906146*y),Ut(-.9787684*g+1.9161415*h+.033454*y),Ut(.0719453*g-.2289914*h+1.4052427*y),o]}function Ut(n){return(n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055)<0?0:n>1?1:n}function Mi(n){return n>Be?n*n*n:dt*(n-Xe)}function Hi(n){return parseInt(n.padEnd(2,n),16)/255}function Ji(n,t){return hn(t?n/100:n,0,1)}function hn(n,t,r){return Math.min(Math.max(t,n),r)}function hr(n){return!n.some(Number.isNaN)}const Ks={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class zi{constructor(t,r,o,h=1,g=!0){this.r=t,this.g=r,this.b=o,this.a=h,g||(this.r*=h,this.g*=h,this.b*=h,h||this.overwriteGetter("rgb",[t,r,o,h]))}static parse(t){if(t instanceof zi)return t;if(typeof t!="string")return;const r=(function(o){if((o=o.toLowerCase().trim())==="transparent")return[0,0,0,0];const h=Ks[o];if(h){const[y,x,S]=h;return[y/255,x/255,S/255,1]}if(o.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(o)){const y=o.length<6?1:2;let x=1;return[Hi(o.slice(x,x+=y)),Hi(o.slice(x,x+=y)),Hi(o.slice(x,x+=y)),Hi(o.slice(x,x+y)||"ff")]}if(o.startsWith("rgb")){const y=o.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,S,D,R,P,B,j,Z,Y,ie,he,Ce]=y,me=[R||" ",j||" ",ie].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const Ee=[D,B,Y].join(""),Ue=Ee==="%%%"?100:Ee===""?255:0;if(Ue){const tt=[hn(+S/Ue,0,1),hn(+P/Ue,0,1),hn(+Z/Ue,0,1),he?Ji(+he,Ce):1];if(hr(tt))return tt}}return}}const g=o.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){const[y,x,S,D,R,P,B,j,Z]=g,Y=[S||" ",R||" ",B].join("");if(Y==="  "||Y==="  /"||Y===",,"||Y===",,,"){const ie=[+x,hn(+D,0,100),hn(+P,0,100),j?Ji(+j,Z):1];if(hr(ie))return(function([he,Ce,me,Ee]){function Ue(tt){const vt=(tt+he/30)%12,Vt=Ce*Math.min(me,1-me);return me-Vt*Math.max(-1,Math.min(vt-3,9-vt,1))}return he=Wt(he),Ce/=100,me/=100,[Ue(0),Ue(8),Ue(4),Ee]})(ie)}}})(t);return r?new zi(...r,!1):void 0}get rgb(){const{r:t,g:r,b:o,a:h}=this,g=h||1/0;return this.overwriteGetter("rgb",[t/g,r/g,o/g,h])}get hcl(){return this.overwriteGetter("hcl",(function(t){const[r,o,h,g]=li(t),y=Math.sqrt(o*o+h*h);return[Math.round(1e4*y)?Wt(Math.atan2(h,o)*ci):NaN,y,r,g]})(this.rgb))}get lab(){return this.overwriteGetter("lab",li(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){const[t,r,o,h]=this.rgb;return`rgba(${[t,r,o].map((g=>Math.round(255*g))).join(",")},${h})`}}zi.black=new zi(0,0,0,1),zi.white=new zi(1,1,1,1),zi.transparent=new zi(0,0,0,0),zi.red=new zi(1,0,0,1);class Bu{constructor(t,r,o){this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Po{constructor(t,r,o,h,g){this.text=t,this.image=r,this.scale=o,this.fontStack=h,this.textColor=g}}class Qn{constructor(t){this.sections=t}static fromString(t){return new Qn([new Po(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((t=>t.text.length!==0||t.image&&t.image.name.length!==0))}static factory(t){return t instanceof Qn?t:Qn.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map((t=>t.text)).join("")}}class yn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof yn)return t;if(typeof t=="number")return new yn([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new yn(t)}}toString(){return JSON.stringify(this.values)}}const Nu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class qr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof qr)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let r=0;r<t.length;r+=2){const o=t[r],h=t[r+1];if(typeof o!="string"||!Nu.has(o)||!Array.isArray(h)||h.length!==2||typeof h[0]!="number"||typeof h[1]!="number")return}return new qr(t)}}toString(){return JSON.stringify(this.values)}}class Nn{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Nn({name:t,available:!1}):null}}function xs(n,t,r,o){return typeof n=="number"&&n>=0&&n<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?o===void 0||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[n,t,r,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[n,t,r,o]:[n,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Za(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof zi||n instanceof Bu||n instanceof Qn||n instanceof yn||n instanceof qr||n instanceof Nn)return!0;if(Array.isArray(n)){for(const t of n)if(!Za(t))return!1;return!0}if(typeof n=="object"){for(const t in n)if(!Za(n[t]))return!1;return!0}return!1}function Cn(n){if(n===null)return vs;if(typeof n=="string")return ei;if(typeof n=="boolean")return jt;if(typeof n=="number")return ht;if(n instanceof zi)return $n;if(n instanceof Bu)return la;if(n instanceof Qn)return Ea;if(n instanceof yn)return Aa;if(n instanceof qr)return oe;if(n instanceof Nn)return Rr;if(Array.isArray(n)){const t=n.length;let r;for(const o of n){const h=Cn(o);if(r){if(r===h)continue;r=Qt;break}r=h}return V(r||Qt,t)}return ur}function Lo(n){const t=typeof n;return n===null?"":t==="string"||t==="number"||t==="boolean"?String(n):n instanceof zi||n instanceof Qn||n instanceof yn||n instanceof qr||n instanceof Nn?n.toString():JSON.stringify(n)}class dn{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Za(t[1]))return r.error("invalid value");const o=t[1];let h=Cn(o);const g=r.expectedType;return h.kind!=="array"||h.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(h=g),new dn(h,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class fn{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Fc={string:ei,number:ht,boolean:jt,object:ur};class Ir{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let o,h=1;const g=t[0];if(g==="array"){let x,S;if(t.length>2){const D=t[1];if(typeof D!="string"||!(D in Fc)||D==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);x=Fc[D],h++}else x=Qt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);S=t[2],h++}o=V(x,S)}else{if(!Fc[g])throw new Error(`Types doesn't contain name = ${g}`);o=Fc[g]}const y=[];for(;h<t.length;h++){const x=r.parse(t[h],h,Qt);if(!x)return null;y.push(x)}return new Ir(o,y)}evaluate(t){for(let r=0;r<this.args.length;r++){const o=this.args[r].evaluate(t);if(!ae(this.type,Cn(o)))return o;if(r===this.args.length-1)throw new fn(`Expected value to be of type ${U(this.type)}, but found ${U(Cn(o))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const jc={"to-boolean":jt,"to-color":$n,"to-number":ht,"to-string":ei};class kr{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const o=t[0];if(!jc[o])throw new Error(`Can't parse ${o} as it is not part of the known types`);if((o==="to-boolean"||o==="to-string")&&t.length!==2)return r.error("Expected one argument.");const h=jc[o],g=[];for(let y=1;y<t.length;y++){const x=r.parse(t[y],y,Qt);if(!x)return null;g.push(x)}return new kr(h,g)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,o;for(const h of this.args){if(r=h.evaluate(t),o=null,r instanceof zi)return r;if(typeof r=="string"){const g=t.parseColor(r);if(g)return g}else if(Array.isArray(r)&&(o=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:xs(r[0],r[1],r[2],r[3]),!o))return new zi(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new fn(o||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const o of this.args){r=o.evaluate(t);const h=yn.parse(r);if(h)return h}throw new fn(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const o of this.args){r=o.evaluate(t);const h=qr.parse(r);if(h)return h}throw new fn(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const o of this.args){if(r=o.evaluate(t),r===null)return 0;const h=Number(r);if(!isNaN(h))return h}throw new fn(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Qn.fromString(Lo(this.args[0].evaluate(t)));case"resolvedImage":return Nn.fromString(Lo(this.args[0].evaluate(t)));default:return Lo(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const qd=["Unknown","Point","LineString","Polygon"];class dr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache[t];return r||(r=this._parseColorCache[t]=zi.parse(t)),r}}class Ga{constructor(t,r,o=[],h,g=new Ta,y=[]){this.registry=t,this.path=o,this.key=o.map((x=>`[${x}]`)).join(""),this.scope=g,this.errors=y,this.expectedType=h,this._isConstant=r}parse(t,r,o,h,g={}){return r?this.concat(r,o,h)._parse(t,g):this._parse(t,g)}_parse(t,r){function o(h,g,y){return y==="assert"?new Ir(g,[h]):y==="coerce"?new kr(g,[h]):h}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=t[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[h];if(g){let y=g.parse(t,this);if(!y)return null;if(this.expectedType){const x=this.expectedType,S=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(x.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array")if(x.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(x,S))return null}else y=o(y,x,r.typeAnnotation||"coerce");else y=o(y,x,r.typeAnnotation||"coerce");else y=o(y,x,r.typeAnnotation||"coerce");else y=o(y,x,r.typeAnnotation||"assert")}if(!(y instanceof dn)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){const x=new dr;try{y=new dn(y.type,y.evaluate(x))}catch(S){return this.error(S.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,r,o){const h=typeof t=="number"?this.path.concat(t):this.path,g=o?this.scope.concat(o):this.scope;return new Ga(this.registry,this._isConstant,h,r||null,g,this.errors)}error(t,...r){const o=`${this.key}${r.map((h=>`[${h}]`)).join("")}`;this.errors.push(new cr(o,t))}checkSubtype(t,r){const o=ae(t,r);return o&&this.error(o),o}}class $a{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const o=[];for(let g=1;g<t.length-1;g+=2){const y=t[g];if(typeof y!="string")return r.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return r.error("Variable names must contain only alphanumeric characters or '_'.",g);const x=r.parse(t[g+1],g+1);if(!x)return null;o.push([y,x])}const h=r.parse(t[t.length-1],t.length-1,r.expectedType,o);return h?new $a(o,h):null}outputDefined(){return this.result.outputDefined()}}class mi{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const o=t[1];return r.scope.has(o)?new mi(o,r.scope.get(o)):r.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class bs{constructor(t,r,o){this.type=t,this.index=r,this.input=o}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=r.parse(t[1],1,ht),h=r.parse(t[2],2,V(r.expectedType||Qt));return o&&h?new bs(h.type.itemType,o,h):null}evaluate(t){const r=this.index.evaluate(t),o=this.input.evaluate(t);if(r<0)throw new fn(`Array index out of bounds: ${r} < 0.`);if(r>=o.length)throw new fn(`Array index out of bounds: ${r} > ${o.length-1}.`);if(r!==Math.floor(r))throw new fn(`Array index must be an integer, but found ${r} instead.`);return o[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Uc{constructor(t,r){this.type=jt,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=r.parse(t[1],1,Qt),h=r.parse(t[2],2,Qt);return o&&h?ye(o.type,[jt,ei,ht,vs,Qt])?new Uc(o,h):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${U(o.type)} instead`):null}evaluate(t){const r=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!o)return!1;if(!xe(r,["boolean","string","number","null"]))throw new fn(`Expected first argument to be of type boolean, string, number or null, but found ${U(Cn(r))} instead.`);if(!xe(o,["string","array"]))throw new fn(`Expected second argument to be of type array or string, but found ${U(Cn(o))} instead.`);return o.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ws{constructor(t,r,o){this.type=ht,this.needle=t,this.haystack=r,this.fromIndex=o}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=r.parse(t[1],1,Qt),h=r.parse(t[2],2,Qt);if(!o||!h)return null;if(!ye(o.type,[jt,ei,ht,vs,Qt]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${U(o.type)} instead`);if(t.length===4){const g=r.parse(t[3],3,ht);return g?new Ws(o,h,g):null}return new Ws(o,h)}evaluate(t){const r=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!xe(r,["boolean","string","number","null"]))throw new fn(`Expected first argument to be of type boolean, string, number or null, but found ${U(Cn(r))} instead.`);let h;if(this.fromIndex&&(h=this.fromIndex.evaluate(t)),xe(o,["string"])){const g=o.indexOf(r,h);return g===-1?-1:[...o.slice(0,g)].length}if(xe(o,["array"]))return o.indexOf(r,h);throw new fn(`Expected second argument to be of type array or string, but found ${U(Cn(o))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class ws{constructor(t,r,o,h,g,y){this.inputType=t,this.type=r,this.input=o,this.cases=h,this.outputs=g,this.otherwise=y}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return r.error("Expected an even number of arguments.");let o,h;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);const g={},y=[];for(let D=2;D<t.length-1;D+=2){let R=t[D];const P=t[D+1];Array.isArray(R)||(R=[R]);const B=r.concat(D);if(R.length===0)return B.error("Expected at least one branch label.");for(const Z of R){if(typeof Z!="number"&&typeof Z!="string")return B.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return B.error("Numeric branch labels must be integer values.");if(o){if(B.checkSubtype(o,Cn(Z)))return null}else o=Cn(Z);if(g[String(Z)]!==void 0)return B.error("Branch labels must be unique.");g[String(Z)]=y.length}const j=r.parse(P,D,h);if(!j)return null;h=h||j.type,y.push(j)}const x=r.parse(t[1],1,Qt);if(!x)return null;const S=r.parse(t[t.length-1],t.length-1,h);return S?x.type.kind!=="value"&&r.concat(1).checkSubtype(o,x.type)?null:new ws(o,h,x,g,y,S):null}evaluate(t){const r=this.input.evaluate(t);return(Cn(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Vc{constructor(t,r,o){this.type=t,this.branches=r,this.otherwise=o}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return r.error("Expected an odd number of arguments.");let o;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);const h=[];for(let y=1;y<t.length-1;y+=2){const x=r.parse(t[y],y,jt);if(!x)return null;const S=r.parse(t[y+1],y+1,o);if(!S)return null;h.push([x,S]),o=o||S.type}const g=r.parse(t[t.length-1],t.length-1,o);if(!g)return null;if(!o)throw new Error("Can't infer output type");return new Vc(o,h,g)}evaluate(t){for(const[r,o]of this.branches)if(r.evaluate(t))return o.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,o]of this.branches)t(r),t(o);t(this.otherwise)}outputDefined(){return this.branches.every((([t,r])=>r.outputDefined()))&&this.otherwise.outputDefined()}}class Oo{constructor(t,r,o,h){this.type=t,this.input=r,this.beginIndex=o,this.endIndex=h}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=r.parse(t[1],1,Qt),h=r.parse(t[2],2,ht);if(!o||!h)return null;if(!ye(o.type,[V(Qt),ei,Qt]))return r.error(`Expected first argument to be of type array or string, but found ${U(o.type)} instead`);if(t.length===4){const g=r.parse(t[3],3,ht);return g?new Oo(o.type,o,h,g):null}return new Oo(o.type,o,h)}evaluate(t){const r=this.input.evaluate(t),o=this.beginIndex.evaluate(t);let h;if(this.endIndex&&(h=this.endIndex.evaluate(t)),xe(r,["string"]))return[...r].slice(o,h).join("");if(xe(r,["array"]))return r.slice(o,h);throw new fn(`Expected first argument to be of type array or string, but found ${U(Cn(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Fl(n,t){const r=n.length-1;let o,h,g=0,y=r,x=0;for(;g<=y;)if(x=Math.floor((g+y)/2),o=n[x],h=n[x+1],o<=t){if(x===r||t<h)return x;g=x+1}else{if(!(o>t))throw new fn("Input is not a number.");y=x-1}return 0}class Ss{constructor(t,r,o){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[h,g]of o)this.labels.push(h),this.outputs.push(g)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");const o=r.parse(t[1],1,ht);if(!o)return null;const h=[];let g=null;r.expectedType&&r.expectedType.kind!=="value"&&(g=r.expectedType);for(let y=1;y<t.length;y+=2){const x=y===1?-1/0:t[y],S=t[y+1],D=y,R=y+1;if(typeof x!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(h.length&&h[h.length-1][0]>=x)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const P=r.parse(S,R,g);if(!P)return null;g=g||P.type,h.push([x,P])}return new Ss(g,o,h)}evaluate(t){const r=this.labels,o=this.outputs;if(r.length===1)return o[0].evaluate(t);const h=this.input.evaluate(t);if(h<=r[0])return o[0].evaluate(t);const g=r.length;return h>=r[g-1]?o[g-1].evaluate(t):o[Fl(r,h)].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Sh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hd=jl;function jl(n,t,r,o){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=r,this.p2y=o}jl.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,o=0;o<8;o++){var h=this.sampleCurveX(r)-n;if(Math.abs(h)<t)return r;var g=this.sampleCurveDerivativeX(r);if(Math.abs(g)<1e-6)break;r-=h/g}var y=0,x=1;for(r=n,o=0;o<20&&(h=this.sampleCurveX(r),!(Math.abs(h-n)<t));o++)n>h?y=r:x=r,r=.5*(x-y)+y;return r},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var Fu=Sh(Hd);function Xa(n,t,r){return n+r*(t-n)}function Ca(n,t,r){return n.map(((o,h)=>Xa(o,t[h],r)))}const Rn={number:Xa,color:function(n,t,r,o="rgb"){switch(o){case"rgb":{const[h,g,y,x]=Ca(n.rgb,t.rgb,r);return new zi(h,g,y,x,!1)}case"hcl":{const[h,g,y,x]=n.hcl,[S,D,R,P]=t.hcl;let B,j;if(isNaN(h)||isNaN(S))isNaN(h)?isNaN(S)?B=NaN:(B=S,y!==1&&y!==0||(j=D)):(B=h,R!==1&&R!==0||(j=g));else{let Ce=S-h;S>h&&Ce>180?Ce-=360:S<h&&h-S>180&&(Ce+=360),B=h+r*Ce}const[Z,Y,ie,he]=(function([Ce,me,Ee,Ue]){return Ce=isNaN(Ce)?0:Ce*Ot,Bi([Ee,Math.cos(Ce)*me,Math.sin(Ce)*me,Ue])})([B,j??Xa(g,D,r),Xa(y,R,r),Xa(x,P,r)]);return new zi(Z,Y,ie,he,!1)}case"lab":{const[h,g,y,x]=Bi(Ca(n.lab,t.lab,r));return new zi(h,g,y,x,!1)}}},array:Ca,padding:function(n,t,r){return new yn(Ca(n.values,t.values,r))},variableAnchorOffsetCollection:function(n,t,r){const o=n.values,h=t.values;if(o.length!==h.length)throw new fn(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${t.toString()}`);const g=[];for(let y=0;y<o.length;y+=2){if(o[y]!==h[y])throw new fn(`Cannot interpolate values containing mismatched anchors. from[${y}]: ${o[y]}, to[${y}]: ${h[y]}`);g.push(o[y]);const[x,S]=o[y+1],[D,R]=h[y+1];g.push([Xa(x,D,r),Xa(S,R,r)])}return new qr(g)}};class fr{constructor(t,r,o,h,g){this.type=t,this.operator=r,this.interpolation=o,this.input=h,this.labels=[],this.outputs=[];for(const[y,x]of g)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(t,r,o,h){let g=0;if(t.name==="exponential")g=Bo(r,t.base,o,h);else if(t.name==="linear")g=Bo(r,1,o,h);else if(t.name==="cubic-bezier"){const y=t.controlPoints;g=new Fu(y[0],y[1],y[2],y[3]).solve(Bo(r,1,o,h))}return g}static parse(t,r){let[o,h,g,...y]=t;if(!Array.isArray(h)||h.length===0)return r.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const D=h[1];if(typeof D!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:D}}else{if(h[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const D=h.slice(1);if(D.length!==4||D.some((R=>typeof R!="number"||R<0||R>1)))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:D}}}if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(g=r.parse(g,2,ht),!g)return null;const x=[];let S=null;o==="interpolate-hcl"||o==="interpolate-lab"?S=$n:r.expectedType&&r.expectedType.kind!=="value"&&(S=r.expectedType);for(let D=0;D<y.length;D+=2){const R=y[D],P=y[D+1],B=D+3,j=D+4;if(typeof R!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(x.length&&x[x.length-1][0]>=R)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const Z=r.parse(P,j,S);if(!Z)return null;S=S||Z.type,x.push([R,Z])}return Ae(S,ht)||Ae(S,$n)||Ae(S,Aa)||Ae(S,oe)||Ae(S,V(ht))?new fr(S,o,h,g,x):r.error(`Type ${U(S)} is not interpolatable.`)}evaluate(t){const r=this.labels,o=this.outputs;if(r.length===1)return o[0].evaluate(t);const h=this.input.evaluate(t);if(h<=r[0])return o[0].evaluate(t);const g=r.length;if(h>=r[g-1])return o[g-1].evaluate(t);const y=Fl(r,h),x=fr.interpolationFactor(this.interpolation,h,r[y],r[y+1]),S=o[y].evaluate(t),D=o[y+1].evaluate(t);switch(this.operator){case"interpolate":return Rn[this.type.kind](S,D,x);case"interpolate-hcl":return Rn.color(S,D,x,"hcl");case"interpolate-lab":return Rn.color(S,D,x,"lab")}}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Bo(n,t,r,o){const h=o-r,g=n-r;return h===0?0:t===1?g/h:(Math.pow(t,g)-1)/(Math.pow(t,h)-1)}class Ul{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expectected at least one argument.");let o=null;const h=r.expectedType;h&&h.kind!=="value"&&(o=h);const g=[];for(const x of t.slice(1)){const S=r.parse(x,1+g.length,o,void 0,{typeAnnotation:"omit"});if(!S)return null;o=o||S.type,g.push(S)}if(!o)throw new Error("No output type");const y=h&&g.some((x=>ae(h,x.type)));return new Ul(y?Qt:o,g)}evaluate(t){let r,o=null,h=0;for(const g of this.args)if(h++,o=g.evaluate(t),o&&o instanceof Nn&&!o.available&&(r||(r=o.name),o=null,h===this.args.length&&(o=r)),o!==null)break;return o}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function Ts(n,t){return n==="=="||n==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Ma(n,t,r,o){return o.compare(t,r)===0}function Es(n,t,r){const o=n!=="=="&&n!=="!=";return class W_{constructor(g,y,x){this.type=jt,this.lhs=g,this.rhs=y,this.collator=x,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");const x=g[0];let S=y.parse(g[1],1,Qt);if(!S)return null;if(!Ts(x,S.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${U(S.type)}'.`);let D=y.parse(g[2],2,Qt);if(!D)return null;if(!Ts(x,D.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${U(D.type)}'.`);if(S.type.kind!==D.type.kind&&S.type.kind!=="value"&&D.type.kind!=="value")return y.error(`Cannot compare types '${U(S.type)}' and '${U(D.type)}'.`);o&&(S.type.kind==="value"&&D.type.kind!=="value"?S=new Ir(D.type,[S]):S.type.kind!=="value"&&D.type.kind==="value"&&(D=new Ir(S.type,[D])));let R=null;if(g.length===4){if(S.type.kind!=="string"&&D.type.kind!=="string"&&S.type.kind!=="value"&&D.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(R=y.parse(g[3],3,la),!R)return null}return new W_(S,D,R)}evaluate(g){const y=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(o&&this.hasUntypedArgument){const S=Cn(y),D=Cn(x);if(S.kind!==D.kind||S.kind!=="string"&&S.kind!=="number")throw new fn(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${S.kind}, ${D.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const S=Cn(y),D=Cn(x);if(S.kind!=="string"||D.kind!=="string")return t(g,y,x)}return this.collator?r(g,y,x,this.collator.evaluate(g)):t(g,y,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}const Vl=Es("==",(function(n,t,r){return t===r}),Ma),Ya=Es("!=",(function(n,t,r){return t!==r}),(function(n,t,r,o){return!Ma(0,t,r,o)})),qc=Es("<",(function(n,t,r){return t<r}),(function(n,t,r,o){return o.compare(t,r)<0})),Hc=Es(">",(function(n,t,r){return t>r}),(function(n,t,r,o){return o.compare(t,r)>0})),Th=Es("<=",(function(n,t,r){return t<=r}),(function(n,t,r,o){return o.compare(t,r)<=0})),ql=Es(">=",(function(n,t,r){return t>=r}),(function(n,t,r,o){return o.compare(t,r)>=0}));class As{constructor(t,r,o){this.type=la,this.locale=o,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const o=t[1];if(typeof o!="object"||Array.isArray(o))return r.error("Collator options argument must be an object.");const h=r.parse(o["case-sensitive"]!==void 0&&o["case-sensitive"],1,jt);if(!h)return null;const g=r.parse(o["diacritic-sensitive"]!==void 0&&o["diacritic-sensitive"],1,jt);if(!g)return null;let y=null;return o.locale&&(y=r.parse(o.locale,1,ei),!y)?null:new As(h,g,y)}evaluate(t){return new Bu(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Zc{constructor(t,r,o,h,g){this.type=ei,this.number=t,this.locale=r,this.currency=o,this.minFractionDigits=h,this.maxFractionDigits=g}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const o=r.parse(t[1],1,ht);if(!o)return null;const h=t[2];if(typeof h!="object"||Array.isArray(h))return r.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=r.parse(h.locale,1,ei),!g))return null;let y=null;if(h.currency&&(y=r.parse(h.currency,1,ei),!y))return null;let x=null;if(h["min-fraction-digits"]&&(x=r.parse(h["min-fraction-digits"],1,ht),!x))return null;let S=null;return h["max-fraction-digits"]&&(S=r.parse(h["max-fraction-digits"],1,ht),!S)?null:new Zc(o,g,y,x,S)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Xn{constructor(t){this.type=Ea,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const o=t[1];if(!Array.isArray(o)&&typeof o=="object")return r.error("First argument must be an image or text section.");const h=[];let g=!1;for(let y=1;y<=t.length-1;++y){const x=t[y];if(g&&typeof x=="object"&&!Array.isArray(x)){g=!1;let S=null;if(x["font-scale"]&&(S=r.parse(x["font-scale"],1,ht),!S))return null;let D=null;if(x["text-font"]&&(D=r.parse(x["text-font"],1,V(ei)),!D))return null;let R=null;if(x["text-color"]&&(R=r.parse(x["text-color"],1,$n),!R))return null;const P=h[h.length-1];P.scale=S,P.font=D,P.textColor=R}else{const S=r.parse(t[y],1,Qt);if(!S)return null;const D=S.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:S,scale:null,font:null,textColor:null})}}return new Xn(h)}evaluate(t){return new Qn(this.sections.map((r=>{const o=r.content.evaluate(t);return Cn(o)===Rr?new Po("",o,null,null,null):new Po(Lo(o),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)})))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}outputDefined(){return!1}}class Ka{constructor(t){this.type=Rr,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const o=r.parse(t[1],1,ei);return o?new Ka(o):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),o=Nn.fromString(r);return o&&t.availableImages&&(o.available=t.availableImages.indexOf(r)>-1),o}eachChild(t){t(this.input)}outputDefined(){return!1}}class No{constructor(t){this.type=ht,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const o=r.parse(t[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${U(o.type)} instead.`):new No(o):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new fn(`Expected value to be of type string or array, but found ${U(Cn(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Pr=8192;function Zd(n,t){const r=(180+n[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(r*h*Pr),Math.round(o*h*Pr)]}function Hl(n,t){const r=Math.pow(2,t.z);return[(h=(n[0]/Pr+t.x)/r,360*h-180),(o=(n[1]/Pr+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90)];var o,h}function Wa(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function Kr(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function gi(n,t,r){const o=n[0]-t[0],h=n[1]-t[1],g=n[0]-r[0],y=n[1]-r[1];return o*y-g*h==0&&o*g<=0&&h*y<=0}function Zl(n,t,r,o){return(h=[o[0]-r[0],o[1]-r[1]])[0]*(g=[t[0]-n[0],t[1]-n[1]])[1]-h[1]*g[0]!=0&&!(!Eh(n,t,r,o)||!Eh(r,o,n,t));var h,g}function Gd(n,t,r){for(const o of r)for(let h=0;h<o.length-1;++h)if(Zl(n,t,o[h],o[h+1]))return!0;return!1}function Fo(n,t,r=!1){let o=!1;for(const x of t)for(let S=0;S<x.length-1;S++){if(gi(n,x[S],x[S+1]))return r;(g=x[S])[1]>(h=n)[1]!=(y=x[S+1])[1]>h[1]&&h[0]<(y[0]-g[0])*(h[1]-g[1])/(y[1]-g[1])+g[0]&&(o=!o)}var h,g,y;return o}function $d(n,t){for(const r of t)if(Fo(n,r))return!0;return!1}function Gc(n,t){for(const r of n)if(!Fo(r,t))return!1;for(let r=0;r<n.length-1;++r)if(Gd(n[r],n[r+1],t))return!1;return!0}function Xd(n,t){for(const r of t)if(Gc(n,r))return!0;return!1}function Eh(n,t,r,o){const h=o[0]-r[0],g=o[1]-r[1],y=(n[0]-r[0])*g-h*(n[1]-r[1]),x=(t[0]-r[0])*g-h*(t[1]-r[1]);return y>0&&x<0||y<0&&x>0}function ju(n,t,r){const o=[];for(let h=0;h<n.length;h++){const g=[];for(let y=0;y<n[h].length;y++){const x=Zd(n[h][y],r);Wa(t,x),g.push(x)}o.push(g)}return o}function Ah(n,t,r){const o=[];for(let h=0;h<n.length;h++){const g=ju(n[h],t,r);o.push(g)}return o}function Ch(n,t,r,o){if(n[0]<r[0]||n[0]>r[2]){const h=.5*o;let g=n[0]-r[0]>h?-o:r[0]-n[0]>h?o:0;g===0&&(g=n[0]-r[2]>h?-o:r[2]-n[0]>h?o:0),n[0]+=g}Wa(t,n)}function Uu(n,t,r,o){const h=Math.pow(2,o.z)*Pr,g=[o.x*Pr,o.y*Pr],y=[];for(const x of n)for(const S of x){const D=[S.x+g[0],S.y+g[1]];Ch(D,t,r,h),y.push(D)}return y}function Mh(n,t,r,o){const h=Math.pow(2,o.z)*Pr,g=[o.x*Pr,o.y*Pr],y=[];for(const S of n){const D=[];for(const R of S){const P=[R.x+g[0],R.y+g[1]];Wa(t,P),D.push(P)}y.push(D)}if(t[2]-t[0]<=h/2){(x=t)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const S of y)for(const D of S)Ch(D,t,r,h)}var x;return y}class Qs{constructor(t,r){this.type=jt,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Za(t[1])){const o=t[1];if(o.type==="FeatureCollection"){const h=[];for(const g of o.features){const{type:y,coordinates:x}=g.geometry;y==="Polygon"&&h.push(x),y==="MultiPolygon"&&h.push(...x)}if(h.length)return new Qs(o,{type:"MultiPolygon",coordinates:h})}else if(o.type==="Feature"){const h=o.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Qs(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new Qs(o,o)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(r,o){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=r.canonicalID();if(o.type==="Polygon"){const x=ju(o.coordinates,g,y),S=Uu(r.geometry(),h,g,y);if(!Kr(h,g))return!1;for(const D of S)if(!Fo(D,x))return!1}if(o.type==="MultiPolygon"){const x=Ah(o.coordinates,g,y),S=Uu(r.geometry(),h,g,y);if(!Kr(h,g))return!1;for(const D of S)if(!$d(D,x))return!1}return!0})(t,this.geometries);if(t.geometryType()==="LineString")return(function(r,o){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=r.canonicalID();if(o.type==="Polygon"){const x=ju(o.coordinates,g,y),S=Mh(r.geometry(),h,g,y);if(!Kr(h,g))return!1;for(const D of S)if(!Gc(D,x))return!1}if(o.type==="MultiPolygon"){const x=Ah(o.coordinates,g,y),S=Mh(r.geometry(),h,g,y);if(!Kr(h,g))return!1;for(const D of S)if(!Xd(D,x))return!1}return!0})(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let zh=class{constructor(n=[],t=((r,o)=>r<o?-1:r>o?1:0)){if(this.data=n,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:t,compare:r}=this,o=t[n];for(;n>0;){const h=n-1>>1,g=t[h];if(r(o,g)>=0)break;t[n]=g,n=h}t[n]=o}_down(n){const{data:t,compare:r}=this,o=this.length>>1,h=t[n];for(;n<o;){let g=1+(n<<1);const y=g+1;if(y<this.length&&r(t[y],t[g])<0&&(g=y),r(t[g],h)>=0)break;t[n]=t[g],n=g}t[n]=h}};function Yd(n,t,r,o,h){$c(n,t,r,o||n.length-1,h||Kd)}function $c(n,t,r,o,h){for(;o>r;){if(o-r>600){var g=o-r+1,y=t-r+1,x=Math.log(g),S=.5*Math.exp(2*x/3),D=.5*Math.sqrt(x*S*(g-S)/g)*(y-g/2<0?-1:1);$c(n,t,Math.max(r,Math.floor(t-y*S/g+D)),Math.min(o,Math.floor(t+(g-y)*S/g+D)),h)}var R=n[t],P=r,B=o;for(Gl(n,r,t),h(n[o],R)>0&&Gl(n,r,o);P<B;){for(Gl(n,P,B),P++,B--;h(n[P],R)<0;)P++;for(;h(n[B],R)>0;)B--}h(n[r],R)===0?Gl(n,r,B):Gl(n,++B,o),B<=t&&(r=B+1),t<=B&&(o=B-1)}}function Gl(n,t,r){var o=n[t];n[t]=n[r],n[r]=o}function Kd(n,t){return n<t?-1:n>t?1:0}function Xc(n,t){if(n.length<=1)return[n];const r=[];let o,h;for(const g of n){const y=Wd(g);y!==0&&(g.area=Math.abs(y),h===void 0&&(h=y<0),h===y<0?(o&&r.push(o),o=[g]):o.push(g))}if(o&&r.push(o),t>1)for(let g=0;g<r.length;g++)r[g].length<=t||(Yd(r[g],t,1,r[g].length-1,Dh),r[g]=r[g].slice(0,t));return r}function Dh(n,t){return t.area-n.area}function Wd(n){let t=0;for(let r,o,h=0,g=n.length,y=g-1;h<g;y=h++)r=n[h],o=n[y],t+=(o.x-r.x)*(r.y+o.y);return t}const Rh=1/298.257223563,Ih=Rh*(2-Rh),kh=Math.PI/180;class Vu{constructor(t){const r=6378.137*kh*1e3,o=Math.cos(t*kh),h=1/(1-Ih*(1-o*o)),g=Math.sqrt(h);this.kx=r*g*o,this.ky=r*g*h*(1-Ih)}distance(t,r){const o=this.wrap(t[0]-r[0])*this.kx,h=(t[1]-r[1])*this.ky;return Math.sqrt(o*o+h*h)}pointOnLine(t,r){let o,h,g,y,x=1/0;for(let S=0;S<t.length-1;S++){let D=t[S][0],R=t[S][1],P=this.wrap(t[S+1][0]-D)*this.kx,B=(t[S+1][1]-R)*this.ky,j=0;P===0&&B===0||(j=(this.wrap(r[0]-D)*this.kx*P+(r[1]-R)*this.ky*B)/(P*P+B*B),j>1?(D=t[S+1][0],R=t[S+1][1]):j>0&&(D+=P/this.kx*j,R+=B/this.ky*j)),P=this.wrap(r[0]-D)*this.kx,B=(r[1]-R)*this.ky;const Z=P*P+B*B;Z<x&&(x=Z,o=D,h=R,g=S,y=j)}return{point:[o,h],index:g,t:Math.max(0,Math.min(1,y))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Ph(n,t){return t[0]-n[0]}function Yc(n){return n[1]-n[0]+1}function Qa(n,t){return n[1]>=n[0]&&n[1]<t}function qu(n,t){if(n[0]>n[1])return[null,null];const r=Yc(n);if(t){if(r===2)return[n,null];const h=Math.floor(r/2);return[[n[0],n[0]+h],[n[0]+h,n[1]]]}if(r===1)return[n,null];const o=Math.floor(r/2)-1;return[[n[0],n[0]+o],[n[0]+o+1,n[1]]]}function $l(n,t){if(!Qa(t,n.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let o=t[0];o<=t[1];++o)Wa(r,n[o]);return r}function Js(n){const t=[1/0,1/0,-1/0,-1/0];for(const r of n)for(const o of r)Wa(t,o);return t}function Kc(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function Wc(n,t,r){if(!Kc(n)||!Kc(t))return NaN;let o=0,h=0;return n[2]<t[0]&&(o=t[0]-n[2]),n[0]>t[2]&&(o=n[0]-t[2]),n[1]>t[3]&&(h=n[1]-t[3]),n[3]<t[1]&&(h=t[1]-n[3]),r.distance([0,0],[o,h])}function Cs(n,t,r){const o=r.pointOnLine(t,n);return r.distance(n,o.point)}function Qc(n,t,r,o,h){const g=Math.min(Cs(n,[r,o],h),Cs(t,[r,o],h)),y=Math.min(Cs(r,[n,t],h),Cs(o,[n,t],h));return Math.min(g,y)}function Lh(n,t,r,o,h){if(!Qa(t,n.length)||!Qa(o,r.length))return 1/0;let g=1/0;for(let y=t[0];y<t[1];++y){const x=n[y],S=n[y+1];for(let D=o[0];D<o[1];++D){const R=r[D],P=r[D+1];if(Zl(x,S,R,P))return 0;g=Math.min(g,Qc(x,S,R,P,h))}}return g}function sn(n,t,r,o,h){if(!Qa(t,n.length)||!Qa(o,r.length))return NaN;let g=1/0;for(let y=t[0];y<=t[1];++y)for(let x=o[0];x<=o[1];++x)if(g=Math.min(g,h.distance(n[y],r[x])),g===0)return g;return g}function jo(n,t,r){if(Fo(n,t,!0))return 0;let o=1/0;for(const h of t){const g=h[0],y=h[h.length-1];if(g!==y&&(o=Math.min(o,Cs(n,[y,g],r)),o===0))return o;const x=r.pointOnLine(h,n);if(o=Math.min(o,r.distance(n,x.point)),o===0)return o}return o}function oi(n,t,r,o){if(!Qa(t,n.length))return NaN;for(let g=t[0];g<=t[1];++g)if(Fo(n[g],r,!0))return 0;let h=1/0;for(let g=t[0];g<t[1];++g){const y=n[g],x=n[g+1];for(const S of r)for(let D=0,R=S.length,P=R-1;D<R;P=D++){const B=S[P],j=S[D];if(Zl(y,x,B,j))return 0;h=Math.min(h,Qc(y,x,B,j,o))}}return h}function Jc(n,t){for(const r of n)for(const o of r)if(Fo(o,t,!0))return!0;return!1}function ji(n,t,r,o=1/0){const h=Js(n),g=Js(t);if(o!==1/0&&Wc(h,g,r)>=o)return o;if(Kr(h,g)){if(Jc(n,t))return 0}else if(Jc(t,n))return 0;let y=1/0;for(const x of n)for(let S=0,D=x.length,R=D-1;S<D;R=S++){const P=x[R],B=x[S];for(const j of t)for(let Z=0,Y=j.length,ie=Y-1;Z<Y;ie=Z++){const he=j[ie],Ce=j[Z];if(Zl(P,B,he,Ce))return 0;y=Math.min(y,Qc(P,B,he,Ce,r))}}return y}function ki(n,t,r,o,h,g){if(!g)return;const y=Wc($l(o,g),h,r);y<t&&n.push([y,g,[0,0]])}function Ms(n,t,r,o,h,g,y){if(!g||!y)return;const x=Wc($l(o,g),$l(h,y),r);x<t&&n.push([x,g,y])}function Ja(n,t,r,o,h=1/0){let g=Math.min(o.distance(n[0],r[0][0]),h);if(g===0)return g;const y=new zh([[0,[0,n.length-1],[0,0]]],Ph),x=Js(r);for(;y.length>0;){const S=y.pop();if(S[0]>=g)continue;const D=S[1],R=t?50:100;if(Yc(D)<=R){if(!Qa(D,n.length))return NaN;if(t){const P=oi(n,D,r,o);if(isNaN(P)||P===0)return P;g=Math.min(g,P)}else for(let P=D[0];P<=D[1];++P){const B=jo(n[P],r,o);if(g=Math.min(g,B),g===0)return 0}}else{const P=qu(D,t);ki(y,g,o,n,x,P[0]),ki(y,g,o,n,x,P[1])}}return g}function es(n,t,r,o,h,g=1/0){let y=Math.min(g,h.distance(n[0],r[0]));if(y===0)return y;const x=new zh([[0,[0,n.length-1],[0,r.length-1]]],Ph);for(;x.length>0;){const S=x.pop();if(S[0]>=y)continue;const D=S[1],R=S[2],P=t?50:100,B=o?50:100;if(Yc(D)<=P&&Yc(R)<=B){if(!Qa(D,n.length)&&Qa(R,r.length))return NaN;let j;if(t&&o)j=Lh(n,D,r,R,h),y=Math.min(y,j);else if(t&&!o){const Z=n.slice(D[0],D[1]+1);for(let Y=R[0];Y<=R[1];++Y)if(j=Cs(r[Y],Z,h),y=Math.min(y,j),y===0)return y}else if(!t&&o){const Z=r.slice(R[0],R[1]+1);for(let Y=D[0];Y<=D[1];++Y)if(j=Cs(n[Y],Z,h),y=Math.min(y,j),y===0)return y}else j=sn(n,D,r,R,h),y=Math.min(y,j)}else{const j=qu(D,t),Z=qu(R,o);Ms(x,y,h,n,r,j[0],Z[0]),Ms(x,y,h,n,r,j[0],Z[1]),Ms(x,y,h,n,r,j[1],Z[0]),Ms(x,y,h,n,r,j[1],Z[1])}}return y}function Hu(n){return n.type==="MultiPolygon"?n.coordinates.map((t=>({type:"Polygon",coordinates:t}))):n.type==="MultiLineString"?n.coordinates.map((t=>({type:"LineString",coordinates:t}))):n.type==="MultiPoint"?n.coordinates.map((t=>({type:"Point",coordinates:t}))):[n]}class za{constructor(t,r){this.type=ht,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Za(t[1])){const o=t[1];if(o.type==="FeatureCollection")return new za(o,o.features.map((h=>Hu(h.geometry))).flat());if(o.type==="Feature")return new za(o,Hu(o.geometry));if("type"in o&&"coordinates"in o)return new za(o,Hu(o))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(r,o){const h=r.geometry(),g=h.flat().map((S=>Hl([S.x,S.y],r.canonical)));if(h.length===0)return NaN;const y=new Vu(g[0][1]);let x=1/0;for(const S of o){switch(S.type){case"Point":x=Math.min(x,es(g,!1,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,es(g,!1,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,Ja(g,!1,S.coordinates,y,x))}if(x===0)return x}return x})(t,this.geometries);if(t.geometryType()==="LineString")return(function(r,o){const h=r.geometry(),g=h.flat().map((S=>Hl([S.x,S.y],r.canonical)));if(h.length===0)return NaN;const y=new Vu(g[0][1]);let x=1/0;for(const S of o){switch(S.type){case"Point":x=Math.min(x,es(g,!0,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,es(g,!0,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,Ja(g,!0,S.coordinates,y,x))}if(x===0)return x}return x})(t,this.geometries);if(t.geometryType()==="Polygon")return(function(r,o){const h=r.geometry();if(h.length===0||h[0].length===0)return NaN;const g=Xc(h,0).map((S=>S.map((D=>D.map((R=>Hl([R.x,R.y],r.canonical))))))),y=new Vu(g[0][0][0][1]);let x=1/0;for(const S of o)for(const D of g){switch(S.type){case"Point":x=Math.min(x,Ja([S.coordinates],!1,D,y,x));break;case"LineString":x=Math.min(x,Ja(S.coordinates,!0,D,y,x));break;case"Polygon":x=Math.min(x,ji(D,S.coordinates,y,x))}if(x===0)return x}return x})(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const eo={"==":Vl,"!=":Ya,">":Hc,"<":qc,">=":ql,"<=":Th,array:Ir,at:bs,boolean:Ir,case:Vc,coalesce:Ul,collator:As,format:Xn,image:Ka,in:Uc,"index-of":Ws,interpolate:fr,"interpolate-hcl":fr,"interpolate-lab":fr,length:No,let:$a,literal:dn,match:ws,number:Ir,"number-format":Zc,object:Ir,slice:Oo,step:Ss,string:Ir,"to-boolean":kr,"to-color":kr,"to-number":kr,"to-string":kr,var:mi,within:Qs,distance:za};class Hr{constructor(t,r,o,h){this.name=t,this.type=r,this._evaluate=o,this.args=h}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){const o=t[0],h=Hr.definitions[o];if(!h)return r.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter((([D])=>!Array.isArray(D)||D.length===t.length-1));let S=null;for(const[D,R]of x){S=new Ga(r.registry,Uo,r.path,null,r.scope);const P=[];let B=!1;for(let j=1;j<t.length;j++){const Z=t[j],Y=Array.isArray(D)?D[j-1]:D.type,ie=S.parse(Z,1+P.length,Y);if(!ie){B=!0;break}P.push(ie)}if(!B)if(Array.isArray(D)&&D.length!==P.length)S.error(`Expected ${D.length} arguments, but found ${P.length} instead.`);else{for(let j=0;j<P.length;j++){const Z=Array.isArray(D)?D[j]:D.type,Y=P[j];S.concat(j+1).checkSubtype(Z,Y.type)}if(S.errors.length===0)return new Hr(o,g,R,P)}}if(x.length===1)r.errors.push(...S.errors);else{const D=(x.length?x:y).map((([P])=>{return B=P,Array.isArray(B)?`(${B.map(U).join(", ")})`:`(${U(B.type)}...)`;var B})).join(" | "),R=[];for(let P=1;P<t.length;P++){const B=r.parse(t[P],1+R.length);if(!B)return null;R.push(U(B.type))}r.error(`Expected arguments of type ${D}, but found (${R.join(", ")}) instead.`)}return null}static register(t,r){Hr.definitions=r;for(const o in r)t[o]=Hr}}function Xl(n,[t,r,o,h]){t=t.evaluate(n),r=r.evaluate(n),o=o.evaluate(n);const g=h?h.evaluate(n):1,y=xs(t,r,o,g);if(y)throw new fn(y);return new zi(t/255,r/255,o/255,g,!1)}function Yl(n,t){return n in t}function eu(n,t){const r=t[n];return r===void 0?null:r}function zs(n){return{type:n}}function Uo(n){if(n instanceof mi)return Uo(n.boundExpression);if(n instanceof Hr&&n.name==="error"||n instanceof As||n instanceof Qs||n instanceof za)return!1;const t=n instanceof kr||n instanceof Ir;let r=!0;return n.eachChild((o=>{r=t?r&&Uo(o):r&&o instanceof dn})),!!r&&Kl(n)&&Wl(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Kl(n){if(n instanceof Hr&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof Qs||n instanceof za)return!1;let t=!0;return n.eachChild((r=>{t&&!Kl(r)&&(t=!1)})),t}function Vo(n){if(n instanceof Hr&&n.name==="feature-state")return!1;let t=!0;return n.eachChild((r=>{t&&!Vo(r)&&(t=!1)})),t}function Wl(n,t){if(n instanceof Hr&&t.indexOf(n.name)>=0)return!1;let r=!0;return n.eachChild((o=>{r&&!Wl(o,t)&&(r=!1)})),r}function tu(n){return{result:"success",value:n}}function qo(n){return{result:"error",value:n}}function Fn(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function Ho(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function iu(n){return!!n.expression&&n.expression.interpolated}function yi(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Ql(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Oh(n){return n}function nu(n,t){const r=t.type==="color",o=n.stops&&typeof n.stops[0][0]=="object",h=o||!(o||n.property!==void 0),g=n.type||(iu(t)?"exponential":"interval");if(r||t.type==="padding"){const R=r?zi.parse:yn.parse;(n=un({},n)).stops&&(n.stops=n.stops.map((P=>[P[0],R(P[1])]))),n.default=R(n.default?n.default:t.default)}if(n.colorSpace&&(y=n.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${n.colorSpace}"`);var y;let x,S,D;if(g==="exponential")x=$o;else if(g==="interval")x=Go;else if(g==="categorical"){x=to,S=Object.create(null);for(const R of n.stops)S[R[0]]=R[1];D=typeof n.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);x=ru}if(o){const R={},P=[];for(let Z=0;Z<n.stops.length;Z++){const Y=n.stops[Z],ie=Y[0].zoom;R[ie]===void 0&&(R[ie]={zoom:ie,type:n.type,property:n.property,default:n.default,stops:[]},P.push(ie)),R[ie].stops.push([Y[0].value,Y[1]])}const B=[];for(const Z of P)B.push([R[Z].zoom,nu(R[Z],t)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:fr.interpolationFactor.bind(void 0,j),zoomStops:B.map((Z=>Z[0])),evaluate:({zoom:Z},Y)=>$o({stops:B,base:n.base},t,Z).evaluate(Z,Y)}}if(h){const R=g==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:fr.interpolationFactor.bind(void 0,R),zoomStops:n.stops.map((P=>P[0])),evaluate:({zoom:P})=>x(n,t,P,S,D)}}return{kind:"source",evaluate(R,P){const B=P&&P.properties?P.properties[n.property]:void 0;return B===void 0?Zo(n.default,t.default):x(n,t,B,S,D)}}}function Zo(n,t,r){return n!==void 0?n:t!==void 0?t:r!==void 0?r:void 0}function to(n,t,r,o,h){return Zo(typeof r===h?o[r]:void 0,n.default,t.default)}function Go(n,t,r){if(yi(r)!=="number")return Zo(n.default,t.default);const o=n.stops.length;if(o===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[o-1][0])return n.stops[o-1][1];const h=Fl(n.stops.map((g=>g[0])),r);return n.stops[h][1]}function $o(n,t,r){const o=n.base!==void 0?n.base:1;if(yi(r)!=="number")return Zo(n.default,t.default);const h=n.stops.length;if(h===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[h-1][0])return n.stops[h-1][1];const g=Fl(n.stops.map((R=>R[0])),r),y=(function(R,P,B,j){const Z=j-B,Y=R-B;return Z===0?0:P===1?Y/Z:(Math.pow(P,Y)-1)/(Math.pow(P,Z)-1)})(r,o,n.stops[g][0],n.stops[g+1][0]),x=n.stops[g][1],S=n.stops[g+1][1],D=Rn[t.type]||Oh;return typeof x.evaluate=="function"?{evaluate(...R){const P=x.evaluate.apply(void 0,R),B=S.evaluate.apply(void 0,R);if(P!==void 0&&B!==void 0)return D(P,B,y,n.colorSpace)}}:D(x,S,y,n.colorSpace)}function ru(n,t,r){switch(t.type){case"color":r=zi.parse(r);break;case"formatted":r=Qn.fromString(r.toString());break;case"resolvedImage":r=Nn.fromString(r.toString());break;case"padding":r=yn.parse(r);break;default:yi(r)===t.type||t.type==="enum"&&t.values[r]||(r=void 0)}return Zo(r,n.default,t.default)}Hr.register(eo,{error:[{kind:"error"},[ei],(n,[t])=>{throw new fn(t.evaluate(n))}],typeof:[ei,[Qt],(n,[t])=>U(Cn(t.evaluate(n)))],"to-rgba":[V(ht,4),[$n],(n,[t])=>{const[r,o,h,g]=t.evaluate(n).rgb;return[255*r,255*o,255*h,g]}],rgb:[$n,[ht,ht,ht],Xl],rgba:[$n,[ht,ht,ht,ht],Xl],has:{type:jt,overloads:[[[ei],(n,[t])=>Yl(t.evaluate(n),n.properties())],[[ei,ur],(n,[t,r])=>Yl(t.evaluate(n),r.evaluate(n))]]},get:{type:Qt,overloads:[[[ei],(n,[t])=>eu(t.evaluate(n),n.properties())],[[ei,ur],(n,[t,r])=>eu(t.evaluate(n),r.evaluate(n))]]},"feature-state":[Qt,[ei],(n,[t])=>eu(t.evaluate(n),n.featureState||{})],properties:[ur,[],n=>n.properties()],"geometry-type":[ei,[],n=>n.geometryType()],id:[Qt,[],n=>n.id()],zoom:[ht,[],n=>n.globals.zoom],"heatmap-density":[ht,[],n=>n.globals.heatmapDensity||0],"line-progress":[ht,[],n=>n.globals.lineProgress||0],accumulated:[Qt,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ht,zs(ht),(n,t)=>{let r=0;for(const o of t)r+=o.evaluate(n);return r}],"*":[ht,zs(ht),(n,t)=>{let r=1;for(const o of t)r*=o.evaluate(n);return r}],"-":{type:ht,overloads:[[[ht,ht],(n,[t,r])=>t.evaluate(n)-r.evaluate(n)],[[ht],(n,[t])=>-t.evaluate(n)]]},"/":[ht,[ht,ht],(n,[t,r])=>t.evaluate(n)/r.evaluate(n)],"%":[ht,[ht,ht],(n,[t,r])=>t.evaluate(n)%r.evaluate(n)],ln2:[ht,[],()=>Math.LN2],pi:[ht,[],()=>Math.PI],e:[ht,[],()=>Math.E],"^":[ht,[ht,ht],(n,[t,r])=>Math.pow(t.evaluate(n),r.evaluate(n))],sqrt:[ht,[ht],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[ht,[ht],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[ht,[ht],(n,[t])=>Math.log(t.evaluate(n))],log2:[ht,[ht],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[ht,[ht],(n,[t])=>Math.sin(t.evaluate(n))],cos:[ht,[ht],(n,[t])=>Math.cos(t.evaluate(n))],tan:[ht,[ht],(n,[t])=>Math.tan(t.evaluate(n))],asin:[ht,[ht],(n,[t])=>Math.asin(t.evaluate(n))],acos:[ht,[ht],(n,[t])=>Math.acos(t.evaluate(n))],atan:[ht,[ht],(n,[t])=>Math.atan(t.evaluate(n))],min:[ht,zs(ht),(n,t)=>Math.min(...t.map((r=>r.evaluate(n))))],max:[ht,zs(ht),(n,t)=>Math.max(...t.map((r=>r.evaluate(n))))],abs:[ht,[ht],(n,[t])=>Math.abs(t.evaluate(n))],round:[ht,[ht],(n,[t])=>{const r=t.evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[ht,[ht],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[ht,[ht],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[jt,[ei,Qt],(n,[t,r])=>n.properties()[t.value]===r.value],"filter-id-==":[jt,[Qt],(n,[t])=>n.id()===t.value],"filter-type-==":[jt,[ei],(n,[t])=>n.geometryType()===t.value],"filter-<":[jt,[ei,Qt],(n,[t,r])=>{const o=n.properties()[t.value],h=r.value;return typeof o==typeof h&&o<h}],"filter-id-<":[jt,[Qt],(n,[t])=>{const r=n.id(),o=t.value;return typeof r==typeof o&&r<o}],"filter->":[jt,[ei,Qt],(n,[t,r])=>{const o=n.properties()[t.value],h=r.value;return typeof o==typeof h&&o>h}],"filter-id->":[jt,[Qt],(n,[t])=>{const r=n.id(),o=t.value;return typeof r==typeof o&&r>o}],"filter-<=":[jt,[ei,Qt],(n,[t,r])=>{const o=n.properties()[t.value],h=r.value;return typeof o==typeof h&&o<=h}],"filter-id-<=":[jt,[Qt],(n,[t])=>{const r=n.id(),o=t.value;return typeof r==typeof o&&r<=o}],"filter->=":[jt,[ei,Qt],(n,[t,r])=>{const o=n.properties()[t.value],h=r.value;return typeof o==typeof h&&o>=h}],"filter-id->=":[jt,[Qt],(n,[t])=>{const r=n.id(),o=t.value;return typeof r==typeof o&&r>=o}],"filter-has":[jt,[Qt],(n,[t])=>t.value in n.properties()],"filter-has-id":[jt,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[jt,[V(ei)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[jt,[V(Qt)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[jt,[ei,V(Qt)],(n,[t,r])=>r.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[jt,[ei,V(Qt)],(n,[t,r])=>(function(o,h,g,y){for(;g<=y;){const x=g+y>>1;if(h[x]===o)return!0;h[x]>o?y=x-1:g=x+1}return!1})(n.properties()[t.value],r.value,0,r.value.length-1)],all:{type:jt,overloads:[[[jt,jt],(n,[t,r])=>t.evaluate(n)&&r.evaluate(n)],[zs(jt),(n,t)=>{for(const r of t)if(!r.evaluate(n))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],(n,[t,r])=>t.evaluate(n)||r.evaluate(n)],[zs(jt),(n,t)=>{for(const r of t)if(r.evaluate(n))return!0;return!1}]]},"!":[jt,[jt],(n,[t])=>!t.evaluate(n)],"is-supported-script":[jt,[ei],(n,[t])=>{const r=n.globals&&n.globals.isSupportedScript;return!r||r(t.evaluate(n))}],upcase:[ei,[ei],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[ei,[ei],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[ei,zs(Qt),(n,t)=>t.map((r=>Lo(r.evaluate(n)))).join("")],"resolved-locale":[ei,[la],(n,[t])=>t.evaluate(n).resolvedLocale()]});class Jl{constructor(t,r){var o;this.expression=t,this._warningHistory={},this._evaluator=new dr,this._defaultValue=r?(o=r).type==="color"&&Ql(o.default)?new zi(0,0,0,0):o.type==="color"?zi.parse(o.default)||null:o.type==="padding"?yn.parse(o.default)||null:o.type==="variableAnchorOffsetCollection"?qr.parse(o.default)||null:o.default===void 0?null:o.default:null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,o,h,g,y){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=o,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(t,r,o,h,g,y){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=o||null,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{const x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new fn(`Expected value to be one of ${Object.keys(this._enumValues).map((S=>JSON.stringify(S))).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function Da(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in eo}function ca(n,t){const r=new Ga(eo,Uo,[],t?(function(h){const g={color:$n,string:ei,number:ht,enum:ei,boolean:jt,formatted:Ea,padding:Aa,resolvedImage:Rr,variableAnchorOffsetCollection:oe};return h.type==="array"?V(g[h.value]||Qt,h.length):g[h.type]})(t):void 0),o=r.parse(n,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?tu(new Jl(o,t)):qo(r.errors)}class Ds{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!Vo(r.expression)}evaluateWithoutErrorHandling(t,r,o,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(t,r,o,h,g,y)}evaluate(t,r,o,h,g,y){return this._styleExpression.evaluate(t,r,o,h,g,y)}}class io{constructor(t,r,o,h){this.kind=t,this.zoomStops=o,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!Vo(r.expression),this.interpolationType=h}evaluateWithoutErrorHandling(t,r,o,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(t,r,o,h,g,y)}evaluate(t,r,o,h,g,y){return this._styleExpression.evaluate(t,r,o,h,g,y)}interpolationFactor(t,r,o){return this.interpolationType?fr.interpolationFactor(this.interpolationType,t,r,o):0}}function ts(n,t){const r=ca(n,t);if(r.result==="error")return r;const o=r.value.expression,h=Kl(o);if(!h&&!Fn(t))return qo([new cr("","data expressions not supported")]);const g=Wl(o,["zoom"]);if(!g&&!Ho(t))return qo([new cr("","zoom expressions not supported")]);const y=Xo(o);return y||g?y instanceof cr?qo([y]):y instanceof fr&&!iu(t)?qo([new cr("",'"interpolate" expressions cannot be used with this property')]):tu(y?new io(h?"camera":"composite",r.value,y.labels,y instanceof fr?y.interpolation:void 0):new Ds(h?"constant":"source",r.value)):qo([new cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class no{constructor(t,r){this._parameters=t,this._specification=r,un(this,nu(this._parameters,this._specification))}static deserialize(t){return new no(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Xo(n){let t=null;if(n instanceof $a)t=Xo(n.result);else if(n instanceof Ul){for(const r of n.args)if(t=Xo(r),t)break}else(n instanceof Ss||n instanceof fr)&&n.input instanceof Hr&&n.input.name==="zoom"&&(t=n);return t instanceof cr||n.eachChild((r=>{const o=Xo(r);o instanceof cr?t=o:!t&&o?t=new cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&o&&t!==o&&(t=new cr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function ec(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!ec(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const au={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Zu(n){if(n==null)return{filter:()=>!0,needGeometry:!1};ec(n)||(n=tc(n));const t=ca(n,au);if(t.result==="error")throw new Error(t.value.map((r=>`${r.key}: ${r.message}`)).join(", "));return{filter:(r,o,h)=>t.value.evaluate(r,o,{},h),needGeometry:Gu(n)}}function Qd(n,t){return n<t?-1:n>t?1:0}function Gu(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let t=1;t<n.length;t++)if(Gu(n[t]))return!0;return!1}function tc(n){if(!n)return!0;const t=n[0];return n.length<=1?t!=="any":t==="=="?ic(n[1],n[2],"=="):t==="!="?Ui(ic(n[1],n[2],"==")):t==="<"||t===">"||t==="<="||t===">="?ic(n[1],n[2],t):t==="any"?(r=n.slice(1),["any"].concat(r.map(tc))):t==="all"?["all"].concat(n.slice(1).map(tc)):t==="none"?["all"].concat(n.slice(1).map(tc).map(Ui)):t==="in"?pr(n[1],n.slice(2)):t==="!in"?Ui(pr(n[1],n.slice(2))):t==="has"?Yo(n[1]):t!=="!has"||Ui(Yo(n[1]));var r}function ic(n,t,r){switch(n){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,n,t]}}function pr(n,t){if(t.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((r=>typeof r!=typeof t[0]))?["filter-in-large",n,["literal",t.sort(Qd)]]:["filter-in-small",n,["literal",t]]}}function Yo(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Ui(n){return["!",n]}function jn(n){const t=typeof n;if(t==="number"||t==="boolean"||t==="string"||n==null)return JSON.stringify(n);if(Array.isArray(n)){let h="[";for(const g of n)h+=`${jn(g)},`;return`${h}]`}const r=Object.keys(n).sort();let o="{";for(let h=0;h<r.length;h++)o+=`${JSON.stringify(r[h])}:${jn(n[r[h]])},`;return`${o}}`}function ro(n){let t="";for(const r of An)t+=`/${jn(n[r])}`;return t}function su(n){const t=n.value;return t?[new rt(n.key,t,"constants have been deprecated as of v8")]:[]}function Yi(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Lr(n){if(Array.isArray(n))return n.map(Lr);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const r in n)t[r]=Lr(n[r]);return t}return Yi(n)}function mr(n){const t=n.key,r=n.value,o=n.valueSpec||{},h=n.objectElementValidators||{},g=n.style,y=n.styleSpec,x=n.validateSpec;let S=[];const D=yi(r);if(D!=="object")return[new rt(t,r,`object expected, ${D} found`)];for(const R in r){const P=R.split(".")[0],B=o[P]||o["*"];let j;if(h[P])j=h[P];else if(o[P])j=x;else if(h["*"])j=h["*"];else{if(!o["*"]){S.push(new rt(t,r[R],`unknown property "${R}"`));continue}j=x}S=S.concat(j({key:(t&&`${t}.`)+R,value:r[R],valueSpec:B,style:g,styleSpec:y,object:r,objectKey:R,validateSpec:x},r))}for(const R in o)h[R]||o[R].required&&o[R].default===void 0&&r[R]===void 0&&S.push(new rt(t,r,`missing required property "${R}"`));return S}function Ra(n){const t=n.value,r=n.valueSpec,o=n.style,h=n.styleSpec,g=n.key,y=n.arrayElementValidator||n.validateSpec;if(yi(t)!=="array")return[new rt(g,t,`array expected, ${yi(t)} found`)];if(r.length&&t.length!==r.length)return[new rt(g,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new rt(g,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let x={type:r.value,values:r.values};h.$version<7&&(x.function=r.function),yi(r.value)==="object"&&(x=r.value);let S=[];for(let D=0;D<t.length;D++)S=S.concat(y({array:t,arrayIndex:D,value:t[D],valueSpec:x,validateSpec:n.validateSpec,style:o,styleSpec:h,key:`${g}[${D}]`}));return S}function ou(n){const t=n.key,r=n.value,o=n.valueSpec;let h=yi(r);return h==="number"&&r!=r&&(h="NaN"),h!=="number"?[new rt(t,r,`number expected, ${h} found`)]:"minimum"in o&&r<o.minimum?[new rt(t,r,`${r} is less than the minimum value ${o.minimum}`)]:"maximum"in o&&r>o.maximum?[new rt(t,r,`${r} is greater than the maximum value ${o.maximum}`)]:[]}function ao(n){const t=n.valueSpec,r=Yi(n.value.type);let o,h,g,y={};const x=r!=="categorical"&&n.value.property===void 0,S=!x,D=yi(n.value.stops)==="array"&&yi(n.value.stops[0])==="array"&&yi(n.value.stops[0][0])==="object",R=mr({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(j){if(r==="identity")return[new rt(j.key,j.value,'identity function may not have a "stops" property')];let Z=[];const Y=j.value;return Z=Z.concat(Ra({key:j.key,value:Y,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:P})),yi(Y)==="array"&&Y.length===0&&Z.push(new rt(j.key,Y,"array must have at least one stop")),Z},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:t,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return r==="identity"&&x&&R.push(new rt(n.key,n.value,'missing required property "property"')),r==="identity"||n.value.stops||R.push(new rt(n.key,n.value,'missing required property "stops"')),r==="exponential"&&n.valueSpec.expression&&!iu(n.valueSpec)&&R.push(new rt(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(S&&!Fn(n.valueSpec)?R.push(new rt(n.key,n.value,"property functions not supported")):x&&!Ho(n.valueSpec)&&R.push(new rt(n.key,n.value,"zoom functions not supported"))),r!=="categorical"&&!D||n.value.property!==void 0||R.push(new rt(n.key,n.value,'"property" property is required')),R;function P(j){let Z=[];const Y=j.value,ie=j.key;if(yi(Y)!=="array")return[new rt(ie,Y,`array expected, ${yi(Y)} found`)];if(Y.length!==2)return[new rt(ie,Y,`array length 2 expected, length ${Y.length} found`)];if(D){if(yi(Y[0])!=="object")return[new rt(ie,Y,`object expected, ${yi(Y[0])} found`)];if(Y[0].zoom===void 0)return[new rt(ie,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new rt(ie,Y,"object stop key must have value")];if(g&&g>Yi(Y[0].zoom))return[new rt(ie,Y[0].zoom,"stop zoom values must appear in ascending order")];Yi(Y[0].zoom)!==g&&(g=Yi(Y[0].zoom),h=void 0,y={}),Z=Z.concat(mr({key:`${ie}[0]`,value:Y[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:ou,value:B}}))}else Z=Z.concat(B({key:`${ie}[0]`,value:Y[0],validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},Y));return Da(Lr(Y[1]))?Z.concat([new rt(`${ie}[1]`,Y[1],"expressions are not allowed in function stops.")]):Z.concat(j.validateSpec({key:`${ie}[1]`,value:Y[1],valueSpec:t,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function B(j,Z){const Y=yi(j.value),ie=Yi(j.value),he=j.value!==null?j.value:Z;if(o){if(Y!==o)return[new rt(j.key,he,`${Y} stop domain type must match previous stop domain type ${o}`)]}else o=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new rt(j.key,he,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&r!=="categorical"){let Ce=`number expected, ${Y} found`;return Fn(t)&&r===void 0&&(Ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rt(j.key,he,Ce)]}return r!=="categorical"||Y!=="number"||isFinite(ie)&&Math.floor(ie)===ie?r!=="categorical"&&Y==="number"&&h!==void 0&&ie<h?[new rt(j.key,he,"stop domain values must appear in ascending order")]:(h=ie,r==="categorical"&&ie in y?[new rt(j.key,he,"stop domain values must be unique")]:(y[ie]=!0,[])):[new rt(j.key,he,`integer expected, found ${ie}`)]}}function ua(n){const t=(n.expressionContext==="property"?ts:ca)(Lr(n.value),n.valueSpec);if(t.result==="error")return t.value.map((o=>new rt(`${n.key}${o.key}`,n.value,o.message)));const r=t.value.expression||t.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!r.outputDefined())return[new rt(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Vo(r))return[new rt(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!Vo(r))return[new rt(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Wl(r,["zoom","feature-state"]))return[new rt(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Kl(r))return[new rt(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function is(n){const t=n.key,r=n.value,o=n.valueSpec,h=[];return Array.isArray(o.values)?o.values.indexOf(Yi(r))===-1&&h.push(new rt(t,r,`expected one of [${o.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(o.values).indexOf(Yi(r))===-1&&h.push(new rt(t,r,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(r)} found`)),h}function gr(n){return ec(Lr(n.value))?ua(un({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ko(n)}function Ko(n){const t=n.value,r=n.key;if(yi(t)!=="array")return[new rt(r,t,`array expected, ${yi(t)} found`)];const o=n.styleSpec;let h,g=[];if(t.length<1)return[new rt(r,t,"filter array must have at least 1 element")];switch(g=g.concat(is({key:`${r}[0]`,value:t[0],valueSpec:o.filter_operator,style:n.style,styleSpec:n.styleSpec})),Yi(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Yi(t[1])==="$type"&&g.push(new rt(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&g.push(new rt(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(h=yi(t[1]),h!=="string"&&g.push(new rt(`${r}[1]`,t[1],`string expected, ${h} found`)));for(let y=2;y<t.length;y++)h=yi(t[y]),Yi(t[1])==="$type"?g=g.concat(is({key:`${r}[${y}]`,value:t[y],valueSpec:o.geometry_type,style:n.style,styleSpec:n.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&g.push(new rt(`${r}[${y}]`,t[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<t.length;y++)g=g.concat(Ko({key:`${r}[${y}]`,value:t[y],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":h=yi(t[1]),t.length!==2?g.push(new rt(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):h!=="string"&&g.push(new rt(`${r}[1]`,t[1],`string expected, ${h} found`))}return g}function ha(n,t){const r=n.key,o=n.validateSpec,h=n.style,g=n.styleSpec,y=n.value,x=n.objectKey,S=g[`${t}_${n.layerType}`];if(!S)return[];const D=x.match(/^(.*)-transition$/);if(t==="paint"&&D&&S[D[1]]&&S[D[1]].transition)return o({key:r,value:y,valueSpec:g.transition,style:h,styleSpec:g});const R=n.valueSpec||S[x];if(!R)return[new rt(r,y,`unknown property "${x}"`)];let P;if(yi(y)==="string"&&Fn(R)&&!R.tokens&&(P=/^{([^}]+)}$/.exec(y)))return[new rt(r,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(P[1])} }\`.`)];const B=[];return n.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&B.push(new rt(r,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Ql(Lr(y))&&Yi(y.type)==="identity"&&B.push(new rt(r,y,'"text-font" does not support identity functions'))),B.concat(o({key:n.key,value:y,valueSpec:R,style:h,styleSpec:g,expressionContext:"property",propertyType:t,propertyKey:x}))}function nc(n){return ha(n,"paint")}function Wo(n){return ha(n,"layout")}function ns(n){let t=[];const r=n.value,o=n.key,h=n.style,g=n.styleSpec;r.type||r.ref||t.push(new rt(o,r,'either "type" or "ref" is required'));let y=Yi(r.type);const x=Yi(r.ref);if(r.id){const S=Yi(r.id);for(let D=0;D<n.arrayIndex;D++){const R=h.layers[D];Yi(R.id)===S&&t.push(new rt(o,r.id,`duplicate layer id "${r.id}", previously used at line ${R.id.__line__}`))}}if("ref"in r){let S;["type","source","source-layer","filter","layout"].forEach((D=>{D in r&&t.push(new rt(o,r[D],`"${D}" is prohibited for ref layers`))})),h.layers.forEach((D=>{Yi(D.id)===x&&(S=D)})),S?S.ref?t.push(new rt(o,r.ref,"ref cannot reference another ref layer")):y=Yi(S.type):t.push(new rt(o,r.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(r.source){const S=h.sources&&h.sources[r.source],D=S&&Yi(S.type);S?D==="vector"&&y==="raster"?t.push(new rt(o,r.source,`layer "${r.id}" requires a raster source`)):D!=="raster-dem"&&y==="hillshade"?t.push(new rt(o,r.source,`layer "${r.id}" requires a raster-dem source`)):D==="raster"&&y!=="raster"?t.push(new rt(o,r.source,`layer "${r.id}" requires a vector source`)):D!=="vector"||r["source-layer"]?D==="raster-dem"&&y!=="hillshade"?t.push(new rt(o,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!r.paint||!r.paint["line-gradient"]||D==="geojson"&&S.lineMetrics||t.push(new rt(o,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new rt(o,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new rt(o,r.source,`source "${r.source}" not found`))}else t.push(new rt(o,r,'missing required property "source"'));return t=t.concat(mr({key:o,value:r,valueSpec:g.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*":()=>[],type:()=>n.validateSpec({key:`${o}.type`,value:r.type,valueSpec:g.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:r,objectKey:"type"}),filter:gr,layout:S=>mr({layer:r,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":D=>Wo(un({layerType:y},D))}}),paint:S=>mr({layer:r,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":D=>nc(un({layerType:y},D))}})}})),t}function rs(n){const t=n.value,r=n.key,o=yi(t);return o!=="string"?[new rt(r,t,`string expected, ${o} found`)]:[]}const Qo={promoteId:function({key:n,value:t}){if(yi(t)==="string")return rs({key:n,value:t});{const r=[];for(const o in t)r.push(...rs({key:`${n}.${o}`,value:t[o]}));return r}}};function Ia(n){const t=n.value,r=n.key,o=n.styleSpec,h=n.style,g=n.validateSpec;if(!t.type)return[new rt(r,t,'"type" is required')];const y=Yi(t.type);let x;switch(y){case"vector":case"raster":return x=mr({key:r,value:t,valueSpec:o[`source_${y.replace("-","_")}`],style:n.style,styleSpec:o,objectElementValidators:Qo,validateSpec:g}),x;case"raster-dem":return x=(function(S){var D;const R=(D=S.sourceName)!==null&&D!==void 0?D:"",P=S.value,B=S.styleSpec,j=B.source_raster_dem,Z=S.style;let Y=[];const ie=yi(P);if(P===void 0)return Y;if(ie!=="object")return Y.push(new rt("source_raster_dem",P,`object expected, ${ie} found`)),Y;const he=Yi(P.encoding)==="custom",Ce=["redFactor","greenFactor","blueFactor","baseShift"],me=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const Ee in P)!he&&Ce.includes(Ee)?Y.push(new rt(Ee,P[Ee],`In "${R}": "${Ee}" is only valid when "encoding" is set to "custom". ${me} encoding found`)):j[Ee]?Y=Y.concat(S.validateSpec({key:Ee,value:P[Ee],valueSpec:j[Ee],validateSpec:S.validateSpec,style:Z,styleSpec:B})):Y.push(new rt(Ee,P[Ee],`unknown property "${Ee}"`));return Y})({sourceName:r,value:t,style:n.style,styleSpec:o,validateSpec:g}),x;case"geojson":if(x=mr({key:r,value:t,valueSpec:o.source_geojson,style:h,styleSpec:o,validateSpec:g,objectElementValidators:Qo}),t.cluster)for(const S in t.clusterProperties){const[D,R]=t.clusterProperties[S],P=typeof D=="string"?[D,["accumulated"],["get",S]]:D;x.push(...ua({key:`${r}.${S}.map`,value:R,expressionContext:"cluster-map"})),x.push(...ua({key:`${r}.${S}.reduce`,value:P,expressionContext:"cluster-reduce"}))}return x;case"video":return mr({key:r,value:t,valueSpec:o.source_video,style:h,validateSpec:g,styleSpec:o});case"image":return mr({key:r,value:t,valueSpec:o.source_image,style:h,validateSpec:g,styleSpec:o});case"canvas":return[new rt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return is({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Rs(n){const t=n.value,r=n.styleSpec,o=r.light,h=n.style;let g=[];const y=yi(t);if(t===void 0)return g;if(y!=="object")return g=g.concat([new rt("light",t,`object expected, ${y} found`)]),g;for(const x in t){const S=x.match(/^(.*)-transition$/);g=g.concat(S&&o[S[1]]&&o[S[1]].transition?n.validateSpec({key:x,value:t[x],valueSpec:r.transition,validateSpec:n.validateSpec,style:h,styleSpec:r}):o[x]?n.validateSpec({key:x,value:t[x],valueSpec:o[x],validateSpec:n.validateSpec,style:h,styleSpec:r}):[new rt(x,t[x],`unknown property "${x}"`)])}return g}function Jo(n){const t=n.value,r=n.styleSpec,o=r.sky,h=n.style,g=yi(t);if(t===void 0)return[];if(g!=="object")return[new rt("sky",t,`object expected, ${g} found`)];let y=[];for(const x in t)y=y.concat(o[x]?n.validateSpec({key:x,value:t[x],valueSpec:o[x],style:h,styleSpec:r}):[new rt(x,t[x],`unknown property "${x}"`)]);return y}function el(n){const t=n.value,r=n.styleSpec,o=r.terrain,h=n.style;let g=[];const y=yi(t);if(t===void 0)return g;if(y!=="object")return g=g.concat([new rt("terrain",t,`object expected, ${y} found`)]),g;for(const x in t)g=g.concat(o[x]?n.validateSpec({key:x,value:t[x],valueSpec:o[x],validateSpec:n.validateSpec,style:h,styleSpec:r}):[new rt(x,t[x],`unknown property "${x}"`)]);return g}function Or(n){let t=[];const r=n.value,o=n.key;if(Array.isArray(r)){const h=[],g=[];for(const y in r)r[y].id&&h.includes(r[y].id)&&t.push(new rt(o,r,`all the sprites' ids must be unique, but ${r[y].id} is duplicated`)),h.push(r[y].id),r[y].url&&g.includes(r[y].url)&&t.push(new rt(o,r,`all the sprites' URLs must be unique, but ${r[y].url} is duplicated`)),g.push(r[y].url),t=t.concat(mr({key:`${o}[${y}]`,value:r[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:n.validateSpec}));return t}return rs({key:o,value:r})}const yr={"*":()=>[],array:Ra,boolean:function(n){const t=n.value,r=n.key,o=yi(t);return o!=="boolean"?[new rt(r,t,`boolean expected, ${o} found`)]:[]},number:ou,color:function(n){const t=n.key,r=n.value,o=yi(r);return o!=="string"?[new rt(t,r,`color expected, ${o} found`)]:zi.parse(String(r))?[]:[new rt(t,r,`color expected, "${r}" found`)]},constants:su,enum:is,filter:gr,function:ao,layer:ns,object:mr,source:Ia,light:Rs,sky:Jo,terrain:el,projection:function(n){const t=n.value,r=n.styleSpec,o=r.projection,h=n.style,g=yi(t);if(t===void 0)return[];if(g!=="object")return[new rt("projection",t,`object expected, ${g} found`)];let y=[];for(const x in t)y=y.concat(o[x]?n.validateSpec({key:x,value:t[x],valueSpec:o[x],style:h,styleSpec:r}):[new rt(x,t[x],`unknown property "${x}"`)]);return y},string:rs,formatted:function(n){return rs(n).length===0?[]:ua(n)},resolvedImage:function(n){return rs(n).length===0?[]:ua(n)},padding:function(n){const t=n.key,r=n.value;if(yi(r)==="array"){if(r.length<1||r.length>4)return[new rt(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const o={type:"number"};let h=[];for(let g=0;g<r.length;g++)h=h.concat(n.validateSpec({key:`${t}[${g}]`,value:r[g],validateSpec:n.validateSpec,valueSpec:o}));return h}return ou({key:t,value:r,valueSpec:{}})},variableAnchorOffsetCollection:function(n){const t=n.key,r=n.value,o=yi(r),h=n.styleSpec;if(o!=="array"||r.length<1||r.length%2!=0)return[new rt(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let g=[];for(let y=0;y<r.length;y+=2)g=g.concat(is({key:`${t}[${y}]`,value:r[y],valueSpec:h.layout_symbol["text-anchor"]})),g=g.concat(Ra({key:`${t}[${y+1}]`,value:r[y+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:h}));return g},sprite:Or};function da(n){const t=n.value,r=n.valueSpec,o=n.styleSpec;return n.validateSpec=da,r.expression&&Ql(Yi(t))?ao(n):r.expression&&Da(Lr(t))?ua(n):r.type&&yr[r.type]?yr[r.type](n):mr(un({},n,{valueSpec:r.type?o[r.type]:r}))}function ka(n){const t=n.value,r=n.key,o=rs(n);return o.length||(t.indexOf("{fontstack}")===-1&&o.push(new rt(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&o.push(new rt(r,t,'"glyphs" url must include a "{range}" token'))),o}function Mn(n,t=Ne){let r=[];return r=r.concat(da({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,validateSpec:da,objectElementValidators:{glyphs:ka,"*":()=>[]}})),n.constants&&(r=r.concat(su({key:"constants",value:n.constants}))),lu(r)}function Jn(n){return function(t){return n({...t,validateSpec:da})}}function lu(n){return[].concat(n).sort(((t,r)=>t.line-r.line))}function Zr(n){return function(...t){return lu(n.apply(this,t))}}Mn.source=Zr(Jn(Ia)),Mn.sprite=Zr(Jn(Or)),Mn.glyphs=Zr(Jn(ka)),Mn.light=Zr(Jn(Rs)),Mn.sky=Zr(Jn(Jo)),Mn.terrain=Zr(Jn(el)),Mn.layer=Zr(Jn(ns)),Mn.filter=Zr(Jn(gr)),Mn.paintProperty=Zr(Jn(nc)),Mn.layoutProperty=Zr(Jn(Wo));const as=Mn,_r=as.light,pn=as.sky,Ei=as.paintProperty,Is=as.layoutProperty;function Wr(n,t){let r=!1;if(t&&t.length)for(const o of t)n.fire(new Bn(new Error(o.message))),r=!0;return r}class ks{constructor(t,r,o){const h=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const y=new Int32Array(this.arrayBuffer);t=y[0],this.d=(r=y[1])+2*(o=y[2]);for(let S=0;S<this.d*this.d;S++){const D=y[3+S],R=y[3+S+1];h.push(D===R?null:y.subarray(D,R))}const x=y[3+h.length+1];this.keys=y.subarray(y[3+h.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=r+2*o;for(let y=0;y<this.d*this.d;y++)h.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=t,this.padding=o,this.scale=r/t,this.uid=0;const g=o/r*t;this.min=-g,this.max=t+g}insert(t,r,o,h,g){this._forEachCell(r,o,h,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(r),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,r,o,h,g,y){this.cells[g].push(y)}query(t,r,o,h,g){const y=this.min,x=this.max;if(t<=y&&r<=y&&x<=o&&x<=h&&!g)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(t,r,o,h,this._queryCell,S,{},g),S}}_queryCell(t,r,o,h,g,y,x,S){const D=this.cells[g];if(D!==null){const R=this.keys,P=this.bboxes;for(let B=0;B<D.length;B++){const j=D[B];if(x[j]===void 0){const Z=4*j;(S?S(P[Z+0],P[Z+1],P[Z+2],P[Z+3]):t<=P[Z+2]&&r<=P[Z+3]&&o>=P[Z+0]&&h>=P[Z+1])?(x[j]=!0,y.push(R[j])):x[j]=!1}}}}_forEachCell(t,r,o,h,g,y,x,S){const D=this._convertToCellCoord(t),R=this._convertToCellCoord(r),P=this._convertToCellCoord(o),B=this._convertToCellCoord(h);for(let j=D;j<=P;j++)for(let Z=R;Z<=B;Z++){const Y=this.d*Z+j;if((!S||S(this._convertFromCellCoord(j),this._convertFromCellCoord(Z),this._convertFromCellCoord(j+1),this._convertFromCellCoord(Z+1)))&&g.call(this,t,r,o,h,Y,y,x,S))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,r=3+this.cells.length+1+1;let o=0;for(let y=0;y<this.cells.length;y++)o+=this.cells[y].length;const h=new Int32Array(r+o+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;let g=r;for(let y=0;y<t.length;y++){const x=t[y];h[3+y]=g,h.set(x,g),g+=x.length}return h[3+t.length]=g,h.set(this.keys,g),g+=this.keys.length,h[3+t.length+1]=g,h.set(this.bboxes,g),g+=this.bboxes.length,h.buffer}static serialize(t,r){const o=t.toArrayBuffer();return r&&r.push(o),{buffer:o}}static deserialize(t){return new ks(t.buffer)}}const Un={};function wt(n,t,r={}){if(Un[n])throw new Error(`${n} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:n,writeable:!1}),Un[n]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}wt("Object",Object),wt("TransferableGridIndex",ks),wt("Color",zi),wt("Error",Error),wt("AJAXError",Tt),wt("ResolvedImage",Nn),wt("StylePropertyFunction",no),wt("StyleExpression",Jl,{omit:["_evaluator"]}),wt("ZoomDependentExpression",io),wt("ZoomConstantExpression",Ds),wt("CompoundExpression",Hr,{omit:["_evaluate"]});for(const n in eo)eo[n]._classRegistryKey||wt(`Expression_${n}`,eo[n]);function rc(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function so(n){return n.$name||n.constructor._classRegistryKey}function tl(n){return!(function(t){if(t===null||typeof t!="object")return!1;const r=so(t);return!(!r||r==="Object")})(n)&&(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n instanceof Blob||n instanceof Error||rc(n)||Ge(n)||ArrayBuffer.isView(n)||n instanceof ImageData)}function oo(n,t){if(tl(n))return(rc(n)||Ge(n))&&t&&t.push(n),ArrayBuffer.isView(n)&&t&&t.push(n.buffer),n instanceof ImageData&&t&&t.push(n.data.buffer),n;if(Array.isArray(n)){const g=[];for(const y of n)g.push(oo(y,t));return g}if(typeof n!="object")throw new Error("can't serialize object of type "+typeof n);const r=so(n);if(!r)throw new Error(`can't serialize object of unregistered class ${n.constructor.name}`);if(!Un[r])throw new Error(`${r} is not registered.`);const{klass:o}=Un[r],h=o.serialize?o.serialize(n,t):{};if(o.serialize){if(t&&h===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const g in n){if(!n.hasOwnProperty(g)||Un[r].omit.indexOf(g)>=0)continue;const y=n[g];h[g]=Un[r].shallow.indexOf(g)>=0?y:oo(y,t)}n instanceof Error&&(h.message=n.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(h.$name=r),h}function Pa(n){if(tl(n))return n;if(Array.isArray(n))return n.map(Pa);if(typeof n!="object")throw new Error("can't deserialize object of type "+typeof n);const t=so(n)||"Object";if(!Un[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=Un[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(n);const o=Object.create(r.prototype);for(const h of Object.keys(n)){if(h==="$name")continue;const g=n[h];o[h]=Un[t].shallow.indexOf(h)>=0?g:Pa(g)}return o}class ac{constructor(){this.first=!0}update(t,r){const o=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=o,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=o,!0):(this.lastFloorZoom>o?(this.lastIntegerZoom=o+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<o&&(this.lastIntegerZoom=o,this.lastIntegerZoomTime=r),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=o,!0))}}const ri={"Latin-1 Supplement":n=>n>=128&&n<=255,"Hangul Jamo":n=>n>=4352&&n<=4607,Khmer:n=>n>=6016&&n<=6143,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Katakana:n=>n>=12448&&n<=12543,Kanbun:n=>n>=12688&&n<=12703,"CJK Strokes":n=>n>=12736&&n<=12783,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"Private Use Area":n=>n>=57344&&n<=63743,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function fa(n){for(const t of n)if(nl(t.charCodeAt(0)))return!0;return!1}function Ps(n){for(const t of n)if(!Ls(t.charCodeAt(0)))return!1;return!0}function pa(n){const t=n.map((r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}})).filter((r=>r));return new RegExp(t.join("|"),"u")}const $u=pa(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ls(n){return!$u.test(String.fromCodePoint(n))}const il=pa(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function nl(n){return!(n!==746&&n!==747&&(n<4352||!(ri["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||ri["CJK Compatibility"](n)||ri["CJK Strokes"](n)||!(!ri["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||ri["Enclosed CJK Letters and Months"](n)||ri["Ideographic Description Characters"](n)||ri.Kanbun(n)||ri.Katakana(n)&&n!==12540||!(!ri["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!ri["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||ri["Vertical Forms"](n)||ri["Yijing Hexagram Symbols"](n)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(n))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(n))||il.test(String.fromCodePoint(n)))))}function Os(n){return!(nl(n)||(function(t){return!!(ri["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||ri["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||ri["Letterlike Symbols"](t)||ri["Number Forms"](t)||ri["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||ri["Control Pictures"](t)&&t!==9251||ri["Optical Character Recognition"](t)||ri["Enclosed Alphanumerics"](t)||ri["Geometric Shapes"](t)||ri["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ri["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ri["CJK Symbols and Punctuation"](t)||ri.Katakana(t)||ri["Private Use Area"](t)||ri["CJK Compatibility Forms"](t)||ri["Small Form Variants"](t)||ri["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)})(n))}const er=pa(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function rl(n){return er.test(String.fromCodePoint(n))}function Bh(n,t){return!(!t&&rl(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||ri.Khmer(n))}function Jd(n){for(const t of n)if(rl(t.charCodeAt(0)))return!0;return!1}const Gr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(n){this.pluginStatus=n.pluginStatus,this.pluginURL=n.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(n){this.applyArabicShaping=n.applyArabicShaping,this.processBidirectionalText=n.processBidirectionalText,this.processStyledBidirectionalText=n.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Zi{constructor(t,r){this.zoom=t,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ac,this.transition={})}isSupportedScript(t){return(function(r,o){for(const h of r)if(!Bh(h.charCodeAt(0),o))return!1;return!0})(t,Gr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,r=t-Math.floor(t),o=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*o}:{fromScale:.5,toScale:1,t:1-(1-o)*r}}}class en{constructor(t,r){this.property=t,this.value=r,this.expression=(function(o,h){if(Ql(o))return new no(o,h);if(Da(o)){const g=ts(o,h);if(g.result==="error")throw new Error(g.value.map((y=>`${y.key}: ${y.message}`)).join(", "));return g.value}{let g=o;return h.type==="color"&&typeof o=="string"?g=zi.parse(o):h.type!=="padding"||typeof o!="number"&&!Array.isArray(o)?h.type==="variableAnchorOffsetCollection"&&Array.isArray(o)&&(g=qr.parse(o)):g=yn.parse(o),{kind:"constant",evaluate:()=>g}}})(r===void 0?t.specification.default:r,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,r,o){return this.property.possiblyEvaluate(this,t,r,o)}}class al{constructor(t){this.property=t,this.value=new en(t,void 0)}transitioned(t,r){return new sl(this.property,this.value,r,it({},t.transition,this.transition),t.now)}untransitioned(){return new sl(this.property,this.value,null,{},0)}}class Bs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return ot(this._values[t].value.value)}setValue(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new al(this._values[t].property)),this._values[t].value=new en(this._values[t].property,r===null?void 0:ot(r))}getTransition(t){return ot(this._values[t].transition)}setTransition(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new al(this._values[t].property)),this._values[t].transition=ot(r)||void 0}serialize(){const t={};for(const r of Object.keys(this._values)){const o=this.getValue(r);o!==void 0&&(t[r]=o);const h=this.getTransition(r);h!==void 0&&(t[`${r}-transition`]=h)}return t}transitioned(t,r){const o=new lo(this._properties);for(const h of Object.keys(this._values))o._values[h]=this._values[h].transitioned(t,r._values[h]);return o}untransitioned(){const t=new lo(this._properties);for(const r of Object.keys(this._values))t._values[r]=this._values[r].untransitioned();return t}}class sl{constructor(t,r,o,h,g){this.property=t,this.value=r,this.begin=g+h.delay||0,this.end=this.begin+h.duration||0,t.specification.transition&&(h.delay||h.duration)&&(this.prior=o)}possiblyEvaluate(t,r,o){const h=t.now||0,g=this.value.possiblyEvaluate(t,r,o),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(t,r,o);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(t,r,o),g,(function(S){if(S<=0)return 0;if(S>=1)return 1;const D=S*S,R=D*S;return 4*(S<.5?R:3*(S-D)+R-.75)})(x))}}return g}}class lo{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,r,o){const h=new sc(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(t,r,o);return h}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class La{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return ot(this._values[t].value)}setValue(t,r){this._values[t]=new en(this._values[t].property,r===null?void 0:ot(r))}serialize(){const t={};for(const r of Object.keys(this._values)){const o=this.getValue(r);o!==void 0&&(t[r]=o)}return t}possiblyEvaluate(t,r,o){const h=new sc(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(t,r,o);return h}}class vr{constructor(t,r,o){this.property=t,this.value=r,this.parameters=o}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,r,o,h){return this.property.evaluate(this.value,this.parameters,t,r,o,h)}}class sc{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class zt{constructor(t){this.specification=t}possiblyEvaluate(t,r){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(r)}interpolate(t,r,o){const h=Rn[this.specification.type];return h?h(t,r,o):t}}class Ht{constructor(t,r){this.specification=t,this.overrides=r}possiblyEvaluate(t,r,o,h){return new vr(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(r,null,{},o,h)}:t.expression,r)}interpolate(t,r,o){if(t.value.kind!=="constant"||r.value.kind!=="constant")return t;if(t.value.value===void 0||r.value.value===void 0)return new vr(this,{kind:"constant",value:void 0},t.parameters);const h=Rn[this.specification.type];if(h){const g=h(t.value.value,r.value.value,o);return new vr(this,{kind:"constant",value:g},t.parameters)}return t}evaluate(t,r,o,h,g,y){return t.kind==="constant"?t.value:t.evaluate(r,o,h,g,y)}}class oc extends Ht{possiblyEvaluate(t,r,o,h){if(t.value===void 0)return new vr(this,{kind:"constant",value:void 0},r);if(t.expression.kind==="constant"){const g=t.expression.evaluate(r,null,{},o,h),y=t.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,x=this._calculate(y,y,y,r);return new vr(this,{kind:"constant",value:x},r)}if(t.expression.kind==="camera"){const g=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new vr(this,{kind:"constant",value:g},r)}return new vr(this,t.expression,r)}evaluate(t,r,o,h,g,y){if(t.kind==="source"){const x=t.evaluate(r,o,h,g,y);return this._calculate(x,x,x,r)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},o,h),t.evaluate({zoom:Math.floor(r.zoom)},o,h),t.evaluate({zoom:Math.floor(r.zoom)+1},o,h),r):t.value}_calculate(t,r,o,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:o,to:r}}interpolate(t){return t}}class Oa{constructor(t){this.specification=t}possiblyEvaluate(t,r,o,h){if(t.value!==void 0){if(t.expression.kind==="constant"){const g=t.expression.evaluate(r,null,{},o,h);return this._calculate(g,g,g,r)}return this._calculate(t.expression.evaluate(new Zi(Math.floor(r.zoom-1),r)),t.expression.evaluate(new Zi(Math.floor(r.zoom),r)),t.expression.evaluate(new Zi(Math.floor(r.zoom+1),r)),r)}}_calculate(t,r,o,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:o,to:r}}interpolate(t){return t}}class lc{constructor(t){this.specification=t}possiblyEvaluate(t,r,o,h){return!!t.expression.evaluate(r,null,{},o,h)}interpolate(){return!1}}class m{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in t){const o=t[r];o.specification.overridable&&this.overridableProperties.push(r);const h=this.defaultPropertyValues[r]=new en(o,void 0),g=this.defaultTransitionablePropertyValues[r]=new al(o);this.defaultTransitioningPropertyValues[r]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=h.possiblyEvaluate({})}}}wt("DataDrivenProperty",Ht),wt("DataConstantProperty",zt),wt("CrossFadedDataDrivenProperty",oc),wt("CrossFadedProperty",Oa),wt("ColorRampProperty",lc);const e="-transition";class s extends wa{constructor(t,r){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),r.layout&&(this._unevaluatedLayout=new La(r.layout)),r.paint)){this._transitionablePaint=new Bs(r.paint);for(const o in t.paint)this.setPaintProperty(o,t.paint[o],{validate:!1});for(const o in t.layout)this.setLayoutProperty(o,t.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sc(r.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,r,o={}){r!=null&&this._validate(Is,`layers.${this.id}.layout.${t}`,t,r,o)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,r):this.visibility=r)}getPaintProperty(t){return t.endsWith(e)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,r,o={}){if(r!=null&&this._validate(Ei,`layers.${this.id}.paint.${t}`,t,r,o))return!1;if(t.endsWith(e))return this._transitionablePaint.setTransition(t.slice(0,-11),r||void 0),!1;{const h=this._transitionablePaint._values[t],g=h.property.specification["property-type"]==="cross-faded-data-driven",y=h.value.isDataDriven(),x=h.value;this._transitionablePaint.setValue(t,r),this._handleSpecialPaintPropertyUpdate(t);const S=this._transitionablePaint._values[t].value;return S.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(t,x,S)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,r,o){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,r){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,r)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Gt(t,((r,o)=>!(r===void 0||o==="layout"&&!Object.keys(r).length||o==="paint"&&!Object.keys(r).length)))}_validate(t,r,o,h,g={}){return(!g||g.validate!==!1)&&Wr(this,t.call(as,{key:r,layerType:this.type,objectKey:o,value:h,styleSpec:Ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const r=this.paint.get(t);if(r instanceof vr&&Fn(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}const c={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class u{constructor(t,r){this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class p{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,r){return t._trim(),r&&(t.isTransferred=!0,r.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const r=Object.create(this.prototype);return r.arrayBuffer=t.arrayBuffer,r.length=t.length,r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function b(n,t=1){let r=0,o=0;return{members:n.map((h=>{const g=c[h.type].BYTES_PER_ELEMENT,y=r=T(r,Math.max(t,g)),x=h.components||1;return o=Math.max(o,g),r+=g*x,{name:h.name,type:h.type,components:x,offset:y}})),size:T(r,Math.max(o,t)),alignment:t}}function T(n,t){return Math.ceil(n/t)*t}class z extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,r)}emplace(t,r,o){const h=2*t;return this.int16[h+0]=r,this.int16[h+1]=o,t}}z.prototype.bytesPerElement=4,wt("StructArrayLayout2i4",z);class I extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,o)}emplace(t,r,o,h){const g=3*t;return this.int16[g+0]=r,this.int16[g+1]=o,this.int16[g+2]=h,t}}I.prototype.bytesPerElement=6,wt("StructArrayLayout3i6",I);class L extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,t,r,o,h)}emplace(t,r,o,h,g){const y=4*t;return this.int16[y+0]=r,this.int16[y+1]=o,this.int16[y+2]=h,this.int16[y+3]=g,t}}L.prototype.bytesPerElement=8,wt("StructArrayLayout4i8",L);class O extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,o,h,g,y)}emplace(t,r,o,h,g,y,x){const S=6*t;return this.int16[S+0]=r,this.int16[S+1]=o,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,t}}O.prototype.bytesPerElement=12,wt("StructArrayLayout2i4i12",O);class q extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,o,h,g,y)}emplace(t,r,o,h,g,y,x){const S=4*t,D=8*t;return this.int16[S+0]=r,this.int16[S+1]=o,this.uint8[D+4]=h,this.uint8[D+5]=g,this.uint8[D+6]=y,this.uint8[D+7]=x,t}}q.prototype.bytesPerElement=8,wt("StructArrayLayout2i4ub8",q);class Q extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,r)}emplace(t,r,o){const h=2*t;return this.float32[h+0]=r,this.float32[h+1]=o,t}}Q.prototype.bytesPerElement=8,wt("StructArrayLayout2f8",Q);class te extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y,x,S,D,R){const P=this.length;return this.resize(P+1),this.emplace(P,t,r,o,h,g,y,x,S,D,R)}emplace(t,r,o,h,g,y,x,S,D,R,P){const B=10*t;return this.uint16[B+0]=r,this.uint16[B+1]=o,this.uint16[B+2]=h,this.uint16[B+3]=g,this.uint16[B+4]=y,this.uint16[B+5]=x,this.uint16[B+6]=S,this.uint16[B+7]=D,this.uint16[B+8]=R,this.uint16[B+9]=P,t}}te.prototype.bytesPerElement=20,wt("StructArrayLayout10ui20",te);class ne extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y,x,S,D,R,P,B){const j=this.length;return this.resize(j+1),this.emplace(j,t,r,o,h,g,y,x,S,D,R,P,B)}emplace(t,r,o,h,g,y,x,S,D,R,P,B,j){const Z=12*t;return this.int16[Z+0]=r,this.int16[Z+1]=o,this.int16[Z+2]=h,this.int16[Z+3]=g,this.uint16[Z+4]=y,this.uint16[Z+5]=x,this.uint16[Z+6]=S,this.uint16[Z+7]=D,this.int16[Z+8]=R,this.int16[Z+9]=P,this.int16[Z+10]=B,this.int16[Z+11]=j,t}}ne.prototype.bytesPerElement=24,wt("StructArrayLayout4i4ui4i24",ne);class le extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,o)}emplace(t,r,o,h){const g=3*t;return this.float32[g+0]=r,this.float32[g+1]=o,this.float32[g+2]=h,t}}le.prototype.bytesPerElement=12,wt("StructArrayLayout3f12",le);class de extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint32[1*t+0]=r,t}}de.prototype.bytesPerElement=4,wt("StructArrayLayout1ul4",de);class pe extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y,x,S,D){const R=this.length;return this.resize(R+1),this.emplace(R,t,r,o,h,g,y,x,S,D)}emplace(t,r,o,h,g,y,x,S,D,R){const P=10*t,B=5*t;return this.int16[P+0]=r,this.int16[P+1]=o,this.int16[P+2]=h,this.int16[P+3]=g,this.int16[P+4]=y,this.int16[P+5]=x,this.uint32[B+3]=S,this.uint16[P+8]=D,this.uint16[P+9]=R,t}}pe.prototype.bytesPerElement=20,wt("StructArrayLayout6i1ul2ui20",pe);class re extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,o,h,g,y)}emplace(t,r,o,h,g,y,x){const S=6*t;return this.int16[S+0]=r,this.int16[S+1]=o,this.int16[S+2]=h,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,t}}re.prototype.bytesPerElement=12,wt("StructArrayLayout2i2i2i12",re);class ve extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,t,r,o,h,g)}emplace(t,r,o,h,g,y){const x=4*t,S=8*t;return this.float32[x+0]=r,this.float32[x+1]=o,this.float32[x+2]=h,this.int16[S+6]=g,this.int16[S+7]=y,t}}ve.prototype.bytesPerElement=16,wt("StructArrayLayout2f1f2i16",ve);class Te extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,o,h,g,y)}emplace(t,r,o,h,g,y,x){const S=16*t,D=4*t,R=8*t;return this.uint8[S+0]=r,this.uint8[S+1]=o,this.float32[D+1]=h,this.float32[D+2]=g,this.int16[R+6]=y,this.int16[R+7]=x,t}}Te.prototype.bytesPerElement=16,wt("StructArrayLayout2ub2f2i16",Te);class Re extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,o)}emplace(t,r,o,h){const g=3*t;return this.uint16[g+0]=r,this.uint16[g+1]=o,this.uint16[g+2]=h,t}}Re.prototype.bytesPerElement=6,wt("StructArrayLayout3ui6",Re);class $e extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y,x,S,D,R,P,B,j,Z,Y,ie,he){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,t,r,o,h,g,y,x,S,D,R,P,B,j,Z,Y,ie,he)}emplace(t,r,o,h,g,y,x,S,D,R,P,B,j,Z,Y,ie,he,Ce){const me=24*t,Ee=12*t,Ue=48*t;return this.int16[me+0]=r,this.int16[me+1]=o,this.uint16[me+2]=h,this.uint16[me+3]=g,this.uint32[Ee+2]=y,this.uint32[Ee+3]=x,this.uint32[Ee+4]=S,this.uint16[me+10]=D,this.uint16[me+11]=R,this.uint16[me+12]=P,this.float32[Ee+7]=B,this.float32[Ee+8]=j,this.uint8[Ue+36]=Z,this.uint8[Ue+37]=Y,this.uint8[Ue+38]=ie,this.uint32[Ee+10]=he,this.int16[me+22]=Ce,t}}$e.prototype.bytesPerElement=48,wt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",$e);class nt extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o,h,g,y,x,S,D,R,P,B,j,Z,Y,ie,he,Ce,me,Ee,Ue,tt,vt,Vt,yt,gt,It,At){const _t=this.length;return this.resize(_t+1),this.emplace(_t,t,r,o,h,g,y,x,S,D,R,P,B,j,Z,Y,ie,he,Ce,me,Ee,Ue,tt,vt,Vt,yt,gt,It,At)}emplace(t,r,o,h,g,y,x,S,D,R,P,B,j,Z,Y,ie,he,Ce,me,Ee,Ue,tt,vt,Vt,yt,gt,It,At,_t){const He=32*t,kt=16*t;return this.int16[He+0]=r,this.int16[He+1]=o,this.int16[He+2]=h,this.int16[He+3]=g,this.int16[He+4]=y,this.int16[He+5]=x,this.int16[He+6]=S,this.int16[He+7]=D,this.uint16[He+8]=R,this.uint16[He+9]=P,this.uint16[He+10]=B,this.uint16[He+11]=j,this.uint16[He+12]=Z,this.uint16[He+13]=Y,this.uint16[He+14]=ie,this.uint16[He+15]=he,this.uint16[He+16]=Ce,this.uint16[He+17]=me,this.uint16[He+18]=Ee,this.uint16[He+19]=Ue,this.uint16[He+20]=tt,this.uint16[He+21]=vt,this.uint16[He+22]=Vt,this.uint32[kt+12]=yt,this.float32[kt+13]=gt,this.float32[kt+14]=It,this.uint16[He+30]=At,this.uint16[He+31]=_t,t}}nt.prototype.bytesPerElement=64,wt("StructArrayLayout8i15ui1ul2f2ui64",nt);class pt extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.float32[1*t+0]=r,t}}pt.prototype.bytesPerElement=4,wt("StructArrayLayout1f4",pt);class xt extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,o)}emplace(t,r,o,h){const g=3*t;return this.uint16[6*t+0]=r,this.float32[g+1]=o,this.float32[g+2]=h,t}}xt.prototype.bytesPerElement=12,wt("StructArrayLayout1ui2f12",xt);class ut extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,o)}emplace(t,r,o,h){const g=4*t;return this.uint32[2*t+0]=r,this.uint16[g+2]=o,this.uint16[g+3]=h,t}}ut.prototype.bytesPerElement=8,wt("StructArrayLayout1ul2ui8",ut);class ct extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,r)}emplace(t,r,o){const h=2*t;return this.uint16[h+0]=r,this.uint16[h+1]=o,t}}ct.prototype.bytesPerElement=4,wt("StructArrayLayout2ui4",ct);class St extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint16[1*t+0]=r,t}}St.prototype.bytesPerElement=2,wt("StructArrayLayout1ui2",St);class ft extends p{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,t,r,o,h)}emplace(t,r,o,h,g){const y=4*t;return this.float32[y+0]=r,this.float32[y+1]=o,this.float32[y+2]=h,this.float32[y+3]=g,t}}ft.prototype.bytesPerElement=16,wt("StructArrayLayout4f16",ft);class Ke extends u{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new X(this.anchorPointX,this.anchorPointY)}}Ke.prototype.size=20;class at extends pe{get(t){return new Ke(this,t)}}wt("CollisionBoxArray",at);class Xt extends u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Xt.prototype.size=48;class Di extends $e{get(t){return new Xt(this,t)}}wt("PlacedSymbolArray",Di);class Kt extends u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Kt.prototype.size=64;class si extends nt{get(t){return new Kt(this,t)}}wt("SymbolInstanceArray",si);class Pi extends pt{getoffsetX(t){return this.float32[1*t+0]}}wt("GlyphOffsetArray",Pi);class _n extends I{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}wt("SymbolLineVertexArray",_n);class ma extends u{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ma.prototype.size=12;class ti extends xt{get(t){return new ma(this,t)}}wt("TextAnchorOffsetArray",ti);class tr extends u{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}tr.prototype.size=8;class Yn extends ut{get(t){return new tr(this,t)}}wt("FeatureIndexArray",Yn);class Kn extends z{}class ir extends z{}class Ba extends z{}class Ns extends O{}class ol extends q{}class Fs extends Q{}class Ki extends te{}class on extends ne{}class cc extends le{}class nr extends de{}class xr extends re{}class Na extends Te{}class In extends Re{}class zn extends ct{}const Vn=b([{name:"a_pos",components:2,type:"Int16"}],4),{members:br}=Vn;class ui{constructor(t=[]){this.segments=t}prepareSegment(t,r,o,h){let g=this.segments[this.segments.length-1];return t>ui.MAX_VERTEX_ARRAY_LENGTH&&Ft(`Max vertices per segment is ${ui.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!g||g.vertexLength+t>ui.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h)&&(g={vertexOffset:r.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0},h!==void 0&&(g.sortKey=h),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const t of this.segments)for(const r in t.vaos)t.vaos[r].destroy()}static simpleSegment(t,r,o,h){return new ui([{vertexOffset:t,primitiveOffset:r,vertexLength:o,primitiveLength:h,vaos:{},sortKey:0}])}}function js(n,t){return 256*(n=Ze(Math.floor(n),0,255))+Ze(Math.floor(t),0,255)}ui.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wt("SegmentVector",ui);const co=b([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var uo={exports:{}},Xu={exports:{}};Xu.exports=function(n,t){var r,o,h,g,y,x,S,D;for(o=n.length-(r=3&n.length),h=t,y=3432918353,x=461845907,D=0;D<o;)S=255&n.charCodeAt(D)|(255&n.charCodeAt(++D))<<8|(255&n.charCodeAt(++D))<<16|(255&n.charCodeAt(++D))<<24,++D,h=27492+(65535&(g=5*(65535&(h=(h^=S=(65535&(S=(S=(65535&S)*y+(((S>>>16)*y&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(S=0,r){case 3:S^=(255&n.charCodeAt(D+2))<<16;case 2:S^=(255&n.charCodeAt(D+1))<<8;case 1:h^=S=(65535&(S=(S=(65535&(S^=255&n.charCodeAt(D)))*y+(((S>>>16)*y&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295}return h^=n.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var Nh=Xu.exports,cu={exports:{}};cu.exports=function(n,t){for(var r,o=n.length,h=t^o,g=0;o>=4;)r=1540483477*(65535&(r=255&n.charCodeAt(g)|(255&n.charCodeAt(++g))<<8|(255&n.charCodeAt(++g))<<16|(255&n.charCodeAt(++g))<<24))+((1540483477*(r>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),o-=4,++g;switch(o){case 3:h^=(255&n.charCodeAt(g+2))<<16;case 2:h^=(255&n.charCodeAt(g+1))<<8;case 1:h=1540483477*(65535&(h^=255&n.charCodeAt(g)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var ss=Nh,Fh=cu.exports;uo.exports=ss,uo.exports.murmur3=ss,uo.exports.murmur2=Fh;var uc=G(uo.exports);class ll{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,r,o,h){this.ids.push(hc(t)),this.positions.push(r,o,h)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=hc(t);let o=0,h=this.ids.length-1;for(;o<h;){const y=o+h>>1;this.ids[y]>=r?h=y:o=y+1}const g=[];for(;this.ids[o]===r;)g.push({index:this.positions[3*o],start:this.positions[3*o+1],end:this.positions[3*o+2]}),o++;return g}static serialize(t,r){const o=new Float64Array(t.ids),h=new Uint32Array(t.positions);return cl(o,h,0,o.length-1),r&&r.push(o.buffer,h.buffer),{ids:o,positions:h}}static deserialize(t){const r=new ll;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}}function hc(n){const t=+n;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:uc(String(n))}function cl(n,t,r,o){for(;r<o;){const h=n[r+o>>1];let g=r-1,y=o+1;for(;;){do g++;while(n[g]<h);do y--;while(n[y]>h);if(g>=y)break;ho(n,g,y),ho(t,3*g,3*y),ho(t,3*g+1,3*y+1),ho(t,3*g+2,3*y+2)}y-r<o-y?(cl(n,t,r,y),r=y+1):(cl(n,t,y+1,o),o=y)}}function ho(n,t,r){const o=n[t];n[t]=n[r],n[r]=o}wt("FeaturePositionMap",ll);class ul{constructor(t,r){this.gl=t.gl,this.location=r}}class Yu extends ul{constructor(t,r){super(t,r),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class ef extends ul{constructor(t,r){super(t,r),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class tf extends ul{constructor(t,r){super(t,r),this.current=zi.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Om=new Float32Array(16);function jh(n){return[js(255*n.r,255*n.g),js(255*n.b,255*n.a)]}class Us{constructor(t,r,o){this.value=t,this.uniformNames=r.map((h=>`u_${h}`)),this.type=o}setUniform(t,r,o){t.set(o.constantOr(this.value))}getBinding(t,r,o){return this.type==="color"?new tf(t,r):new Yu(t,r)}}class fo{constructor(t,r){this.uniformNames=r.map((o=>`u_${o}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=t.tlbr}setUniform(t,r,o,h){const g=h==="u_pattern_to"?this.patternTo:h==="u_pattern_from"?this.patternFrom:h==="u_pixel_ratio_to"?this.pixelRatioTo:h==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&t.set(g)}getBinding(t,r,o){return o.substr(0,9)==="u_pattern"?new ef(t,r):new Yu(t,r)}}class Vs{constructor(t,r,o,h){this.expression=t,this.type=o,this.maxValue=0,this.paintVertexAttributes=r.map((g=>({name:`a_${g}`,type:"Float32",components:o==="color"?2:1,offset:0}))),this.paintVertexArray=new h}populatePaintArray(t,r,o,h,g){const y=this.paintVertexArray.length,x=this.expression.evaluate(new Zi(0),r,{},h,[],g);this.paintVertexArray.resize(t),this._setPaintValue(y,t,x)}updatePaintArray(t,r,o,h){const g=this.expression.evaluate({zoom:0},o,h);this._setPaintValue(t,r,g)}_setPaintValue(t,r,o){if(this.type==="color"){const h=jh(o);for(let g=t;g<r;g++)this.paintVertexArray.emplace(g,h[0],h[1])}else{for(let h=t;h<r;h++)this.paintVertexArray.emplace(h,o);this.maxValue=Math.max(this.maxValue,Math.abs(o))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qr{constructor(t,r,o,h,g,y){this.expression=t,this.uniformNames=r.map((x=>`u_${x}_t`)),this.type=o,this.useIntegerZoom=h,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=r.map((x=>({name:`a_${x}`,type:"Float32",components:o==="color"?4:2,offset:0}))),this.paintVertexArray=new y}populatePaintArray(t,r,o,h,g){const y=this.expression.evaluate(new Zi(this.zoom),r,{},h,[],g),x=this.expression.evaluate(new Zi(this.zoom+1),r,{},h,[],g),S=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(S,t,y,x)}updatePaintArray(t,r,o,h){const g=this.expression.evaluate({zoom:this.zoom},o,h),y=this.expression.evaluate({zoom:this.zoom+1},o,h);this._setPaintValue(t,r,g,y)}_setPaintValue(t,r,o,h){if(this.type==="color"){const g=jh(o),y=jh(h);for(let x=t;x<r;x++)this.paintVertexArray.emplace(x,g[0],g[1],y[0],y[1])}else{for(let g=t;g<r;g++)this.paintVertexArray.emplace(g,o,h);this.maxValue=Math.max(this.maxValue,Math.abs(o),Math.abs(h))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,r){const o=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,h=Ze(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(h)}getBinding(t,r,o){return new Yu(t,r)}}class Fa{constructor(t,r,o,h,g,y){this.expression=t,this.type=r,this.useIntegerZoom=o,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(t,r,o){const h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(h,t,r.patterns&&r.patterns[this.layerId],o)}updatePaintArray(t,r,o,h,g){this._setPaintValues(t,r,o.patterns&&o.patterns[this.layerId],g)}_setPaintValues(t,r,o,h){if(!h||!o)return;const{min:g,mid:y,max:x}=o,S=h[g],D=h[y],R=h[x];if(S&&D&&R)for(let P=t;P<r;P++)this.zoomInPaintVertexArray.emplace(P,D.tl[0],D.tl[1],D.br[0],D.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],D.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(P,D.tl[0],D.tl[1],D.br[0],D.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],D.pixelRatio,R.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,co.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class nf{constructor(t,r,o){this.binders={},this._buffers=[];const h=[];for(const g in t.paint._values){if(!o(g))continue;const y=t.paint.get(g);if(!(y instanceof vr&&Fn(y.property.specification)))continue;const x=up(g,t.type),S=y.value,D=y.property.specification.type,R=y.property.useIntegerZoom,P=y.property.specification["property-type"],B=P==="cross-faded"||P==="cross-faded-data-driven";if(S.kind==="constant")this.binders[g]=B?new fo(S.value,x):new Us(S.value,x,D),h.push(`/u_${g}`);else if(S.kind==="source"||B){const j=rf(g,D,"source");this.binders[g]=B?new Fa(S,D,R,r,j,t.id):new Vs(S,x,D,j),h.push(`/a_${g}`)}else{const j=rf(g,D,"composite");this.binders[g]=new Qr(S,x,D,R,r,j),h.push(`/z_${g}`)}}this.cacheKey=h.sort().join("")}getMaxValue(t){const r=this.binders[t];return r instanceof Vs||r instanceof Qr?r.maxValue:0}populatePaintArrays(t,r,o,h,g){for(const y in this.binders){const x=this.binders[y];(x instanceof Vs||x instanceof Qr||x instanceof Fa)&&x.populatePaintArray(t,r,o,h,g)}}setConstantPatternPositions(t,r){for(const o in this.binders){const h=this.binders[o];h instanceof fo&&h.setConstantPatternPositions(t,r)}}updatePaintArrays(t,r,o,h,g){let y=!1;for(const x in t){const S=r.getPositions(x);for(const D of S){const R=o.feature(D.index);for(const P in this.binders){const B=this.binders[P];if((B instanceof Vs||B instanceof Qr||B instanceof Fa)&&B.expression.isStateDependent===!0){const j=h.paint.get(P);B.expression=j.value,B.updatePaintArray(D.start,D.end,R,t[x],g),y=!0}}}}return y}defines(){const t=[];for(const r in this.binders){const o=this.binders[r];(o instanceof Us||o instanceof fo)&&t.push(...o.uniformNames.map((h=>`#define HAS_UNIFORM_${h}`)))}return t}getBinderAttributes(){const t=[];for(const r in this.binders){const o=this.binders[r];if(o instanceof Vs||o instanceof Qr)for(let h=0;h<o.paintVertexAttributes.length;h++)t.push(o.paintVertexAttributes[h].name);else if(o instanceof Fa)for(let h=0;h<co.members.length;h++)t.push(co.members[h].name)}return t}getBinderUniforms(){const t=[];for(const r in this.binders){const o=this.binders[r];if(o instanceof Us||o instanceof fo||o instanceof Qr)for(const h of o.uniformNames)t.push(h)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,r){const o=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof Us||g instanceof fo||g instanceof Qr){for(const y of g.uniformNames)if(r[y]){const x=g.getBinding(t,r[y],y);o.push({name:y,property:h,binding:x})}}}return o}setUniforms(t,r,o,h){for(const{name:g,property:y,binding:x}of r)this.binders[y].setUniform(x,h,o.get(y),g)}updatePaintBuffers(t){this._buffers=[];for(const r in this.binders){const o=this.binders[r];if(t&&o instanceof Fa){const h=t.fromScale===2?o.zoomInPaintVertexBuffer:o.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(o instanceof Vs||o instanceof Qr)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(t){for(const r in this.binders){const o=this.binders[r];(o instanceof Vs||o instanceof Qr||o instanceof Fa)&&o.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const r=this.binders[t];(r instanceof Vs||r instanceof Qr||r instanceof Fa)&&r.destroy()}}}class hl{constructor(t,r,o=(()=>!0)){this.programConfigurations={};for(const h of t)this.programConfigurations[h.id]=new nf(h,r,o);this.needsUpload=!1,this._featureMap=new ll,this._bufferOffset=0}populatePaintArrays(t,r,o,h,g,y){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(t,r,h,g,y);r.id!==void 0&&this._featureMap.add(r.id,o,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,r,o,h){for(const g of o)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(t,this._featureMap,r,g,h)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function up(n,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(`${t}-`,"").replace(/-/g,"_")]}function rf(n,t,r){const o={color:{source:Q,composite:ft},number:{source:pt,composite:Q}},h=(function(g){return{"line-pattern":{source:Ki,composite:Ki},"fill-pattern":{source:Ki,composite:Ki},"fill-extrusion-pattern":{source:Ki,composite:Ki}}[g]})(n);return h&&h[r]||o[t][r]}wt("ConstantBinder",Us),wt("CrossFadedConstantBinder",fo),wt("SourceExpressionBinder",Vs),wt("CrossFadedCompositeBinder",Fa),wt("CompositeExpressionBinder",Qr),wt("ProgramConfiguration",nf,{omit:["_buffers"]}),wt("ProgramConfigurationSet",hl);const vn=8192,Uh=Math.pow(2,14)-1,Vh=-Uh-1;function dl(n){const t=vn/n.extent,r=n.loadGeometry();for(let o=0;o<r.length;o++){const h=r[o];for(let g=0;g<h.length;g++){const y=h[g],x=Math.round(y.x*t),S=Math.round(y.y*t);y.x=Ze(x,Vh,Uh),y.y=Ze(S,Vh,Uh),(x<y.x||x>y.x+1||S<y.y||S>y.y+1)&&Ft("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function fl(n,t){return{type:n.type,id:n.id,properties:n.properties,geometry:t?dl(n):[]}}function uu(n,t,r,o,h){n.emplaceBack(2*t+(o+1)/2,2*r+(h+1)/2)}class qh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ir,this.indexArray=new In,this.segments=new ui,this.programConfigurations=new hl(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,o){const h=this.layers[0],g=[];let y=null,x=!1;h.type==="circle"&&(y=h.layout.get("circle-sort-key"),x=!y.isConstant());for(const{feature:S,id:D,index:R,sourceLayerIndex:P}of t){const B=this.layers[0]._featureFilter.needGeometry,j=fl(S,B);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),j,o))continue;const Z=x?y.evaluate(j,{},o):void 0,Y={id:D,properties:S.properties,type:S.type,sourceLayerIndex:P,index:R,geometry:B?j.geometry:dl(S),patterns:{},sortKey:Z};g.push(Y)}x&&g.sort(((S,D)=>S.sortKey-D.sortKey));for(const S of g){const{geometry:D,index:R,sourceLayerIndex:P}=S,B=t[R].feature;this.addFeature(S,D,R,o),r.featureIndex.insert(B,D,R,P,this.index)}}update(t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,br),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,r,o,h){for(const g of r)for(const y of g){const x=y.x,S=y.y;if(x<0||x>=vn||S<0||S>=vn)continue;const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),R=D.vertexLength;uu(this.layoutVertexArray,x,S,-1,-1),uu(this.layoutVertexArray,x,S,1,-1),uu(this.layoutVertexArray,x,S,1,1),uu(this.layoutVertexArray,x,S,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,{},h)}}function af(n,t){for(let r=0;r<n.length;r++)if(hu(t,n[r]))return!0;for(let r=0;r<t.length;r++)if(hu(n,t[r]))return!0;return!!Zh(n,t)}function Bm(n,t,r){return!!hu(n,t)||!!Gh(t,n,r)}function Hh(n,t){if(n.length===1)return dp(t,n[0]);for(let r=0;r<t.length;r++){const o=t[r];for(let h=0;h<o.length;h++)if(hu(n,o[h]))return!0}for(let r=0;r<n.length;r++)if(dp(t,n[r]))return!0;for(let r=0;r<t.length;r++)if(Zh(n,t[r]))return!0;return!1}function hp(n,t,r){if(n.length>1){if(Zh(n,t))return!0;for(let o=0;o<t.length;o++)if(Gh(t[o],n,r))return!0}for(let o=0;o<n.length;o++)if(Gh(n[o],t,r))return!0;return!1}function Zh(n,t){if(n.length===0||t.length===0)return!1;for(let r=0;r<n.length-1;r++){const o=n[r],h=n[r+1];for(let g=0;g<t.length-1;g++)if(sf(o,h,t[g],t[g+1]))return!0}return!1}function sf(n,t,r,o){return Rt(n,r,o)!==Rt(t,r,o)&&Rt(n,t,r)!==Rt(n,t,o)}function Gh(n,t,r){const o=r*r;if(t.length===1)return n.distSqr(t[0])<o;for(let h=1;h<t.length;h++)if(of(n,t[h-1],t[h])<o)return!0;return!1}function of(n,t,r){const o=t.distSqr(r);if(o===0)return n.distSqr(t);const h=((n.x-t.x)*(r.x-t.x)+(n.y-t.y)*(r.y-t.y))/o;return n.distSqr(h<0?t:h>1?r:r.sub(t)._mult(h)._add(t))}function dp(n,t){let r,o,h,g=!1;for(let y=0;y<n.length;y++){r=n[y];for(let x=0,S=r.length-1;x<r.length;S=x++)o=r[x],h=r[S],o.y>t.y!=h.y>t.y&&t.x<(h.x-o.x)*(t.y-o.y)/(h.y-o.y)+o.x&&(g=!g)}return g}function hu(n,t){let r=!1;for(let o=0,h=n.length-1;o<n.length;h=o++){const g=n[o],y=n[h];g.y>t.y!=y.y>t.y&&t.x<(y.x-g.x)*(t.y-g.y)/(y.y-g.y)+g.x&&(r=!r)}return r}function fp(n,t,r){const o=r[0],h=r[2];if(n.x<o.x&&t.x<o.x||n.x>h.x&&t.x>h.x||n.y<o.y&&t.y<o.y||n.y>h.y&&t.y>h.y)return!1;const g=Rt(n,t,r[0]);return g!==Rt(n,t,r[1])||g!==Rt(n,t,r[2])||g!==Rt(n,t,r[3])}function po(n,t,r){const o=t.paint.get(n).value;return o.kind==="constant"?o.value:r.programConfigurations.get(t.id).getMaxValue(n)}function du(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function dc(n,t,r,o,h){if(!t[0]&&!t[1])return n;const g=X.convert(t)._mult(h);r==="viewport"&&g._rotate(-o);const y=[];for(let x=0;x<n.length;x++)y.push(n[x].sub(g));return y}let lf,cf;wt("CircleBucket",qh,{omit:["layers"]});var $h={get paint(){return cf=cf||new m({"circle-radius":new Ht(Ne.paint_circle["circle-radius"]),"circle-color":new Ht(Ne.paint_circle["circle-color"]),"circle-blur":new Ht(Ne.paint_circle["circle-blur"]),"circle-opacity":new Ht(Ne.paint_circle["circle-opacity"]),"circle-translate":new zt(Ne.paint_circle["circle-translate"]),"circle-translate-anchor":new zt(Ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new zt(Ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new zt(Ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ht(Ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ht(Ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ht(Ne.paint_circle["circle-stroke-opacity"])})},get layout(){return lf=lf||new m({"circle-sort-key":new Ht(Ne.layout_circle["circle-sort-key"])})}},wr=1e-6,fc=typeof Float32Array<"u"?Float32Array:Array;function uf(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function pc(n,t,r){var o=t[0],h=t[1],g=t[2],y=t[3],x=t[4],S=t[5],D=t[6],R=t[7],P=t[8],B=t[9],j=t[10],Z=t[11],Y=t[12],ie=t[13],he=t[14],Ce=t[15],me=r[0],Ee=r[1],Ue=r[2],tt=r[3];return n[0]=me*o+Ee*x+Ue*P+tt*Y,n[1]=me*h+Ee*S+Ue*B+tt*ie,n[2]=me*g+Ee*D+Ue*j+tt*he,n[3]=me*y+Ee*R+Ue*Z+tt*Ce,n[4]=(me=r[4])*o+(Ee=r[5])*x+(Ue=r[6])*P+(tt=r[7])*Y,n[5]=me*h+Ee*S+Ue*B+tt*ie,n[6]=me*g+Ee*D+Ue*j+tt*he,n[7]=me*y+Ee*R+Ue*Z+tt*Ce,n[8]=(me=r[8])*o+(Ee=r[9])*x+(Ue=r[10])*P+(tt=r[11])*Y,n[9]=me*h+Ee*S+Ue*B+tt*ie,n[10]=me*g+Ee*D+Ue*j+tt*he,n[11]=me*y+Ee*R+Ue*Z+tt*Ce,n[12]=(me=r[12])*o+(Ee=r[13])*x+(Ue=r[14])*P+(tt=r[15])*Y,n[13]=me*h+Ee*S+Ue*B+tt*ie,n[14]=me*g+Ee*D+Ue*j+tt*he,n[15]=me*y+Ee*R+Ue*Z+tt*Ce,n}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var mo,Xh=pc;function pl(n,t,r){var o=t[0],h=t[1],g=t[2],y=t[3];return n[0]=r[0]*o+r[4]*h+r[8]*g+r[12]*y,n[1]=r[1]*o+r[5]*h+r[9]*g+r[13]*y,n[2]=r[2]*o+r[6]*h+r[10]*g+r[14]*y,n[3]=r[3]*o+r[7]*h+r[11]*g+r[15]*y,n}mo=new fc(4),fc!=Float32Array&&(mo[0]=0,mo[1]=0,mo[2]=0,mo[3]=0);class Yh extends s{constructor(t){super(t,$h)}createBucket(t){return new qh(t)}queryRadius(t){const r=t;return po("circle-radius",this,r)+po("circle-stroke-width",this,r)+du(this.paint.get("circle-translate"))}queryIntersectsFeature(t,r,o,h,g,y,x,S){const D=dc(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,x),R=this.paint.get("circle-radius").evaluate(r,o)+this.paint.get("circle-stroke-width").evaluate(r,o),P=this.paint.get("circle-pitch-alignment")==="map",B=P?D:(function(Z,Y){return Z.map((ie=>hf(ie,Y)))})(D,S),j=P?R*x:R;for(const Z of h)for(const Y of Z){const ie=P?Y:hf(Y,S);let he=j;const Ce=pl([],[Y.x,Y.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?he*=Ce[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(he*=y.cameraToCenterDistance/Ce[3]),Bm(B,ie,he))return!0}return!1}}function hf(n,t){const r=pl([],[n.x,n.y,0,1],t);return new X(r[0]/r[3],r[1]/r[3])}class df extends qh{}let mc;wt("HeatmapBucket",df,{omit:["layers"]});var pp={get paint(){return mc=mc||new m({"heatmap-radius":new Ht(Ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ht(Ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new zt(Ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lc(Ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new zt(Ne.paint_heatmap["heatmap-opacity"])})}};function Jr(n,{width:t,height:r},o,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==t*r*o)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${t*r*o}`)}else h=new Uint8Array(t*r*o);return n.width=t,n.height=r,n.data=h,n}function os(n,{width:t,height:r},o){if(t===n.width&&r===n.height)return;const h=Jr({},{width:t,height:r},o);qs(n,h,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,t),height:Math.min(n.height,r)},o),n.width=t,n.height=r,n.data=h.data}function qs(n,t,r,o,h,g){if(h.width===0||h.height===0)return t;if(h.width>n.width||h.height>n.height||r.x>n.width-h.width||r.y>n.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||o.x>t.width-h.width||o.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=n.data,x=t.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<h.height;S++){const D=((r.y+S)*n.width+r.x)*g,R=((o.y+S)*t.width+o.x)*g;for(let P=0;P<h.width*g;P++)x[R+P]=y[D+P]}return t}class fu{constructor(t,r){Jr(this,t,1,r)}resize(t){os(this,t,1)}clone(){return new fu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,o,h,g){qs(t,r,o,h,g,1)}}class qn{constructor(t,r){Jr(this,t,4,r)}resize(t){os(this,t,4)}replace(t,r){r?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new qn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,o,h,g){qs(t,r,o,h,g,4)}}function Hs(n){const t={},r=n.resolution||256,o=n.clips?n.clips.length:1,h=n.image||new qn({width:r,height:o});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const g=(y,x,S)=>{t[n.evaluationKey]=S;const D=n.expression.evaluate(t);h.data[y+x+0]=Math.floor(255*D.r/D.a),h.data[y+x+1]=Math.floor(255*D.g/D.a),h.data[y+x+2]=Math.floor(255*D.b/D.a),h.data[y+x+3]=Math.floor(255*D.a)};if(n.clips)for(let y=0,x=0;y<o;++y,x+=4*r)for(let S=0,D=0;S<r;S++,D+=4){const R=S/(r-1),{start:P,end:B}=n.clips[y];g(x,D,P*(1-R)+B*R)}else for(let y=0,x=0;y<r;y++,x+=4)g(0,x,y/(r-1));return h}wt("AlphaImage",fu),wt("RGBAImage",qn);const kn="big-fb";class Kh extends s{createBucket(t){return new df(t)}constructor(t){super(t,pp),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Hs({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(kn)&&this.heatmapFbos.delete(kn)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Wh;var ff={get paint(){return Wh=Wh||new m({"hillshade-illumination-direction":new zt(Ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new zt(Ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new zt(Ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new zt(Ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new zt(Ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new zt(Ne.paint_hillshade["hillshade-accent-color"])})}};class mp extends s{constructor(t){super(t,ff)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const gp=b([{name:"a_pos",components:2,type:"Int16"}],4),{members:gc}=gp;function Ku(n,t,r=2){const o=t&&t.length,h=o?t[0]*r:n.length;let g=pf(n,0,h,r,!0);const y=[];if(!g||g.next===g.prev)return y;let x,S,D;if(o&&(g=(function(R,P,B,j){const Z=[];for(let Y=0,ie=P.length;Y<ie;Y++){const he=pf(R,P[Y]*j,Y<ie-1?P[Y+1]*j:R.length,j,!1);he===he.next&&(he.steiner=!0),Z.push(Sr(he))}Z.sort(vp);for(let Y=0;Y<Z.length;Y++)B=Nm(Z[Y],B);return B})(n,t,g,r)),n.length>80*r){x=1/0,S=1/0;let R=-1/0,P=-1/0;for(let B=r;B<h;B+=r){const j=n[B],Z=n[B+1];j<x&&(x=j),Z<S&&(S=Z),j>R&&(R=j),Z>P&&(P=Z)}D=Math.max(R-x,P-S),D=D!==0?32767/D:0}return pu(g,y,r,x,S,D,0),y}function pf(n,t,r,o,h){let g;if(h===(function(y,x,S,D){let R=0;for(let P=x,B=S-D;P<S;P+=D)R+=(y[B]-y[P])*(y[P+1]+y[B+1]),B=P;return R})(n,t,r,o)>0)for(let y=t;y<r;y+=o)g=_f(y/o|0,n[y],n[y+1],g);else for(let y=r-o;y>=t;y-=o)g=_f(y/o|0,n[y],n[y+1],g);return g&&Wu(g,g.next)&&(vc(g),g=g.next),g}function ml(n,t){if(!n)return n;t||(t=n);let r,o=n;do if(r=!1,o.steiner||!Wu(o,o.next)&&mn(o.prev,o,o.next)!==0)o=o.next;else{if(vc(o),o=t=o.prev,o===o.next)break;r=!0}while(r||o!==t);return t}function pu(n,t,r,o,h,g,y){if(!n)return;!y&&g&&(function(S,D,R,P){let B=S;do B.z===0&&(B.z=Hn(B.x,B.y,D,R,P)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==S);B.prevZ.nextZ=null,B.prevZ=null,(function(j){let Z,Y=1;do{let ie,he=j;j=null;let Ce=null;for(Z=0;he;){Z++;let me=he,Ee=0;for(let tt=0;tt<Y&&(Ee++,me=me.nextZ,me);tt++);let Ue=Y;for(;Ee>0||Ue>0&&me;)Ee!==0&&(Ue===0||!me||he.z<=me.z)?(ie=he,he=he.nextZ,Ee--):(ie=me,me=me.nextZ,Ue--),Ce?Ce.nextZ=ie:j=ie,ie.prevZ=Ce,Ce=ie;he=me}Ce.nextZ=null,Y*=2}while(Z>1)})(B)})(n,o,h,g);let x=n;for(;n.prev!==n.next;){const S=n.prev,D=n.next;if(g?yp(n,o,h,g):Qh(n))t.push(S.i,n.i,D.i),vc(n),n=D.next,x=D.next;else if((n=D)===x){y?y===1?pu(n=mf(ml(n),t),t,r,o,h,g,2):y===2&&_p(n,t,r,o,h,g):pu(ml(n),t,r,o,h,g,1);break}}}function Qh(n){const t=n.prev,r=n,o=n.next;if(mn(t,r,o)>=0)return!1;const h=t.x,g=r.x,y=o.x,x=t.y,S=r.y,D=o.y,R=h<g?h<y?h:y:g<y?g:y,P=x<S?x<D?x:D:S<D?S:D,B=h>g?h>y?h:y:g>y?g:y,j=x>S?x>D?x:D:S>D?S:D;let Z=o.next;for(;Z!==t;){if(Z.x>=R&&Z.x<=B&&Z.y>=P&&Z.y<=j&&yc(h,x,g,S,y,D,Z.x,Z.y)&&mn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function yp(n,t,r,o){const h=n.prev,g=n,y=n.next;if(mn(h,g,y)>=0)return!1;const x=h.x,S=g.x,D=y.x,R=h.y,P=g.y,B=y.y,j=x<S?x<D?x:D:S<D?S:D,Z=R<P?R<B?R:B:P<B?P:B,Y=x>S?x>D?x:D:S>D?S:D,ie=R>P?R>B?R:B:P>B?P:B,he=Hn(j,Z,t,r,o),Ce=Hn(Y,ie,t,r,o);let me=n.prevZ,Ee=n.nextZ;for(;me&&me.z>=he&&Ee&&Ee.z<=Ce;){if(me.x>=j&&me.x<=Y&&me.y>=Z&&me.y<=ie&&me!==h&&me!==y&&yc(x,R,S,P,D,B,me.x,me.y)&&mn(me.prev,me,me.next)>=0||(me=me.prevZ,Ee.x>=j&&Ee.x<=Y&&Ee.y>=Z&&Ee.y<=ie&&Ee!==h&&Ee!==y&&yc(x,R,S,P,D,B,Ee.x,Ee.y)&&mn(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;me&&me.z>=he;){if(me.x>=j&&me.x<=Y&&me.y>=Z&&me.y<=ie&&me!==h&&me!==y&&yc(x,R,S,P,D,B,me.x,me.y)&&mn(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;Ee&&Ee.z<=Ce;){if(Ee.x>=j&&Ee.x<=Y&&Ee.y>=Z&&Ee.y<=ie&&Ee!==h&&Ee!==y&&yc(x,R,S,P,D,B,Ee.x,Ee.y)&&mn(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function mf(n,t){let r=n;do{const o=r.prev,h=r.next.next;!Wu(o,h)&&gf(o,r,r.next,h)&&gu(o,h)&&gu(h,o)&&(t.push(o.i,r.i,h.i),vc(r),vc(r.next),r=n=h),r=r.next}while(r!==n);return ml(r)}function _p(n,t,r,o,h,g){let y=n;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&bp(y,x)){let S=yf(y,x);return y=ml(y,y.next),S=ml(S,S.next),pu(y,t,r,o,h,g,0),void pu(S,t,r,o,h,g,0)}x=x.next}y=y.next}while(y!==n)}function vp(n,t){return n.x-t.x}function Nm(n,t){const r=(function(h,g){let y=g;const x=h.x,S=h.y;let D,R=-1/0;do{if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){const Y=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(Y<=x&&Y>R&&(R=Y,D=y.x<y.next.x?y:y.next,Y===x))return D}y=y.next}while(y!==g);if(!D)return null;const P=D,B=D.x,j=D.y;let Z=1/0;y=D;do{if(x>=y.x&&y.x>=B&&x!==y.x&&yc(S<j?x:R,S,B,j,S<j?R:x,S,y.x,y.y)){const Y=Math.abs(S-y.y)/(x-y.x);gu(y,h)&&(Y<Z||Y===Z&&(y.x>D.x||y.x===D.x&&xp(D,y)))&&(D=y,Z=Y)}y=y.next}while(y!==P);return D})(n,t);if(!r)return t;const o=yf(r,n);return ml(o,o.next),ml(r,r.next)}function xp(n,t){return mn(n.prev,n,t.prev)<0&&mn(t.next,n,n.next)<0}function Hn(n,t,r,o,h){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*h|0)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-o)*h|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Sr(n){let t=n,r=n;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==n);return r}function yc(n,t,r,o,h,g,y,x){return(h-y)*(t-x)>=(n-y)*(g-x)&&(n-y)*(o-x)>=(r-y)*(t-x)&&(r-y)*(g-x)>=(h-y)*(o-x)}function bp(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!(function(r,o){let h=r;do{if(h.i!==r.i&&h.next.i!==r.i&&h.i!==o.i&&h.next.i!==o.i&&gf(h,h.next,r,o))return!0;h=h.next}while(h!==r);return!1})(n,t)&&(gu(n,t)&&gu(t,n)&&(function(r,o){let h=r,g=!1;const y=(r.x+o.x)/2,x=(r.y+o.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next;while(h!==r);return g})(n,t)&&(mn(n.prev,n,t.prev)||mn(n,t.prev,t))||Wu(n,t)&&mn(n.prev,n,n.next)>0&&mn(t.prev,t,t.next)>0)}function mn(n,t,r){return(t.y-n.y)*(r.x-t.x)-(t.x-n.x)*(r.y-t.y)}function Wu(n,t){return n.x===t.x&&n.y===t.y}function gf(n,t,r,o){const h=mu(mn(n,t,r)),g=mu(mn(n,t,o)),y=mu(mn(r,o,n)),x=mu(mn(r,o,t));return h!==g&&y!==x||!(h!==0||!_c(n,r,t))||!(g!==0||!_c(n,o,t))||!(y!==0||!_c(r,n,o))||!(x!==0||!_c(r,t,o))}function _c(n,t,r){return t.x<=Math.max(n.x,r.x)&&t.x>=Math.min(n.x,r.x)&&t.y<=Math.max(n.y,r.y)&&t.y>=Math.min(n.y,r.y)}function mu(n){return n>0?1:n<0?-1:0}function gu(n,t){return mn(n.prev,n,n.next)<0?mn(n,t,n.next)>=0&&mn(n,n.prev,t)>=0:mn(n,t,n.prev)<0||mn(n,n.next,t)<0}function yf(n,t){const r=Qu(n.i,n.x,n.y),o=Qu(t.i,t.x,t.y),h=n.next,g=t.prev;return n.next=t,t.prev=n,r.next=h,h.prev=r,o.next=r,r.prev=o,g.next=o,o.prev=g,o}function _f(n,t,r,o){const h=Qu(n,t,r);return o?(h.next=o.next,h.prev=o,o.next.prev=h,o.next=h):(h.prev=h,h.next=h),h}function vc(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Qu(n,t,r){return{i:n,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Ju(n,t,r){const o=r.patternDependencies;let h=!1;for(const g of t){const y=g.paint.get(`${n}-pattern`);y.isConstant()||(h=!0);const x=y.constantOr(null);x&&(h=!0,o[x.to]=!0,o[x.from]=!0)}return h}function Jh(n,t,r,o,h){const g=h.patternDependencies;for(const y of t){const x=y.paint.get(`${n}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:o-1},r,{},h.availableImages),D=x.evaluate({zoom:o},r,{},h.availableImages),R=x.evaluate({zoom:o+1},r,{},h.availableImages);S=S&&S.name?S.name:S,D=D&&D.name?D.name:D,R=R&&R.name?R.name:R,g[S]=!0,g[D]=!0,g[R]=!0,r.patterns[y.id]={min:S,mid:D,max:R}}}return r}class eh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ba,this.indexArray=new In,this.indexArray2=new zn,this.programConfigurations=new hl(t.layers,t.zoom),this.segments=new ui,this.segments2=new ui,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,o){this.hasPattern=Ju("fill",this.layers,r);const h=this.layers[0].layout.get("fill-sort-key"),g=!h.isConstant(),y=[];for(const{feature:x,id:S,index:D,sourceLayerIndex:R}of t){const P=this.layers[0]._featureFilter.needGeometry,B=fl(x,P);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),B,o))continue;const j=g?h.evaluate(B,{},o,r.availableImages):void 0,Z={id:S,properties:x.properties,type:x.type,sourceLayerIndex:R,index:D,geometry:P?B.geometry:dl(x),patterns:{},sortKey:j};y.push(Z)}g&&y.sort(((x,S)=>x.sortKey-S.sortKey));for(const x of y){const{geometry:S,index:D,sourceLayerIndex:R}=x;if(this.hasPattern){const P=Jh("fill",this.layers,x,this.zoom,r);this.patternFeatures.push(P)}else this.addFeature(x,S,D,o,{});r.featureIndex.insert(t[D].feature,S,D,R,this.index)}}update(t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,o)}addFeatures(t,r,o){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,r,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,r,o,h,g){for(const y of Xc(r,500)){let x=0;for(const j of y)x+=j.length;const S=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),D=S.vertexLength,R=[],P=[];for(const j of y){if(j.length===0)continue;j!==y[0]&&P.push(R.length/2);const Z=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),Y=Z.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(Y+j.length-1,Y),R.push(j[0].x),R.push(j[0].y);for(let ie=1;ie<j.length;ie++)this.layoutVertexArray.emplaceBack(j[ie].x,j[ie].y),this.indexArray2.emplaceBack(Y+ie-1,Y+ie),R.push(j[ie].x),R.push(j[ie].y);Z.vertexLength+=j.length,Z.primitiveLength+=j.length}const B=Ku(R,P);for(let j=0;j<B.length;j+=3)this.indexArray.emplaceBack(D+B[j],D+B[j+1],D+B[j+2]);S.vertexLength+=x,S.primitiveLength+=B.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,g,h)}}let th,ed;wt("FillBucket",eh,{omit:["layers","patternFeatures"]});var wp={get paint(){return ed=ed||new m({"fill-antialias":new zt(Ne.paint_fill["fill-antialias"]),"fill-opacity":new Ht(Ne.paint_fill["fill-opacity"]),"fill-color":new Ht(Ne.paint_fill["fill-color"]),"fill-outline-color":new Ht(Ne.paint_fill["fill-outline-color"]),"fill-translate":new zt(Ne.paint_fill["fill-translate"]),"fill-translate-anchor":new zt(Ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new oc(Ne.paint_fill["fill-pattern"])})},get layout(){return th=th||new m({"fill-sort-key":new Ht(Ne.layout_fill["fill-sort-key"])})}};class vf extends s{constructor(t){super(t,wp)}recalculate(t,r){super.recalculate(t,r);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new eh(t)}queryRadius(){return du(this.paint.get("fill-translate"))}queryIntersectsFeature(t,r,o,h,g,y,x){return Hh(dc(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,x),h)}isTileClipped(){return!0}}const Sp=b([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),go=b([{name:"a_centroid",components:2,type:"Int16"}],4),{members:xf}=Sp;var gl={},Tp=H,Zs=xc;function xc(n,t,r,o,h){this.properties={},this.extent=r,this.type=0,this._pbf=n,this._geometry=-1,this._keys=o,this._values=h,n.readFields(td,this,t)}function td(n,t,r){n==1?t.id=r.readVarint():n==2?(function(o,h){for(var g=o.readVarint()+o.pos;o.pos<g;){var y=h._keys[o.readVarint()],x=h._values[o.readVarint()];h.properties[y]=x}})(r,t):n==3?t.type=r.readVarint():n==4&&(t._geometry=r.pos)}function ih(n){for(var t,r,o=0,h=0,g=n.length,y=g-1;h<g;y=h++)o+=((r=n[y]).x-(t=n[h]).x)*(t.y+r.y);return o}xc.types=["Unknown","Point","LineString","Polygon"],xc.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var t,r=n.readVarint()+n.pos,o=1,h=0,g=0,y=0,x=[];n.pos<r;){if(h<=0){var S=n.readVarint();o=7&S,h=S>>3}if(h--,o===1||o===2)g+=n.readSVarint(),y+=n.readSVarint(),o===1&&(t&&x.push(t),t=[]),t.push(new Tp(g,y));else{if(o!==7)throw new Error("unknown command "+o);t&&t.push(t[0].clone())}}return t&&x.push(t),x},xc.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var t=n.readVarint()+n.pos,r=1,o=0,h=0,g=0,y=1/0,x=-1/0,S=1/0,D=-1/0;n.pos<t;){if(o<=0){var R=n.readVarint();r=7&R,o=R>>3}if(o--,r===1||r===2)(h+=n.readSVarint())<y&&(y=h),h>x&&(x=h),(g+=n.readSVarint())<S&&(S=g),g>D&&(D=g);else if(r!==7)throw new Error("unknown command "+r)}return[y,S,x,D]},xc.prototype.toGeoJSON=function(n,t,r){var o,h,g=this.extent*Math.pow(2,r),y=this.extent*n,x=this.extent*t,S=this.loadGeometry(),D=xc.types[this.type];function R(j){for(var Z=0;Z<j.length;Z++){var Y=j[Z];j[Z]=[360*(Y.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+x)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(o=0;o<S.length;o++)P[o]=S[o][0];R(S=P);break;case 2:for(o=0;o<S.length;o++)R(S[o]);break;case 3:for(S=(function(j){var Z=j.length;if(Z<=1)return[j];for(var Y,ie,he=[],Ce=0;Ce<Z;Ce++){var me=ih(j[Ce]);me!==0&&(ie===void 0&&(ie=me<0),ie===me<0?(Y&&he.push(Y),Y=[j[Ce]]):Y.push(j[Ce]))}return Y&&he.push(Y),he})(S),o=0;o<S.length;o++)for(h=0;h<S[o].length;h++)R(S[o][h])}S.length===1?S=S[0]:D="Multi"+D;var B={type:"Feature",geometry:{type:D,coordinates:S},properties:this.properties};return"id"in this&&(B.id=this.id),B};var xn=Zs,Ep=Ap;function Ap(n,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(Cp,this,t),this.length=this._features.length}function Cp(n,t,r){n===15?t.version=r.readVarint():n===1?t.name=r.readString():n===5?t.extent=r.readVarint():n===2?t._features.push(r.pos):n===3?t._keys.push(r.readString()):n===4&&t._values.push((function(o){for(var h=null,g=o.readVarint()+o.pos;o.pos<g;){var y=o.readVarint()>>3;h=y===1?o.readString():y===2?o.readFloat():y===3?o.readDouble():y===4?o.readVarint64():y===5?o.readVarint():y===6?o.readSVarint():y===7?o.readBoolean():null}return h})(r))}Ap.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var t=this._pbf.readVarint()+this._pbf.pos;return new xn(this._pbf,t,this.extent,this._keys,this._values)};var nh=Ep;function yl(n,t,r){if(n===3){var o=new nh(r,r.readVarint()+r.pos);o.length&&(t[o.name]=o)}}gl.VectorTile=function(n,t){this.layers=n.readFields(yl,{},t)},gl.VectorTileFeature=Zs,gl.VectorTileLayer=Ep;const Mp=gl.VectorTileFeature.types,id=Math.pow(2,13);function yo(n,t,r,o,h,g,y,x){n.emplaceBack(t,r,2*Math.floor(o*id)+y,h*id*2,g*id*2,Math.round(x))}class ja{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ns,this.centroidVertexArray=new Kn,this.indexArray=new In,this.programConfigurations=new hl(t.layers,t.zoom),this.segments=new ui,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,o){this.features=[],this.hasPattern=Ju("fill-extrusion",this.layers,r);for(const{feature:h,id:g,index:y,sourceLayerIndex:x}of t){const S=this.layers[0]._featureFilter.needGeometry,D=fl(h,S);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),D,o))continue;const R={id:g,sourceLayerIndex:x,index:y,geometry:S?D.geometry:dl(h),properties:h.properties,type:h.type,patterns:{}};this.hasPattern?this.features.push(Jh("fill-extrusion",this.layers,R,this.zoom,r)):this.addFeature(R,R.geometry,y,o,{}),r.featureIndex.insert(h,R.geometry,y,x,this.index,!0)}}addFeatures(t,r,o){for(const h of this.features){const{geometry:g}=h;this.addFeature(h,g,h.index,r,o)}}update(t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xf),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,go.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,r,o,h,g){for(const y of Xc(r,500)){const x={x:0,y:0,vertexCount:0};let S=0;for(const Z of y)S+=Z.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Z of y){if(Z.length===0||bf(Z))continue;let Y=0;for(let ie=0;ie<Z.length;ie++){const he=Z[ie];if(ie>=1){const Ce=Z[ie-1];if(!zp(he,Ce)){D.vertexLength+4>ui.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const me=he.sub(Ce)._perp()._unit(),Ee=Ce.dist(he);Y+Ee>32768&&(Y=0),yo(this.layoutVertexArray,he.x,he.y,me.x,me.y,0,0,Y),yo(this.layoutVertexArray,he.x,he.y,me.x,me.y,0,1,Y),x.x+=2*he.x,x.y+=2*he.y,x.vertexCount+=2,Y+=Ee,yo(this.layoutVertexArray,Ce.x,Ce.y,me.x,me.y,0,0,Y),yo(this.layoutVertexArray,Ce.x,Ce.y,me.x,me.y,0,1,Y),x.x+=2*Ce.x,x.y+=2*Ce.y,x.vertexCount+=2;const Ue=D.vertexLength;this.indexArray.emplaceBack(Ue,Ue+2,Ue+1),this.indexArray.emplaceBack(Ue+1,Ue+2,Ue+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+S>ui.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),Mp[t.type]!=="Polygon")continue;const R=[],P=[],B=D.vertexLength;for(const Z of y)if(Z.length!==0){Z!==y[0]&&P.push(R.length/2);for(let Y=0;Y<Z.length;Y++){const ie=Z[Y];yo(this.layoutVertexArray,ie.x,ie.y,0,0,1,1,0),x.x+=ie.x,x.y+=ie.y,x.vertexCount+=1,R.push(ie.x),R.push(ie.y)}}const j=Ku(R,P);for(let Z=0;Z<j.length;Z+=3)this.indexArray.emplaceBack(B+j[Z],B+j[Z+2],B+j[Z+1]);D.primitiveLength+=j.length/3,D.vertexLength+=S;for(let Z=0;Z<x.vertexCount;Z++){const Y=Math.floor(x.x/x.vertexCount),ie=Math.floor(x.y/x.vertexCount);this.centroidVertexArray.emplaceBack(Y,ie)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,g,h)}}function zp(n,t){return n.x===t.x&&(n.x<0||n.x>vn)||n.y===t.y&&(n.y<0||n.y>vn)}function bf(n){return n.every((t=>t.x<0))||n.every((t=>t.x>vn))||n.every((t=>t.y<0))||n.every((t=>t.y>vn))}let wf;wt("FillExtrusionBucket",ja,{omit:["layers","features"]});var Sf={get paint(){return wf=wf||new m({"fill-extrusion-opacity":new zt(Ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ht(Ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new zt(Ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new zt(Ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new oc(Ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ht(Ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ht(Ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new zt(Ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Tf extends s{constructor(t){super(t,Sf)}createBucket(t){return new ja(t)}queryRadius(){return du(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,r,o,h,g,y,x,S){const D=dc(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,x),R=this.paint.get("fill-extrusion-height").evaluate(r,o),P=this.paint.get("fill-extrusion-base").evaluate(r,o),B=(function(Z,Y,ie,he){const Ce=[];for(const me of Z){const Ee=[me.x,me.y,0,1];pl(Ee,Ee,Y),Ce.push(new X(Ee[0]/Ee[3],Ee[1]/Ee[3]))}return Ce})(D,S),j=(function(Z,Y,ie,he){const Ce=[],me=[],Ee=he[8]*Y,Ue=he[9]*Y,tt=he[10]*Y,vt=he[11]*Y,Vt=he[8]*ie,yt=he[9]*ie,gt=he[10]*ie,It=he[11]*ie;for(const At of Z){const _t=[],He=[];for(const kt of At){const Dt=kt.x,Zt=kt.y,Ci=he[0]*Dt+he[4]*Zt+he[12],Oi=he[1]*Dt+he[5]*Zt+he[13],bn=he[2]*Dt+he[6]*Zt+he[14],aa=he[3]*Dt+he[7]*Zt+he[15],Zn=bn+tt,wn=aa+vt,Ar=Ci+Vt,Cr=Oi+yt,Nr=bn+gt,cn=aa+It,gn=new X((Ci+Ee)/wn,(Oi+Ue)/wn);gn.z=Zn/wn,_t.push(gn);const Mr=new X(Ar/cn,Cr/cn);Mr.z=Nr/cn,He.push(Mr)}Ce.push(_t),me.push(He)}return[Ce,me]})(h,P,R,S);return(function(Z,Y,ie){let he=1/0;Hh(ie,Y)&&(he=Ef(ie,Y[0]));for(let Ce=0;Ce<Y.length;Ce++){const me=Y[Ce],Ee=Z[Ce];for(let Ue=0;Ue<me.length-1;Ue++){const tt=me[Ue],vt=[tt,me[Ue+1],Ee[Ue+1],Ee[Ue],tt];af(ie,vt)&&(he=Math.min(he,Ef(ie,vt)))}}return he!==1/0&&he})(j[0],j[1],B)}}function _l(n,t){return n.x*t.x+n.y*t.y}function Ef(n,t){if(n.length===1){let r=0;const o=t[r++];let h;for(;!h||o.equals(h);)if(h=t[r++],!h)return 1/0;for(;r<t.length;r++){const g=t[r],y=n[0],x=h.sub(o),S=g.sub(o),D=y.sub(o),R=_l(x,x),P=_l(x,S),B=_l(S,S),j=_l(D,x),Z=_l(D,S),Y=R*B-P*P,ie=(B*j-P*Z)/Y,he=(R*Z-P*j)/Y,Ce=o.z*(1-ie-he)+h.z*ie+g.z*he;if(isFinite(Ce))return Ce}return 1/0}{let r=1/0;for(const o of t)r=Math.min(r,o.z);return r}}const _o=b([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Pn}=_o,Af=b([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Dp}=Af,rr=gl.VectorTileFeature.types,Fm=Math.cos(Math.PI/180*37.5),Cf=Math.pow(2,14)/.5;class nd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((r=>{this.gradients[r.id]={}})),this.layoutVertexArray=new ol,this.layoutVertexArray2=new Fs,this.indexArray=new In,this.programConfigurations=new hl(t.layers,t.zoom),this.segments=new ui,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,o){this.hasPattern=Ju("line",this.layers,r);const h=this.layers[0].layout.get("line-sort-key"),g=!h.isConstant(),y=[];for(const{feature:x,id:S,index:D,sourceLayerIndex:R}of t){const P=this.layers[0]._featureFilter.needGeometry,B=fl(x,P);if(!this.layers[0]._featureFilter.filter(new Zi(this.zoom),B,o))continue;const j=g?h.evaluate(B,{},o):void 0,Z={id:S,properties:x.properties,type:x.type,sourceLayerIndex:R,index:D,geometry:P?B.geometry:dl(x),patterns:{},sortKey:j};y.push(Z)}g&&y.sort(((x,S)=>x.sortKey-S.sortKey));for(const x of y){const{geometry:S,index:D,sourceLayerIndex:R}=x;if(this.hasPattern){const P=Jh("line",this.layers,x,this.zoom,r);this.patternFeatures.push(P)}else this.addFeature(x,S,D,o,{});r.featureIndex.insert(t[D].feature,S,D,R,this.index)}}update(t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,o)}addFeatures(t,r,o){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,r,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Dp)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Pn),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,r,o,h,g){const y=this.layers[0].layout,x=y.get("line-join").evaluate(t,{}),S=y.get("line-cap"),D=y.get("line-miter-limit"),R=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const P of r)this.addLine(P,t,x,S,D,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,g,h)}addLine(t,r,o,h,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<t.length-1;he++)this.totalDistance+=t[he].dist(t[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=rr[r.type]==="Polygon";let S=t.length;for(;S>=2&&t[S-1].equals(t[S-2]);)S--;let D=0;for(;D<S-1&&t[D].equals(t[D+1]);)D++;if(S<(x?3:2))return;o==="bevel"&&(g=1.05);const R=this.overscaling<=16?15*vn/(512*this.overscaling):0,P=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let B,j,Z,Y,ie;this.e1=this.e2=-1,x&&(B=t[S-2],ie=t[D].sub(B)._unit()._perp());for(let he=D;he<S;he++){if(Z=he===S-1?x?t[D+1]:void 0:t[he+1],Z&&t[he].equals(Z))continue;ie&&(Y=ie),B&&(j=B),B=t[he],ie=Z?Z.sub(B)._unit()._perp():Y,Y=Y||ie;let Ce=Y.add(ie);Ce.x===0&&Ce.y===0||Ce._unit();const me=Y.x*ie.x+Y.y*ie.y,Ee=Ce.x*ie.x+Ce.y*ie.y,Ue=Ee!==0?1/Ee:1/0,tt=2*Math.sqrt(2-2*Ee),vt=Ee<Fm&&j&&Z,Vt=Y.x*ie.y-Y.y*ie.x>0;if(vt&&he>D){const It=B.dist(j);if(It>2*R){const At=B.sub(B.sub(j)._mult(R/It)._round());this.updateDistance(j,At),this.addCurrentVertex(At,Y,0,0,P),j=At}}const yt=j&&Z;let gt=yt?o:x?"butt":h;if(yt&&gt==="round"&&(Ue<y?gt="miter":Ue<=2&&(gt="fakeround")),gt==="miter"&&Ue>g&&(gt="bevel"),gt==="bevel"&&(Ue>2&&(gt="flipbevel"),Ue<g&&(gt="miter")),j&&this.updateDistance(j,B),gt==="miter")Ce._mult(Ue),this.addCurrentVertex(B,Ce,0,0,P);else if(gt==="flipbevel"){if(Ue>100)Ce=ie.mult(-1);else{const It=Ue*Y.add(ie).mag()/Y.sub(ie).mag();Ce._perp()._mult(It*(Vt?-1:1))}this.addCurrentVertex(B,Ce,0,0,P),this.addCurrentVertex(B,Ce.mult(-1),0,0,P)}else if(gt==="bevel"||gt==="fakeround"){const It=-Math.sqrt(Ue*Ue-1),At=Vt?It:0,_t=Vt?0:It;if(j&&this.addCurrentVertex(B,Y,At,_t,P),gt==="fakeround"){const He=Math.round(180*tt/Math.PI/20);for(let kt=1;kt<He;kt++){let Dt=kt/He;if(Dt!==.5){const Ci=Dt-.5;Dt+=Dt*Ci*(Dt-1)*((1.0904+me*(me*(3.55645-1.43519*me)-3.2452))*Ci*Ci+(.848013+me*(.215638*me-1.06021)))}const Zt=ie.sub(Y)._mult(Dt)._add(Y)._unit()._mult(Vt?-1:1);this.addHalfVertex(B,Zt.x,Zt.y,!1,Vt,0,P)}}Z&&this.addCurrentVertex(B,ie,-At,-_t,P)}else if(gt==="butt")this.addCurrentVertex(B,Ce,0,0,P);else if(gt==="square"){const It=j?1:-1;this.addCurrentVertex(B,Ce,It,It,P)}else gt==="round"&&(j&&(this.addCurrentVertex(B,Y,0,0,P),this.addCurrentVertex(B,Y,1,1,P,!0)),Z&&(this.addCurrentVertex(B,ie,-1,-1,P,!0),this.addCurrentVertex(B,ie,0,0,P)));if(vt&&he<S-1){const It=B.dist(Z);if(It>2*R){const At=B.add(Z.sub(B)._mult(R/It)._round());this.updateDistance(B,At),this.addCurrentVertex(At,ie,0,0,P),B=At}}}}addCurrentVertex(t,r,o,h,g,y=!1){const x=r.y*h-r.x,S=-r.y-r.x*h;this.addHalfVertex(t,r.x+r.y*o,r.y-r.x*o,y,!1,o,g),this.addHalfVertex(t,x,S,y,!0,-h,g),this.distance>Cf/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,r,o,h,g,y))}addHalfVertex({x:t,y:r},o,h,g,y,x,S){const D=.5*(this.lineClips?this.scaledDistance*(Cf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(g?1:0),(r<<1)+(y?1:0),Math.round(63*o)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),S.primitiveLength++),y?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,r){this.distance+=t.dist(r),this.updateScaledDistance()}}let ln,$r;wt("LineBucket",nd,{omit:["layers","patternFeatures"]});var Gs={get paint(){return $r=$r||new m({"line-opacity":new Ht(Ne.paint_line["line-opacity"]),"line-color":new Ht(Ne.paint_line["line-color"]),"line-translate":new zt(Ne.paint_line["line-translate"]),"line-translate-anchor":new zt(Ne.paint_line["line-translate-anchor"]),"line-width":new Ht(Ne.paint_line["line-width"]),"line-gap-width":new Ht(Ne.paint_line["line-gap-width"]),"line-offset":new Ht(Ne.paint_line["line-offset"]),"line-blur":new Ht(Ne.paint_line["line-blur"]),"line-dasharray":new Oa(Ne.paint_line["line-dasharray"]),"line-pattern":new oc(Ne.paint_line["line-pattern"]),"line-gradient":new lc(Ne.paint_line["line-gradient"])})},get layout(){return ln=ln||new m({"line-cap":new zt(Ne.layout_line["line-cap"]),"line-join":new Ht(Ne.layout_line["line-join"]),"line-miter-limit":new zt(Ne.layout_line["line-miter-limit"]),"line-round-limit":new zt(Ne.layout_line["line-round-limit"]),"line-sort-key":new Ht(Ne.layout_line["line-sort-key"])})}};class Rp extends Ht{possiblyEvaluate(t,r){return r=new Zi(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(t,r)}evaluate(t,r,o,h){return r=it({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(t,r,o,h)}}let rh;class jm extends s{constructor(t){super(t,Gs),this.gradientVersion=0,rh||(rh=new Rp(Gs.paint.properties["line-width"].specification),rh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!(function(o){return o._styleExpression!==void 0})(r)&&r._styleExpression.expression instanceof Ss,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,r){super.recalculate(t,r),this.paint._values["line-floorwidth"]=rh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new nd(t)}queryRadius(t){const r=t,o=rd(po("line-width",this,r),po("line-gap-width",this,r)),h=po("line-offset",this,r);return o/2+Math.abs(h)+du(this.paint.get("line-translate"))}queryIntersectsFeature(t,r,o,h,g,y,x){const S=dc(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,x),D=x/2*rd(this.paint.get("line-width").evaluate(r,o),this.paint.get("line-gap-width").evaluate(r,o)),R=this.paint.get("line-offset").evaluate(r,o);return R&&(h=(function(P,B){const j=[];for(let Z=0;Z<P.length;Z++){const Y=P[Z],ie=[];for(let he=0;he<Y.length;he++){const Ce=Y[he-1],me=Y[he],Ee=Y[he+1],Ue=he===0?new X(0,0):me.sub(Ce)._unit()._perp(),tt=he===Y.length-1?new X(0,0):Ee.sub(me)._unit()._perp(),vt=Ue._add(tt)._unit(),Vt=vt.x*tt.x+vt.y*tt.y;Vt!==0&&vt._mult(1/Vt),ie.push(vt._mult(B)._add(me))}j.push(ie)}return j})(h,R*x)),(function(P,B,j){for(let Z=0;Z<B.length;Z++){const Y=B[Z];if(P.length>=3){for(let ie=0;ie<Y.length;ie++)if(hu(P,Y[ie]))return!0}if(hp(P,Y,j))return!0}return!1})(S,h,D)}isTileClipped(){return!0}}function rd(n,t){return t>0?t+2*n:n}const ga=b([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ls=b([{name:"a_projected_pos",components:3,type:"Float32"}],4);b([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ip=b([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);b([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ea=b([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kp=b([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function vl(n,t,r){return n.sections.forEach((o=>{o.text=(function(h,g,y){const x=g.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),Gr.applyArabicShaping&&(h=Gr.applyArabicShaping(h)),h})(o.text,t,r)})),n}b([{name:"triangle",components:3,type:"Uint16"}]),b([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),b([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),b([{type:"Float32",name:"offsetX"}]),b([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),b([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const cs={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Gi=24,ad=Li,sd=function(n,t,r,o,h){var g,y,x=8*h-o-1,S=(1<<x)-1,D=S>>1,R=-7,P=h-1,B=-1,j=n[t+P];for(P+=B,g=j&(1<<-R)-1,j>>=-R,R+=x;R>0;g=256*g+n[t+P],P+=B,R-=8);for(y=g&(1<<-R)-1,g>>=-R,R+=o;R>0;y=256*y+n[t+P],P+=B,R-=8);if(g===0)g=1-D;else{if(g===S)return y?NaN:1/0*(j?-1:1);y+=Math.pow(2,o),g-=D}return(j?-1:1)*y*Math.pow(2,g-o)},us=function(n,t,r,o,h,g){var y,x,S,D=8*g-h-1,R=(1<<D)-1,P=R>>1,B=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=0,Z=1,Y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(x=isNaN(t)?1:0,y=R):(y=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-y))<1&&(y--,S*=2),(t+=y+P>=1?B/S:B*Math.pow(2,1-P))*S>=2&&(y++,S/=2),y+P>=R?(x=0,y=R):y+P>=1?(x=(t*S-1)*Math.pow(2,h),y+=P):(x=t*Math.pow(2,P-1)*Math.pow(2,h),y=0));h>=8;n[r+j]=255&x,j+=Z,x/=256,h-=8);for(y=y<<h|x,D+=h;D>0;n[r+j]=255&y,j+=Z,y/=256,D-=8);n[r+j-Z]|=128*Y};function Li(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Li.Varint=0,Li.Fixed64=1,Li.Bytes=2,Li.Fixed32=5;var xl=4294967296,yu=1/xl,_u=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function ta(n){return n.type===Li.Bytes?n.readVarint()+n.pos:n.pos+1}function bc(n,t,r){return r?4294967296*t+(n>>>0):4294967296*(t>>>0)+(n>>>0)}function Mf(n,t,r){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(o);for(var h=r.pos-1;h>=n;h--)r.buf[h+o]=r.buf[h]}function ah(n,t){for(var r=0;r<n.length;r++)t.writeVarint(n[r])}function Pp(n,t){for(var r=0;r<n.length;r++)t.writeSVarint(n[r])}function od(n,t){for(var r=0;r<n.length;r++)t.writeFloat(n[r])}function Lp(n,t){for(var r=0;r<n.length;r++)t.writeDouble(n[r])}function Um(n,t){for(var r=0;r<n.length;r++)t.writeBoolean(n[r])}function Vm(n,t){for(var r=0;r<n.length;r++)t.writeFixed32(n[r])}function Vi(n,t){for(var r=0;r<n.length;r++)t.writeSFixed32(n[r])}function tn(n,t){for(var r=0;r<n.length;r++)t.writeFixed64(n[r])}function _i(n,t){for(var r=0;r<n.length;r++)t.writeSFixed64(n[r])}function vi(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+16777216*n[t+3]}function Ai(n,t,r){n[r]=t,n[r+1]=t>>>8,n[r+2]=t>>>16,n[r+3]=t>>>24}function ia(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+(n[t+3]<<24)}Li.prototype={destroy:function(){this.buf=null},readFields:function(n,t,r){for(r=r||this.length;this.pos<r;){var o=this.readVarint(),h=o>>3,g=this.pos;this.type=7&o,n(h,t,this),this.pos===g&&this.skip(o)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=vi(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=ia(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=vi(this.buf,this.pos)+vi(this.buf,this.pos+4)*xl;return this.pos+=8,n},readSFixed64:function(){var n=vi(this.buf,this.pos)+ia(this.buf,this.pos+4)*xl;return this.pos+=8,n},readFloat:function(){var n=sd(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=sd(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var t,r,o=this.buf;return t=127&(r=o[this.pos++]),r<128?t:(t|=(127&(r=o[this.pos++]))<<7,r<128?t:(t|=(127&(r=o[this.pos++]))<<14,r<128?t:(t|=(127&(r=o[this.pos++]))<<21,r<128?t:(function(h,g,y){var x,S,D=y.buf;if(x=(112&(S=D[y.pos++]))>>4,S<128||(x|=(127&(S=D[y.pos++]))<<3,S<128)||(x|=(127&(S=D[y.pos++]))<<10,S<128)||(x|=(127&(S=D[y.pos++]))<<17,S<128)||(x|=(127&(S=D[y.pos++]))<<24,S<128)||(x|=(1&(S=D[y.pos++]))<<31,S<128))return bc(h,x,g);throw new Error("Expected varint not more than 10 bytes")})(t|=(15&(r=o[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,t=this.pos;return this.pos=n,n-t>=12&&_u?(function(r,o,h){return _u.decode(r.subarray(o,h))})(this.buf,t,n):(function(r,o,h){for(var g="",y=o;y<h;){var x,S,D,R=r[y],P=null,B=R>239?4:R>223?3:R>191?2:1;if(y+B>h)break;B===1?R<128&&(P=R):B===2?(192&(x=r[y+1]))==128&&(P=(31&R)<<6|63&x)<=127&&(P=null):B===3?(S=r[y+2],(192&(x=r[y+1]))==128&&(192&S)==128&&((P=(15&R)<<12|(63&x)<<6|63&S)<=2047||P>=55296&&P<=57343)&&(P=null)):B===4&&(S=r[y+2],D=r[y+3],(192&(x=r[y+1]))==128&&(192&S)==128&&(192&D)==128&&((P=(15&R)<<18|(63&x)<<12|(63&S)<<6|63&D)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,B=1):P>65535&&(P-=65536,g+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),g+=String.fromCharCode(P),y+=B}return g})(this.buf,t,n)},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,n);return this.pos=n,t},readPackedVarint:function(n,t){if(this.type!==Li.Bytes)return n.push(this.readVarint(t));var r=ta(this);for(n=n||[];this.pos<r;)n.push(this.readVarint(t));return n},readPackedSVarint:function(n){if(this.type!==Li.Bytes)return n.push(this.readSVarint());var t=ta(this);for(n=n||[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Li.Bytes)return n.push(this.readBoolean());var t=ta(this);for(n=n||[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Li.Bytes)return n.push(this.readFloat());var t=ta(this);for(n=n||[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Li.Bytes)return n.push(this.readDouble());var t=ta(this);for(n=n||[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Li.Bytes)return n.push(this.readFixed32());var t=ta(this);for(n=n||[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Li.Bytes)return n.push(this.readSFixed32());var t=ta(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Li.Bytes)return n.push(this.readFixed64());var t=ta(this);for(n=n||[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Li.Bytes)return n.push(this.readSFixed64());var t=ta(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=7&n;if(t===Li.Varint)for(;this.buf[this.pos++]>127;);else if(t===Li.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Li.Fixed32)this.pos+=4;else{if(t!==Li.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var t=this.length||16;t<this.pos+n;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Ai(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Ai(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Ai(this.buf,-1&n,this.pos),Ai(this.buf,Math.floor(n*yu),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Ai(this.buf,-1&n,this.pos),Ai(this.buf,Math.floor(n*yu),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?(function(t,r){var o,h;if(t>=0?(o=t%4294967296|0,h=t/4294967296|0):(h=~(-t/4294967296),4294967295^(o=~(-t%4294967296))?o=o+1|0:(o=0,h=h+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),(function(g,y,x){x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,x.buf[x.pos]=127&(g>>>=7)})(o,0,r),(function(g,y){var x=(7&g)<<4;y.buf[y.pos++]|=x|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))})(h,r)})(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var t=this.pos;this.pos=(function(o,h,g){for(var y,x,S=0;S<h.length;S++){if((y=h.charCodeAt(S))>55295&&y<57344){if(!x){y>56319||S+1===h.length?(o[g++]=239,o[g++]=191,o[g++]=189):x=y;continue}if(y<56320){o[g++]=239,o[g++]=191,o[g++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(o[g++]=239,o[g++]=191,o[g++]=189,x=null);y<128?o[g++]=y:(y<2048?o[g++]=y>>6|192:(y<65536?o[g++]=y>>12|224:(o[g++]=y>>18|240,o[g++]=y>>12&63|128),o[g++]=y>>6&63|128),o[g++]=63&y|128)}return g})(this.buf,n,this.pos);var r=this.pos-t;r>=128&&Mf(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(n){this.realloc(4),us(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),us(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var t=n.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=n[r]},writeRawMessage:function(n,t){this.pos++;var r=this.pos;n(t,this);var o=this.pos-r;o>=128&&Mf(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeMessage:function(n,t,r){this.writeTag(n,Li.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(n,t){t.length&&this.writeMessage(n,ah,t)},writePackedSVarint:function(n,t){t.length&&this.writeMessage(n,Pp,t)},writePackedBoolean:function(n,t){t.length&&this.writeMessage(n,Um,t)},writePackedFloat:function(n,t){t.length&&this.writeMessage(n,od,t)},writePackedDouble:function(n,t){t.length&&this.writeMessage(n,Lp,t)},writePackedFixed32:function(n,t){t.length&&this.writeMessage(n,Vm,t)},writePackedSFixed32:function(n,t){t.length&&this.writeMessage(n,Vi,t)},writePackedFixed64:function(n,t){t.length&&this.writeMessage(n,tn,t)},writePackedSFixed64:function(n,t){t.length&&this.writeMessage(n,_i,t)},writeBytesField:function(n,t){this.writeTag(n,Li.Bytes),this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,Li.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,Li.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,Li.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,Li.Fixed64),this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,Li.Varint),this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,Li.Varint),this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,Li.Bytes),this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,Li.Fixed32),this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,Li.Fixed64),this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,!!t)}};var $s=G(ad);const bl=3;function zf(n,t,r){n===1&&r.readMessage(vo,t)}function vo(n,t,r){if(n===3){const{id:o,bitmap:h,width:g,height:y,left:x,top:S,advance:D}=r.readMessage(Dn,{});t.push({id:o,bitmap:new fu({width:g+2*bl,height:y+2*bl},h),metrics:{width:g,height:y,left:x,top:S,advance:D}})}}function Dn(n,t,r){n===1?t.id=r.readVarint():n===2?t.bitmap=r.readBytes():n===3?t.width=r.readVarint():n===4?t.height=r.readVarint():n===5?t.left=r.readSVarint():n===6?t.top=r.readSVarint():n===7&&(t.advance=r.readVarint())}const xo=bl;function wl(n){let t=0,r=0;for(const y of n)t+=y.w*y.h,r=Math.max(r,y.w);n.sort(((y,x)=>x.h-y.h));const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let h=0,g=0;for(const y of n)for(let x=o.length-1;x>=0;x--){const S=o[x];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===S.w&&y.h===S.h){const D=o.pop();x<o.length&&(o[x]=D)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(o.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:h,h:g,fill:t/(h*g)||0}}const Tr=1;class na{constructor(t,{pixelRatio:r,version:o,stretchX:h,stretchY:g,content:y,textFitWidth:x,textFitHeight:S}){this.paddedRect=t,this.pixelRatio=r,this.stretchX=h,this.stretchY=g,this.content=y,this.version=o,this.textFitWidth=x,this.textFitHeight=S}get tl(){return[this.paddedRect.x+Tr,this.paddedRect.y+Tr]}get br(){return[this.paddedRect.x+this.paddedRect.w-Tr,this.paddedRect.y+this.paddedRect.h-Tr]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Tr)/this.pixelRatio,(this.paddedRect.h-2*Tr)/this.pixelRatio]}}class wc{constructor(t,r){const o={},h={};this.haveRenderCallbacks=[];const g=[];this.addImages(t,o,g),this.addImages(r,h,g);const{w:y,h:x}=wl(g),S=new qn({width:y||1,height:x||1});for(const D in t){const R=t[D],P=o[D].paddedRect;qn.copy(R.data,S,{x:0,y:0},{x:P.x+Tr,y:P.y+Tr},R.data)}for(const D in r){const R=r[D],P=h[D].paddedRect,B=P.x+Tr,j=P.y+Tr,Z=R.data.width,Y=R.data.height;qn.copy(R.data,S,{x:0,y:0},{x:B,y:j},R.data),qn.copy(R.data,S,{x:0,y:Y-1},{x:B,y:j-1},{width:Z,height:1}),qn.copy(R.data,S,{x:0,y:0},{x:B,y:j+Y},{width:Z,height:1}),qn.copy(R.data,S,{x:Z-1,y:0},{x:B-1,y:j},{width:1,height:Y}),qn.copy(R.data,S,{x:0,y:0},{x:B+Z,y:j},{width:1,height:Y})}this.image=S,this.iconPositions=o,this.patternPositions=h}addImages(t,r,o){for(const h in t){const g=t[h],y={x:0,y:0,w:g.data.width+2*Tr,h:g.data.height+2*Tr};o.push(y),r[h]=new na(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const o in t.updatedImages)this.patchUpdatedImage(this.iconPositions[o],t.getImage(o),r),this.patchUpdatedImage(this.patternPositions[o],t.getImage(o),r)}patchUpdatedImage(t,r,o){if(!t||!r||t.version===r.version)return;t.version=r.version;const[h,g]=t.tl;o.update(r.data,void 0,{x:h,y:g})}}var Ua;wt("ImagePosition",na),wt("ImageAtlas",wc),M.ah=void 0,(Ua=M.ah||(M.ah={}))[Ua.none=0]="none",Ua[Ua.horizontal=1]="horizontal",Ua[Ua.vertical=2]="vertical",Ua[Ua.horizontalOnly=3]="horizontalOnly";const ar=-17;class Sc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,r){const o=new Sc;return o.scale=t||1,o.fontStack=r,o}static forImage(t){const r=new Sc;return r.imageName=t,r}}class Sl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,r){const o=new Sl;for(let h=0;h<t.sections.length;h++){const g=t.sections[h];g.image?o.addImageSection(g):o.addTextSection(g,r)}return o}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=(function(t){let r="";for(let o=0;o<t.length;o++){const h=t.charCodeAt(o+1)||null,g=t.charCodeAt(o-1)||null;r+=h&&Os(h)&&!cs[t[o+1]]||g&&Os(g)&&!cs[t[o-1]]||!cs[t[o]]?t[o]:cs[t[o]]}return r})(this.text)}trim(){let t=0;for(let o=0;o<this.text.length&&Ec[this.text.charCodeAt(o)];o++)t++;let r=this.text.length;for(let o=this.text.length-1;o>=0&&o>=t&&Ec[this.text.charCodeAt(o)];o--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)}substring(t,r){const o=new Sl;return o.text=this.text.substring(t,r),o.sectionIndex=this.sectionIndex.slice(t,r),o.sections=this.sections,o}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,r)=>Math.max(t,this.sections[r].scale)),0)}addTextSection(t,r){this.text+=t.text,this.sections.push(Sc.forText(t.scale,t.fontStack||r));const o=this.sections.length-1;for(let h=0;h<t.text.length;++h)this.sectionIndex.push(o)}addImageSection(t){const r=t.image?t.image.name:"";if(r.length===0)return void Ft("Can't add FormattedSection with an empty image.");const o=this.getNextImageSectionCharCode();o?(this.text+=String.fromCharCode(o),this.sections.push(Sc.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Ft("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Tc(n,t,r,o,h,g,y,x,S,D,R,P,B,j,Z){const Y=Sl.fromFeature(n,h);let ie;P===M.ah.vertical&&Y.verticalizePunctuation();const{processBidirectionalText:he,processStyledBidirectionalText:Ce}=Gr;if(he&&Y.sections.length===1){ie=[];const Ue=he(Y.toString(),ud(Y,D,g,t,o,j));for(const tt of Ue){const vt=new Sl;vt.text=tt,vt.sections=Y.sections;for(let Vt=0;Vt<tt.length;Vt++)vt.sectionIndex.push(0);ie.push(vt)}}else if(Ce){ie=[];const Ue=Ce(Y.text,Y.sectionIndex,ud(Y,D,g,t,o,j));for(const tt of Ue){const vt=new Sl;vt.text=tt[0],vt.sectionIndex=tt[1],vt.sections=Y.sections,ie.push(vt)}}else ie=(function(Ue,tt){const vt=[],Vt=Ue.text;let yt=0;for(const gt of tt)vt.push(Ue.substring(yt,gt)),yt=gt;return yt<Vt.length&&vt.push(Ue.substring(yt,Vt.length)),vt})(Y,ud(Y,D,g,t,o,j));const me=[],Ee={positionedLines:me,text:Y.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:P,iconsInText:!1,verticalizable:!1};return(function(Ue,tt,vt,Vt,yt,gt,It,At,_t,He,kt,Dt){let Zt=0,Ci=ar,Oi=0,bn=0;const aa=At==="right"?1:At==="left"?0:.5;let Zn=0;for(const cn of yt){cn.trim();const gn=cn.getMaxScale(),Mr=(gn-1)*Gi,or={positionedGlyphs:[],lineOffset:0};Ue.positionedLines[Zn]=or;const Fr=or.positionedGlyphs;let On=0;if(!cn.length()){Ci+=gt,++Zn;continue}for(let zr=0;zr<cn.length();zr++){const bi=cn.getSection(zr),Ri=cn.getSectionIndex(zr),Xi=cn.getCharCode(zr);let Xr=0,nn=null,Dc=null,fs=null,Va=Gi;const va=!(_t===M.ah.horizontal||!kt&&!nl(Xi)||kt&&(Ec[Xi]||(wn=Xi,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(wn)))));if(bi.imageName){const Ur=Vt[bi.imageName];if(!Ur)continue;fs=bi.imageName,Ue.iconsInText=Ue.iconsInText||!0,Dc=Ur.paddedRect;const Wn=Ur.displaySize;bi.scale=bi.scale*Gi/Dt,nn={width:Wn[0],height:Wn[1],left:Tr,top:-xo,advance:va?Wn[1]:Wn[0]},Xr=Mr+(Gi-Wn[1]*bi.scale),Va=nn.advance;const Eo=va?Wn[0]*bi.scale-Gi*gn:Wn[1]*bi.scale-Gi*gn;Eo>0&&Eo>On&&(On=Eo)}else{const Ur=vt[bi.fontStack],Wn=Ur&&Ur[Xi];if(Wn&&Wn.rect)Dc=Wn.rect,nn=Wn.metrics;else{const Eo=tt[bi.fontStack],Rc=Eo&&Eo[Xi];if(!Rc)continue;nn=Rc.metrics}Xr=(gn-bi.scale)*Gi}va?(Ue.verticalizable=!0,Fr.push({glyph:Xi,imageName:fs,x:Zt,y:Ci+Xr,vertical:va,scale:bi.scale,fontStack:bi.fontStack,sectionIndex:Ri,metrics:nn,rect:Dc}),Zt+=Va*bi.scale+He):(Fr.push({glyph:Xi,imageName:fs,x:Zt,y:Ci+Xr,vertical:va,scale:bi.scale,fontStack:bi.fontStack,sectionIndex:Ri,metrics:nn,rect:Dc}),Zt+=nn.advance*bi.scale+He)}Fr.length!==0&&(Oi=Math.max(Zt-He,Oi),Df(Fr,0,Fr.length-1,aa,On)),Zt=0;const jr=gt*gn+On;or.lineOffset=Math.max(On,Mr),Ci+=jr,bn=Math.max(jr,bn),++Zn}var wn;const Ar=Ci-ar,{horizontalAlign:Cr,verticalAlign:Nr}=Cc(It);(function(cn,gn,Mr,or,Fr,On,jr,zr,bi){const Ri=(gn-Mr)*Fr;let Xi=0;Xi=On!==jr?-zr*or-ar:(-or*bi+.5)*jr;for(const Xr of cn)for(const nn of Xr.positionedGlyphs)nn.x+=Ri,nn.y+=Xi})(Ue.positionedLines,aa,Cr,Nr,Oi,bn,gt,Ar,yt.length),Ue.top+=-Nr*Ar,Ue.bottom=Ue.top+Ar,Ue.left+=-Cr*Oi,Ue.right=Ue.left+Oi})(Ee,t,r,o,ie,y,x,S,P,D,B,Z),!(function(Ue){for(const tt of Ue)if(tt.positionedGlyphs.length!==0)return!1;return!0})(me)&&Ee}const Ec={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Tl={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Er={40:!0};function bo(n,t,r,o,h,g){if(t.imageName){const y=o[t.imageName];return y?y.displaySize[0]*t.scale*Gi/g+h:0}{const y=r[t.fontStack],x=y&&y[n];return x?x.metrics.advance*t.scale+h:0}}function Ac(n,t,r,o){const h=Math.pow(n-t,2);return o?n<t?h/2:2*h:h+Math.abs(r)*r}function vu(n,t,r){let o=0;return n===10&&(o-=1e4),r&&(o+=150),n!==40&&n!==65288||(o+=50),t!==41&&t!==65289||(o+=50),o}function ld(n,t,r,o,h,g){let y=null,x=Ac(t,r,h,g);for(const S of o){const D=Ac(t-S.x,r,h,g)+S.badness;D<=x&&(y=S,x=D)}return{index:n,x:t,priorBreak:y,badness:x}}function cd(n){return n?cd(n.priorBreak).concat(n.index):[]}function ud(n,t,r,o,h,g){if(!n)return[];const y=[],x=(function(P,B,j,Z,Y,ie){let he=0;for(let Ce=0;Ce<P.length();Ce++){const me=P.getSection(Ce);he+=bo(P.getCharCode(Ce),me,Z,Y,B,ie)}return he/Math.max(1,Math.ceil(he/j))})(n,t,r,o,h,g),S=n.text.indexOf("")>=0;let D=0;for(let P=0;P<n.length();P++){const B=n.getSection(P),j=n.getCharCode(P);if(Ec[j]||(D+=bo(j,B,o,h,t,g)),P<n.length()-1){const Z=!((R=j)<11904)&&(!!ri["CJK Compatibility Forms"](R)||!!ri["CJK Compatibility"](R)||!!ri["CJK Strokes"](R)||!!ri["CJK Symbols and Punctuation"](R)||!!ri["Enclosed CJK Letters and Months"](R)||!!ri["Halfwidth and Fullwidth Forms"](R)||!!ri["Ideographic Description Characters"](R)||!!ri["Vertical Forms"](R)||il.test(String.fromCodePoint(R)));(Tl[j]||Z||B.imageName||P!==n.length()-2&&Er[n.getCharCode(P+1)])&&y.push(ld(P+1,D,x,y,vu(j,n.getCharCode(P+1),Z&&S),!1))}}var R;return cd(ld(n.length(),D,x,y,0,!0))}function Cc(n){let t=.5,r=.5;switch(n){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Df(n,t,r,o,h){if(!o&&!h)return;const g=n[r],y=(n[r].x+g.metrics.advance*g.scale)*o;for(let x=t;x<=r;x++)n[x].x-=y,n[x].y+=h}function ya(n,t,r){const{horizontalAlign:o,verticalAlign:h}=Cc(r),g=t[0]-n.displaySize[0]*o,y=t[1]-n.displaySize[1]*h;return{image:n,top:y,bottom:y+n.displaySize[1],left:g,right:g+n.displaySize[0]}}function Rf(n){var t,r;let o=n.left,h=n.top,g=n.right-o,y=n.bottom-h;const x=(t=n.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",S=(r=n.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",D=(n.image.content[2]-n.image.content[0])/(n.image.content[3]-n.image.content[1]);if(S==="proportional"){if(x==="stretchOnly"&&g/y<D||x==="proportional"){const R=Math.ceil(y*D);o*=R/g,g=R}}else if(x==="proportional"&&S==="stretchOnly"&&D!==0&&g/y>D){const R=Math.ceil(g/D);h*=R/y,y=R}return{x1:o,y1:h,x2:o+g,y2:h+y}}function ra(n,t,r,o,h,g){const y=n.image;let x;if(y.content){const ie=y.content,he=y.pixelRatio||1;x=[ie[0]/he,ie[1]/he,y.displaySize[0]-ie[2]/he,y.displaySize[1]-ie[3]/he]}const S=t.left*g,D=t.right*g;let R,P,B,j;r==="width"||r==="both"?(j=h[0]+S-o[3],P=h[0]+D+o[1]):(j=h[0]+(S+D-y.displaySize[0])/2,P=j+y.displaySize[0]);const Z=t.top*g,Y=t.bottom*g;return r==="height"||r==="both"?(R=h[1]+Z-o[0],B=h[1]+Y+o[2]):(R=h[1]+(Z+Y-y.displaySize[1])/2,B=R+y.displaySize[1]),{image:y,top:R,right:P,bottom:B,left:j,collisionPadding:x}}const xu=255,hs=128,El=xu*hs;function wo(n,t){const{expression:r}=t;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new Zi(n+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:o,interpolationType:h}=r;let g=0;for(;g<o.length&&o[g]<=n;)g++;g=Math.max(0,g-1);let y=g;for(;y<o.length&&o[y]<n+1;)y++;y=Math.min(o.length-1,y);const x=o[g],S=o[y];return r.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:S,minSize:r.evaluate(new Zi(x)),maxSize:r.evaluate(new Zi(S)),interpolationType:h}}}function bu(n,t,r){let o="never";const h=n.get(t);return h?o=h:n.get(r)&&(o="always"),o}const If=gl.VectorTileFeature.types,wu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sh(n,t,r,o,h,g,y,x,S,D,R,P,B){const j=x?Math.min(El,Math.round(x[0])):0,Z=x?Math.min(El,Math.round(x[1])):0;n.emplaceBack(t,r,Math.round(32*o),Math.round(32*h),g,y,(j<<1)+(S?1:0),Z,16*D,16*R,256*P,256*B)}function hd(n,t,r){n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r)}function Op(n){for(const t of n.sections)if(Jd(t.text))return!0;return!1}class oh{constructor(t){this.layoutVertexArray=new on,this.indexArray=new In,this.programConfigurations=t,this.segments=new ui,this.dynamicLayoutVertexArray=new cc,this.opacityVertexArray=new nr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Di}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,r,o,h){this.isEmpty()||(o&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ga.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,ls.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,wu,!0),this.opacityVertexBuffer.itemSize=1),(o||h)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wt("SymbolBuffers",oh);class lh{constructor(t,r,o){this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new o,this.segments=new ui,this.collisionVertexArray=new Na}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ip.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}wt("CollisionBuffers",lh);class Su{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((y=>y.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uf([]),this.placementViewportMatrix=uf([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wo(this.zoom,r["text-size"]),this.iconSizeData=wo(this.zoom,r["icon-size"]);const o=this.layers[0].layout,h=o.get("symbol-sort-key"),g=o.get("symbol-z-order");this.canOverlap=bu(o,"text-overlap","text-allow-overlap")!=="never"||bu(o,"icon-overlap","icon-allow-overlap")!=="never"||o.get("text-ignore-placement")||o.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!h.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,o.get("symbol-placement")==="point"&&(this.writingModes=o.get("text-writing-mode").map((y=>M.ah[y]))),this.stateDependentLayerIds=this.layers.filter((y=>y.isStateDependent())).map((y=>y.id)),this.sourceID=t.sourceID}createArrays(){this.text=new oh(new hl(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new oh(new hl(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Pi,this.lineVertexArray=new _n,this.symbolInstances=new si,this.textAnchorOffsets=new ti}calculateGlyphDependencies(t,r,o,h,g){for(let y=0;y<t.length;y++)if(r[t.charCodeAt(y)]=!0,(o||h)&&g){const x=cs[t.charAt(y)];x&&(r[x.charCodeAt(0)]=!0)}}populate(t,r,o){const h=this.layers[0],g=h.layout,y=g.get("text-font"),x=g.get("text-field"),S=g.get("icon-image"),D=(x.value.kind!=="constant"||x.value.value instanceof Qn&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),R=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,P=g.get("symbol-sort-key");if(this.features=[],!D&&!R)return;const B=r.iconDependencies,j=r.glyphDependencies,Z=r.availableImages,Y=new Zi(this.zoom);for(const{feature:ie,id:he,index:Ce,sourceLayerIndex:me}of t){const Ee=h._featureFilter.needGeometry,Ue=fl(ie,Ee);if(!h._featureFilter.filter(Y,Ue,o))continue;let tt,vt;if(Ee||(Ue.geometry=dl(ie)),D){const yt=h.getValueAndResolveTokens("text-field",Ue,o,Z),gt=Qn.factory(yt),It=this.hasRTLText=this.hasRTLText||Op(gt);(!It||Gr.getRTLTextPluginStatus()==="unavailable"||It&&Gr.isParsed())&&(tt=vl(gt,h,Ue))}if(R){const yt=h.getValueAndResolveTokens("icon-image",Ue,o,Z);vt=yt instanceof Nn?yt:Nn.fromString(yt)}if(!tt&&!vt)continue;const Vt=this.sortFeaturesByKey?P.evaluate(Ue,{},o):void 0;if(this.features.push({id:he,text:tt,icon:vt,index:Ce,sourceLayerIndex:me,geometry:Ue.geometry,properties:ie.properties,type:If[ie.type],sortKey:Vt}),vt&&(B[vt.name]=!0),tt){const yt=y.evaluate(Ue,{},o).join(","),gt=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(M.ah.vertical)>=0;for(const It of tt.sections)if(It.image)B[It.image.name]=!0;else{const At=fa(tt.toString()),_t=It.fontStack||yt,He=j[_t]=j[_t]||{};this.calculateGlyphDependencies(It.text,He,gt,this.allowVerticalPlacement,At)}}}g.get("symbol-placement")==="line"&&(this.features=(function(ie){const he={},Ce={},me=[];let Ee=0;function Ue(yt){me.push(ie[yt]),Ee++}function tt(yt,gt,It){const At=Ce[yt];return delete Ce[yt],Ce[gt]=At,me[At].geometry[0].pop(),me[At].geometry[0]=me[At].geometry[0].concat(It[0]),At}function vt(yt,gt,It){const At=he[gt];return delete he[gt],he[yt]=At,me[At].geometry[0].shift(),me[At].geometry[0]=It[0].concat(me[At].geometry[0]),At}function Vt(yt,gt,It){const At=It?gt[0][gt[0].length-1]:gt[0][0];return`${yt}:${At.x}:${At.y}`}for(let yt=0;yt<ie.length;yt++){const gt=ie[yt],It=gt.geometry,At=gt.text?gt.text.toString():null;if(!At){Ue(yt);continue}const _t=Vt(At,It),He=Vt(At,It,!0);if(_t in Ce&&He in he&&Ce[_t]!==he[He]){const kt=vt(_t,He,It),Dt=tt(_t,He,me[kt].geometry);delete he[_t],delete Ce[He],Ce[Vt(At,me[Dt].geometry,!0)]=Dt,me[kt].geometry=null}else _t in Ce?tt(_t,He,It):He in he?vt(_t,He,It):(Ue(yt),he[_t]=Ee-1,Ce[He]=Ee-1)}return me.filter((yt=>yt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ie,he)=>ie.sortKey-he.sortKey))}update(t,r,o){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,r,this.layers,o),this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,o))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,r){const o=this.lineVertexArray.length;if(t.segment!==void 0){let h=t.dist(r[t.segment+1]),g=t.dist(r[t.segment]);const y={};for(let x=t.segment+1;x<r.length;x++)y[x]={x:r[x].x,y:r[x].y,tileUnitDistanceFromAnchor:h},x<r.length-1&&(h+=r[x+1].dist(r[x]));for(let x=t.segment||0;x>=0;x--)y[x]={x:r[x].x,y:r[x].y,tileUnitDistanceFromAnchor:g},x>0&&(g+=r[x-1].dist(r[x]));for(let x=0;x<r.length;x++){const S=y[x];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}}addSymbols(t,r,o,h,g,y,x,S,D,R,P,B){const j=t.indexArray,Z=t.layoutVertexArray,Y=t.segments.prepareSegment(4*r.length,Z,j,this.canOverlap?y.sortKey:void 0),ie=this.glyphOffsetArray.length,he=Y.vertexLength,Ce=this.allowVerticalPlacement&&x===M.ah.vertical?Math.PI/2:0,me=y.text&&y.text.sections;for(let Ee=0;Ee<r.length;Ee++){const{tl:Ue,tr:tt,bl:vt,br:Vt,tex:yt,pixelOffsetTL:gt,pixelOffsetBR:It,minFontScaleX:At,minFontScaleY:_t,glyphOffset:He,isSDF:kt,sectionIndex:Dt}=r[Ee],Zt=Y.vertexLength,Ci=He[1];sh(Z,S.x,S.y,Ue.x,Ci+Ue.y,yt.x,yt.y,o,kt,gt.x,gt.y,At,_t),sh(Z,S.x,S.y,tt.x,Ci+tt.y,yt.x+yt.w,yt.y,o,kt,It.x,gt.y,At,_t),sh(Z,S.x,S.y,vt.x,Ci+vt.y,yt.x,yt.y+yt.h,o,kt,gt.x,It.y,At,_t),sh(Z,S.x,S.y,Vt.x,Ci+Vt.y,yt.x+yt.w,yt.y+yt.h,o,kt,It.x,It.y,At,_t),hd(t.dynamicLayoutVertexArray,S,Ce),j.emplaceBack(Zt,Zt+1,Zt+2),j.emplaceBack(Zt+1,Zt+2,Zt+3),Y.vertexLength+=4,Y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(He[0]),Ee!==r.length-1&&Dt===r[Ee+1].sectionIndex||t.programConfigurations.populatePaintArrays(Z.length,y,y.index,{},B,me&&me[Dt])}t.placedSymbolArray.emplaceBack(S.x,S.y,ie,this.glyphOffsetArray.length-ie,he,D,R,S.segment,o?o[0]:0,o?o[1]:0,h[0],h[1],x,0,!1,0,P)}_addCollisionDebugVertex(t,r,o,h,g,y){return r.emplaceBack(0,0),t.emplaceBack(o.x,o.y,h,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(t,r,o,h,g,y,x){const S=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),D=S.vertexLength,R=g.layoutVertexArray,P=g.collisionVertexArray,B=x.anchorX,j=x.anchorY;this._addCollisionDebugVertex(R,P,y,B,j,new X(t,r)),this._addCollisionDebugVertex(R,P,y,B,j,new X(o,r)),this._addCollisionDebugVertex(R,P,y,B,j,new X(o,h)),this._addCollisionDebugVertex(R,P,y,B,j,new X(t,h)),S.vertexLength+=4;const Z=g.indexArray;Z.emplaceBack(D,D+1),Z.emplaceBack(D+1,D+2),Z.emplaceBack(D+2,D+3),Z.emplaceBack(D+3,D),S.primitiveLength+=4}addDebugCollisionBoxes(t,r,o,h){for(let g=t;g<r;g++){const y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,o)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lh(xr,ea.members,zn),this.iconCollisionBox=new lh(xr,ea.members,zn);for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(t,r,o,h,g,y,x,S,D){const R={};for(let P=r;P<o;P++){const B=t.get(P);R.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},R.textFeatureIndex=B.featureIndex;break}for(let P=h;P<g;P++){const B=t.get(P);R.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},R.verticalTextFeatureIndex=B.featureIndex;break}for(let P=y;P<x;P++){const B=t.get(P);R.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},R.iconFeatureIndex=B.featureIndex;break}for(let P=S;P<D;P++){const B=t.get(P);R.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},R.verticalIconFeatureIndex=B.featureIndex;break}return R}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,o.textBoxStartIndex,o.textBoxEndIndex,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,r){const o=t.placedSymbolArray.get(r),h=o.vertexStartIndex+4*o.numGlyphs;for(let g=o.vertexStartIndex;g<h;g+=4)t.indexArray.emplaceBack(g,g+1,g+2),t.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(t),o=Math.cos(t),h=[],g=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);const S=this.symbolInstances.get(x);h.push(0|Math.round(r*S.anchorX+o*S.anchorY)),g.push(S.featureIndex)}return y.sort(((x,S)=>h[x]-h[S]||g[S]-g[x])),y}addToSortKeyRanges(t,r){const o=this.sortKeyRanges[this.sortKeyRanges.length-1];o&&o.sortKey===r?o.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const o=this.symbolInstances.get(r);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(((h,g,y)=>{h>=0&&y.indexOf(h)===g&&this.addIndicesForPlacedSymbol(this.text,h)})),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Bp,Np;wt("SymbolBucket",Su,{omit:["layers","collisionBoxArray","features","compareText"]}),Su.MAX_GLYPHS=65535,Su.addDynamicAttributes=hd;var dd={get paint(){return Np=Np||new m({"icon-opacity":new Ht(Ne.paint_symbol["icon-opacity"]),"icon-color":new Ht(Ne.paint_symbol["icon-color"]),"icon-halo-color":new Ht(Ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ht(Ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ht(Ne.paint_symbol["icon-halo-blur"]),"icon-translate":new zt(Ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new zt(Ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ht(Ne.paint_symbol["text-opacity"]),"text-color":new Ht(Ne.paint_symbol["text-color"],{runtimeType:$n,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new Ht(Ne.paint_symbol["text-halo-color"]),"text-halo-width":new Ht(Ne.paint_symbol["text-halo-width"]),"text-halo-blur":new Ht(Ne.paint_symbol["text-halo-blur"]),"text-translate":new zt(Ne.paint_symbol["text-translate"]),"text-translate-anchor":new zt(Ne.paint_symbol["text-translate-anchor"])})},get layout(){return Bp=Bp||new m({"symbol-placement":new zt(Ne.layout_symbol["symbol-placement"]),"symbol-spacing":new zt(Ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new zt(Ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ht(Ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new zt(Ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new zt(Ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new zt(Ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new zt(Ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new zt(Ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new zt(Ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ht(Ne.layout_symbol["icon-size"]),"icon-text-fit":new zt(Ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new zt(Ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ht(Ne.layout_symbol["icon-image"]),"icon-rotate":new Ht(Ne.layout_symbol["icon-rotate"]),"icon-padding":new Ht(Ne.layout_symbol["icon-padding"]),"icon-keep-upright":new zt(Ne.layout_symbol["icon-keep-upright"]),"icon-offset":new Ht(Ne.layout_symbol["icon-offset"]),"icon-anchor":new Ht(Ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new zt(Ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new zt(Ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new zt(Ne.layout_symbol["text-rotation-alignment"]),"text-field":new Ht(Ne.layout_symbol["text-field"]),"text-font":new Ht(Ne.layout_symbol["text-font"]),"text-size":new Ht(Ne.layout_symbol["text-size"]),"text-max-width":new Ht(Ne.layout_symbol["text-max-width"]),"text-line-height":new zt(Ne.layout_symbol["text-line-height"]),"text-letter-spacing":new Ht(Ne.layout_symbol["text-letter-spacing"]),"text-justify":new Ht(Ne.layout_symbol["text-justify"]),"text-radial-offset":new Ht(Ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new zt(Ne.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ht(Ne.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ht(Ne.layout_symbol["text-anchor"]),"text-max-angle":new zt(Ne.layout_symbol["text-max-angle"]),"text-writing-mode":new zt(Ne.layout_symbol["text-writing-mode"]),"text-rotate":new Ht(Ne.layout_symbol["text-rotate"]),"text-padding":new zt(Ne.layout_symbol["text-padding"]),"text-keep-upright":new zt(Ne.layout_symbol["text-keep-upright"]),"text-transform":new Ht(Ne.layout_symbol["text-transform"]),"text-offset":new Ht(Ne.layout_symbol["text-offset"]),"text-allow-overlap":new zt(Ne.layout_symbol["text-allow-overlap"]),"text-overlap":new zt(Ne.layout_symbol["text-overlap"]),"text-ignore-placement":new zt(Ne.layout_symbol["text-ignore-placement"]),"text-optional":new zt(Ne.layout_symbol["text-optional"])})}};class kf{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:vs,this.defaultValue=t}evaluate(t){if(t.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection))return r.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wt("FormatSectionOverride",kf,{omit:["defaultValue"]});class So extends s{constructor(t){super(t,dd)}recalculate(t,r){if(super.recalculate(t,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const o=this.layout.get("text-writing-mode");if(o){const h=[];for(const g of o)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,r,o,h){const g=this.layout.get(t).evaluate(r,{},o,h),y=this._unevaluatedLayout._values[t];return y.isDataDriven()||Da(y.value)||!g?g:(function(x,S){return S.replace(/{([^{}]+)}/g,((D,R)=>x&&R in x?String(x[R]):""))})(r.properties,g)}createBucket(t){return new Su(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of dd.paint.overridableProperties){if(!So.hasPaintOverride(this.layout,t))continue;const r=this.paint.get(t),o=new kf(r),h=new Jl(o,r.property.specification);let g=null;g=r.value.kind==="constant"||r.value.kind==="source"?new Ds("source",h):new io("composite",h,r.value.zoomStops),this.paint._values[t]=new vr(r.property,g,r.parameters)}}_handleOverridablePaintPropertyUpdate(t,r,o){return!(!this.layout||r.isDataDriven()||o.isDataDriven())&&So.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,r){const o=t.get("text-field"),h=dd.paint.properties[r];let g=!1;const y=x=>{for(const S of x)if(h.overrides&&h.overrides.hasOverride(S))return void(g=!0)};if(o.value.kind==="constant"&&o.value.value instanceof Qn)y(o.value.value.sections);else if(o.value.kind==="source"){const x=D=>{g||(D instanceof dn&&Cn(D.value)===Ea?y(D.value.sections):D instanceof Xn?y(D.sections):D.eachChild(x))},S=o.value;S._styleExpression&&x(S._styleExpression.expression)}return g}}let ch;var Fp={get paint(){return ch=ch||new m({"background-color":new zt(Ne.paint_background["background-color"]),"background-pattern":new Oa(Ne.paint_background["background-pattern"]),"background-opacity":new zt(Ne.paint_background["background-opacity"])})}};class jp extends s{constructor(t){super(t,Fp)}}let Pf;var Up={get paint(){return Pf=Pf||new m({"raster-opacity":new zt(Ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new zt(Ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new zt(Ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new zt(Ne.paint_raster["raster-brightness-max"]),"raster-saturation":new zt(Ne.paint_raster["raster-saturation"]),"raster-contrast":new zt(Ne.paint_raster["raster-contrast"]),"raster-resampling":new zt(Ne.paint_raster["raster-resampling"]),"raster-fade-duration":new zt(Ne.paint_raster["raster-fade-duration"])})}};class Vp extends s{constructor(t){super(t,Up)}}class qp extends s{constructor(t){super(t,{}),this.onAdd=r=>{this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},this.onRemove=r=>{this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class fd{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const pd=63710088e-1;class To{constructor(t,r){if(isNaN(t)||isNaN(r))throw new Error(`Invalid LngLat object: (${t}, ${r})`);if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new To(mt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const r=Math.PI/180,o=this.lat*r,h=t.lat*r,g=Math.sin(o)*Math.sin(h)+Math.cos(o)*Math.cos(h)*Math.cos((t.lng-this.lng)*r);return pd*Math.acos(Math.min(g,1))}static convert(t){if(t instanceof To)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new To(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new To(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const $i=2*Math.PI*pd;function md(n){return $i*Math.cos(n*Math.PI/180)}function Hp(n){return(180+n)/360}function Lf(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Zp(n,t){return n/md(t)}function Of(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}class uh{constructor(t,r,o=0){this.x=+t,this.y=+r,this.z=+o}static fromLngLat(t,r=0){const o=To.convert(t);return new uh(Hp(o.lng),Lf(o.lat),Zp(r,o.lat))}toLngLat(){return new To(360*this.x-180,Of(this.y))}toAltitude(){return this.z*md(Of(this.y))}meterInMercatorCoordinateUnits(){return 1/$i*(t=Of(this.y),1/Math.cos(t*Math.PI/180));var t}}function hh(n,t,r){var o=2*Math.PI*6378137/256/Math.pow(2,r);return[n*o-2*Math.PI*6378137/2,t*o-2*Math.PI*6378137/2]}class Al{constructor(t,r,o){if(!(function(h,g,y){return!(h<0||h>25||y<0||y>=Math.pow(2,h)||g<0||g>=Math.pow(2,h))})(t,r,o))throw new Error(`x=${r}, y=${o}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=r,this.y=o,this.key=Mc(0,t,t,r,o)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,r,o){const h=(y=this.y,x=this.z,S=hh(256*(g=this.x),256*(y=Math.pow(2,x)-y-1),x),D=hh(256*(g+1),256*(y+1),x),S[0]+","+S[1]+","+D[0]+","+D[1]);var g,y,x,S,D;const R=(function(P,B,j){let Z,Y="";for(let ie=P;ie>0;ie--)Z=1<<ie-1,Y+=(B&Z?1:0)+(j&Z?2:0);return Y})(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,h)}isChildOf(t){const r=this.z-t.z;return r>0&&t.x===this.x>>r&&t.y===this.y>>r}getTilePoint(t){const r=Math.pow(2,this.z);return new X((t.x*r-this.x)*vn,(t.y*r-this.y)*vn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class gd{constructor(t,r){this.wrap=t,this.canonical=r,this.key=Mc(t,r.z,r.z,r.x,r.y)}}class Br{constructor(t,r,o,h,g){if(t<o)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${o}`);this.overscaledZ=t,this.wrap=r,this.canonical=new Al(o,+h,+g),this.key=Mc(r,t,o,h,g)}clone(){return new Br(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-t;return t>this.canonical.z?new Br(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Br(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(t,r){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-t;return t>this.canonical.z?Mc(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y):Mc(this.wrap*+r,t,t,this.canonical.x>>o,this.canonical.y>>o)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const r=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r}children(t){if(this.overscaledZ>=t)return[new Br(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,o=2*this.canonical.x,h=2*this.canonical.y;return[new Br(r,this.wrap,r,o,h),new Br(r,this.wrap,r,o+1,h),new Br(r,this.wrap,r,o,h+1),new Br(r,this.wrap,r,o+1,h+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Br(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Br(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new gd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new uh(t.x-this.wrap,t.y))}}function Mc(n,t,r,o,h){(n*=2)<0&&(n=-1*n-1);const g=1<<r;return(g*g*n+g*h+o).toString(36)+r.toString(36)+t.toString(36)}wt("CanonicalTileID",Al),wt("OverscaledTileID",Br,{omit:["posMatrix"]});class Cl{constructor(t,r,o,h=1,g=1,y=1,x=0){if(this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(o&&!["mapbox","terrarium","custom"].includes(o))return void Ft(`"${o}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const S=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),o){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=h,this.greenFactor=g,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<S;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(S,D)]=this.data[this._idx(S-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,S)]=this.data[this._idx(D,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<S;D++)for(let R=0;R<S;R++){const P=this.get(D,R);P>this.max&&(this.max=P),P<this.min&&(this.min=P)}}get(t,r){const o=new Uint8Array(this.data.buffer),h=4*this._idx(t,r);return this.unpack(o[h],o[h+1],o[h+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(t+1)}unpack(t,r,o){return t*this.redFactor+r*this.greenFactor+o*this.blueFactor-this.baseShift}getPixels(){return new qn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,r,o){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let h=r*this.dim,g=r*this.dim+this.dim,y=o*this.dim,x=o*this.dim+this.dim;switch(r){case-1:h=g-1;break;case 1:g=h+1}switch(o){case-1:y=x-1;break;case 1:x=y+1}const S=-r*this.dim,D=-o*this.dim;for(let R=y;R<x;R++)for(let P=h;P<g;P++)this.data[this._idx(P,R)]=t.data[this._idx(P+S,R+D)]}}wt("DEMData",Cl);class ds{constructor(t){this._stringToNumber={},this._numberToString=[];for(let r=0;r<t.length;r++){const o=t[r];this._stringToNumber[o]=r,this._numberToString[r]=o}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Tu{constructor(t,r,o,h,g){this.type="Feature",this._vectorTileFeature=t,t._z=r,t._x=o,t._y=h,this.properties=t.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(t[r]=this[r]);return t}}class Gp{constructor(t,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ks(vn,16,0),this.grid3D=new ks(vn,16,0),this.featureIndexArray=new Yn,this.promoteId=r}insert(t,r,o,h,g,y){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,h,g);const S=y?this.grid3D:this.grid;for(let D=0;D<r.length;D++){const R=r[D],P=[1/0,1/0,-1/0,-1/0];for(let B=0;B<R.length;B++){const j=R[B];P[0]=Math.min(P[0],j.x),P[1]=Math.min(P[1],j.y),P[2]=Math.max(P[2],j.x),P[3]=Math.max(P[3],j.y)}P[0]<vn&&P[1]<vn&&P[2]>=0&&P[3]>=0&&S.insert(x,P[0],P[1],P[2],P[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new gl.VectorTile(new $s(this.rawTileData)).layers,this.sourceLayerCoder=new ds(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,r,o,h){this.loadVTLayers();const g=t.params||{},y=vn/t.tileSize/t.scale,x=Zu(g.filter),S=t.queryGeometry,D=t.queryPadding*y,R=Nf(S),P=this.grid.query(R.minX-D,R.minY-D,R.maxX+D,R.maxY+D),B=Nf(t.cameraQueryGeometry),j=this.grid3D.query(B.minX-D,B.minY-D,B.maxX+D,B.maxY+D,((ie,he,Ce,me)=>(function(Ee,Ue,tt,vt,Vt){for(const gt of Ee)if(Ue<=gt.x&&tt<=gt.y&&vt>=gt.x&&Vt>=gt.y)return!0;const yt=[new X(Ue,tt),new X(Ue,Vt),new X(vt,Vt),new X(vt,tt)];if(Ee.length>2){for(const gt of yt)if(hu(Ee,gt))return!0}for(let gt=0;gt<Ee.length-1;gt++)if(fp(Ee[gt],Ee[gt+1],yt))return!0;return!1})(t.cameraQueryGeometry,ie-D,he-D,Ce+D,me+D)));for(const ie of j)P.push(ie);P.sort($p);const Z={};let Y;for(let ie=0;ie<P.length;ie++){const he=P[ie];if(he===Y)continue;Y=he;const Ce=this.featureIndexArray.get(he);let me=null;this.loadMatchingFeature(Z,Ce.bucketIndex,Ce.sourceLayerIndex,Ce.featureIndex,x,g.layers,g.availableImages,r,o,h,((Ee,Ue,tt)=>(me||(me=dl(Ee)),Ue.queryIntersectsFeature(S,Ee,tt,me,this.z,t.transform,y,t.pixelPosMatrix))))}return Z}loadMatchingFeature(t,r,o,h,g,y,x,S,D,R,P){const B=this.bucketLayerIDs[r];if(y&&!(function(ie,he){for(let Ce=0;Ce<ie.length;Ce++)if(he.indexOf(ie[Ce])>=0)return!0;return!1})(y,B))return;const j=this.sourceLayerCoder.decode(o),Z=this.vtLayers[j].feature(h);if(g.needGeometry){const ie=fl(Z,!0);if(!g.filter(new Zi(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!g.filter(new Zi(this.tileID.overscaledZ),Z))return;const Y=this.getId(Z,j);for(let ie=0;ie<B.length;ie++){const he=B[ie];if(y&&y.indexOf(he)<0)continue;const Ce=S[he];if(!Ce)continue;let me={};Y&&R&&(me=R.getState(Ce.sourceLayer||"_geojsonTileLayer",Y));const Ee=it({},D[he]);Ee.paint=Bf(Ee.paint,Ce.paint,Z,me,x),Ee.layout=Bf(Ee.layout,Ce.layout,Z,me,x);const Ue=!P||P(Z,Ce,me);if(!Ue)continue;const tt=new Tu(Z,this.z,this.x,this.y,Y);tt.layer=Ee;let vt=t[he];vt===void 0&&(vt=t[he]=[]),vt.push({featureIndex:h,feature:tt,intersectionZ:Ue})}}lookupSymbolFeatures(t,r,o,h,g,y,x,S){const D={};this.loadVTLayers();const R=Zu(g);for(const P of t)this.loadMatchingFeature(D,o,h,P,R,y,x,S,r);return D}hasLayer(t){for(const r of this.bucketLayerIDs)for(const o of r)if(t===o)return!0;return!1}getId(t,r){let o=t.id;return this.promoteId&&(o=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof o=="boolean"&&(o=Number(o))),o}}function Bf(n,t,r,o,h){return Nt(n,((g,y)=>{const x=t instanceof sc?t.get(y):null;return x&&x.evaluate?x.evaluate(r,o,h):x}))}function Nf(n){let t=1/0,r=1/0,o=-1/0,h=-1/0;for(const g of n)t=Math.min(t,g.x),r=Math.min(r,g.y),o=Math.max(o,g.x),h=Math.max(h,g.y);return{minX:t,minY:r,maxX:o,maxY:h}}function $p(n,t){return t-n}function Ff(n,t,r,o,h){const g=[];for(let y=0;y<n.length;y++){const x=n[y];let S;for(let D=0;D<x.length-1;D++){let R=x[D],P=x[D+1];R.x<t&&P.x<t||(R.x<t?R=new X(t,R.y+(t-R.x)/(P.x-R.x)*(P.y-R.y))._round():P.x<t&&(P=new X(t,R.y+(t-R.x)/(P.x-R.x)*(P.y-R.y))._round()),R.y<r&&P.y<r||(R.y<r?R=new X(R.x+(r-R.y)/(P.y-R.y)*(P.x-R.x),r)._round():P.y<r&&(P=new X(R.x+(r-R.y)/(P.y-R.y)*(P.x-R.x),r)._round()),R.x>=o&&P.x>=o||(R.x>=o?R=new X(o,R.y+(o-R.x)/(P.x-R.x)*(P.y-R.y))._round():P.x>=o&&(P=new X(o,R.y+(o-R.x)/(P.x-R.x)*(P.y-R.y))._round()),R.y>=h&&P.y>=h||(R.y>=h?R=new X(R.x+(h-R.y)/(P.y-R.y)*(P.x-R.x),h)._round():P.y>=h&&(P=new X(R.x+(h-R.y)/(P.y-R.y)*(P.x-R.x),h)._round()),S&&R.equals(S[S.length-1])||(S=[R],g.push(S)),S.push(P)))))}}return g}wt("FeatureIndex",Gp,{omit:["rawTileData","sourceLayerCoder"]});class Ml extends X{constructor(t,r,o,h){super(t,r),this.angle=o,h!==void 0&&(this.segment=h)}clone(){return new Ml(this.x,this.y,this.angle,this.segment)}}function yd(n,t,r,o,h){if(t.segment===void 0||r===0)return!0;let g=t,y=t.segment+1,x=0;for(;x>-r/2;){if(y--,y<0)return!1;x-=n[y].dist(g),g=n[y]}x+=n[y].dist(n[y+1]),y++;const S=[];let D=0;for(;x<r/2;){const R=n[y],P=n[y+1];if(!P)return!1;let B=n[y-1].angleTo(R)-R.angleTo(P);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:B}),D+=B;x-S[0].distance>o;)D-=S.shift().angleDelta;if(D>h)return!1;y++,x+=R.dist(P)}return!0}function jf(n){let t=0;for(let r=0;r<n.length-1;r++)t+=n[r].dist(n[r+1]);return t}function Uf(n,t,r){return n?.6*t*r:0}function Xp(n,t){return Math.max(n?n.right-n.left:0,t?t.right-t.left:0)}function Vf(n,t,r,o,h,g){const y=Uf(r,h,g),x=Xp(r,o)*g;let S=0;const D=jf(n)/2;for(let R=0;R<n.length-1;R++){const P=n[R],B=n[R+1],j=P.dist(B);if(S+j>D){const Z=(D-S)/j,Y=Rn.number(P.x,B.x,Z),ie=Rn.number(P.y,B.y,Z),he=new Ml(Y,ie,B.angleTo(P),R);return he._round(),!y||yd(n,he,x,y,t)?he:void 0}S+=j}}function qf(n,t,r,o,h,g,y,x,S){const D=Uf(o,g,y),R=Xp(o,h),P=R*y,B=n[0].x===0||n[0].x===S||n[0].y===0||n[0].y===S;return t-P<t/4&&(t=P+t/4),Yp(n,B?t/2*x%t:(R/2+2*g)*y*x%t,t,D,r,P,B,!1,S)}function Yp(n,t,r,o,h,g,y,x,S){const D=g/2,R=jf(n);let P=0,B=t-r,j=[];for(let Z=0;Z<n.length-1;Z++){const Y=n[Z],ie=n[Z+1],he=Y.dist(ie),Ce=ie.angleTo(Y);for(;B+r<P+he;){B+=r;const me=(B-P)/he,Ee=Rn.number(Y.x,ie.x,me),Ue=Rn.number(Y.y,ie.y,me);if(Ee>=0&&Ee<S&&Ue>=0&&Ue<S&&B-D>=0&&B+D<=R){const tt=new Ml(Ee,Ue,Ce,Z);tt._round(),o&&!yd(n,tt,g,o,h)||j.push(tt)}}P+=he}return x||j.length||y||(j=Yp(n,P/2,r,o,h,g,y,!0,S)),j}wt("Anchor",Ml);const Eu=Tr;function Au(n,t,r,o){const h=[],g=n.image,y=g.pixelRatio,x=g.paddedRect.w-2*Eu,S=g.paddedRect.h-2*Eu;let D={x1:n.left,y1:n.top,x2:n.right,y2:n.bottom};const R=g.stretchX||[[0,x]],P=g.stretchY||[[0,S]],B=(He,kt)=>He+kt[1]-kt[0],j=R.reduce(B,0),Z=P.reduce(B,0),Y=x-j,ie=S-Z;let he=0,Ce=j,me=0,Ee=Z,Ue=0,tt=Y,vt=0,Vt=ie;if(g.content&&o){const He=g.content,kt=He[2]-He[0],Dt=He[3]-He[1];(g.textFitWidth||g.textFitHeight)&&(D=Rf(n)),he=_d(R,0,He[0]),me=_d(P,0,He[1]),Ce=_d(R,He[0],He[2]),Ee=_d(P,He[1],He[3]),Ue=He[0]-he,vt=He[1]-me,tt=kt-Ce,Vt=Dt-Ee}const yt=D.x1,gt=D.y1,It=D.x2-yt,At=D.y2-gt,_t=(He,kt,Dt,Zt)=>{const Ci=hi(He.stretch-he,Ce,It,yt),Oi=Cu(He.fixed-Ue,tt,He.stretch,j),bn=hi(kt.stretch-me,Ee,At,gt),aa=Cu(kt.fixed-vt,Vt,kt.stretch,Z),Zn=hi(Dt.stretch-he,Ce,It,yt),wn=Cu(Dt.fixed-Ue,tt,Dt.stretch,j),Ar=hi(Zt.stretch-me,Ee,At,gt),Cr=Cu(Zt.fixed-vt,Vt,Zt.stretch,Z),Nr=new X(Ci,bn),cn=new X(Zn,bn),gn=new X(Zn,Ar),Mr=new X(Ci,Ar),or=new X(Oi/y,aa/y),Fr=new X(wn/y,Cr/y),On=t*Math.PI/180;if(On){const bi=Math.sin(On),Ri=Math.cos(On),Xi=[Ri,-bi,bi,Ri];Nr._matMult(Xi),cn._matMult(Xi),Mr._matMult(Xi),gn._matMult(Xi)}const jr=He.stretch+He.fixed,zr=kt.stretch+kt.fixed;return{tl:Nr,tr:cn,bl:Mr,br:gn,tex:{x:g.paddedRect.x+Eu+jr,y:g.paddedRect.y+Eu+zr,w:Dt.stretch+Dt.fixed-jr,h:Zt.stretch+Zt.fixed-zr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:or,pixelOffsetBR:Fr,minFontScaleX:tt/y/It,minFontScaleY:Vt/y/At,isSDF:r}};if(o&&(g.stretchX||g.stretchY)){const He=Hf(R,Y,j),kt=Hf(P,ie,Z);for(let Dt=0;Dt<He.length-1;Dt++){const Zt=He[Dt],Ci=He[Dt+1];for(let Oi=0;Oi<kt.length-1;Oi++)h.push(_t(Zt,kt[Oi],Ci,kt[Oi+1]))}}else h.push(_t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return h}function _d(n,t,r){let o=0;for(const h of n)o+=Math.max(t,Math.min(r,h[1]))-Math.max(t,Math.min(r,h[0]));return o}function Hf(n,t,r){const o=[{fixed:-Eu,stretch:0}];for(const[h,g]of n){const y=o[o.length-1];o.push({fixed:h-y.stretch,stretch:y.stretch}),o.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return o.push({fixed:t+Eu,stretch:r}),o}function hi(n,t,r,o){return n/t*r+o}function Cu(n,t,r,o){return n-t*r/o}class zc{constructor(t,r,o,h,g,y,x,S,D,R){var P;if(this.boxStartIndex=t.length,D){let B=y.top,j=y.bottom;const Z=y.collisionPadding;Z&&(B-=Z[1],j+=Z[3]);let Y=j-B;Y>0&&(Y=Math.max(10,Y),this.circleDiameter=Y)}else{const B=!((P=y.image)===null||P===void 0)&&P.content&&(y.image.textFitWidth||y.image.textFitHeight)?Rf(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};B.y1=B.y1*x-S[0],B.y2=B.y2*x+S[2],B.x1=B.x1*x-S[3],B.x2=B.x2*x+S[1];const j=y.collisionPadding;if(j&&(B.x1-=j[0]*x,B.y1-=j[1]*x,B.x2+=j[2]*x,B.y2+=j[3]*x),R){const Z=new X(B.x1,B.y1),Y=new X(B.x2,B.y1),ie=new X(B.x1,B.y2),he=new X(B.x2,B.y2),Ce=R*Math.PI/180;Z._rotate(Ce),Y._rotate(Ce),ie._rotate(Ce),he._rotate(Ce),B.x1=Math.min(Z.x,Y.x,ie.x,he.x),B.x2=Math.max(Z.x,Y.x,ie.x,he.x),B.y1=Math.min(Z.y,Y.y,ie.y,he.y),B.y2=Math.max(Z.y,Y.y,ie.y,he.y)}t.emplaceBack(r.x,r.y,B.x1,B.y1,B.x2,B.y2,o,h,g)}this.boxEndIndex=t.length}}class Zf{constructor(t=[],r=((o,h)=>o<h?-1:o>h?1:0)){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:o}=this,h=r[t];for(;t>0;){const g=t-1>>1,y=r[g];if(o(h,y)>=0)break;r[t]=y,t=g}r[t]=h}_down(t){const{data:r,compare:o}=this,h=this.length>>1,g=r[t];for(;t<h;){let y=1+(t<<1);const x=y+1;if(x<this.length&&o(r[x],r[y])<0&&(y=x),o(r[y],g)>=0)break;r[t]=r[y],t=y}r[t]=g}}function Kp(n,t=1,r=!1){let o=1/0,h=1/0,g=-1/0,y=-1/0;const x=n[0];for(let j=0;j<x.length;j++){const Z=x[j];(!j||Z.x<o)&&(o=Z.x),(!j||Z.y<h)&&(h=Z.y),(!j||Z.x>g)&&(g=Z.x),(!j||Z.y>y)&&(y=Z.y)}const S=Math.min(g-o,y-h);let D=S/2;const R=new Zf([],Gf);if(S===0)return new X(o,h);for(let j=o;j<g;j+=S)for(let Z=h;Z<y;Z+=S)R.push(new Xs(j+D,Z+D,D,n));let P=(function(j){let Z=0,Y=0,ie=0;const he=j[0];for(let Ce=0,me=he.length,Ee=me-1;Ce<me;Ee=Ce++){const Ue=he[Ce],tt=he[Ee],vt=Ue.x*tt.y-tt.x*Ue.y;Y+=(Ue.x+tt.x)*vt,ie+=(Ue.y+tt.y)*vt,Z+=3*vt}return new Xs(Y/Z,ie/Z,0,j)})(n),B=R.length;for(;R.length;){const j=R.pop();(j.d>P.d||!P.d)&&(P=j,r&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,B)),j.max-P.d<=t||(D=j.h/2,R.push(new Xs(j.p.x-D,j.p.y-D,D,n)),R.push(new Xs(j.p.x+D,j.p.y-D,D,n)),R.push(new Xs(j.p.x-D,j.p.y+D,D,n)),R.push(new Xs(j.p.x+D,j.p.y+D,D,n)),B+=4)}return r&&(console.log(`num probes: ${B}`),console.log(`best distance: ${P.d}`)),P.p}function Gf(n,t){return t.max-n.max}function Xs(n,t,r,o){this.p=new X(n,t),this.h=r,this.d=(function(h,g){let y=!1,x=1/0;for(let S=0;S<g.length;S++){const D=g[S];for(let R=0,P=D.length,B=P-1;R<P;B=R++){const j=D[R],Z=D[B];j.y>h.y!=Z.y>h.y&&h.x<(Z.x-j.x)*(h.y-j.y)/(Z.y-j.y)+j.x&&(y=!y),x=Math.min(x,of(h,j,Z))}}return(y?1:-1)*Math.sqrt(x)})(this.p,o),this.max=this.d+this.h*Math.SQRT2}var Ln;M.aq=void 0,(Ln=M.aq||(M.aq={}))[Ln.center=1]="center",Ln[Ln.left=2]="left",Ln[Ln.right=3]="right",Ln[Ln.top=4]="top",Ln[Ln.bottom=5]="bottom",Ln[Ln["top-left"]=6]="top-left",Ln[Ln["top-right"]=7]="top-right",Ln[Ln["bottom-left"]=8]="bottom-left",Ln[Ln["bottom-right"]=9]="bottom-right";const _a=7,vd=Number.POSITIVE_INFINITY;function Wp(n,t){return t[1]!==vd?(function(r,o,h){let g=0,y=0;switch(o=Math.abs(o),h=Math.abs(h),r){case"top-right":case"top-left":case"top":y=h-_a;break;case"bottom-right":case"bottom-left":case"bottom":y=-h+_a}switch(r){case"top-right":case"bottom-right":case"right":g=-o;break;case"top-left":case"bottom-left":case"left":g=o}return[g,y]})(n,t[0],t[1]):(function(r,o){let h=0,g=0;o<0&&(o=0);const y=o/Math.SQRT2;switch(r){case"top-right":case"top-left":g=y-_a;break;case"bottom-right":case"bottom-left":g=-y+_a;break;case"bottom":g=-o+_a;break;case"top":g=o-_a}switch(r){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=o;break;case"right":h=-o}return[h,g]})(n,t[0])}function Qp(n,t,r){var o;const h=n.layout,g=(o=h.get("text-variable-anchor-offset"))===null||o===void 0?void 0:o.evaluate(t,{},r);if(g){const x=g.values,S=[];for(let D=0;D<x.length;D+=2){const R=S[D]=x[D],P=x[D+1].map((B=>B*Gi));R.startsWith("top")?P[1]-=_a:R.startsWith("bottom")&&(P[1]+=_a),S[D+1]=P}return new qr(S)}const y=h.get("text-variable-anchor");if(y){let x;x=n._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[h.get("text-radial-offset").evaluate(t,{},r)*Gi,vd]:h.get("text-offset").evaluate(t,{},r).map((D=>D*Gi));const S=[];for(const D of y)S.push(D,Wp(D,x));return new qr(S)}return null}function xd(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Jp(n,t,r,o,h,g,y,x,S,D,R){let P=g.textMaxSize.evaluate(t,{});P===void 0&&(P=y);const B=n.layers[0].layout,j=B.get("icon-offset").evaluate(t,{},R),Z=qi(r.horizontal),Y=y/24,ie=n.tilePixelRatio*Y,he=n.tilePixelRatio*P/24,Ce=n.tilePixelRatio*x,me=n.tilePixelRatio*B.get("symbol-spacing"),Ee=B.get("text-padding")*n.tilePixelRatio,Ue=(function(He,kt,Dt,Zt=1){const Ci=He.get("icon-padding").evaluate(kt,{},Dt),Oi=Ci&&Ci.values;return[Oi[0]*Zt,Oi[1]*Zt,Oi[2]*Zt,Oi[3]*Zt]})(B,t,R,n.tilePixelRatio),tt=B.get("text-max-angle")/180*Math.PI,vt=B.get("text-rotation-alignment")!=="viewport"&&B.get("symbol-placement")!=="point",Vt=B.get("icon-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",yt=B.get("symbol-placement"),gt=me/2,It=B.get("icon-text-fit");let At;o&&It!=="none"&&(n.allowVerticalPlacement&&r.vertical&&(At=ra(o,r.vertical,It,B.get("icon-text-fit-padding"),j,Y)),Z&&(o=ra(o,Z,It,B.get("icon-text-fit-padding"),j,Y)));const _t=(He,kt)=>{kt.x<0||kt.x>=vn||kt.y<0||kt.y>=vn||(function(Dt,Zt,Ci,Oi,bn,aa,Zn,wn,Ar,Cr,Nr,cn,gn,Mr,or,Fr,On,jr,zr,bi,Ri,Xi,Xr,nn,Dc){const fs=Dt.addToLineVertexArray(Zt,Ci);let Va,va,Ur,Wn,Eo=0,Rc=0,Ed=0,gh=0,yh=-1,Ad=-1;const ps={};let Ao=uc("");if(Dt.allowVerticalPlacement&&Oi.vertical){const lr=wn.layout.get("text-rotate").evaluate(Ri,{},nn)+90;Ur=new zc(Ar,Zt,Cr,Nr,cn,Oi.vertical,gn,Mr,or,lr),Zn&&(Wn=new zc(Ar,Zt,Cr,Nr,cn,Zn,On,jr,or,lr))}if(bn){const lr=wn.layout.get("icon-rotate").evaluate(Ri,{}),Dr=wn.layout.get("icon-text-fit")!=="none",Mo=Au(bn,lr,Xr,Dr),sa=Zn?Au(Zn,lr,Xr,Dr):void 0;va=new zc(Ar,Zt,Cr,Nr,cn,bn,On,jr,!1,lr),Eo=4*Mo.length;const Il=Dt.iconSizeData;let Ys=null;Il.kind==="source"?(Ys=[hs*wn.layout.get("icon-size").evaluate(Ri,{})],Ys[0]>El&&Ft(`${Dt.layerIds[0]}: Value for "icon-size" is >= ${xu}. Reduce your "icon-size".`)):Il.kind==="composite"&&(Ys=[hs*Xi.compositeIconSizes[0].evaluate(Ri,{},nn),hs*Xi.compositeIconSizes[1].evaluate(Ri,{},nn)],(Ys[0]>El||Ys[1]>El)&&Ft(`${Dt.layerIds[0]}: Value for "icon-size" is >= ${xu}. Reduce your "icon-size".`)),Dt.addSymbols(Dt.icon,Mo,Ys,bi,zr,Ri,M.ah.none,Zt,fs.lineStartIndex,fs.lineLength,-1,nn),yh=Dt.icon.placedSymbolArray.length-1,sa&&(Rc=4*sa.length,Dt.addSymbols(Dt.icon,sa,Ys,bi,zr,Ri,M.ah.vertical,Zt,fs.lineStartIndex,fs.lineLength,-1,nn),Ad=Dt.icon.placedSymbolArray.length-1)}const Co=Object.keys(Oi.horizontal);for(const lr of Co){const Dr=Oi.horizontal[lr];if(!Va){Ao=uc(Dr.text);const sa=wn.layout.get("text-rotate").evaluate(Ri,{},nn);Va=new zc(Ar,Zt,Cr,Nr,cn,Dr,gn,Mr,or,sa)}const Mo=Dr.positionedLines.length===1;if(Ed+=dh(Dt,Zt,Dr,aa,wn,or,Ri,Fr,fs,Oi.vertical?M.ah.horizontal:M.ah.horizontalOnly,Mo?Co:[lr],ps,yh,Xi,nn),Mo)break}Oi.vertical&&(gh+=dh(Dt,Zt,Oi.vertical,aa,wn,or,Ri,Fr,fs,M.ah.vertical,["vertical"],ps,Ad,Xi,nn));const Dl=Va?Va.boxStartIndex:Dt.collisionBoxArray.length,_h=Va?Va.boxEndIndex:Dt.collisionBoxArray.length,vh=Ur?Ur.boxStartIndex:Dt.collisionBoxArray.length,Rl=Ur?Ur.boxEndIndex:Dt.collisionBoxArray.length,Hm=va?va.boxStartIndex:Dt.collisionBoxArray.length,em=va?va.boxEndIndex:Dt.collisionBoxArray.length,xh=Wn?Wn.boxStartIndex:Dt.collisionBoxArray.length,Zm=Wn?Wn.boxEndIndex:Dt.collisionBoxArray.length;let qa=-1;const Ic=(lr,Dr)=>lr&&lr.circleDiameter?Math.max(lr.circleDiameter,Dr):Dr;qa=Ic(Va,qa),qa=Ic(Ur,qa),qa=Ic(va,qa),qa=Ic(Wn,qa);const Wf=qa>-1?1:0;Wf&&(qa*=Dc/Gi),Dt.glyphOffsetArray.length>=Su.MAX_GLYPHS&&Ft("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ri.sortKey!==void 0&&Dt.addToSortKeyRanges(Dt.symbolInstances.length,Ri.sortKey);const Gm=Qp(wn,Ri,nn),[Cd,Md]=(function(lr,Dr){const Mo=lr.length,sa=Dr?.values;if(sa?.length>0)for(let Il=0;Il<sa.length;Il+=2){const Ys=sa[Il+1];lr.emplaceBack(M.aq[sa[Il]],Ys[0],Ys[1])}return[Mo,lr.length]})(Dt.textAnchorOffsets,Gm);Dt.symbolInstances.emplaceBack(Zt.x,Zt.y,ps.right>=0?ps.right:-1,ps.center>=0?ps.center:-1,ps.left>=0?ps.left:-1,ps.vertical||-1,yh,Ad,Ao,Dl,_h,vh,Rl,Hm,em,xh,Zm,Cr,Ed,gh,Eo,Rc,Wf,0,gn,qa,Cd,Md)})(n,kt,He,r,o,h,At,n.layers[0],n.collisionBoxArray,t.index,t.sourceLayerIndex,n.index,ie,[Ee,Ee,Ee,Ee],vt,S,Ce,Ue,Vt,j,t,g,D,R,y)};if(yt==="line")for(const He of Ff(t.geometry,0,0,vn,vn)){const kt=qf(He,me,tt,r.vertical||Z,o,24,he,n.overscaling,vn);for(const Dt of kt)Z&&$f(n,Z.text,gt,Dt)||_t(He,Dt)}else if(yt==="line-center"){for(const He of t.geometry)if(He.length>1){const kt=Vf(He,tt,r.vertical||Z,o,24,he);kt&&_t(He,kt)}}else if(t.type==="Polygon")for(const He of Xc(t.geometry,0)){const kt=Kp(He,16);_t(He[0],new Ml(kt.x,kt.y,0))}else if(t.type==="LineString")for(const He of t.geometry)_t(He,new Ml(He[0].x,He[0].y,0));else if(t.type==="Point")for(const He of t.geometry)for(const kt of He)_t([kt],new Ml(kt.x,kt.y,0))}function dh(n,t,r,o,h,g,y,x,S,D,R,P,B,j,Z){const Y=(function(Ce,me,Ee,Ue,tt,vt,Vt,yt){const gt=Ue.layout.get("text-rotate").evaluate(vt,{})*Math.PI/180,It=[];for(const At of me.positionedLines)for(const _t of At.positionedGlyphs){if(!_t.rect)continue;const He=_t.rect||{};let kt=xo+1,Dt=!0,Zt=1,Ci=0;const Oi=(tt||yt)&&_t.vertical,bn=_t.metrics.advance*_t.scale/2;if(yt&&me.verticalizable&&(Ci=At.lineOffset/2-(_t.imageName?-(Gi-_t.metrics.width*_t.scale)/2:(_t.scale-1)*Gi)),_t.imageName){const bi=Vt[_t.imageName];Dt=bi.sdf,Zt=bi.pixelRatio,kt=Tr/Zt}const aa=tt?[_t.x+bn,_t.y]:[0,0];let Zn=tt?[0,0]:[_t.x+bn+Ee[0],_t.y+Ee[1]-Ci],wn=[0,0];Oi&&(wn=Zn,Zn=[0,0]);const Ar=_t.metrics.isDoubleResolution?2:1,Cr=(_t.metrics.left-kt)*_t.scale-bn+Zn[0],Nr=(-_t.metrics.top-kt)*_t.scale+Zn[1],cn=Cr+He.w/Ar*_t.scale/Zt,gn=Nr+He.h/Ar*_t.scale/Zt,Mr=new X(Cr,Nr),or=new X(cn,Nr),Fr=new X(Cr,gn),On=new X(cn,gn);if(Oi){const bi=new X(-bn,bn-ar),Ri=-Math.PI/2,Xi=Gi/2-bn,Xr=new X(5-ar-Xi,-(_t.imageName?Xi:0)),nn=new X(...wn);Mr._rotateAround(Ri,bi)._add(Xr)._add(nn),or._rotateAround(Ri,bi)._add(Xr)._add(nn),Fr._rotateAround(Ri,bi)._add(Xr)._add(nn),On._rotateAround(Ri,bi)._add(Xr)._add(nn)}if(gt){const bi=Math.sin(gt),Ri=Math.cos(gt),Xi=[Ri,-bi,bi,Ri];Mr._matMult(Xi),or._matMult(Xi),Fr._matMult(Xi),On._matMult(Xi)}const jr=new X(0,0),zr=new X(0,0);It.push({tl:Mr,tr:or,bl:Fr,br:On,tex:He,writingMode:me.writingMode,glyphOffset:aa,sectionIndex:_t.sectionIndex,isSDF:Dt,pixelOffsetTL:jr,pixelOffsetBR:zr,minFontScaleX:0,minFontScaleY:0})}return It})(0,r,x,h,g,y,o,n.allowVerticalPlacement),ie=n.textSizeData;let he=null;ie.kind==="source"?(he=[hs*h.layout.get("text-size").evaluate(y,{})],he[0]>El&&Ft(`${n.layerIds[0]}: Value for "text-size" is >= ${xu}. Reduce your "text-size".`)):ie.kind==="composite"&&(he=[hs*j.compositeTextSizes[0].evaluate(y,{},Z),hs*j.compositeTextSizes[1].evaluate(y,{},Z)],(he[0]>El||he[1]>El)&&Ft(`${n.layerIds[0]}: Value for "text-size" is >= ${xu}. Reduce your "text-size".`)),n.addSymbols(n.text,Y,he,x,g,y,D,t,S.lineStartIndex,S.lineLength,B,Z);for(const Ce of R)P[Ce]=n.text.placedSymbolArray.length-1;return 4*Y.length}function qi(n){for(const t in n)return n[t];return null}function $f(n,t,r,o){const h=n.compareText;if(t in h){const g=h[t];for(let y=g.length-1;y>=0;y--)if(o.dist(g[y])<r)return!0}else h[t]=[];return h[t].push(o),!1}const sr=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Xf{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,o]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=o>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const g=sr[15&o];if(!g)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(t,2,1),[x]=new Uint32Array(t,4,1);return new Xf(x,y,g,t)}constructor(t,r=64,o=Float64Array,h){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=o,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const g=sr.indexOf(this.ArrayType),y=2*t*this.ArrayType.BYTES_PER_ELEMENT,x=t*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${o}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+S,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+S),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+S,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=t,this.coords[this._pos++]=r,o}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return fh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,o,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:x}=this,S=[0,g.length-1,0],D=[];for(;S.length;){const R=S.pop()||0,P=S.pop()||0,B=S.pop()||0;if(P-B<=x){for(let ie=B;ie<=P;ie++){const he=y[2*ie],Ce=y[2*ie+1];he>=t&&he<=o&&Ce>=r&&Ce<=h&&D.push(g[ie])}continue}const j=B+P>>1,Z=y[2*j],Y=y[2*j+1];Z>=t&&Z<=o&&Y>=r&&Y<=h&&D.push(g[j]),(R===0?t<=Z:r<=Y)&&(S.push(B),S.push(j-1),S.push(1-R)),(R===0?o>=Z:h>=Y)&&(S.push(j+1),S.push(P),S.push(1-R))}return D}within(t,r,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:g,nodeSize:y}=this,x=[0,h.length-1,0],S=[],D=o*o;for(;x.length;){const R=x.pop()||0,P=x.pop()||0,B=x.pop()||0;if(P-B<=y){for(let ie=B;ie<=P;ie++)Yf(g[2*ie],g[2*ie+1],t,r)<=D&&S.push(h[ie]);continue}const j=B+P>>1,Z=g[2*j],Y=g[2*j+1];Yf(Z,Y,t,r)<=D&&S.push(h[j]),(R===0?t-o<=Z:r-o<=Y)&&(x.push(B),x.push(j-1),x.push(1-R)),(R===0?t+o>=Z:r+o>=Y)&&(x.push(j+1),x.push(P),x.push(1-R))}return S}}function fh(n,t,r,o,h,g){if(h-o<=r)return;const y=o+h>>1;bd(n,t,y,o,h,g),fh(n,t,r,o,y-1,1-g),fh(n,t,r,y+1,h,1-g)}function bd(n,t,r,o,h,g){for(;h>o;){if(h-o>600){const D=h-o+1,R=r-o+1,P=Math.log(D),B=.5*Math.exp(2*P/3),j=.5*Math.sqrt(P*B*(D-B)/D)*(R-D/2<0?-1:1);bd(n,t,r,Math.max(o,Math.floor(r-R*B/D+j)),Math.min(h,Math.floor(r+(D-R)*B/D+j)),g)}const y=t[2*r+g];let x=o,S=h;for(zl(n,t,o,r),t[2*h+g]>y&&zl(n,t,o,h);x<S;){for(zl(n,t,x,S),x++,S--;t[2*x+g]<y;)x++;for(;t[2*S+g]>y;)S--}t[2*o+g]===y?zl(n,t,o,S):(S++,zl(n,t,S,h)),S<=r&&(o=S+1),r<=S&&(h=S-1)}}function zl(n,t,r,o){wd(n,r,o),wd(t,2*r,2*o),wd(t,2*r+1,2*o+1)}function wd(n,t,r){const o=n[t];n[t]=n[r],n[r]=o}function Yf(n,t,r,o){const h=n-r,g=t-o;return h*h+g*g}var ph;M.bg=void 0,(ph=M.bg||(M.bg={})).create="create",ph.load="load",ph.fullLoad="fullLoad";let Mu=null,mh=[];const Sd=1e3/60,Kf="loadTime",Td="fullLoadTime",qm={mark(n){performance.mark(n)},frame(n){const t=n;Mu!=null&&mh.push(t-Mu),Mu=t},clearMetrics(){Mu=null,mh=[],performance.clearMeasures(Kf),performance.clearMeasures(Td);for(const n in M.bg)performance.clearMarks(M.bg[n])},getPerformanceMetrics(){performance.measure(Kf,M.bg.create,M.bg.load),performance.measure(Td,M.bg.create,M.bg.fullLoad);const n=performance.getEntriesByName(Kf)[0].duration,t=performance.getEntriesByName(Td)[0].duration,r=mh.length,o=1/(mh.reduce(((g,y)=>g+y),0)/r/1e3),h=mh.filter((g=>g>Sd)).reduce(((g,y)=>g+(y-Sd)/Sd),0);return{loadTime:n,fullLoadTime:t,fps:o,percentDroppedFrames:h/(r+h)*100,totalFrames:r}}};M.$=class extends L{},M.A=fc,M.B=pn,M.C=function(n){if(De==null){const t=n.navigator?n.navigator.userAgent:null;De=!!n.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return De},M.D=zt,M.E=wa,M.F=class{constructor(n,t){this.target=n,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new fd((()=>this.process())),this.subscription=(function(r,o,h,g){return r.addEventListener(o,h,!1),{unsubscribe:()=>{r.removeEventListener(o,h,!1)}}})(this.target,"message",(r=>this.receive(r))),this.globalScope=qt(self)?n:window}registerMessageHandler(n,t){this.messageHandlers[n]=t}sendAsync(n,t){return new Promise(((r,o)=>{const h=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[h]={resolve:r,reject:o},t&&t.signal.addEventListener("abort",(()=>{delete this.resolveRejects[h];const x={id:h,type:"<cancel>",origin:location.origin,targetMapId:n.targetMapId,sourceMapId:this.mapId};this.target.postMessage(x)}),{once:!0});const g=[],y=Object.assign(Object.assign({},n),{id:h,sourceMapId:this.mapId,origin:location.origin,data:oo(n.data,g)});this.target.postMessage(y,{transfer:g})}))}receive(n){const t=n.data,r=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[r];const o=this.abortControllers[r];return delete this.abortControllers[r],void(o&&o.abort())}if(qt(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(this.taskQueue.length===0)return;const n=this.taskQueue.shift(),t=this.tasks[n];delete this.tasks[n],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(n,t)}processTask(n,t){return d(this,void 0,void 0,(function*(){if(t.type==="<response>"){const h=this.resolveRejects[n];return delete this.resolveRejects[n],h?void(t.error?h.reject(Pa(t.error)):h.resolve(Pa(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(n,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=Pa(t.data),o=new AbortController;this.abortControllers[n]=o;try{const h=yield this.messageHandlers[t.type](t.sourceMapId,r,o);this.completeTask(n,null,h)}catch(h){this.completeTask(n,h)}}))}completeTask(n,t,r){const o=[];delete this.abortControllers[n];const h={id:n,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?oo(t):null,data:oo(r,o)};this.target.postMessage(h,{transfer:o})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},M.G=Et,M.H=function(){var n=new fc(16);return fc!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},M.I=na,M.J=function(n,t,r){var o,h,g,y,x,S,D,R,P,B,j,Z,Y=r[0],ie=r[1],he=r[2];return t===n?(n[12]=t[0]*Y+t[4]*ie+t[8]*he+t[12],n[13]=t[1]*Y+t[5]*ie+t[9]*he+t[13],n[14]=t[2]*Y+t[6]*ie+t[10]*he+t[14],n[15]=t[3]*Y+t[7]*ie+t[11]*he+t[15]):(h=t[1],g=t[2],y=t[3],x=t[4],S=t[5],D=t[6],R=t[7],P=t[8],B=t[9],j=t[10],Z=t[11],n[0]=o=t[0],n[1]=h,n[2]=g,n[3]=y,n[4]=x,n[5]=S,n[6]=D,n[7]=R,n[8]=P,n[9]=B,n[10]=j,n[11]=Z,n[12]=o*Y+x*ie+P*he+t[12],n[13]=h*Y+S*ie+B*he+t[13],n[14]=g*Y+D*ie+j*he+t[14],n[15]=y*Y+R*ie+Z*he+t[15]),n},M.K=function(n,t,r){var o=r[0],h=r[1],g=r[2];return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3]*o,n[4]=t[4]*h,n[5]=t[5]*h,n[6]=t[6]*h,n[7]=t[7]*h,n[8]=t[8]*g,n[9]=t[9]*g,n[10]=t[10]*g,n[11]=t[11]*g,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},M.L=pc,M.M=function(n,t){const r={};for(let o=0;o<t.length;o++){const h=t[o];h in n&&(r[h]=n[h])}return r},M.N=To,M.O=Hp,M.P=X,M.Q=Lf,M.R=qn,M.S=Br,M.T=Bs,M.U=Me,M.V=Ie,M.W=Mt,M.X=vn,M.Y=b,M.Z=uh,M._=d,M.a=bt,M.a$=function(n,t){var r=n[0],o=n[1],h=n[2],g=n[3],y=n[4],x=n[5],S=n[6],D=n[7],R=n[8],P=n[9],B=n[10],j=n[11],Z=n[12],Y=n[13],ie=n[14],he=n[15],Ce=t[0],me=t[1],Ee=t[2],Ue=t[3],tt=t[4],vt=t[5],Vt=t[6],yt=t[7],gt=t[8],It=t[9],At=t[10],_t=t[11],He=t[12],kt=t[13],Dt=t[14],Zt=t[15];return Math.abs(r-Ce)<=wr*Math.max(1,Math.abs(r),Math.abs(Ce))&&Math.abs(o-me)<=wr*Math.max(1,Math.abs(o),Math.abs(me))&&Math.abs(h-Ee)<=wr*Math.max(1,Math.abs(h),Math.abs(Ee))&&Math.abs(g-Ue)<=wr*Math.max(1,Math.abs(g),Math.abs(Ue))&&Math.abs(y-tt)<=wr*Math.max(1,Math.abs(y),Math.abs(tt))&&Math.abs(x-vt)<=wr*Math.max(1,Math.abs(x),Math.abs(vt))&&Math.abs(S-Vt)<=wr*Math.max(1,Math.abs(S),Math.abs(Vt))&&Math.abs(D-yt)<=wr*Math.max(1,Math.abs(D),Math.abs(yt))&&Math.abs(R-gt)<=wr*Math.max(1,Math.abs(R),Math.abs(gt))&&Math.abs(P-It)<=wr*Math.max(1,Math.abs(P),Math.abs(It))&&Math.abs(B-At)<=wr*Math.max(1,Math.abs(B),Math.abs(At))&&Math.abs(j-_t)<=wr*Math.max(1,Math.abs(j),Math.abs(_t))&&Math.abs(Z-He)<=wr*Math.max(1,Math.abs(Z),Math.abs(He))&&Math.abs(Y-kt)<=wr*Math.max(1,Math.abs(Y),Math.abs(kt))&&Math.abs(ie-Dt)<=wr*Math.max(1,Math.abs(ie),Math.abs(Dt))&&Math.abs(he-Zt)<=wr*Math.max(1,Math.abs(he),Math.abs(Zt))},M.a0=ui,M.a1=Al,M.a2=rt,M.a3=n=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((r=>{t.onloadstart=()=>{r(t)};for(const o of n){const h=window.document.createElement("source");pi(o)||(t.crossOrigin="Anonymous"),h.src=o,t.appendChild(h)}}))},M.a4=function(){return Lt++},M.a5=at,M.a6=Su,M.a7=Zu,M.a8=fl,M.a9=Tu,M.aA=function(n){if(n.type==="custom")return new qp(n);switch(n.type){case"background":return new jp(n);case"circle":return new Yh(n);case"fill":return new vf(n);case"fill-extrusion":return new Tf(n);case"heatmap":return new Kh(n);case"hillshade":return new mp(n);case"line":return new jm(n);case"raster":return new Vp(n);case"symbol":return new So(n)}},M.aB=ot,M.aC=function(n,t){if(!n)return[{command:"setStyle",args:[t]}];let r=[];try{if(!xi(n.version,t.version))return[{command:"setStyle",args:[t]}];xi(n.center,t.center)||r.push({command:"setCenter",args:[t.center]}),xi(n.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),xi(n.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),xi(n.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),xi(n.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),xi(n.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),xi(n.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),xi(n.light,t.light)||r.push({command:"setLight",args:[t.light]}),xi(n.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),xi(n.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),xi(n.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const o={},h=[];(function(y,x,S,D){let R;for(R in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,R)&&(Object.prototype.hasOwnProperty.call(x,R)||_s(R,S,D));for(R in x)Object.prototype.hasOwnProperty.call(x,R)&&(Object.prototype.hasOwnProperty.call(y,R)?xi(y[R],x[R])||(y[R].type==="geojson"&&x[R].type==="geojson"&&ko(y,x,R)?Wi(S,{command:"setGeoJSONSourceData",args:[R,x[R].data]}):Sa(R,x,S,D)):ys(R,x,S))})(n.sources,t.sources,h,o);const g=[];n.layers&&n.layers.forEach((y=>{"source"in y&&o[y.source]?r.push({command:"removeLayer",args:[y.id]}):g.push(y)})),r=r.concat(h),(function(y,x,S){x=x||[];const D=(y=y||[]).map(Ha),R=x.map(Ha),P=y.reduce(Gn,{}),B=x.reduce(Gn,{}),j=D.slice(),Z=Object.create(null);let Y,ie,he,Ce,me;for(let Ee=0,Ue=0;Ee<D.length;Ee++)Y=D[Ee],Object.prototype.hasOwnProperty.call(B,Y)?Ue++:(Wi(S,{command:"removeLayer",args:[Y]}),j.splice(j.indexOf(Y,Ue),1));for(let Ee=0,Ue=0;Ee<R.length;Ee++)Y=R[R.length-1-Ee],j[j.length-1-Ee]!==Y&&(Object.prototype.hasOwnProperty.call(P,Y)?(Wi(S,{command:"removeLayer",args:[Y]}),j.splice(j.lastIndexOf(Y,j.length-Ue),1)):Ue++,Ce=j[j.length-Ee],Wi(S,{command:"addLayer",args:[B[Y],Ce]}),j.splice(j.length-Ee,0,Y),Z[Y]=!0);for(let Ee=0;Ee<R.length;Ee++)if(Y=R[Ee],ie=P[Y],he=B[Y],!Z[Y]&&!xi(ie,he))if(xi(ie.source,he.source)&&xi(ie["source-layer"],he["source-layer"])&&xi(ie.type,he.type)){for(me in Yr(ie.layout,he.layout,S,Y,null,"setLayoutProperty"),Yr(ie.paint,he.paint,S,Y,null,"setPaintProperty"),xi(ie.filter,he.filter)||Wi(S,{command:"setFilter",args:[Y,he.filter]}),xi(ie.minzoom,he.minzoom)&&xi(ie.maxzoom,he.maxzoom)||Wi(S,{command:"setLayerZoomRange",args:[Y,he.minzoom,he.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Yr(ie[me],he[me],S,Y,me.slice(6),"setPaintProperty"):xi(ie[me],he[me])||Wi(S,{command:"setLayerProperty",args:[Y,me,he[me]]}));for(me in he)Object.prototype.hasOwnProperty.call(he,me)&&!Object.prototype.hasOwnProperty.call(ie,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Yr(ie[me],he[me],S,Y,me.slice(6),"setPaintProperty"):xi(ie[me],he[me])||Wi(S,{command:"setLayerProperty",args:[Y,me,he[me]]}))}else Wi(S,{command:"removeLayer",args:[Y]}),Ce=j[j.lastIndexOf(Y)+1],Wi(S,{command:"addLayer",args:[he,Ce]})})(g,t.layers,r)}catch(o){console.warn("Unable to compute style diff:",o),r=[{command:"setStyle",args:[t]}]}return r},M.aD=function(n){const t=[],r=n.id;return r===void 0&&t.push({message:`layers.${r}: missing required property "id"`}),n.render===void 0&&t.push({message:`layers.${r}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},M.aE=function n(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!n(t[o],r[o]))return!1;return!0}if(typeof t=="object"&&t!==null&&r!==null){if(typeof r!="object"||Object.keys(t).length!==Object.keys(r).length)return!1;for(const o in t)if(!n(t[o],r[o]))return!1;return!0}return t===r},M.aF=Nt,M.aG=Gt,M.aH=class extends ul{constructor(n,t){super(n,t),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},M.aI=Yu,M.aJ=class extends ul{constructor(n,t){super(n,t),this.current=Om}set(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}},M.aK=ef,M.aL=tf,M.aM=zi,M.aN=class extends ul{constructor(n,t){super(n,t),this.current=[0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))}},M.aO=class extends ul{constructor(n,t){super(n,t),this.current=[0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))}},M.aP=function(n,t,r,o,h,g,y){var x=1/(t-r),S=1/(o-h),D=1/(g-y);return n[0]=-2*x,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*S,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*D,n[11]=0,n[12]=(t+r)*x,n[13]=(h+o)*S,n[14]=(y+g)*D,n[15]=1,n},M.aQ=Xh,M.aR=class extends ve{},M.aS=kp,M.aT=class extends Re{},M.aU=kn,M.aV=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},M.aW=Hs,M.aX=Kn,M.aY=In,M.aZ=class extends St{},M.a_=function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]},M.aa=function(n){const t={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((r,o,h,g)=>{const y=h||g;return t[o]=!y||y.toLowerCase(),""})),t["max-age"]){const r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t},M.ab=function(n,t){const r=[];for(const o in n)o in t||r.push(o);return r},M.ac=Ze,M.ad=function(n,t,r){var o=Math.sin(r),h=Math.cos(r),g=t[0],y=t[1],x=t[2],S=t[3],D=t[4],R=t[5],P=t[6],B=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=g*h+D*o,n[1]=y*h+R*o,n[2]=x*h+P*o,n[3]=S*h+B*o,n[4]=D*h-g*o,n[5]=R*h-y*o,n[6]=P*h-x*o,n[7]=B*h-S*o,n},M.ae=function(n){var t=new fc(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},M.af=pl,M.ag=function(n,t){let r=0,o=0;if(n.kind==="constant")o=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:h,minZoom:g,maxZoom:y}=n,x=h?Ze(fr.interpolationFactor(h,t,g,y),0,1):0;n.kind==="camera"?o=Rn.number(n.minSize,n.maxSize,x):r=x}return{uSizeT:r,uSize:o}},M.ai=function(n,{uSize:t,uSizeT:r},{lowerSize:o,upperSize:h}){return n.kind==="source"?o/hs:n.kind==="composite"?Rn.number(o/hs,h/hs,r):t},M.aj=hd,M.ak=function(n,t,r,o){const h=t.y-n.y,g=t.x-n.x,y=o.y-r.y,x=o.x-r.x,S=y*g-x*h;if(S===0)return null;const D=(x*(n.y-r.y)-y*(n.x-r.x))/S;return new X(n.x+D*g,n.y+D*h)},M.al=Ff,M.am=af,M.an=uf,M.ao=function(n){let t=1/0,r=1/0,o=-1/0,h=-1/0;for(const g of n)t=Math.min(t,g.x),r=Math.min(r,g.y),o=Math.max(o,g.x),h=Math.max(h,g.y);return[t,r,o,h]},M.ap=Gi,M.ar=bu,M.as=function(n,t){var r=t[0],o=t[1],h=t[2],g=t[3],y=t[4],x=t[5],S=t[6],D=t[7],R=t[8],P=t[9],B=t[10],j=t[11],Z=t[12],Y=t[13],ie=t[14],he=t[15],Ce=r*x-o*y,me=r*S-h*y,Ee=r*D-g*y,Ue=o*S-h*x,tt=o*D-g*x,vt=h*D-g*S,Vt=R*Y-P*Z,yt=R*ie-B*Z,gt=R*he-j*Z,It=P*ie-B*Y,At=P*he-j*Y,_t=B*he-j*ie,He=Ce*_t-me*At+Ee*It+Ue*gt-tt*yt+vt*Vt;return He?(n[0]=(x*_t-S*At+D*It)*(He=1/He),n[1]=(h*At-o*_t-g*It)*He,n[2]=(Y*vt-ie*tt+he*Ue)*He,n[3]=(B*tt-P*vt-j*Ue)*He,n[4]=(S*gt-y*_t-D*yt)*He,n[5]=(r*_t-h*gt+g*yt)*He,n[6]=(ie*Ee-Z*vt-he*me)*He,n[7]=(R*vt-B*Ee+j*me)*He,n[8]=(y*At-x*gt+D*Vt)*He,n[9]=(o*gt-r*At-g*Vt)*He,n[10]=(Z*tt-Y*Ee+he*Ce)*He,n[11]=(P*Ee-R*tt-j*Ce)*He,n[12]=(x*yt-y*It-S*Vt)*He,n[13]=(r*It-o*yt+h*Vt)*He,n[14]=(Y*me-Z*Ue-ie*Ce)*He,n[15]=(R*Ue-P*me+B*Ce)*He,n):null},M.at=xd,M.au=Cc,M.av=Xf,M.aw=function(){const n={},t=Ne.$version;for(const r in Ne.$root){const o=Ne.$root[r];if(o.required){let h=null;h=r==="version"?t:o.type==="array"?[]:{},h!=null&&(n[r]=h)}}return n},M.ax=ac,M.ay=Ct,M.az=function(n){n=n.slice();const t=Object.create(null);for(let r=0;r<n.length;r++)t[n[r].id]=n[r];for(let r=0;r<n.length;r++)"ref"in n[r]&&(n[r]=Nl(n[r],t[n[r].ref]));return n},M.b=Ge,M.b0=function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},M.b1=function(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n},M.b2=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},M.b3=mt,M.b4=gd,M.b5=Zp,M.b6=function(n,t,r,o,h){var g,y=1/Math.tan(t/2);return n[0]=y/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,h!=null&&h!==1/0?(n[10]=(h+o)*(g=1/(o-h)),n[14]=2*h*o*g):(n[10]=-1,n[14]=-2*o),n},M.b7=function(n,t,r){var o=Math.sin(r),h=Math.cos(r),g=t[4],y=t[5],x=t[6],S=t[7],D=t[8],R=t[9],P=t[10],B=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=g*h+D*o,n[5]=y*h+R*o,n[6]=x*h+P*o,n[7]=S*h+B*o,n[8]=D*h-g*o,n[9]=R*h-y*o,n[10]=P*h-x*o,n[11]=B*h-S*o,n},M.b8=Pe,M.b9=qe,M.bA=ad,M.bB=function(n){return n.message===Je},M.bC=ca,M.bD=Gr,M.ba=function(n){return n*Math.PI/180},M.bb=function(n,t){const{x:r,y:o}=uh.fromLngLat(t);return!(n<0||n>25||o<0||o>=1||r<0||r>=1)},M.bc=function(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},M.bd=class extends I{},M.be=pd,M.bf=qm,M.bh=Tt,M.bi=function(n,t){bt.REGISTERED_PROTOCOLS[n]=t},M.bj=function(n){delete bt.REGISTERED_PROTOCOLS[n]},M.bk=function(n,t){const r={};for(let h=0;h<n.length;h++){const g=t&&t[n[h].id]||ro(n[h]);t&&(t[n[h].id]=g);let y=r[g];y||(y=r[g]=[]),y.push(n[h])}const o=[];for(const h in r)o.push(r[h]);return o},M.bl=wt,M.bm=ds,M.bn=Gp,M.bo=wc,M.bp=function(n){n.bucket.createArrays(),n.bucket.tilePixelRatio=vn/(512*n.bucket.overscaling),n.bucket.compareText={},n.bucket.iconsNeedLinear=!1;const t=n.bucket.layers[0],r=t.layout,o=t._unevaluatedLayout._values,h={layoutIconSize:o["icon-size"].possiblyEvaluate(new Zi(n.bucket.zoom+1),n.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new Zi(n.bucket.zoom+1),n.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new Zi(18))};if(n.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:R}=n.bucket.textSizeData;h.compositeTextSizes=[o["text-size"].possiblyEvaluate(new Zi(D),n.canonical),o["text-size"].possiblyEvaluate(new Zi(R),n.canonical)]}if(n.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:R}=n.bucket.iconSizeData;h.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new Zi(D),n.canonical),o["icon-size"].possiblyEvaluate(new Zi(R),n.canonical)]}const g=r.get("text-line-height")*Gi,y=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",x=r.get("text-keep-upright"),S=r.get("text-size");for(const D of n.bucket.features){const R=r.get("text-font").evaluate(D,{},n.canonical).join(","),P=S.evaluate(D,{},n.canonical),B=h.layoutTextSize.evaluate(D,{},n.canonical),j=h.layoutIconSize.evaluate(D,{},n.canonical),Z={horizontal:{},vertical:void 0},Y=D.text;let ie,he=[0,0];if(Y){const Ee=Y.toString(),Ue=r.get("text-letter-spacing").evaluate(D,{},n.canonical)*Gi,tt=Ps(Ee)?Ue:0,vt=r.get("text-anchor").evaluate(D,{},n.canonical),Vt=Qp(t,D,n.canonical);if(!Vt){const At=r.get("text-radial-offset").evaluate(D,{},n.canonical);he=At?Wp(vt,[At*Gi,vd]):r.get("text-offset").evaluate(D,{},n.canonical).map((_t=>_t*Gi))}let yt=y?"center":r.get("text-justify").evaluate(D,{},n.canonical);const gt=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(D,{},n.canonical)*Gi:1/0,It=()=>{n.bucket.allowVerticalPlacement&&fa(Ee)&&(Z.vertical=Tc(Y,n.glyphMap,n.glyphPositions,n.imagePositions,R,gt,g,vt,"left",tt,he,M.ah.vertical,!0,B,P))};if(!y&&Vt){const At=new Set;if(yt==="auto")for(let He=0;He<Vt.values.length;He+=2)At.add(xd(Vt.values[He]));else At.add(yt);let _t=!1;for(const He of At)if(!Z.horizontal[He])if(_t)Z.horizontal[He]=Z.horizontal[0];else{const kt=Tc(Y,n.glyphMap,n.glyphPositions,n.imagePositions,R,gt,g,"center",He,tt,he,M.ah.horizontal,!1,B,P);kt&&(Z.horizontal[He]=kt,_t=kt.positionedLines.length===1)}It()}else{yt==="auto"&&(yt=xd(vt));const At=Tc(Y,n.glyphMap,n.glyphPositions,n.imagePositions,R,gt,g,vt,yt,tt,he,M.ah.horizontal,!1,B,P);At&&(Z.horizontal[yt]=At),It(),fa(Ee)&&y&&x&&(Z.vertical=Tc(Y,n.glyphMap,n.glyphPositions,n.imagePositions,R,gt,g,vt,yt,tt,he,M.ah.vertical,!1,B,P))}}let Ce=!1;if(D.icon&&D.icon.name){const Ee=n.imageMap[D.icon.name];Ee&&(ie=ya(n.imagePositions[D.icon.name],r.get("icon-offset").evaluate(D,{},n.canonical),r.get("icon-anchor").evaluate(D,{},n.canonical)),Ce=!!Ee.sdf,n.bucket.sdfIcons===void 0?n.bucket.sdfIcons=Ce:n.bucket.sdfIcons!==Ce&&Ft("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ee.pixelRatio!==n.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(n.bucket.iconsNeedLinear=!0))}const me=qi(Z.horizontal)||Z.vertical;n.bucket.iconsInText=!!me&&me.iconsInText,(me||ie)&&Jp(n.bucket,D,Z,ie,n.imageMap,h,B,j,he,Ce,n.canonical)}n.showCollisionBoxes&&n.bucket.generateCollisionDebugBuffers()},M.bq=nd,M.br=eh,M.bs=ja,M.bt=gl,M.bu=$s,M.bv=class{constructor(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let n=performance.getEntriesByName(this._marks.measure);return n.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),n=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),n}},M.bw=function(n,t,r,o,h){return d(this,void 0,void 0,(function*(){if(Ie())try{return yield Mt(n,t,r,o,h)}catch{}return(function(g,y,x,S,D){const R=g.width,P=g.height;se&&je||(se=new OffscreenCanvas(R,P),je=se.getContext("2d",{willReadFrequently:!0})),se.width=R,se.height=P,je.drawImage(g,0,0,R,P);const B=je.getImageData(y,x,S,D);return je.clearRect(0,0,R,P),B.data})(n,t,r,o,h)}))},M.bx=Cl,M.by=G,M.bz=H,M.c=st,M.d=n=>d(void 0,void 0,void 0,(function*(){if(n.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(n)],{type:"image/png"});try{return createImageBitmap(t)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),M.e=it,M.f=n=>new Promise(((t,r)=>{const o=new Image;o.onload=()=>{t(o),URL.revokeObjectURL(o.src),o.onload=null,window.requestAnimationFrame((()=>{o.src=Qe}))},o.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(n)],{type:"image/png"});o.src=n.byteLength?URL.createObjectURL(h):Qe})),M.g=$t,M.h=(n,t)=>Ii(it(n,{type:"json"}),t),M.i=qt,M.j=Bn,M.k=an,M.l=(n,t)=>Ii(it(n,{type:"arrayBuffer"}),t),M.m=Ii,M.n=function(n){return new $s(n).readFields(zf,[])},M.o=fu,M.p=wl,M.q=m,M.r=_r,M.s=pi,M.t=Wr,M.u=as,M.v=Ne,M.w=Ft,M.x=function([n,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:n*Math.cos(t)*Math.sin(r),y:n*Math.sin(t)*Math.sin(r),z:n*Math.cos(r)}},M.y=Rn,M.z=Zi})),k("worker",["./shared"],(function(M){class d{constructor(V){this.keyCache={},V&&this.replace(V)}replace(V){this._layerConfigs={},this._layers={},this.update(V,[])}update(V,U){for(const ae of V){this._layerConfigs[ae.id]=ae;const ye=this._layers[ae.id]=M.aA(ae);ye._featureFilter=M.a7(ye.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(const ae of U)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};const W=M.bk(Object.values(this._layerConfigs),this.keyCache);for(const ae of W){const ye=ae.map((Be=>this._layers[Be.id])),xe=ye[0];if(xe.visibility==="none")continue;const Ae=xe.source||"";let ue=this.familiesBySource[Ae];ue||(ue=this.familiesBySource[Ae]={});const Le=xe.sourceLayer||"_geojsonTileLayer";let Xe=ue[Le];Xe||(Xe=ue[Le]=[]),Xe.push(ye)}}}class G{constructor(V){const U={},W=[];for(const Ae in V){const ue=V[Ae],Le=U[Ae]={};for(const Xe in ue){const Be=ue[+Xe];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;const dt={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};W.push(dt),Le[Xe]={rect:dt,metrics:Be.metrics}}}const{w:ae,h:ye}=M.p(W),xe=new M.o({width:ae||1,height:ye||1});for(const Ae in V){const ue=V[Ae];for(const Le in ue){const Xe=ue[+Le];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Be=U[Ae][Le].rect;M.o.copy(Xe.bitmap,xe,{x:0,y:0},{x:Be.x+1,y:Be.y+1},Xe.bitmap)}}this.image=xe,this.positions=U}}M.bl("GlyphAtlas",G);class H{constructor(V){this.tileID=new M.S(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId,this.inFlightDependencies=[]}parse(V,U,W,ae){return M._(this,void 0,void 0,(function*(){this.status="parsing",this.data=V,this.collisionBoxArray=new M.a5;const ye=new M.bm(Object.keys(V.layers).sort()),xe=new M.bn(this.tileID,this.promoteId);xe.bucketLayerIDs=[];const Ae={},ue={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},Le=U.familiesBySource[this.source];for(const Ut in Le){const Mi=V.layers[Ut];if(!Mi)continue;Mi.version===1&&M.w(`Vector tile source "${this.source}" layer "${Ut}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Hi=ye.encode(Ut),Ji=[];for(let hn=0;hn<Mi.length;hn++){const hr=Mi.feature(hn),Ks=xe.getId(hr,Ut);Ji.push({feature:hr,id:Ks,index:hn,sourceLayerIndex:Hi})}for(const hn of Le[Ut]){const hr=hn[0];hr.source!==this.source&&M.w(`layer.source = ${hr.source} does not equal this.source = ${this.source}`),hr.minzoom&&this.zoom<Math.floor(hr.minzoom)||hr.maxzoom&&this.zoom>=hr.maxzoom||hr.visibility!=="none"&&(J(hn,this.zoom,W),(Ae[hr.id]=hr.createBucket({index:xe.bucketLayerIDs.length,layers:hn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Hi,sourceID:this.source})).populate(Ji,ue,this.tileID.canonical),xe.bucketLayerIDs.push(hn.map((Ks=>Ks.id))))}}const Xe=M.aF(ue.glyphDependencies,(Ut=>Object.keys(Ut).map(Number)));this.inFlightDependencies.forEach((Ut=>Ut?.abort())),this.inFlightDependencies=[];let Be=Promise.resolve({});if(Object.keys(Xe).length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),Be=ae.sendAsync({type:"GG",data:{stacks:Xe,source:this.source,tileID:this.tileID,type:"glyphs"}},Ut)}const dt=Object.keys(ue.iconDependencies);let Pt=Promise.resolve({});if(dt.length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),Pt=ae.sendAsync({type:"GI",data:{icons:dt,source:this.source,tileID:this.tileID,type:"icons"}},Ut)}const Ot=Object.keys(ue.patternDependencies);let ci=Promise.resolve({});if(Ot.length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),ci=ae.sendAsync({type:"GI",data:{icons:Ot,source:this.source,tileID:this.tileID,type:"patterns"}},Ut)}const[Wt,li,ni]=yield Promise.all([Be,Pt,ci]),Qi=new G(Wt),Bi=new M.bo(li,ni);for(const Ut in Ae){const Mi=Ae[Ut];Mi instanceof M.a6?(J(Mi.layers,this.zoom,W),M.bp({bucket:Mi,glyphMap:Wt,glyphPositions:Qi.positions,imageMap:li,imagePositions:Bi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Mi.hasPattern&&(Mi instanceof M.bq||Mi instanceof M.br||Mi instanceof M.bs)&&(J(Mi.layers,this.zoom,W),Mi.addFeatures(ue,this.tileID.canonical,Bi.patternPositions))}return this.status="done",{buckets:Object.values(Ae).filter((Ut=>!Ut.isEmpty())),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qi.image,imageAtlas:Bi,glyphMap:this.returnDependencies?Wt:null,iconMap:this.returnDependencies?li:null,glyphPositions:this.returnDependencies?Qi.positions:null}}))}}function J(oe,V,U){const W=new M.z(V);for(const ae of oe)ae.recalculate(W,U)}class X{constructor(V,U,W){this.actor=V,this.layerIndex=U,this.availableImages=W,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(V,U){return M._(this,void 0,void 0,(function*(){const W=yield M.l(V.request,U);try{return{vectorTile:new M.bt.VectorTile(new M.bu(W.data)),rawData:W.data,cacheControl:W.cacheControl,expires:W.expires}}catch(ae){const ye=new Uint8Array(W.data);let xe=`Unable to parse the tile at ${V.request.url}, `;throw xe+=ye[0]===31&&ye[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ae.message}`,new Error(xe)}}))}loadTile(V){return M._(this,void 0,void 0,(function*(){const U=V.uid,W=!!(V&&V.request&&V.request.collectResourceTiming)&&new M.bv(V.request),ae=new H(V);this.loading[U]=ae;const ye=new AbortController;ae.abort=ye;try{const xe=yield this.loadVectorTile(V,ye);if(delete this.loading[U],!xe)return null;const Ae=xe.rawData,ue={};xe.expires&&(ue.expires=xe.expires),xe.cacheControl&&(ue.cacheControl=xe.cacheControl);const Le={};if(W){const Be=W.finish();Be&&(Le.resourceTiming=JSON.parse(JSON.stringify(Be)))}ae.vectorTile=xe.vectorTile;const Xe=ae.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[U]=ae,this.fetching[U]={rawTileData:Ae,cacheControl:ue,resourceTiming:Le};try{const Be=yield Xe;return M.e({rawTileData:Ae.slice(0)},Be,ue,Le)}finally{delete this.fetching[U]}}catch(xe){throw delete this.loading[U],ae.status="done",this.loaded[U]=ae,xe}}))}reloadTile(V){return M._(this,void 0,void 0,(function*(){const U=V.uid;if(!this.loaded||!this.loaded[U])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const W=this.loaded[U];if(W.showCollisionBoxes=V.showCollisionBoxes,W.status==="parsing"){const ae=yield W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor);let ye;if(this.fetching[U]){const{rawTileData:xe,cacheControl:Ae,resourceTiming:ue}=this.fetching[U];delete this.fetching[U],ye=M.e({rawTileData:xe.slice(0)},ae,Ae,ue)}else ye=ae;return ye}if(W.status==="done"&&W.vectorTile)return W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(V){return M._(this,void 0,void 0,(function*(){const U=this.loading,W=V.uid;U&&U[W]&&U[W].abort&&(U[W].abort.abort(),delete U[W])}))}removeTile(V){return M._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[V.uid]&&delete this.loaded[V.uid]}))}}class ${constructor(){this.loaded={}}loadTile(V){return M._(this,void 0,void 0,(function*(){const{uid:U,encoding:W,rawImageData:ae,redFactor:ye,greenFactor:xe,blueFactor:Ae,baseShift:ue}=V,Le=ae.width+2,Xe=ae.height+2,Be=M.b(ae)?new M.R({width:Le,height:Xe},yield M.bw(ae,-1,-1,Le,Xe)):ae,dt=new M.bx(U,Be,W,ye,xe,Ae,ue);return this.loaded=this.loaded||{},this.loaded[U]=dt,dt}))}removeTile(V){const U=this.loaded,W=V.uid;U&&U[W]&&delete U[W]}}function ge(oe,V){if(oe.length!==0){Se(oe[0],V);for(var U=1;U<oe.length;U++)Se(oe[U],!V)}}function Se(oe,V){for(var U=0,W=0,ae=0,ye=oe.length,xe=ye-1;ae<ye;xe=ae++){var Ae=(oe[ae][0]-oe[xe][0])*(oe[xe][1]+oe[ae][1]),ue=U+Ae;W+=Math.abs(U)>=Math.abs(Ae)?U-ue+Ae:Ae-ue+U,U=ue}U+W>=0!=!!V&&oe.reverse()}var ce=M.by((function oe(V,U){var W,ae=V&&V.type;if(ae==="FeatureCollection")for(W=0;W<V.features.length;W++)oe(V.features[W],U);else if(ae==="GeometryCollection")for(W=0;W<V.geometries.length;W++)oe(V.geometries[W],U);else if(ae==="Feature")oe(V.geometry,U);else if(ae==="Polygon")ge(V.coordinates,U);else if(ae==="MultiPolygon")for(W=0;W<V.coordinates.length;W++)ge(V.coordinates[W],U);return V}));const _e=M.bt.VectorTileFeature.prototype.toGeoJSON;var Me={exports:{}},Ie=M.bz,Pe=M.bt.VectorTileFeature,qe=Ze;function Ze(oe,V){this.options=V||{},this.features=oe,this.length=oe.length}function mt(oe,V){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=V||4096}Ze.prototype.feature=function(oe){return new mt(this.features[oe],this.options.extent)},mt.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var V=0;V<oe.length;V++){for(var U=oe[V],W=[],ae=0;ae<U.length;ae++)W.push(new Ie(U[ae][0],U[ae][1]));this.geometry.push(W)}return this.geometry},mt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,V=1/0,U=-1/0,W=1/0,ae=-1/0,ye=0;ye<oe.length;ye++)for(var xe=oe[ye],Ae=0;Ae<xe.length;Ae++){var ue=xe[Ae];V=Math.min(V,ue.x),U=Math.max(U,ue.x),W=Math.min(W,ue.y),ae=Math.max(ae,ue.y)}return[V,W,U,ae]},mt.prototype.toGeoJSON=Pe.prototype.toGeoJSON;var it=M.bA,Lt=qe;function Nt(oe){var V=new it;return(function(U,W){for(var ae in U.layers)W.writeMessage(3,Gt,U.layers[ae])})(oe,V),V.finish()}function Gt(oe,V){var U;V.writeVarintField(15,oe.version||1),V.writeStringField(1,oe.name||""),V.writeVarintField(5,oe.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for(U=0;U<oe.length;U++)W.feature=oe.feature(U),V.writeMessage(2,ot,W);var ae=W.keys;for(U=0;U<ae.length;U++)V.writeStringField(3,ae[U]);var ye=W.values;for(U=0;U<ye.length;U++)V.writeMessage(4,De,ye[U])}function ot(oe,V){var U=oe.feature;U.id!==void 0&&V.writeVarintField(1,U.id),V.writeMessage(2,lt,oe),V.writeVarintField(3,U.type),V.writeMessage(4,qt,U)}function lt(oe,V){var U=oe.feature,W=oe.keys,ae=oe.values,ye=oe.keycache,xe=oe.valuecache;for(var Ae in U.properties){var ue=U.properties[Ae],Le=ye[Ae];if(ue!==null){Le===void 0&&(W.push(Ae),ye[Ae]=Le=W.length-1),V.writeVarint(Le);var Xe=typeof ue;Xe!=="string"&&Xe!=="boolean"&&Xe!=="number"&&(ue=JSON.stringify(ue));var Be=Xe+":"+ue,dt=xe[Be];dt===void 0&&(ae.push(ue),xe[Be]=dt=ae.length-1),V.writeVarint(dt)}}}function Ft(oe,V){return(V<<3)+(7&oe)}function Rt(oe){return oe<<1^oe>>31}function qt(oe,V){for(var U=oe.loadGeometry(),W=oe.type,ae=0,ye=0,xe=U.length,Ae=0;Ae<xe;Ae++){var ue=U[Ae],Le=1;W===1&&(Le=ue.length),V.writeVarint(Ft(1,Le));for(var Xe=W===3?ue.length-1:ue.length,Be=0;Be<Xe;Be++){Be===1&&W!==1&&V.writeVarint(Ft(2,Xe-1));var dt=ue[Be].x-ae,Pt=ue[Be].y-ye;V.writeVarint(Rt(dt)),V.writeVarint(Rt(Pt)),ae+=dt,ye+=Pt}W===3&&V.writeVarint(Ft(7,1))}}function De(oe,V){var U=typeof oe;U==="string"?V.writeStringField(1,oe):U==="boolean"?V.writeBooleanField(7,oe):U==="number"&&(oe%1!=0?V.writeDoubleField(3,oe):oe<0?V.writeSVarintField(6,oe):V.writeVarintField(5,oe))}Me.exports=Nt,Me.exports.fromVectorTileJs=Nt,Me.exports.fromGeojsonVt=function(oe,V){V=V||{};var U={};for(var W in oe)U[W]=new Lt(oe[W].features,V),U[W].name=W,U[W].version=V.version,U[W].extent=V.extent;return Nt({layers:U})},Me.exports.GeoJSONWrapper=Lt;var Ge=M.by(Me.exports);const Qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},Mt=Math.fround||(se=new Float32Array(1),oe=>(se[0]=+oe,se[0]));var se;const je=3,Je=5,st=6;class bt{constructor(V){this.options=Object.assign(Object.create(Qe),V),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(V){const{log:U,minZoom:W,maxZoom:ae}=this.options;U&&console.time("total time");const ye=`prepare ${V.length} points`;U&&console.time(ye),this.points=V;const xe=[];for(let ue=0;ue<V.length;ue++){const Le=V[ue];if(!Le.geometry)continue;const[Xe,Be]=Le.geometry.coordinates,dt=Mt(Tt(Xe)),Pt=Mt(Ct(Be));xe.push(dt,Pt,1/0,ue,-1,1),this.options.reduce&&xe.push(0)}let Ae=this.trees[ae+1]=this._createTree(xe);U&&console.timeEnd(ye);for(let ue=ae;ue>=W;ue--){const Le=+Date.now();Ae=this.trees[ue]=this._createTree(this._cluster(Ae,ue)),U&&console.log("z%d: %d clusters in %dms",ue,Ae.numItems,+Date.now()-Le)}return U&&console.timeEnd("total time"),this}getClusters(V,U){let W=((V[0]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,V[1]));let ye=V[2]===180?180:((V[2]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)W=-180,ye=180;else if(W>ye){const Be=this.getClusters([W,ae,180,xe],U),dt=this.getClusters([-180,ae,ye,xe],U);return Be.concat(dt)}const Ae=this.trees[this._limitZoom(U)],ue=Ae.range(Tt(W),Ct(xe),Tt(ye),Ct(ae)),Le=Ae.data,Xe=[];for(const Be of ue){const dt=this.stride*Be;Xe.push(Le[dt+Je]>1?$t(Le,dt,this.clusterProps):this.points[Le[dt+je]])}return Xe}getChildren(V){const U=this._getOriginId(V),W=this._getOriginZoom(V),ae="No cluster with the specified id.",ye=this.trees[W];if(!ye)throw new Error(ae);const xe=ye.data;if(U*this.stride>=xe.length)throw new Error(ae);const Ae=this.options.radius/(this.options.extent*Math.pow(2,W-1)),ue=ye.within(xe[U*this.stride],xe[U*this.stride+1],Ae),Le=[];for(const Xe of ue){const Be=Xe*this.stride;xe[Be+4]===V&&Le.push(xe[Be+Je]>1?$t(xe,Be,this.clusterProps):this.points[xe[Be+je]])}if(Le.length===0)throw new Error(ae);return Le}getLeaves(V,U,W){const ae=[];return this._appendLeaves(ae,V,U=U||10,W=W||0,0),ae}getTile(V,U,W){const ae=this.trees[this._limitZoom(V)],ye=Math.pow(2,V),{extent:xe,radius:Ae}=this.options,ue=Ae/xe,Le=(W-ue)/ye,Xe=(W+1+ue)/ye,Be={features:[]};return this._addTileFeatures(ae.range((U-ue)/ye,Le,(U+1+ue)/ye,Xe),ae.data,U,W,ye,Be),U===0&&this._addTileFeatures(ae.range(1-ue/ye,Le,1,Xe),ae.data,ye,W,ye,Be),U===ye-1&&this._addTileFeatures(ae.range(0,Le,ue/ye,Xe),ae.data,-1,W,ye,Be),Be.features.length?Be:null}getClusterExpansionZoom(V){let U=this._getOriginZoom(V)-1;for(;U<=this.options.maxZoom;){const W=this.getChildren(V);if(U++,W.length!==1)break;V=W[0].properties.cluster_id}return U}_appendLeaves(V,U,W,ae,ye){const xe=this.getChildren(U);for(const Ae of xe){const ue=Ae.properties;if(ue&&ue.cluster?ye+ue.point_count<=ae?ye+=ue.point_count:ye=this._appendLeaves(V,ue.cluster_id,W,ae,ye):ye<ae?ye++:V.push(Ae),V.length===W)break}return ye}_createTree(V){const U=new M.av(V.length/this.stride|0,this.options.nodeSize,Float32Array);for(let W=0;W<V.length;W+=this.stride)U.add(V[W],V[W+1]);return U.finish(),U.data=V,U}_addTileFeatures(V,U,W,ae,ye,xe){for(const Ae of V){const ue=Ae*this.stride,Le=U[ue+Je]>1;let Xe,Be,dt;if(Le)Xe=Et(U,ue,this.clusterProps),Be=U[ue],dt=U[ue+1];else{const ci=this.points[U[ue+je]];Xe=ci.properties;const[Wt,li]=ci.geometry.coordinates;Be=Tt(Wt),dt=Ct(li)}const Pt={type:1,geometry:[[Math.round(this.options.extent*(Be*ye-W)),Math.round(this.options.extent*(dt*ye-ae))]],tags:Xe};let Ot;Ot=Le||this.options.generateId?U[ue+je]:this.points[U[ue+je]].id,Ot!==void 0&&(Pt.id=Ot),xe.features.push(Pt)}}_limitZoom(V){return Math.max(this.options.minZoom,Math.min(Math.floor(+V),this.options.maxZoom+1))}_cluster(V,U){const{radius:W,extent:ae,reduce:ye,minPoints:xe}=this.options,Ae=W/(ae*Math.pow(2,U)),ue=V.data,Le=[],Xe=this.stride;for(let Be=0;Be<ue.length;Be+=Xe){if(ue[Be+2]<=U)continue;ue[Be+2]=U;const dt=ue[Be],Pt=ue[Be+1],Ot=V.within(ue[Be],ue[Be+1],Ae),ci=ue[Be+Je];let Wt=ci;for(const li of Ot){const ni=li*Xe;ue[ni+2]>U&&(Wt+=ue[ni+Je])}if(Wt>ci&&Wt>=xe){let li,ni=dt*ci,Qi=Pt*ci,Bi=-1;const Ut=((Be/Xe|0)<<5)+(U+1)+this.points.length;for(const Mi of Ot){const Hi=Mi*Xe;if(ue[Hi+2]<=U)continue;ue[Hi+2]=U;const Ji=ue[Hi+Je];ni+=ue[Hi]*Ji,Qi+=ue[Hi+1]*Ji,ue[Hi+4]=Ut,ye&&(li||(li=this._map(ue,Be,!0),Bi=this.clusterProps.length,this.clusterProps.push(li)),ye(li,this._map(ue,Hi)))}ue[Be+4]=Ut,Le.push(ni/Wt,Qi/Wt,1/0,Ut,-1,Wt),ye&&Le.push(Bi)}else{for(let li=0;li<Xe;li++)Le.push(ue[Be+li]);if(Wt>1)for(const li of Ot){const ni=li*Xe;if(!(ue[ni+2]<=U)){ue[ni+2]=U;for(let Qi=0;Qi<Xe;Qi++)Le.push(ue[ni+Qi])}}}}return Le}_getOriginId(V){return V-this.points.length>>5}_getOriginZoom(V){return(V-this.points.length)%32}_map(V,U,W){if(V[U+Je]>1){const xe=this.clusterProps[V[U+st]];return W?Object.assign({},xe):xe}const ae=this.points[V[U+je]].properties,ye=this.options.map(ae);return W&&ye===ae?Object.assign({},ye):ye}}function $t(oe,V,U){return{type:"Feature",id:oe[V+je],properties:Et(oe,V,U),geometry:{type:"Point",coordinates:[(W=oe[V],360*(W-.5)),Ii(oe[V+1])]}};var W}function Et(oe,V,U){const W=oe[V+Je],ae=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W,ye=oe[V+st],xe=ye===-1?{}:Object.assign({},U[ye]);return Object.assign(xe,{cluster:!0,cluster_id:oe[V+je],point_count:W,point_count_abbreviated:ae})}function Tt(oe){return oe/360+.5}function Ct(oe){const V=Math.sin(oe*Math.PI/180),U=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return U<0?0:U>1?1:U}function Ii(oe){const V=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(V))/Math.PI-90}function pi(oe,V,U,W){let ae=W;const ye=V+(U-V>>1);let xe,Ae=U-V;const ue=oe[V],Le=oe[V+1],Xe=oe[U],Be=oe[U+1];for(let dt=V+3;dt<U;dt+=3){const Pt=Si(oe[dt],oe[dt+1],ue,Le,Xe,Be);if(Pt>ae)xe=dt,ae=Pt;else if(Pt===ae){const Ot=Math.abs(dt-ye);Ot<Ae&&(xe=dt,Ae=Ot)}}ae>W&&(xe-V>3&&pi(oe,V,xe,W),oe[xe+2]=ae,U-xe>3&&pi(oe,xe,U,W))}function Si(oe,V,U,W,ae,ye){let xe=ae-U,Ae=ye-W;if(xe!==0||Ae!==0){const ue=((oe-U)*xe+(V-W)*Ae)/(xe*xe+Ae*Ae);ue>1?(U=ae,W=ye):ue>0&&(U+=xe*ue,W+=Ae*ue)}return xe=oe-U,Ae=V-W,xe*xe+Ae*Ae}function Ti(oe,V,U,W){const ae={id:oe??null,type:V,geometry:U,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(V==="Point"||V==="MultiPoint"||V==="LineString")an(ae,U);else if(V==="Polygon")an(ae,U[0]);else if(V==="MultiLineString")for(const ye of U)an(ae,ye);else if(V==="MultiPolygon")for(const ye of U)an(ae,ye[0]);return ae}function an(oe,V){for(let U=0;U<V.length;U+=3)oe.minX=Math.min(oe.minX,V[U]),oe.minY=Math.min(oe.minY,V[U+1]),oe.maxX=Math.max(oe.maxX,V[U]),oe.maxY=Math.max(oe.maxY,V[U+1])}function Bn(oe,V,U,W){if(!V.geometry)return;const ae=V.geometry.coordinates;if(ae&&ae.length===0)return;const ye=V.geometry.type,xe=Math.pow(U.tolerance/((1<<U.maxZoom)*U.extent),2);let Ae=[],ue=V.id;if(U.promoteId?ue=V.properties[U.promoteId]:U.generateId&&(ue=W||0),ye==="Point")wa(ae,Ae);else if(ye==="MultiPoint")for(const Le of ae)wa(Le,Ae);else if(ye==="LineString")Ne(ae,Ae,xe,!1);else if(ye==="MultiLineString"){if(U.lineMetrics){for(const Le of ae)Ae=[],Ne(Le,Ae,xe,!1),oe.push(Ti(ue,"LineString",Ae,V.properties));return}An(ae,Ae,xe,!1)}else if(ye==="Polygon")An(ae,Ae,xe,!0);else{if(ye!=="MultiPolygon"){if(ye==="GeometryCollection"){for(const Le of V.geometry.geometries)Bn(oe,{id:ue,geometry:Le,properties:V.properties},U,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Le of ae){const Xe=[];An(Le,Xe,xe,!0),Ae.push(Xe)}}oe.push(Ti(ue,ye,Ae,V.properties))}function wa(oe,V){V.push(Nl(oe[0]),xi(oe[1]),0)}function Ne(oe,V,U,W){let ae,ye,xe=0;for(let ue=0;ue<oe.length;ue++){const Le=Nl(oe[ue][0]),Xe=xi(oe[ue][1]);V.push(Le,Xe,0),ue>0&&(xe+=W?(ae*Xe-Le*ye)/2:Math.sqrt(Math.pow(Le-ae,2)+Math.pow(Xe-ye,2))),ae=Le,ye=Xe}const Ae=V.length-3;V[2]=1,pi(V,0,Ae,U),V[Ae+2]=1,V.size=Math.abs(xe),V.start=0,V.end=V.size}function An(oe,V,U,W){for(let ae=0;ae<oe.length;ae++){const ye=[];Ne(oe[ae],ye,U,W),V.push(ye)}}function Nl(oe){return oe/360+.5}function xi(oe){const V=Math.sin(oe*Math.PI/180),U=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return U<0?0:U>1?1:U}function Wi(oe,V,U,W,ae,ye,xe,Ae){if(W/=V,ye>=(U/=V)&&xe<W)return oe;if(xe<U||ye>=W)return null;const ue=[];for(const Le of oe){const Xe=Le.geometry;let Be=Le.type;const dt=ae===0?Le.minX:Le.minY,Pt=ae===0?Le.maxX:Le.maxY;if(dt>=U&&Pt<W){ue.push(Le);continue}if(Pt<U||dt>=W)continue;let Ot=[];if(Be==="Point"||Be==="MultiPoint")ys(Xe,Ot,U,W,ae);else if(Be==="LineString")_s(Xe,Ot,U,W,ae,!1,Ae.lineMetrics);else if(Be==="MultiLineString")ko(Xe,Ot,U,W,ae,!1);else if(Be==="Polygon")ko(Xe,Ot,U,W,ae,!0);else if(Be==="MultiPolygon")for(const ci of Xe){const Wt=[];ko(ci,Wt,U,W,ae,!0),Wt.length&&Ot.push(Wt)}if(Ot.length){if(Ae.lineMetrics&&Be==="LineString"){for(const ci of Ot)ue.push(Ti(Le.id,Be,ci,Le.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(Ot.length===1?(Be="LineString",Ot=Ot[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=Ot.length===3?"Point":"MultiPoint"),ue.push(Ti(Le.id,Be,Ot,Le.tags))}}return ue.length?ue:null}function ys(oe,V,U,W,ae){for(let ye=0;ye<oe.length;ye+=3){const xe=oe[ye+ae];xe>=U&&xe<=W&&Yr(V,oe[ye],oe[ye+1],oe[ye+2])}}function _s(oe,V,U,W,ae,ye,xe){let Ae=Sa(oe);const ue=ae===0?Ha:Gn;let Le,Xe,Be=oe.start;for(let Wt=0;Wt<oe.length-3;Wt+=3){const li=oe[Wt],ni=oe[Wt+1],Qi=oe[Wt+2],Bi=oe[Wt+3],Ut=oe[Wt+4],Mi=ae===0?li:ni,Hi=ae===0?Bi:Ut;let Ji=!1;xe&&(Le=Math.sqrt(Math.pow(li-Bi,2)+Math.pow(ni-Ut,2))),Mi<U?Hi>U&&(Xe=ue(Ae,li,ni,Bi,Ut,U),xe&&(Ae.start=Be+Le*Xe)):Mi>W?Hi<W&&(Xe=ue(Ae,li,ni,Bi,Ut,W),xe&&(Ae.start=Be+Le*Xe)):Yr(Ae,li,ni,Qi),Hi<U&&Mi>=U&&(Xe=ue(Ae,li,ni,Bi,Ut,U),Ji=!0),Hi>W&&Mi<=W&&(Xe=ue(Ae,li,ni,Bi,Ut,W),Ji=!0),!ye&&Ji&&(xe&&(Ae.end=Be+Le*Xe),V.push(Ae),Ae=Sa(oe)),xe&&(Be+=Le)}let dt=oe.length-3;const Pt=oe[dt],Ot=oe[dt+1],ci=ae===0?Pt:Ot;ci>=U&&ci<=W&&Yr(Ae,Pt,Ot,oe[dt+2]),dt=Ae.length-3,ye&&dt>=3&&(Ae[dt]!==Ae[0]||Ae[dt+1]!==Ae[1])&&Yr(Ae,Ae[0],Ae[1],Ae[2]),Ae.length&&V.push(Ae)}function Sa(oe){const V=[];return V.size=oe.size,V.start=oe.start,V.end=oe.end,V}function ko(oe,V,U,W,ae,ye){for(const xe of oe)_s(xe,V,U,W,ae,ye,!1)}function Yr(oe,V,U,W){oe.push(V,U,W)}function Ha(oe,V,U,W,ae,ye){const xe=(ye-V)/(W-V);return Yr(oe,ye,U+(ae-U)*xe,1),xe}function Gn(oe,V,U,W,ae,ye){const xe=(ye-U)/(ae-U);return Yr(oe,V+(W-V)*xe,ye,1),xe}function rt(oe,V){const U=[];for(let W=0;W<oe.length;W++){const ae=oe[W],ye=ae.type;let xe;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")xe=un(ae.geometry,V);else if(ye==="MultiLineString"||ye==="Polygon"){xe=[];for(const Ae of ae.geometry)xe.push(un(Ae,V))}else if(ye==="MultiPolygon"){xe=[];for(const Ae of ae.geometry){const ue=[];for(const Le of Ae)ue.push(un(Le,V));xe.push(ue)}}U.push(Ti(ae.id,ye,xe,ae.tags))}return U}function un(oe,V){const U=[];U.size=oe.size,oe.start!==void 0&&(U.start=oe.start,U.end=oe.end);for(let W=0;W<oe.length;W+=3)U.push(oe[W]+V,oe[W+1],oe[W+2]);return U}function cr(oe,V){if(oe.transformed)return oe;const U=1<<oe.z,W=oe.x,ae=oe.y;for(const ye of oe.features){const xe=ye.geometry,Ae=ye.type;if(ye.geometry=[],Ae===1)for(let ue=0;ue<xe.length;ue+=2)ye.geometry.push(Ta(xe[ue],xe[ue+1],V,U,W,ae));else for(let ue=0;ue<xe.length;ue++){const Le=[];for(let Xe=0;Xe<xe[ue].length;Xe+=2)Le.push(Ta(xe[ue][Xe],xe[ue][Xe+1],V,U,W,ae));ye.geometry.push(Le)}}return oe.transformed=!0,oe}function Ta(oe,V,U,W,ae,ye){return[Math.round(U*(oe*W-ae)),Math.round(U*(V*W-ye))]}function vs(oe,V,U,W,ae){const ye=V===ae.maxZoom?0:ae.tolerance/((1<<V)*ae.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:oe.length,source:null,x:U,y:W,z:V,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ae of oe)ht(xe,Ae,ye,ae);return xe}function ht(oe,V,U,W){const ae=V.geometry,ye=V.type,xe=[];if(oe.minX=Math.min(oe.minX,V.minX),oe.minY=Math.min(oe.minY,V.minY),oe.maxX=Math.max(oe.maxX,V.maxX),oe.maxY=Math.max(oe.maxY,V.maxY),ye==="Point"||ye==="MultiPoint")for(let Ae=0;Ae<ae.length;Ae+=3)xe.push(ae[Ae],ae[Ae+1]),oe.numPoints++,oe.numSimplified++;else if(ye==="LineString")ei(xe,ae,oe,U,!1,!1);else if(ye==="MultiLineString"||ye==="Polygon")for(let Ae=0;Ae<ae.length;Ae++)ei(xe,ae[Ae],oe,U,ye==="Polygon",Ae===0);else if(ye==="MultiPolygon")for(let Ae=0;Ae<ae.length;Ae++){const ue=ae[Ae];for(let Le=0;Le<ue.length;Le++)ei(xe,ue[Le],oe,U,!0,Le===0)}if(xe.length){let Ae=V.tags||null;if(ye==="LineString"&&W.lineMetrics){Ae={};for(const Le in V.tags)Ae[Le]=V.tags[Le];Ae.mapbox_clip_start=ae.start/ae.size,Ae.mapbox_clip_end=ae.end/ae.size}const ue={geometry:xe,type:ye==="Polygon"||ye==="MultiPolygon"?3:ye==="LineString"||ye==="MultiLineString"?2:1,tags:Ae};V.id!==null&&(ue.id=V.id),oe.features.push(ue)}}function ei(oe,V,U,W,ae,ye){const xe=W*W;if(W>0&&V.size<(ae?xe:W))return void(U.numPoints+=V.length/3);const Ae=[];for(let ue=0;ue<V.length;ue+=3)(W===0||V[ue+2]>xe)&&(U.numSimplified++,Ae.push(V[ue],V[ue+1])),U.numPoints++;ae&&(function(ue,Le){let Xe=0;for(let Be=0,dt=ue.length,Pt=dt-2;Be<dt;Pt=Be,Be+=2)Xe+=(ue[Be]-ue[Pt])*(ue[Be+1]+ue[Pt+1]);if(Xe>0===Le)for(let Be=0,dt=ue.length;Be<dt/2;Be+=2){const Pt=ue[Be],Ot=ue[Be+1];ue[Be]=ue[dt-2-Be],ue[Be+1]=ue[dt-1-Be],ue[dt-2-Be]=Pt,ue[dt-1-Be]=Ot}})(Ae,ye),oe.push(Ae)}const jt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class $n{constructor(V,U){const W=(U=this.options=(function(ye,xe){for(const Ae in xe)ye[Ae]=xe[Ae];return ye})(Object.create(jt),U)).debug;if(W&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");let ae=(function(ye,xe){const Ae=[];if(ye.type==="FeatureCollection")for(let ue=0;ue<ye.features.length;ue++)Bn(Ae,ye.features[ue],xe,ue);else Bn(Ae,ye.type==="Feature"?ye:{geometry:ye},xe);return Ae})(V,U);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ae=(function(ye,xe){const Ae=xe.buffer/xe.extent;let ue=ye;const Le=Wi(ye,1,-1-Ae,Ae,0,-1,2,xe),Xe=Wi(ye,1,1-Ae,2+Ae,0,-1,2,xe);return(Le||Xe)&&(ue=Wi(ye,1,-Ae,1+Ae,0,-1,2,xe)||[],Le&&(ue=rt(Le,1).concat(ue)),Xe&&(ue=ue.concat(rt(Xe,-1)))),ue})(ae,U),ae.length&&this.splitTile(ae,0,0,0),W&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(V,U,W,ae,ye,xe,Ae){const ue=[V,U,W,ae],Le=this.options,Xe=Le.debug;for(;ue.length;){ae=ue.pop(),W=ue.pop(),U=ue.pop(),V=ue.pop();const Be=1<<U,dt=ur(U,W,ae);let Pt=this.tiles[dt];if(!Pt&&(Xe>1&&console.time("creation"),Pt=this.tiles[dt]=vs(V,U,W,ae,Le),this.tileCoords.push({z:U,x:W,y:ae}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,W,ae,Pt.numFeatures,Pt.numPoints,Pt.numSimplified),console.timeEnd("creation"));const Ji=`z${U}`;this.stats[Ji]=(this.stats[Ji]||0)+1,this.total++}if(Pt.source=V,ye==null){if(U===Le.indexMaxZoom||Pt.numPoints<=Le.indexMaxPoints)continue}else{if(U===Le.maxZoom||U===ye)continue;if(ye!=null){const Ji=ye-U;if(W!==xe>>Ji||ae!==Ae>>Ji)continue}}if(Pt.source=null,V.length===0)continue;Xe>1&&console.time("clipping");const Ot=.5*Le.buffer/Le.extent,ci=.5-Ot,Wt=.5+Ot,li=1+Ot;let ni=null,Qi=null,Bi=null,Ut=null,Mi=Wi(V,Be,W-Ot,W+Wt,0,Pt.minX,Pt.maxX,Le),Hi=Wi(V,Be,W+ci,W+li,0,Pt.minX,Pt.maxX,Le);V=null,Mi&&(ni=Wi(Mi,Be,ae-Ot,ae+Wt,1,Pt.minY,Pt.maxY,Le),Qi=Wi(Mi,Be,ae+ci,ae+li,1,Pt.minY,Pt.maxY,Le),Mi=null),Hi&&(Bi=Wi(Hi,Be,ae-Ot,ae+Wt,1,Pt.minY,Pt.maxY,Le),Ut=Wi(Hi,Be,ae+ci,ae+li,1,Pt.minY,Pt.maxY,Le),Hi=null),Xe>1&&console.timeEnd("clipping"),ue.push(ni||[],U+1,2*W,2*ae),ue.push(Qi||[],U+1,2*W,2*ae+1),ue.push(Bi||[],U+1,2*W+1,2*ae),ue.push(Ut||[],U+1,2*W+1,2*ae+1)}}getTile(V,U,W){V=+V,U=+U,W=+W;const ae=this.options,{extent:ye,debug:xe}=ae;if(V<0||V>24)return null;const Ae=1<<V,ue=ur(V,U=U+Ae&Ae-1,W);if(this.tiles[ue])return cr(this.tiles[ue],ye);xe>1&&console.log("drilling down to z%d-%d-%d",V,U,W);let Le,Xe=V,Be=U,dt=W;for(;!Le&&Xe>0;)Xe--,Be>>=1,dt>>=1,Le=this.tiles[ur(Xe,Be,dt)];return Le&&Le.source?(xe>1&&(console.log("found parent tile z%d-%d-%d",Xe,Be,dt),console.time("drilling down")),this.splitTile(Le.source,Xe,Be,dt,V,U,W),xe>1&&console.timeEnd("drilling down"),this.tiles[ue]?cr(this.tiles[ue],ye):null):null}}function ur(oe,V,U){return 32*((1<<oe)*U+V)+oe}function Qt(oe,V){return V?oe.properties[V]:oe.id}function la(oe,V){if(oe==null)return!0;if(oe.type==="Feature")return Qt(oe,V)!=null;if(oe.type==="FeatureCollection"){const U=new Set;for(const W of oe.features){const ae=Qt(W,V);if(ae==null||U.has(ae))return!1;U.add(ae)}return!0}return!1}function Ea(oe,V){const U=new Map;if(oe!=null)if(oe.type==="Feature")U.set(Qt(oe,V),oe);else for(const W of oe.features)U.set(Qt(W,V),W);return U}class Aa extends X{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(V,U){return M._(this,void 0,void 0,(function*(){const W=V.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ae=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!ae)return null;const ye=new class{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=M.X,this.length=Ae.length,this._features=Ae}feature(Ae){return new class{constructor(ue){this._feature=ue,this.extent=M.X,this.type=ue.type,this.properties=ue.tags,"id"in ue&&!isNaN(ue.id)&&(this.id=parseInt(ue.id,10))}loadGeometry(){if(this._feature.type===1){const ue=[];for(const Le of this._feature.geometry)ue.push([new M.P(Le[0],Le[1])]);return ue}{const ue=[];for(const Le of this._feature.geometry){const Xe=[];for(const Be of Le)Xe.push(new M.P(Be[0],Be[1]));ue.push(Xe)}return ue}}toGeoJSON(ue,Le,Xe){return _e.call(this,ue,Le,Xe)}}(this._features[Ae])}}(ae.features);let xe=Ge(ye);return xe.byteOffset===0&&xe.byteLength===xe.buffer.byteLength||(xe=new Uint8Array(xe)),{vectorTile:ye,rawData:xe.buffer}}))}loadData(V){return M._(this,void 0,void 0,(function*(){var U;(U=this._pendingRequest)===null||U===void 0||U.abort();const W=!!(V&&V.request&&V.request.collectResourceTiming)&&new M.bv(V.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(V,this._pendingRequest),this._geoJSONIndex=V.cluster?new bt((function({superclusterOptions:xe,clusterProperties:Ae}){if(!Ae||!xe)return xe;const ue={},Le={},Xe={accumulated:null,zoom:0},Be={properties:null},dt=Object.keys(Ae);for(const Pt of dt){const[Ot,ci]=Ae[Pt],Wt=M.bC(ci),li=M.bC(typeof Ot=="string"?[Ot,["accumulated"],["get",Pt]]:Ot);ue[Pt]=Wt.value,Le[Pt]=li.value}return xe.map=Pt=>{Be.properties=Pt;const Ot={};for(const ci of dt)Ot[ci]=ue[ci].evaluate(Xe,Be);return Ot},xe.reduce=(Pt,Ot)=>{Be.properties=Ot;for(const ci of dt)Xe.accumulated=Pt[ci],Pt[ci]=Le[ci].evaluate(Xe,Be)},xe})(V)).load((yield this._pendingData).features):(ae=yield this._pendingData,new $n(ae,V.geojsonVtOptions)),this.loaded={};const ye={};if(W){const xe=W.finish();xe&&(ye.resourceTiming={},ye.resourceTiming[V.source]=JSON.parse(JSON.stringify(xe)))}return ye}catch(ye){if(delete this._pendingRequest,M.bB(ye))return{abandoned:!0};throw ye}var ae}))}getData(){return M._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(V){const U=this.loaded;return U&&U[V.uid]?super.reloadTile(V):this.loadTile(V)}loadAndProcessGeoJSON(V,U){return M._(this,void 0,void 0,(function*(){let W=yield this.loadGeoJSON(V,U);if(delete this._pendingRequest,typeof W!="object")throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`);if(ce(W,!0),V.filter){const ae=M.bC(V.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map((xe=>`${xe.key}: ${xe.message}`)).join(", "));W={type:"FeatureCollection",features:W.features.filter((xe=>ae.value.evaluate({zoom:0},xe)))}}return W}))}loadGeoJSON(V,U){return M._(this,void 0,void 0,(function*(){const{promoteId:W}=V;if(V.request){const ae=yield M.h(V.request,U);return this._dataUpdateable=la(ae.data,W)?Ea(ae.data,W):void 0,ae.data}if(typeof V.data=="string")try{const ae=JSON.parse(V.data);return this._dataUpdateable=la(ae,W)?Ea(ae,W):void 0,ae}catch{throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`)}if(!V.dataDiff)throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${V.source}`);return(function(ae,ye,xe){var Ae,ue,Le,Xe;if(ye.removeAll&&ae.clear(),ye.remove)for(const Be of ye.remove)ae.delete(Be);if(ye.add)for(const Be of ye.add){const dt=Qt(Be,xe);dt!=null&&ae.set(dt,Be)}if(ye.update)for(const Be of ye.update){let dt=ae.get(Be.id);if(dt==null)continue;const Pt=!Be.removeAllProperties&&(((Ae=Be.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0||((ue=Be.addOrUpdateProperties)===null||ue===void 0?void 0:ue.length)>0);if((Be.newGeometry||Be.removeAllProperties||Pt)&&(dt=Object.assign({},dt),ae.set(Be.id,dt),Pt&&(dt.properties=Object.assign({},dt.properties))),Be.newGeometry&&(dt.geometry=Be.newGeometry),Be.removeAllProperties)dt.properties={};else if(((Le=Be.removeProperties)===null||Le===void 0?void 0:Le.length)>0)for(const Ot of Be.removeProperties)Object.prototype.hasOwnProperty.call(dt.properties,Ot)&&delete dt.properties[Ot];if(((Xe=Be.addOrUpdateProperties)===null||Xe===void 0?void 0:Xe.length)>0)for(const{key:Ot,value:ci}of Be.addOrUpdateProperties)dt.properties[Ot]=ci}})(this._dataUpdateable,V.dataDiff,W),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(V){return M._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(V){return this._geoJSONIndex.getClusterExpansionZoom(V.clusterId)}getClusterChildren(V){return this._geoJSONIndex.getChildren(V.clusterId)}getClusterLeaves(V){return this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset)}}class Rr{constructor(V){this.self=V,this.actor=new M.F(V),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(U,W)=>{if(this.externalWorkerSourceTypes[U])throw new Error(`Worker source with name "${U}" already registered.`);this.externalWorkerSourceTypes[U]=W},this.self.addProtocol=M.bi,this.self.removeProtocol=M.bj,this.self.registerRTLTextPlugin=U=>{if(M.bD.isParsed())throw new Error("RTL text plugin already registered.");M.bD.setMethods(U)},this.actor.registerMessageHandler("LDT",((U,W)=>this._getDEMWorkerSource(U,W.source).loadTile(W))),this.actor.registerMessageHandler("RDT",((U,W)=>M._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(U,W.source).removeTile(W)})))),this.actor.registerMessageHandler("GCEZ",((U,W)=>M._(this,void 0,void 0,(function*(){return this._getWorkerSource(U,W.type,W.source).getClusterExpansionZoom(W)})))),this.actor.registerMessageHandler("GCC",((U,W)=>M._(this,void 0,void 0,(function*(){return this._getWorkerSource(U,W.type,W.source).getClusterChildren(W)})))),this.actor.registerMessageHandler("GCL",((U,W)=>M._(this,void 0,void 0,(function*(){return this._getWorkerSource(U,W.type,W.source).getClusterLeaves(W)})))),this.actor.registerMessageHandler("LD",((U,W)=>this._getWorkerSource(U,W.type,W.source).loadData(W))),this.actor.registerMessageHandler("GD",((U,W)=>this._getWorkerSource(U,W.type,W.source).getData())),this.actor.registerMessageHandler("LT",((U,W)=>this._getWorkerSource(U,W.type,W.source).loadTile(W))),this.actor.registerMessageHandler("RT",((U,W)=>this._getWorkerSource(U,W.type,W.source).reloadTile(W))),this.actor.registerMessageHandler("AT",((U,W)=>this._getWorkerSource(U,W.type,W.source).abortTile(W))),this.actor.registerMessageHandler("RMT",((U,W)=>this._getWorkerSource(U,W.type,W.source).removeTile(W))),this.actor.registerMessageHandler("RS",((U,W)=>M._(this,void 0,void 0,(function*(){if(!this.workerSources[U]||!this.workerSources[U][W.type]||!this.workerSources[U][W.type][W.source])return;const ae=this.workerSources[U][W.type][W.source];delete this.workerSources[U][W.type][W.source],ae.removeSource!==void 0&&ae.removeSource(W)})))),this.actor.registerMessageHandler("RM",(U=>M._(this,void 0,void 0,(function*(){delete this.layerIndexes[U],delete this.availableImages[U],delete this.workerSources[U],delete this.demWorkerSources[U]})))),this.actor.registerMessageHandler("SR",((U,W)=>M._(this,void 0,void 0,(function*(){this.referrer=W})))),this.actor.registerMessageHandler("SRPS",((U,W)=>this._syncRTLPluginState(U,W))),this.actor.registerMessageHandler("IS",((U,W)=>M._(this,void 0,void 0,(function*(){this.self.importScripts(W)})))),this.actor.registerMessageHandler("SI",((U,W)=>this._setImages(U,W))),this.actor.registerMessageHandler("UL",((U,W)=>M._(this,void 0,void 0,(function*(){this._getLayerIndex(U).update(W.layers,W.removedIds)})))),this.actor.registerMessageHandler("SL",((U,W)=>M._(this,void 0,void 0,(function*(){this._getLayerIndex(U).replace(W)}))))}_setImages(V,U){return M._(this,void 0,void 0,(function*(){this.availableImages[V]=U;for(const W in this.workerSources[V]){const ae=this.workerSources[V][W];for(const ye in ae)ae[ye].availableImages=U}}))}_syncRTLPluginState(V,U){return M._(this,void 0,void 0,(function*(){if(M.bD.isParsed())return M.bD.getState();if(U.pluginStatus!=="loading")return M.bD.setState(U),U;const W=U.pluginURL;if(this.self.importScripts(W),M.bD.isParsed()){const ae={pluginStatus:"loaded",pluginURL:W};return M.bD.setState(ae),ae}throw M.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${W}`)}))}_getAvailableImages(V){let U=this.availableImages[V];return U||(U=[]),U}_getLayerIndex(V){let U=this.layerIndexes[V];return U||(U=this.layerIndexes[V]=new d),U}_getWorkerSource(V,U,W){if(this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][U]||(this.workerSources[V][U]={}),!this.workerSources[V][U][W]){const ae={sendAsync:(ye,xe)=>(ye.targetMapId=V,this.actor.sendAsync(ye,xe))};switch(U){case"vector":this.workerSources[V][U][W]=new X(ae,this._getLayerIndex(V),this._getAvailableImages(V));break;case"geojson":this.workerSources[V][U][W]=new Aa(ae,this._getLayerIndex(V),this._getAvailableImages(V));break;default:this.workerSources[V][U][W]=new this.externalWorkerSourceTypes[U](ae,this._getLayerIndex(V),this._getAvailableImages(V))}}return this.workerSources[V][U][W]}_getDEMWorkerSource(V,U){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][U]||(this.demWorkerSources[V][U]=new $),this.demWorkerSources[V][U]}}return M.i(self)&&(self.worker=new Rr(self)),Rr})),k("index",["exports","./shared"],(function(M,d){var G="4.7.1";let H,J;const X={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:m=>new Promise(((e,s)=>{const c=requestAnimationFrame(e);m.signal.addEventListener("abort",(()=>{cancelAnimationFrame(c),s(d.c())}))})),getImageData(m,e=0){return this.getImageCanvasContext(m).getImageData(-e,-e,m.width+2*e,m.height+2*e)},getImageCanvasContext(m){const e=window.document.createElement("canvas"),s=e.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return e.width=m.width,e.height=m.height,s.drawImage(m,0,0,m.width,m.height),s},resolveURL:m=>(H||(H=document.createElement("a")),H.href=m,H.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(J==null&&(J=matchMedia("(prefers-reduced-motion: reduce)")),J.matches)}};class ${static testProp(e){if(!$.docStyle)return e[0];for(let s=0;s<e.length;s++)if(e[s]in $.docStyle)return e[s];return e[0]}static create(e,s,c){const u=window.document.createElement(e);return s!==void 0&&(u.className=s),c&&c.appendChild(u),u}static createNS(e,s){return window.document.createElementNS(e,s)}static disableDrag(){$.docStyle&&$.selectProp&&($.userSelect=$.docStyle[$.selectProp],$.docStyle[$.selectProp]="none")}static enableDrag(){$.docStyle&&$.selectProp&&($.docStyle[$.selectProp]=$.userSelect)}static setTransform(e,s){e.style[$.transformProp]=s}static addEventListener(e,s,c,u={}){e.addEventListener(s,c,"passive"in u?u:u.capture)}static removeEventListener(e,s,c,u={}){e.removeEventListener(s,c,"passive"in u?u:u.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",$.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",$.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",$.suppressClickInternal,!0)}),0)}static getScale(e){const s=e.getBoundingClientRect();return{x:s.width/e.offsetWidth||1,y:s.height/e.offsetHeight||1,boundingClientRect:s}}static getPoint(e,s,c){const u=s.boundingClientRect;return new d.P((c.clientX-u.left)/s.x-e.clientLeft,(c.clientY-u.top)/s.y-e.clientTop)}static mousePos(e,s){const c=$.getScale(e);return $.getPoint(e,c,s)}static touchPos(e,s){const c=[],u=$.getScale(e);for(let p=0;p<s.length;p++)c.push($.getPoint(e,u,s[p]));return c}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}$.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,$.selectProp=$.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),$.transformProp=$.testProp(["transform","WebkitTransform"]);const ge={supported:!1,testSupport:function(m){!_e&&ce&&(Me?Ie(m):Se=m)}};let Se,ce,_e=!1,Me=!1;function Ie(m){const e=m.createTexture();m.bindTexture(m.TEXTURE_2D,e);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,ce),m.isContextLost())return;ge.supported=!0}catch{}m.deleteTexture(e),_e=!0}var Pe;typeof document<"u"&&(ce=document.createElement("img"),ce.onload=()=>{Se&&Ie(Se),Se=null,Me=!0},ce.onerror=()=>{_e=!0,Se=null},ce.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(m){let e,s,c,u;m.resetRequestQueue=()=>{e=[],s=0,c=0,u={}},m.addThrottleControl=z=>{const I=c++;return u[I]=z,I},m.removeThrottleControl=z=>{delete u[z],b()},m.getImage=(z,I,L=!0)=>new Promise(((O,q)=>{ge.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),d.e(z,{type:"image"}),e.push({abortController:I,requestParameters:z,supportImageRefresh:L,state:"queued",onError:Q=>{q(Q)},onSuccess:Q=>{O(Q)}}),b()}));const p=z=>d._(this,void 0,void 0,(function*(){z.state="running";const{requestParameters:I,supportImageRefresh:L,onError:O,onSuccess:q,abortController:Q}=z,te=L===!1&&!d.i(self)&&!d.g(I.url)&&(!I.headers||Object.keys(I.headers).reduce(((de,pe)=>de&&pe==="accept"),!0));s++;const ne=te?T(I,Q):d.m(I,Q);try{const de=yield ne;delete z.abortController,z.state="completed",de.data instanceof HTMLImageElement||d.b(de.data)?q(de):de.data&&q({data:yield(le=de.data,typeof createImageBitmap=="function"?d.d(le):d.f(le)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete z.abortController,O(de)}finally{s--,b()}var le})),b=()=>{const z=(()=>{for(const I of Object.keys(u))if(u[I]())return!0;return!1})()?d.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:d.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let I=s;I<z&&e.length>0;I++){const L=e.shift();L.abortController.signal.aborted?I--:p(L)}},T=(z,I)=>new Promise(((L,O)=>{const q=new Image,Q=z.url,te=z.credentials;te&&te==="include"?q.crossOrigin="use-credentials":(te&&te==="same-origin"||!d.s(Q))&&(q.crossOrigin="anonymous"),I.signal.addEventListener("abort",(()=>{q.src="",O(d.c())})),q.fetchPriority="high",q.onload=()=>{q.onerror=q.onload=null,L({data:q})},q.onerror=()=>{q.onerror=q.onload=null,I.signal.aborted||O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},q.src=Q}))})(Pe||(Pe={})),Pe.resetRequestQueue();class qe{constructor(e){this._transformRequestFn=e}transformRequest(e,s){return this._transformRequestFn&&this._transformRequestFn(e,s)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Ze(m){var e=new d.A(3);return e[0]=m[0],e[1]=m[1],e[2]=m[2],e}var mt,it=function(m,e,s){return m[0]=e[0]-s[0],m[1]=e[1]-s[1],m[2]=e[2]-s[2],m};mt=new d.A(3),d.A!=Float32Array&&(mt[0]=0,mt[1]=0,mt[2]=0);var Lt=function(m){var e=m[0],s=m[1];return e*e+s*s};function Nt(m){const e=[];if(typeof m=="string")e.push({id:"default",url:m});else if(m&&m.length>0){const s=[];for(const{id:c,url:u}of m){const p=`${c}${u}`;s.indexOf(p)===-1&&(s.push(p),e.push({id:c,url:u}))}}return e}function Gt(m,e,s){const c=m.split("?");return c[0]+=`${e}${s}`,c.join("?")}(function(){var m=new d.A(2);d.A!=Float32Array&&(m[0]=0,m[1]=0)})();class ot{constructor(e,s,c,u){this.context=e,this.format=c,this.texture=e.gl.createTexture(),this.update(s,u)}update(e,s,c){const{width:u,height:p}=e,b=!(this.size&&this.size[0]===u&&this.size[1]===p||c),{context:T}=this,{gl:z}=T;if(this.useMipmap=!!(s&&s.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!s||s.premultiply!==!1)),b)this.size=[u,p],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||d.b(e)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,e):z.texImage2D(z.TEXTURE_2D,0,this.format,u,p,0,this.format,z.UNSIGNED_BYTE,e.data);else{const{x:I,y:L}=c||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||d.b(e)?z.texSubImage2D(z.TEXTURE_2D,0,I,L,z.RGBA,z.UNSIGNED_BYTE,e):z.texSubImage2D(z.TEXTURE_2D,0,I,L,u,p,z.RGBA,z.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(e,s,c){const{context:u}=this,{gl:p}=u;p.bindTexture(p.TEXTURE_2D,this.texture),c!==p.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=p.LINEAR),e!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,e),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,c||e),this.filter=e),s!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,s),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function lt(m){const{userImage:e}=m;return!!(e&&e.render&&e.render())&&(m.data.replace(new Uint8Array(e.data.buffer)),!0)}class Ft extends d.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new d.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:s,promiseResolve:c}of this.requestors)c(this._getImagesForIds(s));this.requestors=[]}}getImage(e){const s=this.images[e];if(s&&!s.data&&s.spriteData){const c=s.spriteData;s.data=new d.R({width:c.width,height:c.height},c.context.getImageData(c.x,c.y,c.width,c.height).data),s.spriteData=null}return s}addImage(e,s){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,s)&&(this.images[e]=s)}_validate(e,s){let c=!0;const u=s.data||s.spriteData;return this._validateStretch(s.stretchX,u&&u.width)||(this.fire(new d.j(new Error(`Image "${e}" has invalid "stretchX" value`))),c=!1),this._validateStretch(s.stretchY,u&&u.height)||(this.fire(new d.j(new Error(`Image "${e}" has invalid "stretchY" value`))),c=!1),this._validateContent(s.content,s)||(this.fire(new d.j(new Error(`Image "${e}" has invalid "content" value`))),c=!1),c}_validateStretch(e,s){if(!e)return!0;let c=0;for(const u of e){if(u[0]<c||u[1]<u[0]||s<u[1])return!1;c=u[1]}return!0}_validateContent(e,s){if(!e)return!0;if(e.length!==4)return!1;const c=s.spriteData,u=c&&c.width||s.data.width,p=c&&c.height||s.data.height;return!(e[0]<0||u<e[0]||e[1]<0||p<e[1]||e[2]<0||u<e[2]||e[3]<0||p<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,s,c=!0){const u=this.getImage(e);if(c&&(u.data.width!==s.data.width||u.data.height!==s.data.height))throw new Error(`size mismatch between old image (${u.data.width}x${u.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=u.version+1,this.images[e]=s,this.updatedImages[e]=!0}removeImage(e){const s=this.images[e];delete this.images[e],delete this.patterns[e],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((s,c)=>{let u=!0;if(!this.isLoaded())for(const p of e)this.images[p]||(u=!1);this.isLoaded()||u?s(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:s})}))}_getImagesForIds(e){const s={};for(const c of e){let u=this.getImage(c);u||(this.fire(new d.k("styleimagemissing",{id:c})),u=this.getImage(c)),u?s[c]={data:u.data.clone(),pixelRatio:u.pixelRatio,sdf:u.sdf,version:u.version,stretchX:u.stretchX,stretchY:u.stretchY,content:u.content,textFitWidth:u.textFitWidth,textFitHeight:u.textFitHeight,hasRenderCallback:!!(u.userImage&&u.userImage.render)}:d.w(`Image "${c}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return s}getPixelSize(){const{width:e,height:s}=this.atlasImage;return{width:e,height:s}}getPattern(e){const s=this.patterns[e],c=this.getImage(e);if(!c)return null;if(s&&s.position.version===c.version)return s.position;if(s)s.position.version=c.version;else{const u={w:c.data.width+2,h:c.data.height+2,x:0,y:0},p=new d.I(u,c);this.patterns[e]={bin:u,position:p}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const s=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ot(e,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const p in this.patterns)e.push(this.patterns[p].bin);const{w:s,h:c}=d.p(e),u=this.atlasImage;u.resize({width:s||1,height:c||1});for(const p in this.patterns){const{bin:b}=this.patterns[p],T=b.x+1,z=b.y+1,I=this.getImage(p).data,L=I.width,O=I.height;d.R.copy(I,u,{x:0,y:0},{x:T,y:z},{width:L,height:O}),d.R.copy(I,u,{x:0,y:O-1},{x:T,y:z-1},{width:L,height:1}),d.R.copy(I,u,{x:0,y:0},{x:T,y:z+O},{width:L,height:1}),d.R.copy(I,u,{x:L-1,y:0},{x:T-1,y:z},{width:1,height:O}),d.R.copy(I,u,{x:0,y:0},{x:T+L,y:z},{width:1,height:O})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const s of e){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const c=this.getImage(s);c||d.w(`Image with ID: "${s}" was not found`),lt(c)&&this.updateImage(s,c)}}}const Rt=1e20;function qt(m,e,s,c,u,p,b,T,z){for(let I=e;I<e+c;I++)De(m,s*p+I,p,u,b,T,z);for(let I=s;I<s+u;I++)De(m,I*p+e,1,c,b,T,z)}function De(m,e,s,c,u,p,b){p[0]=0,b[0]=-Rt,b[1]=Rt,u[0]=m[e];for(let T=1,z=0,I=0;T<c;T++){u[T]=m[e+T*s];const L=T*T;do{const O=p[z];I=(u[T]-u[O]+L-O*O)/(T-O)/2}while(I<=b[z]&&--z>-1);z++,p[z]=T,b[z]=I,b[z+1]=Rt}for(let T=0,z=0;T<c;T++){for(;b[z+1]<T;)z++;const I=p[z],L=T-I;m[e+T*s]=u[I]+L*L}}class Ge{constructor(e,s){this.requestManager=e,this.localIdeographFontFamily=s,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return d._(this,void 0,void 0,(function*(){const s=[];for(const p in e)for(const b of e[p])s.push(this._getAndCacheGlyphsPromise(p,b));const c=yield Promise.all(s),u={};for(const{stack:p,id:b,glyph:T}of c)u[p]||(u[p]={}),u[p][b]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return u}))}_getAndCacheGlyphsPromise(e,s){return d._(this,void 0,void 0,(function*(){let c=this.entries[e];c||(c=this.entries[e]={glyphs:{},requests:{},ranges:{}});let u=c.glyphs[s];if(u!==void 0)return{stack:e,id:s,glyph:u};if(u=this._tinySDF(c,e,s),u)return c.glyphs[s]=u,{stack:e,id:s,glyph:u};const p=Math.floor(s/256);if(256*p>65535)throw new Error("glyphs > 65535 not supported");if(c.ranges[p])return{stack:e,id:s,glyph:u};if(!this.url)throw new Error("glyphsUrl is not set");if(!c.requests[p]){const T=Ge.loadGlyphRange(e,p,this.url,this.requestManager);c.requests[p]=T}const b=yield c.requests[p];for(const T in b)this._doesCharSupportLocalGlyph(+T)||(c.glyphs[+T]=b[+T]);return c.ranges[p]=!0,{stack:e,id:s,glyph:b[s]||null}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,s,c){const u=this.localIdeographFontFamily;if(!u||!this._doesCharSupportLocalGlyph(c))return;let p=e.tinySDF;if(!p){let T="400";/bold/i.test(s)?T="900":/medium/i.test(s)?T="500":/light/i.test(s)&&(T="200"),p=e.tinySDF=new Ge.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:u,fontWeight:T})}const b=p.draw(String.fromCharCode(c));return{id:c,bitmap:new d.o({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ge.loadGlyphRange=function(m,e,s,c){return d._(this,void 0,void 0,(function*(){const u=256*e,p=u+255,b=c.transformRequest(s.replace("{fontstack}",m).replace("{range}",`${u}-${p}`),"Glyphs"),T=yield d.l(b,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${e}, ${u}-${p}`);const z={};for(const I of d.n(T.data))z[I.id]=I;return z}))},Ge.TinySDF=class{constructor({fontSize:m=24,buffer:e=3,radius:s=8,cutoff:c=.25,fontFamily:u="sans-serif",fontWeight:p="normal",fontStyle:b="normal"}={}){this.buffer=e,this.cutoff=c,this.radius=s;const T=this.size=m+4*e,z=this._createCanvas(T),I=this.ctx=z.getContext("2d",{willReadFrequently:!0});I.font=`${b} ${p} ${m}px ${u}`,I.textBaseline="alphabetic",I.textAlign="left",I.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(m){const e=document.createElement("canvas");return e.width=e.height=m,e}draw(m){const{width:e,actualBoundingBoxAscent:s,actualBoundingBoxDescent:c,actualBoundingBoxLeft:u,actualBoundingBoxRight:p}=this.ctx.measureText(m),b=Math.ceil(s),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(p-u))),z=Math.min(this.size-this.buffer,b+Math.ceil(c)),I=T+2*this.buffer,L=z+2*this.buffer,O=Math.max(I*L,0),q=new Uint8ClampedArray(O),Q={data:q,width:I,height:L,glyphWidth:T,glyphHeight:z,glyphTop:b,glyphLeft:0,glyphAdvance:e};if(T===0||z===0)return Q;const{ctx:te,buffer:ne,gridInner:le,gridOuter:de}=this;te.clearRect(ne,ne,T,z),te.fillText(m,ne,ne+b);const pe=te.getImageData(ne,ne,T,z);de.fill(Rt,0,O),le.fill(0,0,O);for(let re=0;re<z;re++)for(let ve=0;ve<T;ve++){const Te=pe.data[4*(re*T+ve)+3]/255;if(Te===0)continue;const Re=(re+ne)*I+ve+ne;if(Te===1)de[Re]=0,le[Re]=Rt;else{const $e=.5-Te;de[Re]=$e>0?$e*$e:0,le[Re]=$e<0?$e*$e:0}}qt(de,0,0,I,L,I,this.f,this.v,this.z),qt(le,ne,ne,T,z,I,this.f,this.v,this.z);for(let re=0;re<O;re++){const ve=Math.sqrt(de[re])-Math.sqrt(le[re]);q[re]=Math.round(255-255*(ve/this.radius+this.cutoff))}return Q}};class Qe{constructor(){this.specification=d.v.light.position}possiblyEvaluate(e,s){return d.x(e.expression.evaluate(s))}interpolate(e,s,c){return{x:d.y.number(e.x,s.x,c),y:d.y.number(e.y,s.y,c),z:d.y.number(e.z,s.z,c)}}}let Mt;class se extends d.E{constructor(e){super(),Mt=Mt||new d.q({anchor:new d.D(d.v.light.anchor),position:new Qe,color:new d.D(d.v.light.color),intensity:new d.D(d.v.light.intensity)}),this._transitionable=new d.T(Mt),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,s={}){if(!this._validate(d.r,e,s))for(const c in e){const u=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),u):this._transitionable.setValue(c,u)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,s,c){return(!c||c.validate!==!1)&&d.t(this,e.call(d.u,{value:s,style:{glyphs:!0,sprite:!0},styleSpec:d.v}))}}const je=new d.q({"sky-color":new d.D(d.v.sky["sky-color"]),"horizon-color":new d.D(d.v.sky["horizon-color"]),"fog-color":new d.D(d.v.sky["fog-color"]),"fog-ground-blend":new d.D(d.v.sky["fog-ground-blend"]),"horizon-fog-blend":new d.D(d.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new d.D(d.v.sky["sky-horizon-blend"]),"atmosphere-blend":new d.D(d.v.sky["atmosphere-blend"])});class Je extends d.E{constructor(e){super(),this._transitionable=new d.T(je),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new d.z(0))}setSky(e,s={}){if(!this._validate(d.B,e,s)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const c in e){const u=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),u):this._transitionable.setValue(c,u)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,s,c={}){return c?.validate!==!1&&d.t(this,e.call(d.u,d.e({value:s,style:{glyphs:!0,sprite:!0},styleSpec:d.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class st{constructor(e,s){this.width=e,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,s){const c=e.join(",")+String(s);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(e,s)),this.dashEntry[c]}getDashRanges(e,s,c){const u=[];let p=e.length%2==1?-e[e.length-1]*c:0,b=e[0]*c,T=!0;u.push({left:p,right:b,isDash:T,zeroLength:e[0]===0});let z=e[0];for(let I=1;I<e.length;I++){T=!T;const L=e[I];p=z*c,z+=L,b=z*c,u.push({left:p,right:b,isDash:T,zeroLength:L===0})}return u}addRoundDash(e,s,c){const u=s/2;for(let p=-c;p<=c;p++){const b=this.width*(this.nextRow+c+p);let T=0,z=e[T];for(let I=0;I<this.width;I++){I/z.right>1&&(z=e[++T]);const L=Math.abs(I-z.left),O=Math.abs(I-z.right),q=Math.min(L,O);let Q;const te=p/c*(u+1);if(z.isDash){const ne=u-Math.abs(te);Q=Math.sqrt(q*q+ne*ne)}else Q=u-Math.sqrt(q*q+te*te);this.data[b+I]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(e){for(let T=e.length-1;T>=0;--T){const z=e[T],I=e[T+1];z.zeroLength?e.splice(T,1):I&&I.isDash===z.isDash&&(I.left=z.left,e.splice(T,1))}const s=e[0],c=e[e.length-1];s.isDash===c.isDash&&(s.left=c.left-this.width,c.right=s.right+this.width);const u=this.width*this.nextRow;let p=0,b=e[p];for(let T=0;T<this.width;T++){T/b.right>1&&(b=e[++p]);const z=Math.abs(T-b.left),I=Math.abs(T-b.right),L=Math.min(z,I);this.data[u+T]=Math.max(0,Math.min(255,(b.isDash?L:-L)+128))}}addDash(e,s){const c=s?7:0,u=2*c+1;if(this.nextRow+u>this.height)return d.w("LineAtlas out of space"),null;let p=0;for(let T=0;T<e.length;T++)p+=e[T];if(p!==0){const T=this.width/p,z=this.getDashRanges(e,this.width,T);s?this.addRoundDash(z,T,c):this.addRegularDash(z)}const b={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:p};return this.nextRow+=u,this.dirty=!0,b}bind(e){const s=e.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}const bt="maplibre_preloaded_worker_pool";class $t{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<$t.workerCount;)this.workers.push(new Worker(d.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach((s=>{s.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[bt]}numActive(){return Object.keys(this.active).length}}const Et=Math.floor(X.hardwareConcurrency/2);let Tt,Ct;function Ii(){return Tt||(Tt=new $t),Tt}$t.workerCount=d.C(globalThis)?Math.max(Math.min(Et,3),1):1;class pi{constructor(e,s){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=s;const c=this.workerPool.acquire(s);for(let u=0;u<c.length;u++){const p=new d.F(c[u],s);p.name=`Worker ${u}`,this.actors.push(p)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,s){const c=[];for(const u of this.actors)c.push(u.sendAsync({type:e,data:s}));return Promise.all(c)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach((s=>{s.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,s){for(const c of this.actors)c.registerMessageHandler(e,s)}}function Si(){return Ct||(Ct=new pi(Ii(),d.G),Ct.registerMessageHandler("GR",((m,e,s)=>d.m(e,s)))),Ct}function Ti(m,e){const s=d.H();return d.J(s,s,[1,1,0]),d.K(s,s,[.5*m.width,.5*m.height,1]),d.L(s,s,m.calculatePosMatrix(e.toUnwrapped()))}function an(m,e,s,c,u,p){const b=(function(O,q,Q){if(O)for(const te of O){const ne=q[te];if(ne&&ne.source===Q&&ne.type==="fill-extrusion")return!0}else for(const te in q){const ne=q[te];if(ne.source===Q&&ne.type==="fill-extrusion")return!0}return!1})(u&&u.layers,e,m.id),T=p.maxPitchScaleFactor(),z=m.tilesIn(c,T,b);z.sort(Bn);const I=[];for(const O of z)I.push({wrappedTileID:O.tileID.wrapped().key,queryResults:O.tile.queryRenderedFeatures(e,s,m._state,O.queryGeometry,O.cameraQueryGeometry,O.scale,u,p,T,Ti(m.transform,O.tileID))});const L=(function(O){const q={},Q={};for(const te of O){const ne=te.queryResults,le=te.wrappedTileID,de=Q[le]=Q[le]||{};for(const pe in ne){const re=ne[pe],ve=de[pe]=de[pe]||{},Te=q[pe]=q[pe]||[];for(const Re of re)ve[Re.featureIndex]||(ve[Re.featureIndex]=!0,Te.push(Re))}}return q})(I);for(const O in L)L[O].forEach((q=>{const Q=q.feature,te=m.getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=te}));return L}function Bn(m,e){const s=m.tileID,c=e.tileID;return s.overscaledZ-c.overscaledZ||s.canonical.y-c.canonical.y||s.wrap-c.wrap||s.canonical.x-c.canonical.x}function wa(m,e,s){return d._(this,void 0,void 0,(function*(){let c=m;if(m.url?c=(yield d.h(e.transformRequest(m.url,"Source"),s)).data:yield X.frameAsync(s),!c)return null;const u=d.M(d.e(c,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in c&&c.vector_layers&&(u.vectorLayerIds=c.vector_layers.map((p=>p.id))),u}))}class Ne{constructor(e,s){e&&(s?this.setSouthWest(e).setNorthEast(s):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof d.N?new d.N(e.lng,e.lat):d.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof d.N?new d.N(e.lng,e.lat):d.N.convert(e),this}extend(e){const s=this._sw,c=this._ne;let u,p;if(e instanceof d.N)u=e,p=e;else{if(!(e instanceof Ne))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ne.convert(e)):this.extend(d.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(d.N.convert(e)):this;if(u=e._sw,p=e._ne,!u||!p)return this}return s||c?(s.lng=Math.min(u.lng,s.lng),s.lat=Math.min(u.lat,s.lat),c.lng=Math.max(p.lng,c.lng),c.lat=Math.max(p.lat,c.lat)):(this._sw=new d.N(u.lng,u.lat),this._ne=new d.N(p.lng,p.lat)),this}getCenter(){return new d.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new d.N(this.getWest(),this.getNorth())}getSouthEast(){return new d.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:s,lat:c}=d.N.convert(e);let u=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&u}static convert(e){return e instanceof Ne?e:e&&new Ne(e)}static fromLngLat(e,s=0){const c=360*s/40075017,u=c/Math.cos(Math.PI/180*e.lat);return new Ne(new d.N(e.lng-u,e.lat-c),new d.N(e.lng+u,e.lat+c))}adjustAntiMeridian(){const e=new d.N(this._sw.lng,this._sw.lat),s=new d.N(this._ne.lng,this._ne.lat);return new Ne(e,e.lng>s.lng?new d.N(s.lng+360,s.lat):s)}}class An{constructor(e,s,c){this.bounds=Ne.convert(this.validateBounds(e)),this.minzoom=s||0,this.maxzoom=c||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const s=Math.pow(2,e.z),c=Math.floor(d.O(this.bounds.getWest())*s),u=Math.floor(d.Q(this.bounds.getNorth())*s),p=Math.ceil(d.O(this.bounds.getEast())*s),b=Math.ceil(d.Q(this.bounds.getSouth())*s);return e.x>=c&&e.x<p&&e.y>=u&&e.y<b}}class Nl extends d.E{constructor(e,s,c,u){if(super(),this.id=e,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,d.e(this,d.M(s,["url","scheme","tileSize","promoteId"])),this._options=d.e({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(u)}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield wa(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(d.e(this,e),e.bounds&&(this.tileBounds=new An(e.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new d.j(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return d.e({},this._options)}loadTile(e){return d._(this,void 0,void 0,(function*(){const s=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c={request:this.map._requestManager.transformRequest(s,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request.collectResourceTiming=this._collectResourceTiming;let u="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise(((p,b)=>{e.reloadPromise={resolve:p,reject:b}}))}else e.actor=this.dispatcher.getActor(),u="LT";e.abortController=new AbortController;try{const p=yield e.actor.sendAsync({type:u,data:c},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,p)}catch(p){if(delete e.abortController,e.aborted)return;if(p&&p.status!==404)throw p;this._afterTileLoadWorkerResponse(e,null)}}))}_afterTileLoadWorkerResponse(e,s){if(s&&s.resourceTiming&&(e.resourceTiming=s.resourceTiming),s&&this.map._refreshExpiredTiles&&e.setExpiryData(s),e.loadVectorData(s,this.map.painter),e.reloadPromise){const c=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(c.resolve).catch(c.reject)}}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class xi extends d.E{constructor(e,s,c,u){super(),this.id=e,this.dispatcher=c,this.setEventedParent(u),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=d.e({type:"raster"},s),d.e(this,d.M(s,["url","scheme","tileSize"]))}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield wa(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(d.e(this,e),e.bounds&&(this.tileBounds=new An(e.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new d.j(e))}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return d.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return d._(this,void 0,void 0,(function*(){const s=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const c=yield Pe.getImage(this.map._requestManager.transformRequest(s,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(c&&c.data){this.map._refreshExpiredTiles&&c.cacheControl&&c.expires&&e.setExpiryData({cacheControl:c.cacheControl,expires:c.expires});const u=this.map.painter.context,p=u.gl,b=c.data;e.texture=this.map.painter.getTileTexture(b.width),e.texture?e.texture.update(b,{useMipmap:!0}):(e.texture=new ot(u,b,p.RGBA,{useMipmap:!0}),e.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE,p.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(c){if(delete e.abortController,e.aborted)e.state="unloaded";else if(c)throw e.state="errored",c}}))}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class Wi extends xi{constructor(e,s,c,u){super(e,s,c,u),this.type="raster-dem",this.maxzoom=22,this._options=d.e({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox",this.redFactor=s.redFactor,this.greenFactor=s.greenFactor,this.blueFactor=s.blueFactor,this.baseShift=s.baseShift}loadTile(e){return d._(this,void 0,void 0,(function*(){const s=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c=this.map._requestManager.transformRequest(s,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const u=yield Pe.getImage(c,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(u&&u.data){const p=u.data;this.map._refreshExpiredTiles&&u.cacheControl&&u.expires&&e.setExpiryData({cacheControl:u.cacheControl,expires:u.expires});const b=d.b(p)&&d.U()?p:yield this.readImageNow(p),T={type:this.type,uid:e.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const z=yield e.actor.sendAsync({type:"LDT",data:T});e.dem=z,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(u){if(delete e.abortController,e.aborted)e.state="unloaded";else if(u)throw e.state="errored",u}}))}readImageNow(e){return d._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&d.V()){const s=e.width+2,c=e.height+2;try{return new d.R({width:s,height:c},yield d.W(e,-1,-1,s,c))}catch{}}return X.getImageData(e,1)}))}_getNeighboringTiles(e){const s=e.canonical,c=Math.pow(2,s.z),u=(s.x-1+c)%c,p=s.x===0?e.wrap-1:e.wrap,b=(s.x+1+c)%c,T=s.x+1===c?e.wrap+1:e.wrap,z={};return z[new d.S(e.overscaledZ,p,s.z,u,s.y).key]={backfilled:!1},z[new d.S(e.overscaledZ,T,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(z[new d.S(e.overscaledZ,p,s.z,u,s.y-1).key]={backfilled:!1},z[new d.S(e.overscaledZ,e.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},z[new d.S(e.overscaledZ,T,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<c&&(z[new d.S(e.overscaledZ,p,s.z,u,s.y+1).key]={backfilled:!1},z[new d.S(e.overscaledZ,e.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},z[new d.S(e.overscaledZ,T,s.z,b,s.y+1).key]={backfilled:!1}),z}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}class ys extends d.E{constructor(e,s,c,u){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=c.getActor(),this.setEventedParent(u),this._data=s.data,this._options=d.e({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const p=d.X/this.tileSize;s.clusterMaxZoom!==void 0&&this.maxzoom<=s.clusterMaxZoom&&d.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${s.clusterMaxZoom}".`),this.workerOptions=d.e({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*p,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*p,extent:d.X,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:d.X,radius:(s.clusterRadius||50)*p,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return d._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return d._(this,void 0,void 0,(function*(){const e=d.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,s,c){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:s,offset:c}})}_updateWorkerData(e){return d._(this,void 0,void 0,(function*(){const s=d.e({type:this.type},this.workerOptions);e?s.dataDiff=e:typeof this._data=="string"?(s.request=this.map._requestManager.transformRequest(X.resolveURL(this._data),"Source"),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new d.k("dataloading",{dataType:"source"}));try{const c=yield this.actor.sendAsync({type:"LD",data:s});if(this._pendingLoads--,this._removed||c.abandoned)return void this.fire(new d.k("dataabort",{dataType:"source"}));let u=null;c.resourceTiming&&c.resourceTiming[this.id]&&(u=c.resourceTiming[this.id].slice(0));const p={dataType:"source"};this._collectResourceTiming&&u&&u.length>0&&d.e(p,{resourceTiming:u}),this.fire(new d.k("data",Object.assign(Object.assign({},p),{sourceDataType:"metadata"}))),this.fire(new d.k("data",Object.assign(Object.assign({},p),{sourceDataType:"content"})))}catch(c){if(this._pendingLoads--,this._removed)return void this.fire(new d.k("dataabort",{dataType:"source"}));this.fire(new d.j(c))}}))}loaded(){return this._pendingLoads===0}loadTile(e){return d._(this,void 0,void 0,(function*(){const s=e.actor?"RT":"LT";e.actor=this.actor;const c={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const u=yield this.actor.sendAsync({type:s,data:c},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(u,this.map.painter,s==="RT")}))}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return d.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _s=d.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Sa extends d.E{constructor(e,s,c,u){super(),this.id=e,this.dispatcher=c,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(u),this.options=s}load(e){return d._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const s=yield Pe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,s&&s.data&&(this.image=s.data,e&&(this.coordinates=e),this._finishLoading())}catch(s){this._request=null,this._loaded=!0,this.fire(new d.j(s))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const s=e.map(d.Z.fromLngLat);this.tileID=(function(u){let p=1/0,b=1/0,T=-1/0,z=-1/0;for(const q of u)p=Math.min(p,q.x),b=Math.min(b,q.y),T=Math.max(T,q.x),z=Math.max(z,q.y);const I=Math.max(T-p,z-b),L=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),O=Math.pow(2,L);return new d.a1(L,Math.floor((p+T)/2*O),Math.floor((b+z)/2*O))})(s),this.minzoom=this.maxzoom=this.tileID.z;const c=s.map((u=>this.tileID.getTilePoint(u)._round()));return this._boundsArray=new d.$,this._boundsArray.emplaceBack(c[0].x,c[0].y,0,0),this._boundsArray.emplaceBack(c[1].x,c[1].y,d.X,0),this._boundsArray.emplaceBack(c[3].x,c[3].y,0,d.X),this._boundsArray.emplaceBack(c[2].x,c[2].y,d.X,d.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,s=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,_s.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ot(e,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let c=!1;for(const u in this.tiles){const p=this.tiles[u];p.state!=="loaded"&&(p.state="loaded",p.texture=this.texture,c=!0)}c&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return d._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ko extends Sa{constructor(e,s,c,u){super(e,s,c,u),this.roundZoom=!0,this.type="video",this.options=s}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const s of e.urls)this.urls.push(this.map._requestManager.transformRequest(s,"Source").url);try{const s=yield d.a3(this.urls);if(this._loaded=!0,!s)return;this.video=s,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(s){this.fire(new d.j(s))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const s=this.video.seekable;e<s.start(0)||e>s.end(0)?this.fire(new d.j(new d.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,s=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,_s.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new ot(e,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let c=!1;for(const u in this.tiles){const p=this.tiles[u];p.state!=="loaded"&&(p.state="loaded",p.texture=this.texture,c=!0)}c&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Yr extends Sa{constructor(e,s,c,u){super(e,s,c,u),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some((p=>!Array.isArray(p)||p.length!==2||p.some((b=>typeof b!="number"))))||this.fire(new d.j(new d.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new d.j(new d.a2(`sources.${e}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new d.j(new d.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new d.j(new d.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new d.j(new d.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new d.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,c=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,_s.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ot(s,this.canvas,c.RGBA,{premultiply:!0});let u=!1;for(const p in this.tiles){const b=this.tiles[p];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,u=!0)}u&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Ha={},Gn=m=>{switch(m){case"geojson":return ys;case"image":return Sa;case"raster":return xi;case"raster-dem":return Wi;case"vector":return Nl;case"video":return ko;case"canvas":return Yr}return Ha[m]},rt="RTLPluginLoaded";class un extends d.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Si()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((s=>{throw this.status="error",s}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return d._(this,arguments,void 0,(function*(s,c=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=X.resolveURL(s),!this.url)throw new Error(`requested url ${s} is invalid`);if(this.status==="unavailable"){if(!c)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return d._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new d.k(rt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let cr=null;function Ta(){return cr||(cr=new un),cr}class vs{constructor(e,s){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=d.a4(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const s=e+this.timeAdded;s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,s,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=(function(u,p){const b={};if(!p)return b;for(const T of u){const z=T.layerIds.map((I=>p.getLayer(I))).filter(Boolean);if(z.length!==0){T.layers=z,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map((I=>z.filter((L=>L.id===I))[0])));for(const I of z)b[I.id]=T}}return b})(e.buckets,s.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const p=this.buckets[u];if(p instanceof d.a6){if(this.hasSymbolBuckets=!0,!c)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const p=this.buckets[u];if(p instanceof d.a6&&p.hasRTLText){this.hasRTLText=!0,Ta().lazyLoad();break}}this.queryPadding=0;for(const u in this.buckets){const p=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(u).queryRadius(p))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new d.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const c in this.buckets){const u=this.buckets[c];u.uploadPending()&&u.upload(e)}const s=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ot(e,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ot(e,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,s,c,u,p,b,T,z,I,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:p,scale:b,tileSize:this.tileSize,pixelPosMatrix:L,transform:z,params:T,queryPadding:this.queryPadding*I},e,s,c):{}}querySourceFeatures(e,s){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const u=c.loadVTLayers(),p=s&&s.sourceLayer?s.sourceLayer:"",b=u._geojsonTileLayer||u[p];if(!b)return;const T=d.a7(s&&s.filter),{z,x:I,y:L}=this.tileID.canonical,O={z,x:I,y:L};for(let q=0;q<b.length;q++){const Q=b.feature(q);if(T.needGeometry){const le=d.a8(Q,!0);if(!T.filter(new d.z(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!T.filter(new d.z(this.tileID.overscaledZ),Q))continue;const te=c.getId(Q,p),ne=new d.a9(Q,z,I,L,te);ne.tile=O,e.push(ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const s=this.expirationTime;if(e.cacheControl){const c=d.aa(e.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const c=Date.now();let u=!1;if(this.expirationTime>c)u=!1;else if(s)if(this.expirationTime<s)u=!0;else{const p=this.expirationTime-s;p?this.expirationTime=c+Math.max(p,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const c=this.latestFeatureIndex.loadVTLayers();for(const u in this.buckets){if(!s.style.hasLayer(u))continue;const p=this.buckets[u],b=p.layers[0].sourceLayer||"_geojsonTileLayer",T=c[b],z=e[b];if(!T||!z||Object.keys(z).length===0)continue;p.update(z,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const I=s&&s.style&&s.style.getLayer(u);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(p)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<X.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=X.now()+e}setDependencies(e,s){const c={};for(const u of s)c[u]=!0;this.dependencies[e]=c}hasDependency(e,s){for(const c of e){const u=this.dependencies[c];if(u){for(const p of s)if(u[p])return!0}}return!1}}class ht{constructor(e,s){this.max=e,this.onRemove=s,this.reset()}reset(){for(const e in this.data)for(const s of this.data[e])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(e,s,c){const u=e.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const p={value:s,timeout:void 0};if(c!==void 0&&(p.timeout=setTimeout((()=>{this.remove(e,p)}),c)),this.data[u].push(p),this.order.push(u),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const s=this.data[e].shift();return s.timeout&&clearTimeout(s.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),s.value}getByKey(e){const s=this.data[e];return s?s[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,s){if(!this.has(e))return this;const c=e.wrapped().key,u=s===void 0?0:this.data[c].indexOf(s),p=this.data[c][u];return this.data[c].splice(u,1),p.timeout&&clearTimeout(p.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(p.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(e){const s=[];for(const c in this.data)for(const u of this.data[c])e(u.value)||s.push(u);for(const c of s)this.remove(c.value.tileID,c)}}class ei{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,s,c){const u=String(s);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},d.e(this.stateChanges[e][u],c),this.deletedStates[e]===null){this.deletedStates[e]={};for(const p in this.state[e])p!==u&&(this.deletedStates[e][p]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][u]===null){this.deletedStates[e][u]={};for(const p in this.state[e][u])c[p]||(this.deletedStates[e][u][p]=null)}else for(const p in c)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][p]===null&&delete this.deletedStates[e][u][p]}removeFeatureState(e,s,c){if(this.deletedStates[e]===null)return;const u=String(s);if(this.deletedStates[e]=this.deletedStates[e]||{},c&&s!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][c]=null);else if(s!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(c in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][c]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,s){const c=String(s),u=d.e({},(this.state[e]||{})[c],(this.stateChanges[e]||{})[c]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const p=this.deletedStates[e][s];if(p===null)return{};for(const b in p)delete u[b]}return u}initializeTileState(e,s){e.setFeatureState(this.state,s)}coalesceChanges(e,s){const c={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const p={};for(const b in this.stateChanges[u])this.state[u][b]||(this.state[u][b]={}),d.e(this.state[u][b],this.stateChanges[u][b]),p[b]=this.state[u][b];c[u]=p}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const p={};if(this.deletedStates[u]===null)for(const b in this.state[u])p[b]={},this.state[u][b]={};else for(const b in this.deletedStates[u]){if(this.deletedStates[u][b]===null)this.state[u][b]={};else for(const T of Object.keys(this.deletedStates[u][b]))delete this.state[u][b][T];p[b]=this.state[u][b]}c[u]=c[u]||{},d.e(c[u],p)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const u in e)e[u].setFeatureState(c,s)}}class jt extends d.E{constructor(e,s,c){super(),this.id=e,this.dispatcher=c,this.on("data",(u=>this._dataHandler(u))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((u,p,b,T)=>{const z=new(Gn(p.type))(u,p,b,T);if(z.id!==u)throw new Error(`Expected Source id to be ${u} instead of ${z.id}`);return z})(e,s,c,this),this._tiles={},this._cache=new ht(0,(u=>this._unloadTile(u))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ei,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const s=this._tiles[e];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,s,c){return d._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,s,c)}catch(u){e.state="errored",u.status!==404?this._source.fire(new d.j(u,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new d.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const c=this._tiles[s];c.upload(e),c.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort($n).map((e=>e.key))}getRenderableIds(e){const s=[];for(const c in this._tiles)this._isIdRenderable(c,e)&&s.push(this._tiles[c]);return e?s.sort(((c,u)=>{const p=c.tileID,b=u.tileID,T=new d.P(p.canonical.x,p.canonical.y)._rotate(this.transform.angle),z=new d.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return p.overscaledZ-b.overscaledZ||z.y-T.y||z.x-T.x})).map((c=>c.tileID.key)):s.map((c=>c.tileID)).sort($n).map((c=>c.key))}hasRenderableParent(e){const s=this.findLoadedParent(e,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(e,s){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(s||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,s){return d._(this,void 0,void 0,(function*(){const c=this._tiles[e];c&&(c.state!=="loading"&&(c.state=s),yield this._loadTile(c,e,s))}))}_tileLoaded(e,s,c){e.timeAdded=X.now(),c==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(s,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new d.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const s=this.getRenderableIds();for(let u=0;u<s.length;u++){const p=s[u];if(e.neighboringTiles&&e.neighboringTiles[p]){const b=this.getTileByID(p);c(e,b),c(b,e)}}function c(u,p){u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0;let b=p.tileID.canonical.x-u.tileID.canonical.x;const T=p.tileID.canonical.y-u.tileID.canonical.y,z=Math.pow(2,u.tileID.canonical.z),I=p.tileID.key;b===0&&T===0||Math.abs(T)>1||(Math.abs(b)>1&&(Math.abs(b+z)===1?b+=z:Math.abs(b-z)===1&&(b-=z)),p.dem&&u.dem&&(u.dem.backfillBorder(p.dem,b,T),u.neighboringTiles&&u.neighboringTiles[I]&&(u.neighboringTiles[I].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,s,c,u){for(const p in this._tiles){let b=this._tiles[p];if(u[p]||!b.hasData()||b.tileID.overscaledZ<=s||b.tileID.overscaledZ>c)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>s+1;){const I=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[I.key],b&&b.hasData()&&(T=I)}let z=T;for(;z.overscaledZ>s;)if(z=z.scaledTo(z.overscaledZ-1),e[z.key]){u[T.key]=T;break}}}findLoadedParent(e,s){if(e.key in this._loadedParentTiles){const c=this._loadedParentTiles[e.key];return c&&c.tileID.overscaledZ>=s?c:null}for(let c=e.overscaledZ-1;c>=s;c--){const u=e.scaledTo(c),p=this._getLoadedTile(u);if(p)return p}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const s=this._tiles[e.key];return s&&s.hasData()?s:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const s=Math.ceil(e.width/this._source.tileSize)+1,c=Math.ceil(e.height/this._source.tileSize)+1,u=Math.floor(s*c*(this._maxTileCacheZoomLevels===null?d.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),p=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,u):u;this._cache.setMaxSize(p)}handleWrapJump(e){const s=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,s){const c={};for(const u in this._tiles){const p=this._tiles[u];p.tileID=p.tileID.unwrapTo(p.tileID.wrap+s),c[p.tileID.key]=p}this._tiles=c;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(u,this._tiles[u])}}_updateCoveredAndRetainedTiles(e,s,c,u,p,b){const T={},z={},I=Object.keys(e),L=X.now();for(const O of I){const q=e[O],Q=this._tiles[O];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=L)continue;const te=this.findLoadedParent(q,s),ne=this.findLoadedSibling(q),le=te||ne||null;le&&(this._addTile(le.tileID),T[le.tileID.key]=le.tileID),z[O]=q}this._retainLoadedChildren(z,u,c,e);for(const O in T)e[O]||(this._coveredTiles[O]=!0,e[O]=T[O]);if(b){const O={},q={};for(const Q of p)this._tiles[Q.key].hasData()?O[Q.key]=Q:q[Q.key]=Q;for(const Q in q){const te=q[Q].children(this._source.maxzoom);this._tiles[te[0].key]&&this._tiles[te[1].key]&&this._tiles[te[2].key]&&this._tiles[te[3].key]&&(O[te[0].key]=e[te[0].key]=te[0],O[te[1].key]=e[te[1].key]=te[1],O[te[2].key]=e[te[2].key]=te[2],O[te[3].key]=e[te[3].key]=te[3],delete q[Q])}for(const Q in q){const te=q[Q],ne=this.findLoadedParent(te,this._source.minzoom),le=this.findLoadedSibling(te),de=ne||le||null;if(de){O[de.tileID.key]=e[de.tileID.key]=de.tileID;for(const pe in O)O[pe].isChildOf(de.tileID)&&delete O[pe]}}for(const Q in this._tiles)O[Q]||(this._coveredTiles[Q]=!0)}}update(e,s){if(!this._sourceLoaded||this._paused)return;let c;this.transform=e,this.terrain=s,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?c=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((L=>new d.S(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y))):(c=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s}),this._source.hasTile&&(c=c.filter((L=>this._source.hasTile(L))))):c=[];const u=e.coveringZoomLevel(this._source),p=Math.max(u-jt.maxOverzooming,this._source.minzoom),b=Math.max(u+jt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const O of c)if(O.canonical.z>this._source.minzoom){const q=O.scaledTo(O.canonical.z-1);L[q.key]=q;const Q=O.scaledTo(Math.max(this._source.minzoom,Math.min(O.canonical.z,5)));L[Q.key]=Q}c=c.concat(Object.values(L))}const T=c.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new d.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(c,u);ur(this._source.type)&&this._updateCoveredAndRetainedTiles(z,p,b,u,c,s);for(const L in z)this._tiles[L].clearFadeHold();const I=d.ab(this._tiles,z);for(const L of I){const O=this._tiles[L];O.hasSymbolBuckets&&!O.holdingForFade()?O.setHoldDuration(this.map._fadeDuration):O.hasSymbolBuckets&&!O.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,s){var c;const u={},p={},b=Math.max(s-jt.maxOverzooming,this._source.minzoom),T=Math.max(s+jt.maxUnderzooming,this._source.minzoom),z={};for(const I of e){const L=this._addTile(I);u[I.key]=I,L.hasData()||s<this._source.maxzoom&&(z[I.key]=I)}this._retainLoadedChildren(z,s,T,u);for(const I of e){let L=this._tiles[I.key];if(L.hasData())continue;if(s+1>this._source.maxzoom){const q=I.children(this._source.maxzoom)[0],Q=this.getTile(q);if(Q&&Q.hasData()){u[q.key]=q;continue}}else{const q=I.children(this._source.maxzoom);if(u[q[0].key]&&u[q[1].key]&&u[q[2].key]&&u[q[3].key])continue}let O=L.wasRequested();for(let q=I.overscaledZ-1;q>=b;--q){const Q=I.scaledTo(q);if(p[Q.key])break;if(p[Q.key]=!0,L=this.getTile(Q),!L&&O&&(L=this._addTile(Q)),L){const te=L.hasData();if((te||!(!((c=this.map)===null||c===void 0)&&c.cancelPendingTileRequestsWhileZooming)||O)&&(u[Q.key]=Q),O=L.wasRequested(),te)break}}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const s=[];let c,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){c=this._loadedParentTiles[u.key];break}s.push(u.key);const p=u.scaledTo(u.overscaledZ-1);if(c=this._getLoadedTile(p),c)break;u=p}for(const p of s)this._loadedParentTiles[p]=c}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const s=this._tiles[e].tileID,c=this._getLoadedTile(s);this._loadedSiblingTiles[s.key]=c}}_addTile(e){let s=this._tiles[e.key];if(s)return s;s=this._cache.getAndRemove(e),s&&(this._setTileReloadTimer(e.key,s),s.tileID=e,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,s)));const c=s;return s||(s=new vs(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(s,e.key,s.state)),s.uses++,this._tiles[e.key]=s,c||this._source.fire(new d.k("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(e,s){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const c=s.getExpiryTimeout();c&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),c))}_removeTile(e){const s=this._tiles[e];s&&(s.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}_dataHandler(e){const s=e.sourceDataType;e.dataType==="source"&&s==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&s==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,s,c){const u=[],p=this.transform;if(!p)return u;const b=c?p.getCameraQueryGeometry(e):e,T=e.map((te=>p.pointCoordinate(te,this.terrain))),z=b.map((te=>p.pointCoordinate(te,this.terrain))),I=this.getIds();let L=1/0,O=1/0,q=-1/0,Q=-1/0;for(const te of z)L=Math.min(L,te.x),O=Math.min(O,te.y),q=Math.max(q,te.x),Q=Math.max(Q,te.y);for(let te=0;te<I.length;te++){const ne=this._tiles[I[te]];if(ne.holdingForFade())continue;const le=ne.tileID,de=Math.pow(2,p.zoom-ne.tileID.overscaledZ),pe=s*ne.queryPadding*d.X/ne.tileSize/de,re=[le.getTilePoint(new d.Z(L,O)),le.getTilePoint(new d.Z(q,Q))];if(re[0].x-pe<d.X&&re[0].y-pe<d.X&&re[1].x+pe>=0&&re[1].y+pe>=0){const ve=T.map((Re=>le.getTilePoint(Re))),Te=z.map((Re=>le.getTilePoint(Re)));u.push({tile:ne,tileID:le,queryGeometry:ve,cameraQueryGeometry:Te,scale:de})}}return u}getVisibleCoordinates(e){const s=this.getRenderableIds(e).map((c=>this._tiles[c].tileID));for(const c of s)c.posMatrix=this.transform.calculatePosMatrix(c.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(ur(this._source.type)){const e=X.now();for(const s in this._tiles)if(this._tiles[s].fadeEndTime>=e)return!0}return!1}setFeatureState(e,s,c){this._state.updateState(e=e||"_geojsonTileLayer",s,c)}removeFeatureState(e,s,c){this._state.removeFeatureState(e=e||"_geojsonTileLayer",s,c)}getFeatureState(e,s){return this._state.getState(e=e||"_geojsonTileLayer",s)}setDependencies(e,s,c){const u=this._tiles[e];u&&u.setDependencies(s,c)}reloadTilesForDependencies(e,s){for(const c in this._tiles)this._tiles[c].hasDependency(e,s)&&this._reloadTile(c,"reloading");this._cache.filter((c=>!c.hasDependency(e,s)))}}function $n(m,e){const s=Math.abs(2*m.wrap)-+(m.wrap<0),c=Math.abs(2*e.wrap)-+(e.wrap<0);return m.overscaledZ-e.overscaledZ||c-s||e.canonical.y-m.canonical.y||e.canonical.x-m.canonical.x}function ur(m){return m==="raster"||m==="image"||m==="video"}jt.maxOverzooming=10,jt.maxUnderzooming=3;class Qt{constructor(e,s){this.reset(e,s)}reset(e,s){this.points=e||[],this._distances=[0];for(let c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=d.ac(e,0,1);let s=1,c=this._distances[s];const u=e*this.paddedLength+this.padding;for(;c<u&&s<this._distances.length;)c=this._distances[++s];const p=s-1,b=this._distances[p],T=c-b,z=T>0?(u-b)/T:0;return this.points[p].mult(1-z).add(this.points[s].mult(z))}}function la(m,e){let s=!0;return m==="always"||m!=="never"&&e!=="never"||(s=!1),s}class Ea{constructor(e,s,c){const u=this.boxCells=[],p=this.circleCells=[];this.xCellCount=Math.ceil(e/c),this.yCellCount=Math.ceil(s/c);for(let b=0;b<this.xCellCount*this.yCellCount;b++)u.push([]),p.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=s,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,s,c,u,p){this._forEachCell(s,c,u,p,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(s),this.bboxes.push(c),this.bboxes.push(u),this.bboxes.push(p)}insertCircle(e,s,c,u){this._forEachCell(s-u,c-u,s+u,c+u,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(s),this.circles.push(c),this.circles.push(u)}_insertBoxCell(e,s,c,u,p,b){this.boxCells[p].push(b)}_insertCircleCell(e,s,c,u,p,b){this.circleCells[p].push(b)}_query(e,s,c,u,p,b,T){if(c<0||e>this.width||u<0||s>this.height)return[];const z=[];if(e<=0&&s<=0&&this.width<=c&&this.height<=u){if(p)return[{key:null,x1:e,y1:s,x2:c,y2:u}];for(let I=0;I<this.boxKeys.length;I++)z.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const L=this.circles[3*I],O=this.circles[3*I+1],q=this.circles[3*I+2];z.push({key:this.circleKeys[I],x1:L-q,y1:O-q,x2:L+q,y2:O+q})}}else this._forEachCell(e,s,c,u,this._queryCell,z,{hitTest:p,overlapMode:b,seenUids:{box:{},circle:{}}},T);return z}query(e,s,c,u){return this._query(e,s,c,u,!1,null)}hitTest(e,s,c,u,p,b){return this._query(e,s,c,u,!0,p,b).length>0}hitTestCircle(e,s,c,u,p){const b=e-c,T=e+c,z=s-c,I=s+c;if(T<0||b>this.width||I<0||z>this.height)return!1;const L=[];return this._forEachCell(b,z,T,I,this._queryCellCircle,L,{hitTest:!0,overlapMode:u,circle:{x:e,y:s,radius:c},seenUids:{box:{},circle:{}}},p),L.length>0}_queryCell(e,s,c,u,p,b,T,z){const{seenUids:I,hitTest:L,overlapMode:O}=T,q=this.boxCells[p];if(q!==null){const te=this.bboxes;for(const ne of q)if(!I.box[ne]){I.box[ne]=!0;const le=4*ne,de=this.boxKeys[ne];if(e<=te[le+2]&&s<=te[le+3]&&c>=te[le+0]&&u>=te[le+1]&&(!z||z(de))&&(!L||!la(O,de.overlapMode))&&(b.push({key:de,x1:te[le],y1:te[le+1],x2:te[le+2],y2:te[le+3]}),L))return!0}}const Q=this.circleCells[p];if(Q!==null){const te=this.circles;for(const ne of Q)if(!I.circle[ne]){I.circle[ne]=!0;const le=3*ne,de=this.circleKeys[ne];if(this._circleAndRectCollide(te[le],te[le+1],te[le+2],e,s,c,u)&&(!z||z(de))&&(!L||!la(O,de.overlapMode))){const pe=te[le],re=te[le+1],ve=te[le+2];if(b.push({key:de,x1:pe-ve,y1:re-ve,x2:pe+ve,y2:re+ve}),L)return!0}}}return!1}_queryCellCircle(e,s,c,u,p,b,T,z){const{circle:I,seenUids:L,overlapMode:O}=T,q=this.boxCells[p];if(q!==null){const te=this.bboxes;for(const ne of q)if(!L.box[ne]){L.box[ne]=!0;const le=4*ne,de=this.boxKeys[ne];if(this._circleAndRectCollide(I.x,I.y,I.radius,te[le+0],te[le+1],te[le+2],te[le+3])&&(!z||z(de))&&!la(O,de.overlapMode))return b.push(!0),!0}}const Q=this.circleCells[p];if(Q!==null){const te=this.circles;for(const ne of Q)if(!L.circle[ne]){L.circle[ne]=!0;const le=3*ne,de=this.circleKeys[ne];if(this._circlesCollide(te[le],te[le+1],te[le+2],I.x,I.y,I.radius)&&(!z||z(de))&&!la(O,de.overlapMode))return b.push(!0),!0}}}_forEachCell(e,s,c,u,p,b,T,z){const I=this._convertToXCellCoord(e),L=this._convertToYCellCoord(s),O=this._convertToXCellCoord(c),q=this._convertToYCellCoord(u);for(let Q=I;Q<=O;Q++)for(let te=L;te<=q;te++)if(p.call(this,e,s,c,u,this.xCellCount*te+Q,b,T,z))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,s,c,u,p,b){const T=u-e,z=p-s,I=c+b;return I*I>T*T+z*z}_circleAndRectCollide(e,s,c,u,p,b,T){const z=(b-u)/2,I=Math.abs(e-(u+z));if(I>z+c)return!1;const L=(T-p)/2,O=Math.abs(s-(p+L));if(O>L+c)return!1;if(I<=z||O<=L)return!0;const q=I-z,Q=O-L;return q*q+Q*Q<=c*c}}function Aa(m,e,s,c,u){const p=d.H();return e?(d.K(p,p,[1/u,1/u,1]),s||d.ad(p,p,c.angle)):d.L(p,c.labelPlaneMatrix,m),p}function Rr(m,e,s,c,u){if(e){const p=d.ae(m);return d.K(p,p,[u,u,1]),s||d.ad(p,p,-c.angle),p}return c.glCoordMatrix}function oe(m,e,s,c){let u;c?(u=[m,e,c(m,e),1],d.af(u,u,s)):(u=[m,e,0,1],ci(u,u,s));const p=u[3];return{point:new d.P(u[0]/p,u[1]/p),signedDistanceFromCamera:p,isOccluded:!1}}function V(m,e){return .5+m/e*.5}function U(m,e){return m.x>=-e[0]&&m.x<=e[0]&&m.y>=-e[1]&&m.y<=e[1]}function W(m,e,s,c,u,p,b,T,z,I,L,O,q,Q,te){const ne=c?m.textSizeData:m.iconSizeData,le=d.ag(ne,s.transform.zoom),de=[256/s.width*2+1,256/s.height*2+1],pe=c?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;pe.clear();const re=m.lineVertexArray,ve=c?m.text.placedSymbolArray:m.icon.placedSymbolArray,Te=s.transform.width/s.transform.height;let Re=!1;for(let $e=0;$e<ve.length;$e++){const nt=ve.get($e);if(nt.hidden||nt.writingMode===d.ah.vertical&&!Re){Ot(nt.numGlyphs,pe);continue}Re=!1;const pt=oe(nt.anchorX,nt.anchorY,e,te);if(!U(pt.point,de)){Ot(nt.numGlyphs,pe);continue}const xt=V(s.transform.cameraToCenterDistance,pt.signedDistanceFromCamera),ut=d.ai(ne,le,nt),ct=b?ut/xt:ut*xt,St={getElevation:te,labelPlaneMatrix:u,lineVertexArray:re,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:I,tileAnchorPoint:new d.P(nt.anchorX,nt.anchorY),unwrappedTileID:L,width:O,height:q,translation:Q},ft=xe(St,nt,ct,!1,T,e,p,m.glyphOffsetArray,pe,Te,z);Re=ft.useVertical,(ft.notEnoughRoom||Re||ft.needsFlipping&&xe(St,nt,ct,!0,T,e,p,m.glyphOffsetArray,pe,Te,z).notEnoughRoom)&&Ot(nt.numGlyphs,pe)}c?m.text.dynamicLayoutVertexBuffer.updateData(pe):m.icon.dynamicLayoutVertexBuffer.updateData(pe)}function ae(m,e,s,c,u,p,b,T){const z=p.glyphStartIndex+p.numGlyphs,I=p.lineStartIndex,L=p.lineStartIndex+p.lineLength,O=e.getoffsetX(p.glyphStartIndex),q=e.getoffsetX(z-1),Q=dt(m*O,s,c,u,p.segment,I,L,T,b);if(!Q)return null;const te=dt(m*q,s,c,u,p.segment,I,L,T,b);return te?T.projectionCache.anyProjectionOccluded?null:{first:Q,last:te}:null}function ye(m,e,s,c){return m===d.ah.horizontal&&Math.abs(s.y-e.y)>Math.abs(s.x-e.x)*c?{useVertical:!0}:(m===d.ah.vertical?e.y<s.y:e.x>s.x)?{needsFlipping:!0}:null}function xe(m,e,s,c,u,p,b,T,z,I,L){const O=s/24,q=e.lineOffsetX*O,Q=e.lineOffsetY*O;let te;if(e.numGlyphs>1){const ne=e.glyphStartIndex+e.numGlyphs,le=e.lineStartIndex,de=e.lineStartIndex+e.lineLength,pe=ae(O,T,q,Q,c,e,L,m);if(!pe)return{notEnoughRoom:!0};const re=oe(pe.first.point.x,pe.first.point.y,b,m.getElevation).point,ve=oe(pe.last.point.x,pe.last.point.y,b,m.getElevation).point;if(u&&!c){const Te=ye(e.writingMode,re,ve,I);if(Te)return Te}te=[pe.first];for(let Te=e.glyphStartIndex+1;Te<ne-1;Te++)te.push(dt(O*T.getoffsetX(Te),q,Q,c,e.segment,le,de,m,L));te.push(pe.last)}else{if(u&&!c){const le=oe(m.tileAnchorPoint.x,m.tileAnchorPoint.y,p,m.getElevation).point,de=e.lineStartIndex+e.segment+1,pe=new d.P(m.lineVertexArray.getx(de),m.lineVertexArray.gety(de)),re=oe(pe.x,pe.y,p,m.getElevation),ve=re.signedDistanceFromCamera>0?re.point:(function(Re,$e,nt,pt,xt,ut){return Ae(Re,$e,nt,1,xt,ut)})(m.tileAnchorPoint,pe,le,0,p,m),Te=ye(e.writingMode,le,ve,I);if(Te)return Te}const ne=dt(O*T.getoffsetX(e.glyphStartIndex),q,Q,c,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,m,L);if(!ne||m.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};te=[ne]}for(const ne of te)d.aj(z,ne.point,ne.angle);return{}}function Ae(m,e,s,c,u,p){const b=m.add(m.sub(e)._unit()),T=u!==void 0?oe(b.x,b.y,u,p.getElevation).point:Le(b.x,b.y,p).point,z=s.sub(T);return s.add(z._mult(c/z.mag()))}function ue(m,e,s){const c=e.projectionCache;if(c.projections[m])return c.projections[m];const u=new d.P(e.lineVertexArray.getx(m),e.lineVertexArray.gety(m)),p=Le(u.x,u.y,e);if(p.signedDistanceFromCamera>0)return c.projections[m]=p.point,c.anyProjectionOccluded=c.anyProjectionOccluded||p.isOccluded,p.point;const b=m-s.direction;return(function(T,z,I,L,O){return Ae(T,z,I,L,void 0,O)})(s.distanceFromAnchor===0?e.tileAnchorPoint:new d.P(e.lineVertexArray.getx(b),e.lineVertexArray.gety(b)),u,s.previousVertex,s.absOffsetX-s.distanceFromAnchor+1,e)}function Le(m,e,s){const c=m+s.translation[0],u=e+s.translation[1];let p;return!s.pitchWithMap&&s.projection.useSpecialProjectionForSymbols?(p=s.projection.projectTileCoordinates(c,u,s.unwrappedTileID,s.getElevation),p.point.x=(.5*p.point.x+.5)*s.width,p.point.y=(.5*-p.point.y+.5)*s.height):(p=oe(c,u,s.labelPlaneMatrix,s.getElevation),p.isOccluded=!1),p}function Xe(m,e,s){return m._unit()._perp()._mult(e*s)}function Be(m,e,s,c,u,p,b,T,z){if(T.projectionCache.offsets[m])return T.projectionCache.offsets[m];const I=s.add(e);if(m+z.direction<c||m+z.direction>=u)return T.projectionCache.offsets[m]=I,I;const L=ue(m+z.direction,T,z),O=Xe(L.sub(s),b,z.direction),q=s.add(O),Q=L.add(O);return T.projectionCache.offsets[m]=d.ak(p,I,q,Q)||I,T.projectionCache.offsets[m]}function dt(m,e,s,c,u,p,b,T,z){const I=c?m-e:m+e;let L=I>0?1:-1,O=0;c&&(L*=-1,O=Math.PI),L<0&&(O+=Math.PI);let q,Q=L>0?p+u:p+u+1;T.projectionCache.cachedAnchorPoint?q=T.projectionCache.cachedAnchorPoint:(q=Le(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=q);let te,ne,le=q,de=q,pe=0,re=0;const ve=Math.abs(I),Te=[];let Re;for(;pe+re<=ve;){if(Q+=L,Q<p||Q>=b)return null;pe+=re,de=le,ne=te;const pt={absOffsetX:ve,direction:L,distanceFromAnchor:pe,previousVertex:de};if(le=ue(Q,T,pt),s===0)Te.push(de),Re=le.sub(de);else{let xt;const ut=le.sub(de);xt=ut.mag()===0?Xe(ue(Q+L,T,pt).sub(le),s,L):Xe(ut,s,L),ne||(ne=de.add(xt)),te=Be(Q,xt,le,p,b,ne,s,T,pt),Te.push(ne),Re=te.sub(ne)}re=Re.mag()}const $e=Re._mult((ve-pe)/re)._add(ne||de),nt=O+Math.atan2(le.y-de.y,le.x-de.x);return Te.push($e),{point:$e,angle:z?nt:0,path:Te}}const Pt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ot(m,e){for(let s=0;s<m;s++){const c=e.length;e.resize(c+4),e.float32.set(Pt,3*c)}}function ci(m,e,s){const c=e[0],u=e[1];return m[0]=s[0]*c+s[4]*u+s[12],m[1]=s[1]*c+s[5]*u+s[13],m[3]=s[3]*c+s[7]*u+s[15],m}const Wt=100;class li{constructor(e,s,c=new Ea(e.width+200,e.height+200,25),u=new Ea(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=s,this.grid=c,this.ignoredGrid=u,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Wt,this.screenBottomBoundary=e.height+Wt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,s,c,u,p,b,T,z,I,L,O){const q=e.anchorPointX+z[0],Q=e.anchorPointY+z[1],te=this.projectAndGetPerspectiveRatio(u,q,Q,p,L),ne=c*te.perspectiveRatio;let le;if(b||T)le=this._projectCollisionBox(e,ne,u,p,b,T,z,te,L,O);else{const Te=te.point.x+(O?O.x*ne:0),Re=te.point.y+(O?O.y*ne:0);le={allPointsOccluded:!1,box:[Te+e.x1*ne,Re+e.y1*ne,Te+e.x2*ne,Re+e.y2*ne]}}const[de,pe,re,ve]=le.box;return this.mapProjection.useSpecialProjectionForSymbols&&(b?le.allPointsOccluded:this.mapProjection.isOccluded(q,Q,p))||te.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(de,pe,re,ve)||s!=="always"&&this.grid.hitTest(de,pe,re,ve,s,I)?{box:[de,pe,re,ve],placeable:!1,offscreen:!1}:{box:[de,pe,re,ve],placeable:!0,offscreen:this.isOffscreen(de,pe,re,ve)}}placeCollisionCircles(e,s,c,u,p,b,T,z,I,L,O,q,Q,te,ne,le){const de=[],pe=new d.P(s.anchorX,s.anchorY),re=this.getPerspectiveRatio(b,pe.x,pe.y,T,le),ve=(O?p/re:p*re)/d.ap,Te={getElevation:le,labelPlaneMatrix:z,lineVertexArray:c,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:pe,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:ne},Re=ae(ve,u,s.lineOffsetX*ve,s.lineOffsetY*ve,!1,s,!1,Te);let $e=!1,nt=!1,pt=!0;if(Re){const xt=.5*Q*re+te,ut=new d.P(-100,-100),ct=new d.P(this.screenRightBoundary,this.screenBottomBoundary),St=new Qt,ft=Re.first,Ke=Re.last;let at=[];for(let Kt=ft.path.length-1;Kt>=1;Kt--)at.push(ft.path[Kt]);for(let Kt=1;Kt<Ke.path.length;Kt++)at.push(Ke.path[Kt]);const Xt=2.5*xt;if(I){const Kt=this.projectPathToScreenSpace(at,Te,I);at=Kt.some((si=>si.signedDistanceFromCamera<=0))?[]:Kt.map((si=>si.point))}let Di=[];if(at.length>0){const Kt=at[0].clone(),si=at[0].clone();for(let Pi=1;Pi<at.length;Pi++)Kt.x=Math.min(Kt.x,at[Pi].x),Kt.y=Math.min(Kt.y,at[Pi].y),si.x=Math.max(si.x,at[Pi].x),si.y=Math.max(si.y,at[Pi].y);Di=Kt.x>=ut.x&&si.x<=ct.x&&Kt.y>=ut.y&&si.y<=ct.y?[at]:si.x<ut.x||Kt.x>ct.x||si.y<ut.y||Kt.y>ct.y?[]:d.al([at],ut.x,ut.y,ct.x,ct.y)}for(const Kt of Di){St.reset(Kt,.25*xt);let si=0;si=St.length<=.5*xt?1:Math.ceil(St.paddedLength/Xt)+1;for(let Pi=0;Pi<si;Pi++){const _n=Pi/Math.max(si-1,1),ma=St.lerp(_n),ti=ma.x+Wt,tr=ma.y+Wt;de.push(ti,tr,xt,0);const Yn=ti-xt,Kn=tr-xt,ir=ti+xt,Ba=tr+xt;if(pt=pt&&this.isOffscreen(Yn,Kn,ir,Ba),nt=nt||this.isInsideGrid(Yn,Kn,ir,Ba),e!=="always"&&this.grid.hitTestCircle(ti,tr,xt,e,q)&&($e=!0,!L))return{circles:[],offscreen:!1,collisionDetected:$e}}}}return{circles:!L&&$e||!nt||re<this.perspectiveRatioCutoff?[]:de,offscreen:pt,collisionDetected:$e}}projectPathToScreenSpace(e,s,c){return e.map((u=>oe(u.x,u.y,c,s.getElevation)))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let c=1/0,u=1/0,p=-1/0,b=-1/0;for(const L of e){const O=new d.P(L.x+Wt,L.y+Wt);c=Math.min(c,O.x),u=Math.min(u,O.y),p=Math.max(p,O.x),b=Math.max(b,O.y),s.push(O)}const T=this.grid.query(c,u,p,b).concat(this.ignoredGrid.query(c,u,p,b)),z={},I={};for(const L of T){const O=L.key;if(z[O.bucketInstanceId]===void 0&&(z[O.bucketInstanceId]={}),z[O.bucketInstanceId][O.featureIndex])continue;const q=[new d.P(L.x1,L.y1),new d.P(L.x2,L.y1),new d.P(L.x2,L.y2),new d.P(L.x1,L.y2)];d.am(s,q)&&(z[O.bucketInstanceId][O.featureIndex]=!0,I[O.bucketInstanceId]===void 0&&(I[O.bucketInstanceId]=[]),I[O.bucketInstanceId].push(O.featureIndex))}return I}insertCollisionBox(e,s,c,u,p,b){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:p,collisionGroupID:b,overlapMode:s},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,s,c,u,p,b){const T=c?this.ignoredGrid:this.grid,z={bucketInstanceId:u,featureIndex:p,collisionGroupID:b,overlapMode:s};for(let I=0;I<e.length;I+=4)T.insertCircle(z,e[I],e[I+1],e[I+2])}projectAndGetPerspectiveRatio(e,s,c,u,p){let b;p?(b=[s,c,p(s,c),1],d.af(b,b,e)):(b=[s,c,0,1],ci(b,b,e));const T=b[3];return{point:new d.P((b[0]/T+1)/2*this.transform.width+Wt,(-b[1]/T+1)/2*this.transform.height+Wt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/T*.5,isOccluded:!1,signedDistanceFromCamera:T}}getPerspectiveRatio(e,s,c,u,p){const b=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(s,c,u,p):oe(s,c,e,p);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(e,s,c,u){return c<Wt||e>=this.screenRightBoundary||u<Wt||s>this.screenBottomBoundary}isInsideGrid(e,s,c,u){return c>=0&&e<this.gridRightBoundary&&u>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const e=d.an([]);return d.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,s,c,u,p,b,T,z,I,L){let O=new d.P(1,0),q=new d.P(0,1);const Q=new d.P(e.anchorPointX+T[0],e.anchorPointY+T[1]);if(b&&!p){const pt=this.projectAndGetPerspectiveRatio(c,Q.x+1,Q.y,u,I).point.sub(z.point).unit(),xt=Math.atan(pt.y/pt.x)+(pt.x<0?Math.PI:0),ut=Math.sin(xt),ct=Math.cos(xt);O=new d.P(ct,ut),q=new d.P(-ut,ct)}else if(!b&&p){const pt=-this.transform.angle,xt=Math.sin(pt),ut=Math.cos(pt);O=new d.P(ut,xt),q=new d.P(-xt,ut)}let te=z.point,ne=s;if(p){te=Q;const pt=this.transform.zoom-Math.floor(this.transform.zoom);ne=Math.pow(2,-pt),ne*=this.mapProjection.getPitchedTextCorrection(this.transform,Q,u),L||(ne*=d.ac(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}L&&(te=te.add(O.mult(L.x*ne)).add(q.mult(L.y*ne)));const le=e.x1*ne,de=e.x2*ne,pe=(le+de)/2,re=e.y1*ne,ve=e.y2*ne,Te=(re+ve)/2,Re=[{offsetX:le,offsetY:re},{offsetX:pe,offsetY:re},{offsetX:de,offsetY:re},{offsetX:de,offsetY:Te},{offsetX:de,offsetY:ve},{offsetX:pe,offsetY:ve},{offsetX:le,offsetY:ve},{offsetX:le,offsetY:Te}];let $e=[];for(const{offsetX:pt,offsetY:xt}of Re)$e.push(new d.P(te.x+O.x*pt+q.x*xt,te.y+O.y*pt+q.y*xt));let nt=!1;if(p){const pt=$e.map((xt=>this.projectAndGetPerspectiveRatio(c,xt.x,xt.y,u,I)));nt=pt.some((xt=>!xt.isOccluded)),$e=pt.map((xt=>xt.point))}else nt=!0;return{box:d.ao($e),allPointsOccluded:!nt}}}function ni(m,e,s){return e*(d.X/(m.tileSize*Math.pow(2,s-m.tileID.overscaledZ)))}class Qi{constructor(e,s,c,u){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?s:-s))):u&&c?1:0,this.placed=c}isHidden(){return this.opacity===0&&!this.placed}}class Bi{constructor(e,s,c,u,p){this.text=new Qi(e?e.text:null,s,c,p),this.icon=new Qi(e?e.icon:null,s,u,p)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ut{constructor(e,s,c){this.text=e,this.icon=s,this.skipFade=c}}class Mi{constructor(){this.invProjMatrix=d.H(),this.viewportMatrix=d.H(),this.circles=[]}}class Hi{constructor(e,s,c,u,p){this.bucketInstanceId=e,this.featureIndex=s,this.sourceLayerIndex=c,this.bucketIndex=u,this.tileID=p}}class Ji{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const s=++this.maxGroupID;this.collisionGroups[e]={ID:s,predicate:c=>c.collisionGroupID===s}}return this.collisionGroups[e]}}function hn(m,e,s,c,u){const{horizontalAlign:p,verticalAlign:b}=d.au(m);return new d.P(-(p-.5)*e+c[0]*u,-(b-.5)*s+c[1]*u)}class hr{constructor(e,s,c,u,p,b){this.transform=e.clone(),this.terrain=c,this.collisionIndex=new li(this.transform,s),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new Ji(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const s=this.terrain;return s?(c,u)=>s.getElevation(e,c,u):null}getBucketParts(e,s,c,u){const p=c.getBucket(s),b=c.latestFeatureIndex;if(!p||!b||s.id!==p.layerIds[0])return;const T=c.collisionBoxArray,z=p.layers[0].layout,I=p.layers[0].paint,L=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),O=c.tileSize/d.X,q=c.tileID.toUnwrapped(),Q=this.transform.calculatePosMatrix(q),te=z.get("text-pitch-alignment")==="map",ne=z.get("text-rotation-alignment")==="map",le=ni(c,1,this.transform.zoom),de=this.collisionIndex.mapProjection.translatePosition(this.transform,c,I.get("text-translate"),I.get("text-translate-anchor")),pe=this.collisionIndex.mapProjection.translatePosition(this.transform,c,I.get("icon-translate"),I.get("icon-translate-anchor")),re=Aa(Q,te,ne,this.transform,le);let ve=null;if(te){const Re=Rr(Q,te,ne,this.transform,le);ve=d.L([],this.transform.labelPlaneMatrix,Re)}this.retainedQueryData[p.bucketInstanceId]=new Hi(p.bucketInstanceId,b,p.sourceLayerIndex,p.index,c.tileID);const Te={bucket:p,layout:z,translationText:de,translationIcon:pe,posMatrix:Q,unwrappedTileID:q,textLabelPlaneMatrix:re,labelToScreenMatrix:ve,scale:L,textPixelRatio:O,holdingForFade:c.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:d.ag(p.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(p.sourceID)};if(u)for(const Re of p.sortKeyRanges){const{sortKey:$e,symbolInstanceStart:nt,symbolInstanceEnd:pt}=Re;e.push({sortKey:$e,symbolInstanceStart:nt,symbolInstanceEnd:pt,parameters:Te})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:p.symbolInstances.length,parameters:Te})}attemptAnchorPlacement(e,s,c,u,p,b,T,z,I,L,O,q,Q,te,ne,le,de,pe,re){const ve=d.aq[e.textAnchor],Te=[e.textOffset0,e.textOffset1],Re=hn(ve,c,u,Te,p),$e=this.collisionIndex.placeCollisionBox(s,q,z,I,L,T,b,le,O.predicate,re,Re);if((!pe||this.collisionIndex.placeCollisionBox(pe,q,z,I,L,T,b,de,O.predicate,re,Re).placeable)&&$e.placeable){let nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(nt=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:Te,width:c,height:u,anchor:ve,textBoxScale:p,prevAnchor:nt},this.markUsedJustification(te,ve,Q,ne),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ne,Q),this.placedOrientations[Q.crossTileID]=ne),{shift:Re,placedGlyphBoxes:$e}}}placeLayerBucketPart(e,s,c){const{bucket:u,layout:p,translationText:b,translationIcon:T,posMatrix:z,unwrappedTileID:I,textLabelPlaneMatrix:L,labelToScreenMatrix:O,textPixelRatio:q,holdingForFade:Q,collisionBoxArray:te,partiallyEvaluatedTextSize:ne,collisionGroup:le}=e.parameters,de=p.get("text-optional"),pe=p.get("icon-optional"),re=d.ar(p,"text-overlap","text-allow-overlap"),ve=re==="always",Te=d.ar(p,"icon-overlap","icon-allow-overlap"),Re=Te==="always",$e=p.get("text-rotation-alignment")==="map",nt=p.get("text-pitch-alignment")==="map",pt=p.get("icon-text-fit")!=="none",xt=p.get("symbol-z-order")==="viewport-y",ut=ve&&(Re||!u.hasIconData()||pe),ct=Re&&(ve||!u.hasTextData()||de);!u.collisionArrays&&te&&u.deserializeCollisionBoxes(te);const St=this._getTerrainElevationFunc(this.retainedQueryData[u.bucketInstanceId].tileID),ft=(Ke,at,Xt)=>{var Di,Kt;if(s[Ke.crossTileID])return;if(Q)return void(this.placements[Ke.crossTileID]=new Ut(!1,!1,!1));let si=!1,Pi=!1,_n=!0,ma=null,ti={box:null,placeable:!1,offscreen:null},tr={placeable:!1},Yn=null,Kn=null,ir=null,Ba=0,Ns=0,ol=0;at.textFeatureIndex?Ba=at.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(Ba=Ke.featureIndex),at.verticalTextFeatureIndex&&(Ns=at.verticalTextFeatureIndex);const Fs=at.textBox;if(Fs){const nr=zn=>{let Vn=d.ah.horizontal;if(u.allowVerticalPlacement&&!zn&&this.prevPlacement){const br=this.prevPlacement.placedOrientations[Ke.crossTileID];br&&(this.placedOrientations[Ke.crossTileID]=br,Vn=br,this.markUsedOrientation(u,Vn,Ke))}return Vn},xr=(zn,Vn)=>{if(u.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&at.verticalTextBox){for(const br of u.writingModes)if(br===d.ah.vertical?(ti=Vn(),tr=ti):ti=zn(),ti&&ti.placeable)break}else ti=zn()},Na=Ke.textAnchorOffsetStartIndex,In=Ke.textAnchorOffsetEndIndex;if(In===Na){const zn=(Vn,br)=>{const ui=this.collisionIndex.placeCollisionBox(Vn,re,q,z,I,nt,$e,b,le.predicate,St);return ui&&ui.placeable&&(this.markUsedOrientation(u,br,Ke),this.placedOrientations[Ke.crossTileID]=br),ui};xr((()=>zn(Fs,d.ah.horizontal)),(()=>{const Vn=at.verticalTextBox;return u.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&Vn?zn(Vn,d.ah.vertical):{box:null,offscreen:null}})),nr(ti&&ti.placeable)}else{let zn=d.aq[(Kt=(Di=this.prevPlacement)===null||Di===void 0?void 0:Di.variableOffsets[Ke.crossTileID])===null||Kt===void 0?void 0:Kt.anchor];const Vn=(ui,js,co)=>{const uo=ui.x2-ui.x1,Xu=ui.y2-ui.y1,Nh=Ke.textBoxScale,cu=pt&&Te==="never"?js:null;let ss=null,Fh=re==="never"?1:2,uc="never";zn&&Fh++;for(let ll=0;ll<Fh;ll++){for(let hc=Na;hc<In;hc++){const cl=u.textAnchorOffsets.get(hc);if(zn&&cl.textAnchor!==zn)continue;const ho=this.attemptAnchorPlacement(cl,ui,uo,Xu,Nh,$e,nt,q,z,I,le,uc,Ke,u,co,b,T,cu,St);if(ho&&(ss=ho.placedGlyphBoxes,ss&&ss.placeable))return si=!0,ma=ho.shift,ss}zn?zn=null:uc=re}return c&&!ss&&(ss={box:this.collisionIndex.placeCollisionBox(Fs,"always",q,z,I,nt,$e,b,le.predicate,St,new d.P(0,0)).box,offscreen:!1,placeable:!1}),ss};xr((()=>Vn(Fs,at.iconBox,d.ah.horizontal)),(()=>{const ui=at.verticalTextBox;return u.allowVerticalPlacement&&(!ti||!ti.placeable)&&Ke.numVerticalGlyphVertices>0&&ui?Vn(ui,at.verticalIconBox,d.ah.vertical):{box:null,occluded:!0,offscreen:null}})),ti&&(si=ti.placeable,_n=ti.offscreen);const br=nr(ti&&ti.placeable);if(!si&&this.prevPlacement){const ui=this.prevPlacement.variableOffsets[Ke.crossTileID];ui&&(this.variableOffsets[Ke.crossTileID]=ui,this.markUsedJustification(u,ui.anchor,Ke,br))}}}if(Yn=ti,si=Yn&&Yn.placeable,_n=Yn&&Yn.offscreen,Ke.useRuntimeCollisionCircles){const nr=u.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex),xr=d.ai(u.textSizeData,ne,nr),Na=p.get("text-padding");Kn=this.collisionIndex.placeCollisionCircles(re,nr,u.lineVertexArray,u.glyphOffsetArray,xr,z,I,L,O,c,nt,le.predicate,Ke.collisionCircleDiameter,Na,b,St),Kn.circles.length&&Kn.collisionDetected&&!c&&d.w("Collisions detected, but collision boxes are not shown"),si=ve||Kn.circles.length>0&&!Kn.collisionDetected,_n=_n&&Kn.offscreen}if(at.iconFeatureIndex&&(ol=at.iconFeatureIndex),at.iconBox){const nr=xr=>this.collisionIndex.placeCollisionBox(xr,Te,q,z,I,nt,$e,T,le.predicate,St,pt&&ma?ma:void 0);tr&&tr.placeable&&at.verticalIconBox?(ir=nr(at.verticalIconBox),Pi=ir.placeable):(ir=nr(at.iconBox),Pi=ir.placeable),_n=_n&&ir.offscreen}const Ki=de||Ke.numHorizontalGlyphVertices===0&&Ke.numVerticalGlyphVertices===0,on=pe||Ke.numIconVertices===0;Ki||on?on?Ki||(Pi=Pi&&si):si=Pi&&si:Pi=si=Pi&&si;const cc=Pi&&ir.placeable;if(si&&Yn.placeable&&this.collisionIndex.insertCollisionBox(Yn.box,re,p.get("text-ignore-placement"),u.bucketInstanceId,tr&&tr.placeable&&Ns?Ns:Ba,le.ID),cc&&this.collisionIndex.insertCollisionBox(ir.box,Te,p.get("icon-ignore-placement"),u.bucketInstanceId,ol,le.ID),Kn&&si&&this.collisionIndex.insertCollisionCircles(Kn.circles,re,p.get("text-ignore-placement"),u.bucketInstanceId,Ba,le.ID),c&&this.storeCollisionData(u.bucketInstanceId,Xt,at,Yn,ir,Kn),Ke.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(u.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ke.crossTileID]=new Ut(si||ut,Pi||ct,_n||u.justReloaded),s[Ke.crossTileID]=!0};if(xt){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ke=u.getSortedSymbolIndexes(this.transform.angle);for(let at=Ke.length-1;at>=0;--at){const Xt=Ke[at];ft(u.symbolInstances.get(Xt),u.collisionArrays[Xt],Xt)}}else for(let Ke=e.symbolInstanceStart;Ke<e.symbolInstanceEnd;Ke++)ft(u.symbolInstances.get(Ke),u.collisionArrays[Ke],Ke);if(c&&u.bucketInstanceId in this.collisionCircleArrays){const Ke=this.collisionCircleArrays[u.bucketInstanceId];d.as(Ke.invProjMatrix,z),Ke.viewportMatrix=this.collisionIndex.getViewportMatrix()}u.justReloaded=!1}storeCollisionData(e,s,c,u,p,b){if(c.textBox||c.iconBox){let T,z;this.collisionBoxArrays.has(e)?T=this.collisionBoxArrays.get(e):(T=new Map,this.collisionBoxArrays.set(e,T)),T.has(s)?z=T.get(s):(z={text:null,icon:null},T.set(s,z)),c.textBox&&(z.text=u.box),c.iconBox&&(z.icon=p.box)}if(b){let T=this.collisionCircleArrays[e];T===void 0&&(T=this.collisionCircleArrays[e]=new Mi);for(let z=0;z<b.circles.length;z+=4)T.circles.push(b.circles[z+0]),T.circles.push(b.circles[z+1]),T.circles.push(b.circles[z+2]),T.circles.push(b.collisionDetected?1:0)}}markUsedJustification(e,s,c,u){let p;p=u===d.ah.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[d.at(s)];const b=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];for(const T of b)T>=0&&(e.text.placedSymbolArray.get(T).crossTileID=p>=0&&T!==p?0:c.crossTileID)}markUsedOrientation(e,s,c){const u=s===d.ah.horizontal||s===d.ah.horizontalOnly?s:0,p=s===d.ah.vertical?s:0,b=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];for(const T of b)e.text.placedSymbolArray.get(T).placedOrientation=u;c.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=p)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let c=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const u=s?s.symbolFadeChange(e):1,p=s?s.opacities:{},b=s?s.variableOffsets:{},T=s?s.placedOrientations:{};for(const z in this.placements){const I=this.placements[z],L=p[z];L?(this.opacities[z]=new Bi(L,u,I.text,I.icon),c=c||I.text!==L.text.placed||I.icon!==L.icon.placed):(this.opacities[z]=new Bi(null,u,I.text,I.icon,I.skipFade),c=c||I.text||I.icon)}for(const z in p){const I=p[z];if(!this.opacities[z]){const L=new Bi(I,u,!1,!1);L.isHidden()||(this.opacities[z]=L,c=c||I.text.placed||I.icon.placed)}}for(const z in b)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=b[z]);for(const z in T)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=T[z]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");c?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:e)}updateLayerOpacities(e,s){const c={};for(const u of s){const p=u.getBucket(e);p&&u.latestFeatureIndex&&e.id===p.layerIds[0]&&this.updateBucketOpacities(p,u.tileID,c,u.collisionBoxArray)}}updateBucketOpacities(e,s,c,u){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const p=e.layers[0],b=p.layout,T=new Bi(null,0,!1,!1,!0),z=b.get("text-allow-overlap"),I=b.get("icon-allow-overlap"),L=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),O=b.get("text-rotation-alignment")==="map",q=b.get("text-pitch-alignment")==="map",Q=b.get("icon-text-fit")!=="none",te=new Bi(null,0,z&&(I||!e.hasIconData()||b.get("icon-optional")),I&&(z||!e.hasTextData()||b.get("text-optional")),!0);!e.collisionArrays&&u&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(u);const ne=(de,pe,re)=>{for(let ve=0;ve<pe/4;ve++)de.opacityVertexArray.emplaceBack(re);de.hasVisibleVertices=de.hasVisibleVertices||re!==xs},le=this.collisionBoxArrays.get(e.bucketInstanceId);for(let de=0;de<e.symbolInstances.length;de++){const pe=e.symbolInstances.get(de),{numHorizontalGlyphVertices:re,numVerticalGlyphVertices:ve,crossTileID:Te}=pe;let Re=this.opacities[Te];c[Te]?Re=T:Re||(Re=te,this.opacities[Te]=Re),c[Te]=!0;const $e=pe.numIconVertices>0,nt=this.placedOrientations[pe.crossTileID],pt=nt===d.ah.vertical,xt=nt===d.ah.horizontal||nt===d.ah.horizontalOnly;if(re>0||ve>0){const ct=Nn(Re.text);ne(e.text,re,pt?xs:ct),ne(e.text,ve,xt?xs:ct);const St=Re.text.isHidden();[pe.rightJustifiedTextSymbolIndex,pe.centerJustifiedTextSymbolIndex,pe.leftJustifiedTextSymbolIndex].forEach((at=>{at>=0&&(e.text.placedSymbolArray.get(at).hidden=St||pt?1:0)})),pe.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(pe.verticalPlacedTextSymbolIndex).hidden=St||xt?1:0);const ft=this.variableOffsets[pe.crossTileID];ft&&this.markUsedJustification(e,ft.anchor,pe,nt);const Ke=this.placedOrientations[pe.crossTileID];Ke&&(this.markUsedJustification(e,"left",pe,Ke),this.markUsedOrientation(e,Ke,pe))}if($e){const ct=Nn(Re.icon),St=!(Q&&pe.verticalPlacedIconSymbolIndex&&pt);pe.placedIconSymbolIndex>=0&&(ne(e.icon,pe.numIconVertices,St?ct:xs),e.icon.placedSymbolArray.get(pe.placedIconSymbolIndex).hidden=Re.icon.isHidden()),pe.verticalPlacedIconSymbolIndex>=0&&(ne(e.icon,pe.numVerticalIconVertices,St?xs:ct),e.icon.placedSymbolArray.get(pe.verticalPlacedIconSymbolIndex).hidden=Re.icon.isHidden())}const ut=le&&le.has(de)?le.get(de):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const ct=e.collisionArrays[de];if(ct){let St=new d.P(0,0);if(ct.textBox||ct.verticalTextBox){let ft=!0;if(L){const Ke=this.variableOffsets[Te];Ke?(St=hn(Ke.anchor,Ke.width,Ke.height,Ke.textOffset,Ke.textBoxScale),O&&St._rotate(q?this.transform.angle:-this.transform.angle)):ft=!1}if(ct.textBox||ct.verticalTextBox){let Ke;ct.textBox&&(Ke=pt),ct.verticalTextBox&&(Ke=xt),Ks(e.textCollisionBox.collisionVertexArray,Re.text.placed,!ft||Ke,ut.text,St.x,St.y)}}if(ct.iconBox||ct.verticalIconBox){const ft=!!(!xt&&ct.verticalIconBox);let Ke;ct.iconBox&&(Ke=ft),ct.verticalIconBox&&(Ke=!ft),Ks(e.iconCollisionBox.collisionVertexArray,Re.icon.placed,Ke,ut.icon,Q?St.x:0,Q?St.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const de=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=de.invProjMatrix,e.placementViewportMatrix=de.viewportMatrix,e.collisionCircleArray=de.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,s){const c=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*c>e}setStale(){this.stale=!0}}function Ks(m,e,s,c,u,p){c&&c.length!==0||(c=[0,0,0,0]);const b=c[0]-Wt,T=c[1]-Wt,z=c[2]-Wt,I=c[3]-Wt;m.emplaceBack(e?1:0,s?1:0,u||0,p||0,b,T),m.emplaceBack(e?1:0,s?1:0,u||0,p||0,z,T),m.emplaceBack(e?1:0,s?1:0,u||0,p||0,z,I),m.emplaceBack(e?1:0,s?1:0,u||0,p||0,b,I)}const zi=Math.pow(2,25),Bu=Math.pow(2,24),Po=Math.pow(2,17),Qn=Math.pow(2,16),yn=Math.pow(2,9),Nu=Math.pow(2,8),qr=Math.pow(2,1);function Nn(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const e=m.placed?1:0,s=Math.floor(127*m.opacity);return s*zi+e*Bu+s*Po+e*Qn+s*yn+e*Nu+s*qr+e}const xs=0;function Za(){return{isOccluded:(m,e,s)=>!1,getPitchedTextCorrection:(m,e,s)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(m,e,s,c){throw new Error("Not implemented.")},translatePosition:(m,e,s,c)=>(function(u,p,b,T,z=!1){if(!b[0]&&!b[1])return[0,0];const I=z?T==="map"?u.angle:0:T==="viewport"?-u.angle:0;if(I){const L=Math.sin(I),O=Math.cos(I);b=[b[0]*O-b[1]*L,b[0]*L+b[1]*O]}return[z?b[0]:ni(p,b[0],u.zoom),z?b[1]:ni(p,b[1],u.zoom)]})(m,e,s,c),getCircleRadiusCorrection:m=>1}}class Cn{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,s,c,u,p){const b=this._bucketParts;for(;this._currentTileIndex<e.length;)if(s.getBucketParts(b,u,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,p())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort(((T,z)=>T.sortKey-z.sortKey)));this._currentPartIndex<b.length;)if(s.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,p())return!0;return!1}}class Lo{constructor(e,s,c,u,p,b,T,z){this.placement=new hr(e,Za(),s,b,T,z),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=p,this._done=!1}isDone(){return this._done}continuePlacement(e,s,c){const u=X.now(),p=()=>!this._forceFullPlacement&&X.now()-u>2;for(;this._currentPlacementIndex>=0;){const b=s[e[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=T)&&(!b.maxzoom||b.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Cn(b)),this._inProgressLayer.continuePlacement(c[b.source],this.placement,this._showCollisionBoxes,b,p))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const dn=512/d.X/2;class fn{constructor(e,s,c){this.tileID=e,this.bucketInstanceId=c,this._symbolsByKey={};const u=new Map;for(let p=0;p<s.length;p++){const b=s.get(p),T=b.key,z=u.get(T);z?z.push(b):u.set(T,[b])}for(const[p,b]of u){const T={positions:b.map((z=>({x:Math.floor(z.anchorX*dn),y:Math.floor(z.anchorY*dn)}))),crossTileIDs:b.map((z=>z.crossTileID))};if(T.positions.length>128){const z=new d.av(T.positions.length,16,Uint16Array);for(const{x:I,y:L}of T.positions)z.add(I,L);z.finish(),delete T.positions,T.index=z}this._symbolsByKey[p]=T}}getScaledCoordinates(e,s){const{x:c,y:u,z:p}=this.tileID.canonical,{x:b,y:T,z}=s.canonical,I=dn/Math.pow(2,z-p),L=(T*d.X+e.anchorY)*I,O=u*d.X*dn;return{x:Math.floor((b*d.X+e.anchorX)*I-c*d.X*dn),y:Math.floor(L-O)}}findMatches(e,s,c){const u=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let p=0;p<e.length;p++){const b=e.get(p);if(b.crossTileID)continue;const T=this._symbolsByKey[b.key];if(!T)continue;const z=this.getScaledCoordinates(b,s);if(T.index){const I=T.index.range(z.x-u,z.y-u,z.x+u,z.y+u).sort();for(const L of I){const O=T.crossTileIDs[L];if(!c[O]){c[O]=!0,b.crossTileID=O;break}}}else if(T.positions)for(let I=0;I<T.positions.length;I++){const L=T.positions[I],O=T.crossTileIDs[I];if(Math.abs(L.x-z.x)<=u&&Math.abs(L.y-z.y)<=u&&!c[O]){c[O]=!0,b.crossTileID=O;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:e})=>e))}}class Fc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ir{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const s=Math.round((e-this.lng)/360);if(s!==0)for(const c in this.indexes){const u=this.indexes[c],p={};for(const b in u){const T=u[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+s),p[T.tileID.key]=T}this.indexes[c]=p}this.lng=e}addBucket(e,s,c){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let p=0;p<s.symbolInstances.length;p++)s.symbolInstances.get(p).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const u=this.usedCrossTileIDs[e.overscaledZ];for(const p in this.indexes){const b=this.indexes[p];if(Number(p)>e.overscaledZ)for(const T in b){const z=b[T];z.tileID.isChildOf(e)&&z.findMatches(s.symbolInstances,e,u)}else{const T=b[e.scaledTo(Number(p)).key];T&&T.findMatches(s.symbolInstances,e,u)}}for(let p=0;p<s.symbolInstances.length;p++){const b=s.symbolInstances.get(p);b.crossTileID||(b.crossTileID=c.generate(),u[b.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new fn(e,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(e,s){for(const c of s.getCrossTileIDsLists())for(const u of c)delete this.usedCrossTileIDs[e][u]}removeStaleBuckets(e){let s=!1;for(const c in this.indexes){const u=this.indexes[c];for(const p in u)e[u[p].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,u[p]),delete u[p],s=!0)}return s}}class jc{constructor(){this.layerIndexes={},this.crossTileIDs=new Fc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,s,c){let u=this.layerIndexes[e.id];u===void 0&&(u=this.layerIndexes[e.id]=new Ir);let p=!1;const b={};u.handleWrapJump(c);for(const T of s){const z=T.getBucket(e);z&&e.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),u.addBucket(T.tileID,z,this.crossTileIDs)&&(p=!0),b[z.bucketInstanceId]=!0)}return u.removeStaleBuckets(b)&&(p=!0),p}pruneUnusedLayers(e){const s={};e.forEach((c=>{s[c]=!0}));for(const c in this.layerIndexes)s[c]||delete this.layerIndexes[c]}}const kr=(m,e)=>d.t(m,e&&e.filter((s=>s.identifier!=="source.canvas"))),qd=d.aw();class dr extends d.E{constructor(e,s={}){super(),this._rtlPluginLoaded=()=>{for(const c in this.sourceCaches){const u=this.sourceCaches[c].getSource().type;u!=="vector"&&u!=="geojson"||this.sourceCaches[c].reload()}},this.map=e,this.dispatcher=new pi(Ii(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((c,u)=>this.getGlyphs(c,u))),this.dispatcher.registerMessageHandler("GI",((c,u)=>this.getImages(c,u))),this.imageManager=new Ft,this.imageManager.setEventedParent(this),this.glyphManager=new Ge(e._requestManager,s.localIdeographFontFamily),this.lineAtlas=new st(256,512),this.crossTileSymbolIndex=new jc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new d.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",d.ay()),Ta().on(rt,this._rtlPluginLoaded),this.on("data",(c=>{if(c.dataType!=="source"||c.sourceDataType!=="metadata")return;const u=this.sourceCaches[c.sourceId];if(!u)return;const p=u.getSource();if(p&&p.vectorLayerIds)for(const b in this._layers){const T=this._layers[b];T.source===p.id&&this._validateLayer(T)}}))}loadURL(e,s={},c){this.fire(new d.k("dataloading",{dataType:"style"})),s.validate=typeof s.validate!="boolean"||s.validate;const u=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const p=this._loadStyleRequest;d.h(u,this._loadStyleRequest).then((b=>{this._loadStyleRequest=null,this._load(b.data,s,c)})).catch((b=>{this._loadStyleRequest=null,b&&!p.signal.aborted&&this.fire(new d.j(b))}))}loadJSON(e,s={},c){this.fire(new d.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,X.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,s.validate=s.validate!==!1,this._load(e,s,c)})).catch((()=>{}))}loadEmpty(){this.fire(new d.k("dataloading",{dataType:"style"})),this._load(qd,{validate:!1})}_load(e,s,c){var u;const p=s.transformStyle?s.transformStyle(c,e):e;if(!s.validate||!kr(this,d.u(p))){this._loaded=!0,this.stylesheet=p;for(const b in p.sources)this.addSource(b,p.sources[b],{validate:!1});p.sprite?this._loadSprite(p.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(p.glyphs),this._createLayers(),this.light=new se(this.stylesheet.light),this.sky=new Je(this.stylesheet.sky),this.map.setTerrain((u=this.stylesheet.terrain)!==null&&u!==void 0?u:null),this.fire(new d.k("data",{dataType:"style"})),this.fire(new d.k("style.load"))}}_createLayers(){const e=d.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map((s=>s.id)),this._layers={},this._serializedLayers=null;for(const s of e){const c=d.aA(s);c.setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=c}}_loadSprite(e,s=!1,c=void 0){let u;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(p,b,T,z){return d._(this,void 0,void 0,(function*(){const I=Nt(p),L=T>1?"@2x":"",O={},q={};for(const{id:Q,url:te}of I){const ne=b.transformRequest(Gt(te,L,".json"),"SpriteJSON");O[Q]=d.h(ne,z);const le=b.transformRequest(Gt(te,L,".png"),"SpriteImage");q[Q]=Pe.getImage(le,z)}return yield Promise.all([...Object.values(O),...Object.values(q)]),(function(Q,te){return d._(this,void 0,void 0,(function*(){const ne={};for(const le in Q){ne[le]={};const de=X.getImageCanvasContext((yield te[le]).data),pe=(yield Q[le]).data;for(const re in pe){const{width:ve,height:Te,x:Re,y:$e,sdf:nt,pixelRatio:pt,stretchX:xt,stretchY:ut,content:ct,textFitWidth:St,textFitHeight:ft}=pe[re];ne[le][re]={data:null,pixelRatio:pt,sdf:nt,stretchX:xt,stretchY:ut,content:ct,textFitWidth:St,textFitHeight:ft,spriteData:{width:ve,height:Te,x:Re,y:$e,context:de}}}}return ne}))})(O,q)}))})(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((p=>{if(this._spriteRequest=null,p)for(const b in p){this._spritesImagesIds[b]=[];const T=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter((z=>!(z in p))):[];for(const z of T)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in p[b]){const I=b==="default"?z:`${b}:${z}`;this._spritesImagesIds[b].push(I),I in this.imageManager.images?this.imageManager.updateImage(I,p[b][z],!1):this.imageManager.addImage(I,p[b][z]),s&&(this._changedImages[I]=!0)}}})).catch((p=>{this._spriteRequest=null,u=p,this.fire(new d.j(u))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),s&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"})),c&&c(u)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}_validateLayer(e){const s=this.sourceCaches[e.source];if(!s)return;const c=e.sourceLayer;if(!c)return;const u=s.getSource();(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(c)===-1)&&this.fire(new d.j(new Error(`Source layer "${c}" does not exist on source "${u.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,s=!1){const c=this._serializedAllLayers();if(!e||e.length===0)return Object.values(s?d.aB(c):c);const u=[];for(const p of e)if(c[p]){const b=s?d.aB(c[p]):c[p];u.push(b)}return u}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const s=Object.keys(this._layers);for(const c of s){const u=this._layers[c];u.type!=="custom"&&(e[c]=u.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const s=this._changed;if(s){const u=Object.keys(this._updatedLayers),p=Object.keys(this._removedLayers);(u.length||p.length)&&this._updateWorkerLayers(u,p);for(const b in this._updatedSources){const T=this._updatedSources[b];if(T==="reload")this._reloadSource(b);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const b in this._updatedPaintProps)this._layers[b].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const c={};for(const u in this.sourceCaches){const p=this.sourceCaches[u];c[u]=p.used,p.used=!1}for(const u of this._order){const p=this._layers[u];p.recalculate(e,this._availableImages),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}for(const u in c){const p=this.sourceCaches[u];!!c[u]!=!!p.used&&p.fire(new d.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:u}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,s&&this.fire(new d.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,s){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,s={}){var c;this._checkLoaded();const u=this.serialize();if(e=s.transformStyle?s.transformStyle(u,e):e,((c=s.validate)===null||c===void 0||c)&&kr(this,d.u(e)))return!1;(e=d.aB(e)).layers=d.az(e.layers);const p=d.aC(u,e),b=this._getOperationsToPerform(p);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(const T of b.operations)T();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const s=[],c=[];for(const u of e)switch(u.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":s.push((()=>this.addLayer.apply(this,u.args)));break;case"removeLayer":s.push((()=>this.removeLayer.apply(this,u.args)));break;case"setPaintProperty":s.push((()=>this.setPaintProperty.apply(this,u.args)));break;case"setLayoutProperty":s.push((()=>this.setLayoutProperty.apply(this,u.args)));break;case"setFilter":s.push((()=>this.setFilter.apply(this,u.args)));break;case"addSource":s.push((()=>this.addSource.apply(this,u.args)));break;case"removeSource":s.push((()=>this.removeSource.apply(this,u.args)));break;case"setLayerZoomRange":s.push((()=>this.setLayerZoomRange.apply(this,u.args)));break;case"setLight":s.push((()=>this.setLight.apply(this,u.args)));break;case"setGeoJSONSourceData":s.push((()=>this.setGeoJSONSourceData.apply(this,u.args)));break;case"setGlyphs":s.push((()=>this.setGlyphs.apply(this,u.args)));break;case"setSprite":s.push((()=>this.setSprite.apply(this,u.args)));break;case"setSky":s.push((()=>this.setSky.apply(this,u.args)));break;case"setTerrain":s.push((()=>this.map.setTerrain.apply(this,u.args)));break;case"setTransition":s.push((()=>{}));break;default:c.push(u.command)}return{operations:s,unimplemented:c}}addImage(e,s){if(this.getImage(e))return this.fire(new d.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,s),this._afterImageUpdated(e)}updateImage(e,s){this.imageManager.updateImage(e,s)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new d.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,s,c={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(d.u.source,`sources.${e}`,s,null,c))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const u=this.sourceCaches[e]=new jt(e,s,this.dispatcher);u.style=this,u.setEventedParent(this,(()=>({isSourceLoaded:u.loaded(),source:u.serialize(),sourceId:e}))),u.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const c in this._layers)if(this._layers[c].source===e)return this.fire(new d.j(new Error(`Source "${e}" cannot be removed while layer "${c}" is using it.`)));const s=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],s.fire(new d.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,s){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const c=this.sourceCaches[e].getSource();if(c.type!=="geojson")throw new Error(`geojsonSource.type is ${c.type}, which is !== 'geojson`);c.setData(s),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,s,c={}){this._checkLoaded();const u=e.id;if(this.getLayer(u))return void this.fire(new d.j(new Error(`Layer "${u}" already exists on this map.`)));let p;if(e.type==="custom"){if(kr(this,d.aD(e)))return;p=d.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(u,e.source),e=d.aB(e),e=d.e(e,{source:u})),this._validate(d.u.layer,`layers.${u}`,e,{arrayIndex:-1},c))return;p=d.aA(e),this._validateLayer(p),p.setEventedParent(this,{layer:{id:u}})}const b=s?this._order.indexOf(s):this._order.length;if(s&&b===-1)this.fire(new d.j(new Error(`Cannot add layer "${u}" before non-existing layer "${s}".`)));else{if(this._order.splice(b,0,u),this._layerOrderChanged=!0,this._layers[u]=p,this._removedLayers[u]&&p.source&&p.type!=="custom"){const T=this._removedLayers[u];delete this._removedLayers[u],T.type!==p.type?this._updatedSources[p.source]="clear":(this._updatedSources[p.source]="reload",this.sourceCaches[p.source].pause())}this._updateLayer(p),p.onAdd&&p.onAdd(this.map)}}moveLayer(e,s){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new d.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===s)return;const c=this._order.indexOf(e);this._order.splice(c,1);const u=s?this._order.indexOf(s):this._order.length;s&&u===-1?this.fire(new d.j(new Error(`Cannot move layer "${e}" before non-existing layer "${s}".`))):(this._order.splice(u,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const s=this._layers[e];if(!s)return void this.fire(new d.j(new Error(`Cannot remove non-existing layer "${e}".`)));s.setEventedParent(null);const c=this._order.indexOf(e);this._order.splice(c,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=s,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],s.onRemove&&s.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,s,c){this._checkLoaded();const u=this.getLayer(e);u?u.minzoom===s&&u.maxzoom===c||(s!=null&&(u.minzoom=s),c!=null&&(u.maxzoom=c),this._updateLayer(u)):this.fire(new d.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,s,c={}){this._checkLoaded();const u=this.getLayer(e);if(u){if(!d.aE(u.filter,s))return s==null?(u.filter=void 0,void this._updateLayer(u)):void(this._validate(d.u.filter,`layers.${u.id}.filter`,s,null,c)||(u.filter=d.aB(s),this._updateLayer(u)))}else this.fire(new d.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return d.aB(this.getLayer(e).filter)}setLayoutProperty(e,s,c,u={}){this._checkLoaded();const p=this.getLayer(e);p?d.aE(p.getLayoutProperty(s),c)||(p.setLayoutProperty(s,c,u),this._updateLayer(p)):this.fire(new d.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,s){const c=this.getLayer(e);if(c)return c.getLayoutProperty(s);this.fire(new d.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,s,c,u={}){this._checkLoaded();const p=this.getLayer(e);p?d.aE(p.getPaintProperty(s),c)||(p.setPaintProperty(s,c,u)&&this._updateLayer(p),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new d.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,s){return this.getLayer(e).getPaintProperty(s)}setFeatureState(e,s){this._checkLoaded();const c=e.source,u=e.sourceLayer,p=this.sourceCaches[c];if(p===void 0)return void this.fire(new d.j(new Error(`The source '${c}' does not exist in the map's style.`)));const b=p.getSource().type;b==="geojson"&&u?this.fire(new d.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||u?(e.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),p.setFeatureState(u,e.id,s)):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,s){this._checkLoaded();const c=e.source,u=this.sourceCaches[c];if(u===void 0)return void this.fire(new d.j(new Error(`The source '${c}' does not exist in the map's style.`)));const p=u.getSource().type,b=p==="vector"?e.sourceLayer:void 0;p!=="vector"||b?s&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new d.j(new Error("A feature id is required to remove its specific state property."))):u.removeFeatureState(b,e.id,s):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const s=e.source,c=e.sourceLayer,u=this.sourceCaches[s];if(u!==void 0)return u.getSource().type!=="vector"||c?(e.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),u.getFeatureState(c,e.id)):void this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new d.j(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return d.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=d.aF(this.sourceCaches,(p=>p.serialize())),s=this._serializeByIds(this._order,!0),c=this.map.getTerrain()||void 0,u=this.stylesheet;return d.aG({version:u.version,name:u.name,metadata:u.metadata,light:u.light,sky:u.sky,center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch,sprite:u.sprite,glyphs:u.glyphs,transition:u.transition,sources:e,layers:s,terrain:c},(p=>p!==void 0))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const s=b=>this._layers[b].type==="fill-extrusion",c={},u=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(s(T)){c[T]=b;for(const z of e){const I=z[T];if(I)for(const L of I)u.push(L)}}}u.sort(((b,T)=>T.intersectionZ-b.intersectionZ));const p=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(s(T))for(let z=u.length-1;z>=0;z--){const I=u[z].feature;if(c[I.layer.id]<b)break;p.push(I),u.pop()}else for(const z of e){const I=z[T];if(I)for(const L of I)p.push(L.feature)}}return p}queryRenderedFeatures(e,s,c){s&&s.filter&&this._validate(d.u.filter,"queryRenderedFeatures.filter",s.filter,null,s);const u={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new d.j(new Error("parameters.layers must be an Array."))),[];for(const T of s.layers){const z=this._layers[T];if(!z)return this.fire(new d.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];u[z.source]=!0}}const p=[];s.availableImages=this._availableImages;const b=this._serializedAllLayers();for(const T in this.sourceCaches)s.layers&&!u[T]||p.push(an(this.sourceCaches[T],this._layers,b,e,s,c));return this.placement&&p.push((function(T,z,I,L,O,q,Q){const te={},ne=q.queryRenderedSymbols(L),le=[];for(const de of Object.keys(ne).map(Number))le.push(Q[de]);le.sort(Bn);for(const de of le){const pe=de.featureIndex.lookupSymbolFeatures(ne[de.bucketInstanceId],z,de.bucketIndex,de.sourceLayerIndex,O.filter,O.layers,O.availableImages,T);for(const re in pe){const ve=te[re]=te[re]||[],Te=pe[re];Te.sort(((Re,$e)=>{const nt=de.featureSortOrder;if(nt){const pt=nt.indexOf(Re.featureIndex);return nt.indexOf($e.featureIndex)-pt}return $e.featureIndex-Re.featureIndex}));for(const Re of Te)ve.push(Re)}}for(const de in te)te[de].forEach((pe=>{const re=pe.feature,ve=I[T[de].source].getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=ve}));return te})(this._layers,b,this.sourceCaches,e,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(p)}querySourceFeatures(e,s){s&&s.filter&&this._validate(d.u.filter,"querySourceFeatures.filter",s.filter,null,s);const c=this.sourceCaches[e];return c?(function(u,p){const b=u.getRenderableIds().map((I=>u.getTileByID(I))),T=[],z={};for(let I=0;I<b.length;I++){const L=b[I],O=L.tileID.canonical.key;z[O]||(z[O]=!0,L.querySourceFeatures(T,p))}return T})(c,s):[]}getLight(){return this.light.getLight()}setLight(e,s={}){this._checkLoaded();const c=this.light.getLight();let u=!1;for(const b in e)if(!d.aE(e[b],c[b])){u=!0;break}if(!u)return;const p={now:X.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,s),this.light.updateTransitions(p)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,s={}){const c=this.getSky();let u=!1;if(!e&&!c)return;if(e&&!c)u=!0;else if(!e&&c)u=!0;else for(const b in e)if(!d.aE(e[b],c[b])){u=!0;break}if(!u)return;const p={now:X.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,s),this.sky.updateTransitions(p)}_validate(e,s,c,u,p={}){return(!p||p.validate!==!1)&&kr(this,e.call(d.u,d.e({key:s,style:this.serialize(),value:c,styleSpec:d.v},u)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ta().off(rt,this._rtlPluginLoaded);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this.sourceCaches){const c=this.sourceCaches[s];c.setEventedParent(null),c.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const s in this.sourceCaches)this.sourceCaches[s].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,s,c,u,p=!1){let b=!1,T=!1;const z={};for(const I of this._order){const L=this._layers[I];if(L.type!=="symbol")continue;if(!z[L.source]){const q=this.sourceCaches[L.source];z[L.source]=q.getRenderableIds(!0).map((Q=>q.getTileByID(Q))).sort(((Q,te)=>te.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(te.tileID)?-1:1)))}const O=this.crossTileSymbolIndex.addLayer(L,z[L.source],e.center.lng);b=b||O}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((p=p||this._layerOrderChanged||c===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(X.now(),e.zoom))&&(this.pauseablePlacement=new Lo(e,this.map.terrain,this._order,p,s,c,u,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(X.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(const I of this._order){const L=this._layers[I];L.type==="symbol"&&this.placement.updateLayerOpacities(L,z[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(X.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,s){return d._(this,void 0,void 0,(function*(){const c=yield this.imageManager.getImages(s.icons);this._updateTilesForChangedImages();const u=this.sourceCaches[s.source];return u&&u.setDependencies(s.tileID.key,s.type,s.icons),c}))}getGlyphs(e,s){return d._(this,void 0,void 0,(function*(){const c=yield this.glyphManager.getGlyphs(s.stacks),u=this.sourceCaches[s.source];return u&&u.setDependencies(s.tileID.key,s.type,[""]),c}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,s={}){this._checkLoaded(),e&&this._validate(d.u.glyphs,"glyphs",e,null,s)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,s,c={},u){this._checkLoaded();const p=[{id:e,url:s}],b=[...Nt(this.stylesheet.sprite),...p];this._validate(d.u.sprite,"sprite",b,null,c)||(this.stylesheet.sprite=b,this._loadSprite(p,!0,u))}removeSprite(e){this._checkLoaded();const s=Nt(this.stylesheet.sprite);if(s.find((c=>c.id===e))){if(this._spritesImagesIds[e])for(const c of this._spritesImagesIds[e])this.imageManager.removeImage(c),this._changedImages[c]=!0;s.splice(s.findIndex((c=>c.id===e)),1),this.stylesheet.sprite=s.length>0?s:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}else this.fire(new d.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Nt(this.stylesheet.sprite)}setSprite(e,s={},c){this._checkLoaded(),e&&this._validate(d.u.sprite,"sprite",e,null,s)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,c):(this._unloadSprite(),c&&c(null)))}}var Ga=d.Y([{name:"a_pos",type:"Int16",components:2}]);const $a={prelude:mi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:mi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:mi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:mi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:mi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:mi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:mi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:mi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:mi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:mi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:mi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:mi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:mi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:mi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:mi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:mi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:mi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:mi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:mi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function mi(m,e){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=e.match(/attribute ([\w]+) ([\w]+)/g),u=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),p=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=p?p.concat(u):u,T={};return{fragmentSource:m=m.replace(s,((z,I,L,O,q)=>(T[q]=!0,I==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${L} ${O} ${q};
#else
uniform ${L} ${O} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${L} ${O} ${q} = u_${q};
#endif
`))),vertexSource:e=e.replace(s,((z,I,L,O,q)=>{const Q=O==="float"?"vec2":"vec4",te=q.match(/color/)?"color":Q;return T[q]?I==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${L} ${Q} a_${q};
varying ${L} ${O} ${q};
#else
uniform ${L} ${O} u_${q};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${L} ${O} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${te}(a_${q}, u_${q}_t);
#else
    ${L} ${O} ${q} = u_${q};
#endif
`:I==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${L} ${Q} a_${q};
#else
uniform ${L} ${O} u_${q};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${L} ${O} ${q} = a_${q};
#else
    ${L} ${O} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${L} ${O} ${q} = unpack_mix_${te}(a_${q}, u_${q}_t);
#else
    ${L} ${O} ${q} = u_${q};
#endif
`})),staticAttributes:c,staticUniforms:b}}class bs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,s,c,u,p,b,T,z,I){this.context=e;let L=this.boundPaintVertexBuffers.length!==u.length;for(let O=0;!L&&O<u.length;O++)this.boundPaintVertexBuffers[O]!==u[O]&&(L=!0);!this.vao||this.boundProgram!==s||this.boundLayoutVertexBuffer!==c||L||this.boundIndexBuffer!==p||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==I?this.freshBind(s,c,u,p,b,T,z,I):(e.bindVertexArray.set(this.vao),T&&T.bind(),p&&p.dynamicDraw&&p.bind(),z&&z.bind(),I&&I.bind())}freshBind(e,s,c,u,p,b,T,z){const I=e.numAttributes,L=this.context,O=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=u,this.boundVertexOffset=p,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=z,s.enableAttributes(O,e);for(const q of c)q.enableAttributes(O,e);b&&b.enableAttributes(O,e),T&&T.enableAttributes(O,e),z&&z.enableAttributes(O,e),s.bind(),s.setVertexAttribPointers(O,e,p);for(const q of c)q.bind(),q.setVertexAttribPointers(O,e,p);b&&(b.bind(),b.setVertexAttribPointers(O,e,p)),u&&u.bind(),T&&(T.bind(),T.setVertexAttribPointers(O,e,p)),z&&(z.bind(),z.setVertexAttribPointers(O,e,p)),L.currentNumAttributes=I}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Uc=(m,e,s,c,u)=>({u_matrix:m,u_texture:0,u_ele_delta:e,u_fog_matrix:s,u_fog_color:c?c.properties.get("fog-color"):d.aM.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:c?c.calculateFogBlendOpacity(u):0,u_horizon_color:c?c.properties.get("horizon-color"):d.aM.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1});function Ws(m){const e=[];for(let s=0;s<m.length;s++){if(m[s]===null)continue;const c=m[s].split(" ");e.push(c.pop())}return e}class ws{constructor(e,s,c,u,p,b){const T=e.gl;this.program=T.createProgram();const z=Ws(s.staticAttributes),I=c?c.getBinderAttributes():[],L=z.concat(I),O=$a.prelude.staticUniforms?Ws($a.prelude.staticUniforms):[],q=s.staticUniforms?Ws(s.staticUniforms):[],Q=c?c.getBinderUniforms():[],te=O.concat(q).concat(Q),ne=[];for(const Re of te)ne.indexOf(Re)<0&&ne.push(Re);const le=c?c.defines():[];p&&le.push("#define OVERDRAW_INSPECTOR;"),b&&le.push("#define TERRAIN3D;");const de=le.concat($a.prelude.fragmentSource,s.fragmentSource).join(`
`),pe=le.concat($a.prelude.vertexSource,s.vertexSource).join(`
`),re=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(re,de),T.compileShader(re),!T.getShaderParameter(re,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(re)}`);T.attachShader(this.program,re);const ve=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ve,pe),T.compileShader(ve),!T.getShaderParameter(ve,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(ve)}`);T.attachShader(this.program,ve),this.attributes={};const Te={};this.numAttributes=L.length;for(let Re=0;Re<this.numAttributes;Re++)L[Re]&&(T.bindAttribLocation(this.program,Re,L[Re]),this.attributes[L[Re]]=Re);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(ve),T.deleteShader(re);for(let Re=0;Re<ne.length;Re++){const $e=ne[Re];if($e&&!Te[$e]){const nt=T.getUniformLocation(this.program,$e);nt&&(Te[$e]=nt)}}this.fixedUniforms=u(e,Te),this.terrainUniforms=((Re,$e)=>({u_depth:new d.aH(Re,$e.u_depth),u_terrain:new d.aH(Re,$e.u_terrain),u_terrain_dim:new d.aI(Re,$e.u_terrain_dim),u_terrain_matrix:new d.aJ(Re,$e.u_terrain_matrix),u_terrain_unpack:new d.aK(Re,$e.u_terrain_unpack),u_terrain_exaggeration:new d.aI(Re,$e.u_terrain_exaggeration)}))(e,Te),this.binderUniforms=c?c.getUniforms(e,Te):[]}draw(e,s,c,u,p,b,T,z,I,L,O,q,Q,te,ne,le,de,pe){const re=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(c),e.setStencilMode(u),e.setColorMode(p),e.setCullFace(b),z){e.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,z.depthTexture),e.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,z.texture);for(const Te in this.terrainUniforms)this.terrainUniforms[Te].set(z[Te])}for(const Te in this.fixedUniforms)this.fixedUniforms[Te].set(T[Te]);ne&&ne.setUniforms(e,this.binderUniforms,Q,{zoom:te});let ve=0;switch(s){case re.LINES:ve=2;break;case re.TRIANGLES:ve=3;break;case re.LINE_STRIP:ve=1}for(const Te of q.get()){const Re=Te.vaos||(Te.vaos={});(Re[I]||(Re[I]=new bs)).bind(e,this,L,ne?ne.getPaintVertexBuffers():[],O,Te.vertexOffset,le,de,pe),re.drawElements(s,Te.primitiveLength*ve,re.UNSIGNED_SHORT,Te.primitiveOffset*ve*2)}}}function Vc(m,e,s){const c=1/ni(s,1,e.transform.tileZoom),u=Math.pow(2,s.tileID.overscaledZ),p=s.tileSize*Math.pow(2,e.transform.tileZoom)/u,b=p*(s.tileID.canonical.x+s.tileID.wrap*u),T=p*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[c,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const Oo=(m,e,s,c)=>{const u=e.style.light,p=u.properties.get("position"),b=[p.x,p.y,p.z],T=(function(){var I=new d.A(9);return d.A!=Float32Array&&(I[1]=0,I[2]=0,I[3]=0,I[5]=0,I[6]=0,I[7]=0),I[0]=1,I[4]=1,I[8]=1,I})();u.properties.get("anchor")==="viewport"&&(function(I,L){var O=Math.sin(L),q=Math.cos(L);I[0]=q,I[1]=O,I[2]=0,I[3]=-O,I[4]=q,I[5]=0,I[6]=0,I[7]=0,I[8]=1})(T,-e.transform.angle),(function(I,L,O){var q=L[0],Q=L[1],te=L[2];I[0]=q*O[0]+Q*O[3]+te*O[6],I[1]=q*O[1]+Q*O[4]+te*O[7],I[2]=q*O[2]+Q*O[5]+te*O[8]})(b,b,T);const z=u.properties.get("color");return{u_matrix:m,u_lightpos:b,u_lightintensity:u.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+s,u_opacity:c}},Fl=(m,e,s,c,u,p,b)=>d.e(Oo(m,e,s,c),Vc(p,e,b),{u_height_factor:-Math.pow(2,u.overscaledZ)/b.tileSize/8}),Ss=m=>({u_matrix:m}),Sh=(m,e,s,c)=>d.e(Ss(m),Vc(s,e,c)),Hd=(m,e)=>({u_matrix:m,u_world:e}),jl=(m,e,s,c,u)=>d.e(Sh(m,e,s,c),{u_world:u}),Fu=(m,e,s,c)=>{const u=m.transform;let p,b;if(c.paint.get("circle-pitch-alignment")==="map"){const T=ni(s,1,u.zoom);p=!0,b=[T,T]}else p=!1,b=u.pixelsToGLUnits;return{u_camera_to_center_distance:u.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(e.posMatrix,s,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+p,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:b}},Xa=(m,e,s)=>({u_matrix:m,u_inv_matrix:e,u_camera_to_center_distance:s.cameraToCenterDistance,u_viewport_size:[s.width,s.height]}),Ca=(m,e,s=1)=>({u_matrix:m,u_color:e,u_overlay:0,u_overlay_scale:s}),Rn=m=>({u_matrix:m}),fr=(m,e,s,c)=>({u_matrix:m,u_extrude_scale:ni(e,1,s),u_intensity:c}),Bo=(m,e,s,c)=>{const u=d.H();d.aP(u,0,m.width,m.height,0,0,1);const p=m.context.gl;return{u_matrix:u,u_world:[p.drawingBufferWidth,p.drawingBufferHeight],u_image:s,u_color_ramp:c,u_opacity:e.paint.get("heatmap-opacity")}};function Ul(m,e){const s=Math.pow(2,e.canonical.z),c=e.canonical.y;return[new d.Z(0,c/s).toLngLat().lat,new d.Z(0,(c+1)/s).toLngLat().lat]}const Ts=(m,e,s,c)=>{const u=m.transform;return{u_matrix:qc(m,e,s,c),u_ratio:1/ni(e,1,u.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]]}},Ma=(m,e,s,c,u)=>d.e(Ts(m,e,s,u),{u_image:0,u_image_height:c}),Es=(m,e,s,c,u)=>{const p=m.transform,b=Ya(e,p);return{u_matrix:qc(m,e,s,u),u_texsize:e.imageAtlasTexture.size,u_ratio:1/ni(e,1,p.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[b,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Vl=(m,e,s,c,u,p)=>{const b=m.lineAtlas,T=Ya(e,m.transform),z=s.layout.get("line-cap")==="round",I=b.getDash(c.from,z),L=b.getDash(c.to,z),O=I.width*u.fromScale,q=L.width*u.toScale;return d.e(Ts(m,e,s,p),{u_patternscale_a:[T/O,-I.height/2],u_patternscale_b:[T/q,-L.height/2],u_sdfgamma:b.width/(256*Math.min(O,q)*m.pixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:L.y,u_mix:u.t})};function Ya(m,e){return 1/ni(m,1,e.tileZoom)}function qc(m,e,s,c){return m.translatePosMatrix(c?c.posMatrix:e.tileID.posMatrix,e,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const Hc=(m,e,s,c,u)=>{return{u_matrix:m,u_tl_parent:e,u_scale_parent:s,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*u.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:u.paint.get("raster-brightness-min"),u_brightness_high:u.paint.get("raster-brightness-max"),u_saturation_factor:(b=u.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(p=u.paint.get("raster-contrast"),p>0?1/(1-p):1+p),u_spin_weights:Th(u.paint.get("raster-hue-rotate"))};var p,b};function Th(m){m*=Math.PI/180;const e=Math.sin(m),s=Math.cos(m);return[(2*s+1)/3,(-Math.sqrt(3)*e-s+1)/3,(Math.sqrt(3)*e-s+1)/3]}const ql=(m,e,s,c,u,p,b,T,z,I,L,O,q,Q)=>{const te=b.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_pitch:te.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:te.width/te.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:z,u_coord_matrix:I,u_is_text:+O,u_pitch_with_map:+c,u_is_along_line:u,u_is_variable_anchor:p,u_texsize:q,u_texture:0,u_translation:L,u_pitched_scale:Q}},As=(m,e,s,c,u,p,b,T,z,I,L,O,q,Q,te)=>{const ne=b.transform;return d.e(ql(m,e,s,c,u,p,b,T,z,I,L,O,q,te),{u_gamma_scale:c?Math.cos(ne._pitch)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:1})},Zc=(m,e,s,c,u,p,b,T,z,I,L,O,q,Q)=>d.e(As(m,e,s,c,u,p,b,T,z,I,L,!0,O,!0,Q),{u_texsize_icon:q,u_texture_icon:1}),Xn=(m,e,s)=>({u_matrix:m,u_opacity:e,u_color:s}),Ka=(m,e,s,c,u,p)=>d.e((function(b,T,z,I){const L=z.imageManager.getPattern(b.from.toString()),O=z.imageManager.getPattern(b.to.toString()),{width:q,height:Q}=z.imageManager.getPixelSize(),te=Math.pow(2,I.tileID.overscaledZ),ne=I.tileSize*Math.pow(2,z.transform.tileZoom)/te,le=ne*(I.tileID.canonical.x+I.tileID.wrap*te),de=ne*I.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[q,Q],u_mix:T.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/ni(I,1,z.transform.tileZoom),u_pixel_coord_upper:[le>>16,de>>16],u_pixel_coord_lower:[65535&le,65535&de]}})(c,p,s,u),{u_matrix:m,u_opacity:e}),No={fillExtrusion:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_lightpos:new d.aN(m,e.u_lightpos),u_lightintensity:new d.aI(m,e.u_lightintensity),u_lightcolor:new d.aN(m,e.u_lightcolor),u_vertical_gradient:new d.aI(m,e.u_vertical_gradient),u_opacity:new d.aI(m,e.u_opacity)}),fillExtrusionPattern:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_lightpos:new d.aN(m,e.u_lightpos),u_lightintensity:new d.aI(m,e.u_lightintensity),u_lightcolor:new d.aN(m,e.u_lightcolor),u_vertical_gradient:new d.aI(m,e.u_vertical_gradient),u_height_factor:new d.aI(m,e.u_height_factor),u_image:new d.aH(m,e.u_image),u_texsize:new d.aO(m,e.u_texsize),u_pixel_coord_upper:new d.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(m,e.u_pixel_coord_lower),u_scale:new d.aN(m,e.u_scale),u_fade:new d.aI(m,e.u_fade),u_opacity:new d.aI(m,e.u_opacity)}),fill:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix)}),fillPattern:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_image:new d.aH(m,e.u_image),u_texsize:new d.aO(m,e.u_texsize),u_pixel_coord_upper:new d.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(m,e.u_pixel_coord_lower),u_scale:new d.aN(m,e.u_scale),u_fade:new d.aI(m,e.u_fade)}),fillOutline:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_world:new d.aO(m,e.u_world)}),fillOutlinePattern:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_world:new d.aO(m,e.u_world),u_image:new d.aH(m,e.u_image),u_texsize:new d.aO(m,e.u_texsize),u_pixel_coord_upper:new d.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(m,e.u_pixel_coord_lower),u_scale:new d.aN(m,e.u_scale),u_fade:new d.aI(m,e.u_fade)}),circle:(m,e)=>({u_camera_to_center_distance:new d.aI(m,e.u_camera_to_center_distance),u_scale_with_map:new d.aH(m,e.u_scale_with_map),u_pitch_with_map:new d.aH(m,e.u_pitch_with_map),u_extrude_scale:new d.aO(m,e.u_extrude_scale),u_device_pixel_ratio:new d.aI(m,e.u_device_pixel_ratio),u_matrix:new d.aJ(m,e.u_matrix)}),collisionBox:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_pixel_extrude_scale:new d.aO(m,e.u_pixel_extrude_scale)}),collisionCircle:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_inv_matrix:new d.aJ(m,e.u_inv_matrix),u_camera_to_center_distance:new d.aI(m,e.u_camera_to_center_distance),u_viewport_size:new d.aO(m,e.u_viewport_size)}),debug:(m,e)=>({u_color:new d.aL(m,e.u_color),u_matrix:new d.aJ(m,e.u_matrix),u_overlay:new d.aH(m,e.u_overlay),u_overlay_scale:new d.aI(m,e.u_overlay_scale)}),clippingMask:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix)}),heatmap:(m,e)=>({u_extrude_scale:new d.aI(m,e.u_extrude_scale),u_intensity:new d.aI(m,e.u_intensity),u_matrix:new d.aJ(m,e.u_matrix)}),heatmapTexture:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_world:new d.aO(m,e.u_world),u_image:new d.aH(m,e.u_image),u_color_ramp:new d.aH(m,e.u_color_ramp),u_opacity:new d.aI(m,e.u_opacity)}),hillshade:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_image:new d.aH(m,e.u_image),u_latrange:new d.aO(m,e.u_latrange),u_light:new d.aO(m,e.u_light),u_shadow:new d.aL(m,e.u_shadow),u_highlight:new d.aL(m,e.u_highlight),u_accent:new d.aL(m,e.u_accent)}),hillshadePrepare:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_image:new d.aH(m,e.u_image),u_dimension:new d.aO(m,e.u_dimension),u_zoom:new d.aI(m,e.u_zoom),u_unpack:new d.aK(m,e.u_unpack)}),line:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_ratio:new d.aI(m,e.u_ratio),u_device_pixel_ratio:new d.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new d.aO(m,e.u_units_to_pixels)}),lineGradient:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_ratio:new d.aI(m,e.u_ratio),u_device_pixel_ratio:new d.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new d.aO(m,e.u_units_to_pixels),u_image:new d.aH(m,e.u_image),u_image_height:new d.aI(m,e.u_image_height)}),linePattern:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_texsize:new d.aO(m,e.u_texsize),u_ratio:new d.aI(m,e.u_ratio),u_device_pixel_ratio:new d.aI(m,e.u_device_pixel_ratio),u_image:new d.aH(m,e.u_image),u_units_to_pixels:new d.aO(m,e.u_units_to_pixels),u_scale:new d.aN(m,e.u_scale),u_fade:new d.aI(m,e.u_fade)}),lineSDF:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_ratio:new d.aI(m,e.u_ratio),u_device_pixel_ratio:new d.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new d.aO(m,e.u_units_to_pixels),u_patternscale_a:new d.aO(m,e.u_patternscale_a),u_patternscale_b:new d.aO(m,e.u_patternscale_b),u_sdfgamma:new d.aI(m,e.u_sdfgamma),u_image:new d.aH(m,e.u_image),u_tex_y_a:new d.aI(m,e.u_tex_y_a),u_tex_y_b:new d.aI(m,e.u_tex_y_b),u_mix:new d.aI(m,e.u_mix)}),raster:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_tl_parent:new d.aO(m,e.u_tl_parent),u_scale_parent:new d.aI(m,e.u_scale_parent),u_buffer_scale:new d.aI(m,e.u_buffer_scale),u_fade_t:new d.aI(m,e.u_fade_t),u_opacity:new d.aI(m,e.u_opacity),u_image0:new d.aH(m,e.u_image0),u_image1:new d.aH(m,e.u_image1),u_brightness_low:new d.aI(m,e.u_brightness_low),u_brightness_high:new d.aI(m,e.u_brightness_high),u_saturation_factor:new d.aI(m,e.u_saturation_factor),u_contrast_factor:new d.aI(m,e.u_contrast_factor),u_spin_weights:new d.aN(m,e.u_spin_weights)}),symbolIcon:(m,e)=>({u_is_size_zoom_constant:new d.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(m,e.u_is_size_feature_constant),u_size_t:new d.aI(m,e.u_size_t),u_size:new d.aI(m,e.u_size),u_camera_to_center_distance:new d.aI(m,e.u_camera_to_center_distance),u_pitch:new d.aI(m,e.u_pitch),u_rotate_symbol:new d.aH(m,e.u_rotate_symbol),u_aspect_ratio:new d.aI(m,e.u_aspect_ratio),u_fade_change:new d.aI(m,e.u_fade_change),u_matrix:new d.aJ(m,e.u_matrix),u_label_plane_matrix:new d.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new d.aJ(m,e.u_coord_matrix),u_is_text:new d.aH(m,e.u_is_text),u_pitch_with_map:new d.aH(m,e.u_pitch_with_map),u_is_along_line:new d.aH(m,e.u_is_along_line),u_is_variable_anchor:new d.aH(m,e.u_is_variable_anchor),u_texsize:new d.aO(m,e.u_texsize),u_texture:new d.aH(m,e.u_texture),u_translation:new d.aO(m,e.u_translation),u_pitched_scale:new d.aI(m,e.u_pitched_scale)}),symbolSDF:(m,e)=>({u_is_size_zoom_constant:new d.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(m,e.u_is_size_feature_constant),u_size_t:new d.aI(m,e.u_size_t),u_size:new d.aI(m,e.u_size),u_camera_to_center_distance:new d.aI(m,e.u_camera_to_center_distance),u_pitch:new d.aI(m,e.u_pitch),u_rotate_symbol:new d.aH(m,e.u_rotate_symbol),u_aspect_ratio:new d.aI(m,e.u_aspect_ratio),u_fade_change:new d.aI(m,e.u_fade_change),u_matrix:new d.aJ(m,e.u_matrix),u_label_plane_matrix:new d.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new d.aJ(m,e.u_coord_matrix),u_is_text:new d.aH(m,e.u_is_text),u_pitch_with_map:new d.aH(m,e.u_pitch_with_map),u_is_along_line:new d.aH(m,e.u_is_along_line),u_is_variable_anchor:new d.aH(m,e.u_is_variable_anchor),u_texsize:new d.aO(m,e.u_texsize),u_texture:new d.aH(m,e.u_texture),u_gamma_scale:new d.aI(m,e.u_gamma_scale),u_device_pixel_ratio:new d.aI(m,e.u_device_pixel_ratio),u_is_halo:new d.aH(m,e.u_is_halo),u_translation:new d.aO(m,e.u_translation),u_pitched_scale:new d.aI(m,e.u_pitched_scale)}),symbolTextAndIcon:(m,e)=>({u_is_size_zoom_constant:new d.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(m,e.u_is_size_feature_constant),u_size_t:new d.aI(m,e.u_size_t),u_size:new d.aI(m,e.u_size),u_camera_to_center_distance:new d.aI(m,e.u_camera_to_center_distance),u_pitch:new d.aI(m,e.u_pitch),u_rotate_symbol:new d.aH(m,e.u_rotate_symbol),u_aspect_ratio:new d.aI(m,e.u_aspect_ratio),u_fade_change:new d.aI(m,e.u_fade_change),u_matrix:new d.aJ(m,e.u_matrix),u_label_plane_matrix:new d.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new d.aJ(m,e.u_coord_matrix),u_is_text:new d.aH(m,e.u_is_text),u_pitch_with_map:new d.aH(m,e.u_pitch_with_map),u_is_along_line:new d.aH(m,e.u_is_along_line),u_is_variable_anchor:new d.aH(m,e.u_is_variable_anchor),u_texsize:new d.aO(m,e.u_texsize),u_texsize_icon:new d.aO(m,e.u_texsize_icon),u_texture:new d.aH(m,e.u_texture),u_texture_icon:new d.aH(m,e.u_texture_icon),u_gamma_scale:new d.aI(m,e.u_gamma_scale),u_device_pixel_ratio:new d.aI(m,e.u_device_pixel_ratio),u_is_halo:new d.aH(m,e.u_is_halo),u_translation:new d.aO(m,e.u_translation),u_pitched_scale:new d.aI(m,e.u_pitched_scale)}),background:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_opacity:new d.aI(m,e.u_opacity),u_color:new d.aL(m,e.u_color)}),backgroundPattern:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_opacity:new d.aI(m,e.u_opacity),u_image:new d.aH(m,e.u_image),u_pattern_tl_a:new d.aO(m,e.u_pattern_tl_a),u_pattern_br_a:new d.aO(m,e.u_pattern_br_a),u_pattern_tl_b:new d.aO(m,e.u_pattern_tl_b),u_pattern_br_b:new d.aO(m,e.u_pattern_br_b),u_texsize:new d.aO(m,e.u_texsize),u_mix:new d.aI(m,e.u_mix),u_pattern_size_a:new d.aO(m,e.u_pattern_size_a),u_pattern_size_b:new d.aO(m,e.u_pattern_size_b),u_scale_a:new d.aI(m,e.u_scale_a),u_scale_b:new d.aI(m,e.u_scale_b),u_pixel_coord_upper:new d.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(m,e.u_pixel_coord_lower),u_tile_units_to_pixels:new d.aI(m,e.u_tile_units_to_pixels)}),terrain:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_texture:new d.aH(m,e.u_texture),u_ele_delta:new d.aI(m,e.u_ele_delta),u_fog_matrix:new d.aJ(m,e.u_fog_matrix),u_fog_color:new d.aL(m,e.u_fog_color),u_fog_ground_blend:new d.aI(m,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new d.aI(m,e.u_fog_ground_blend_opacity),u_horizon_color:new d.aL(m,e.u_horizon_color),u_horizon_fog_blend:new d.aI(m,e.u_horizon_fog_blend)}),terrainDepth:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_ele_delta:new d.aI(m,e.u_ele_delta)}),terrainCoords:(m,e)=>({u_matrix:new d.aJ(m,e.u_matrix),u_texture:new d.aH(m,e.u_texture),u_terrain_coords_id:new d.aI(m,e.u_terrain_coords_id),u_ele_delta:new d.aI(m,e.u_ele_delta)}),sky:(m,e)=>({u_sky_color:new d.aL(m,e.u_sky_color),u_horizon_color:new d.aL(m,e.u_horizon_color),u_horizon:new d.aI(m,e.u_horizon),u_sky_horizon_blend:new d.aI(m,e.u_sky_horizon_blend)})};class Pr{constructor(e,s,c){this.context=e;const u=e.gl;this.buffer=u.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?u.DYNAMIC_DRAW:u.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Zd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Hl{constructor(e,s,c,u){this.length=s.length,this.attributes=c,this.itemSize=s.bytesPerElement,this.dynamicDraw=u,this.context=e;const p=e.gl;this.buffer=p.createBuffer(),e.bindVertexBuffer.set(this.buffer),p.bufferData(p.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,s){for(let c=0;c<this.attributes.length;c++){const u=s.attributes[this.attributes[c].name];u!==void 0&&e.enableVertexAttribArray(u)}}setVertexAttribPointers(e,s,c){for(let u=0;u<this.attributes.length;u++){const p=this.attributes[u],b=s.attributes[p.name];b!==void 0&&e.vertexAttribPointer(b,p.components,e[Zd[p.type]],!1,this.itemSize,p.offset+this.itemSize*(c||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wa=new WeakMap;function Kr(m){var e;if(Wa.has(m))return Wa.get(m);{const s=(e=m.getParameter(m.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Wa.set(m,s),s}}class gi{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Zl extends gi{getDefault(){return d.aM.transparent}set(e){const s=this.current;(e.r!==s.r||e.g!==s.g||e.b!==s.b||e.a!==s.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Gd extends gi{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Fo extends gi{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class $d extends gi{getDefault(){return[!0,!0,!0,!0]}set(e){const s=this.current;(e[0]!==s[0]||e[1]!==s[1]||e[2]!==s[2]||e[3]!==s[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Gc extends gi{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Xd extends gi{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Eh extends gi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const s=this.current;(e.func!==s.func||e.ref!==s.ref||e.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class ju extends gi{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const s=this.current;(e[0]!==s[0]||e[1]!==s[1]||e[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Ah extends gi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;e?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=e,this.dirty=!1}}class Ch extends gi{getDefault(){return[0,1]}set(e){const s=this.current;(e[0]!==s[0]||e[1]!==s[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Uu extends gi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;e?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=e,this.dirty=!1}}class Mh extends gi{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Qs extends gi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;e?s.enable(s.BLEND):s.disable(s.BLEND),this.current=e,this.dirty=!1}}class zh extends gi{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const s=this.current;(e[0]!==s[0]||e[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Yd extends gi{getDefault(){return d.aM.transparent}set(e){const s=this.current;(e.r!==s.r||e.g!==s.g||e.b!==s.b||e.a!==s.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class $c extends gi{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Gl extends gi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;e?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=e,this.dirty=!1}}class Kd extends gi{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Xc extends gi{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Dh extends gi{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Wd extends gi{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Rh extends gi{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const s=this.current;(e[0]!==s[0]||e[1]!==s[1]||e[2]!==s[2]||e[3]!==s[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Ih extends gi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class kh extends gi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Vu extends gi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Ph extends gi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Yc extends gi{getDefault(){return null}set(e){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Qa extends gi{getDefault(){return null}set(e){var s;if(e===this.current&&!this.dirty)return;const c=this.gl;Kr(c)?c.bindVertexArray(e):(s=c.getExtension("OES_vertex_array_object"))===null||s===void 0||s.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class qu extends gi{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class $l extends gi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Js extends gi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Kc extends gi{constructor(e,s){super(e),this.context=e,this.parent=s}getDefault(){return null}}class Wc extends Kc{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Cs extends Kc{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Qc extends Kc{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Lh{constructor(e,s,c,u,p){this.context=e,this.width=s,this.height=c;const b=e.gl,T=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new Wc(e,T),u)this.depthAttachment=p?new Qc(e,T):new Cs(e,T);else if(p)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,s=this.colorAttachment.get();if(s&&e.deleteTexture(s),this.depthAttachment){const c=this.depthAttachment.get();c&&e.deleteRenderbuffer(c)}e.deleteFramebuffer(this.framebuffer)}}class sn{constructor(e,s,c){this.blendFunction=e,this.blendColor=s,this.mask=c}}sn.Replace=[1,0],sn.disabled=new sn(sn.Replace,d.aM.transparent,[!1,!1,!1,!1]),sn.unblended=new sn(sn.Replace,d.aM.transparent,[!0,!0,!0,!0]),sn.alphaBlended=new sn([1,771],d.aM.transparent,[!0,!0,!0,!0]);class jo{constructor(e){var s,c;if(this.gl=e,this.clearColor=new Zl(this),this.clearDepth=new Gd(this),this.clearStencil=new Fo(this),this.colorMask=new $d(this),this.depthMask=new Gc(this),this.stencilMask=new Xd(this),this.stencilFunc=new Eh(this),this.stencilOp=new ju(this),this.stencilTest=new Ah(this),this.depthRange=new Ch(this),this.depthTest=new Uu(this),this.depthFunc=new Mh(this),this.blend=new Qs(this),this.blendFunc=new zh(this),this.blendColor=new Yd(this),this.blendEquation=new $c(this),this.cullFace=new Gl(this),this.cullFaceSide=new Kd(this),this.frontFace=new Xc(this),this.program=new Dh(this),this.activeTexture=new Wd(this),this.viewport=new Rh(this),this.bindFramebuffer=new Ih(this),this.bindRenderbuffer=new kh(this),this.bindTexture=new Vu(this),this.bindVertexBuffer=new Ph(this),this.bindElementBuffer=new Yc(this),this.bindVertexArray=new Qa(this),this.pixelStoreUnpack=new qu(this),this.pixelStoreUnpackPremultiplyAlpha=new $l(this),this.pixelStoreUnpackFlipY=new Js(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Kr(e)){this.HALF_FLOAT=e.HALF_FLOAT;const u=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(s=e.RGBA16F)!==null&&s!==void 0?s:u?.RGBA16F_EXT,this.RGB16F=(c=e.RGB16F)!==null&&c!==void 0?c:u?.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const u=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=u?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,s){return new Pr(this,e,s)}createVertexBuffer(e,s,c){return new Hl(this,e,s,c)}createRenderbuffer(e,s,c){const u=this.gl,p=u.createRenderbuffer();return this.bindRenderbuffer.set(p),u.renderbufferStorage(u.RENDERBUFFER,e,s,c),this.bindRenderbuffer.set(null),p}createFramebuffer(e,s,c,u){return new Lh(this,e,s,c,u)}clear({color:e,depth:s,stencil:c}){const u=this.gl;let p=0;e&&(p|=u.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(p|=u.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),c!==void 0&&(p|=u.STENCIL_BUFFER_BIT,this.clearStencil.set(c),this.stencilMask.set(255)),u.clear(p)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){d.aE(e.blendFunction,sn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Kr(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var s;return Kr(this.gl)?this.gl.deleteVertexArray(e):(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class oi{constructor(e,s,c){this.func=e,this.mask=s,this.range=c}}oi.ReadOnly=!1,oi.ReadWrite=!0,oi.disabled=new oi(519,oi.ReadOnly,[0,1]);const Jc=7680;class ji{constructor(e,s,c,u,p,b){this.test=e,this.ref=s,this.mask=c,this.fail=u,this.depthFail=p,this.pass=b}}ji.disabled=new ji({func:519,mask:0},0,0,Jc,Jc,Jc);class ki{constructor(e,s,c){this.enable=e,this.mode=s,this.frontFace=c}}let Ms;function Ja(m,e,s,c,u){const p=m.context,b=p.gl,T=m.useProgram("collisionBox"),z=[];let I=0,L=0;for(let de=0;de<c.length;de++){const pe=c[de],re=e.getTile(pe).getBucket(s);if(!re)continue;const ve=u?re.textCollisionBox:re.iconCollisionBox,Te=re.collisionCircleArray;if(Te.length>0){const Re=d.H();d.aQ(Re,re.placementInvProjMatrix,m.transform.glCoordMatrix),d.aQ(Re,Re,re.placementViewportMatrix),z.push({circleArray:Te,circleOffset:L,transform:pe.posMatrix,invTransform:Re,coord:pe}),I+=Te.length/4,L=I}ve&&T.draw(p,b.LINES,oi.disabled,ji.disabled,m.colorModeForRenderPass(),ki.disabled,{u_matrix:pe.posMatrix,u_pixel_extrude_scale:[1/(O=m.transform).width,1/O.height]},m.style.map.terrain&&m.style.map.terrain.getTerrainData(pe),s.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,null,m.transform.zoom,null,null,ve.collisionVertexBuffer)}var O;if(!u||!z.length)return;const q=m.useProgram("collisionCircle"),Q=new d.aR;Q.resize(4*I),Q._trim();let te=0;for(const de of z)for(let pe=0;pe<de.circleArray.length/4;pe++){const re=4*pe,ve=de.circleArray[re+0],Te=de.circleArray[re+1],Re=de.circleArray[re+2],$e=de.circleArray[re+3];Q.emplace(te++,ve,Te,Re,$e,0),Q.emplace(te++,ve,Te,Re,$e,1),Q.emplace(te++,ve,Te,Re,$e,2),Q.emplace(te++,ve,Te,Re,$e,3)}(!Ms||Ms.length<2*I)&&(Ms=(function(de){const pe=2*de,re=new d.aT;re.resize(pe),re._trim();for(let ve=0;ve<pe;ve++){const Te=6*ve;re.uint16[Te+0]=4*ve+0,re.uint16[Te+1]=4*ve+1,re.uint16[Te+2]=4*ve+2,re.uint16[Te+3]=4*ve+2,re.uint16[Te+4]=4*ve+3,re.uint16[Te+5]=4*ve+0}return re})(I));const ne=p.createIndexBuffer(Ms,!0),le=p.createVertexBuffer(Q,d.aS.members,!0);for(const de of z){const pe=Xa(de.transform,de.invTransform,m.transform);q.draw(p,b.TRIANGLES,oi.disabled,ji.disabled,m.colorModeForRenderPass(),ki.disabled,pe,m.style.map.terrain&&m.style.map.terrain.getTerrainData(de.coord),s.id,le,ne,d.a0.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,m.transform.zoom,null,null,null)}le.destroy(),ne.destroy()}ki.disabled=new ki(!1,1029,2305),ki.backCCW=new ki(!0,1029,2305);const es=d.an(new Float32Array(16));function Hu(m,e,s,c,u,p){const{horizontalAlign:b,verticalAlign:T}=d.au(m);return new d.P((-(b-.5)*e/u+c[0])*p,(-(T-.5)*s/u+c[1])*p)}function za(m,e,s,c,u,p){const b=e.tileAnchorPoint.add(new d.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let T=c.mult(p);s||(T=T.rotate(-u));const z=b.add(T);return oe(z.x,z.y,e.labelPlaneMatrix,e.getElevation).point}if(s){const T=Le(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(m),z=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return m.add(c.rotate(z))}return m.add(c)}function eo(m,e,s,c,u,p,b,T,z,I,L,O,q,Q){const te=m.text.placedSymbolArray,ne=m.text.dynamicLayoutVertexArray,le=m.icon.dynamicLayoutVertexArray,de={};ne.clear();for(let pe=0;pe<te.length;pe++){const re=te.get(pe),ve=re.hidden||!re.crossTileID||m.allowVerticalPlacement&&!re.placedOrientation?null:c[re.crossTileID];if(ve){const Te=new d.P(re.anchorX,re.anchorY),Re={getElevation:Q,width:u.width,height:u.height,labelPlaneMatrix:p,pitchWithMap:s,projection:L,tileAnchorPoint:Te,translation:O,unwrappedTileID:q},$e=s?oe(Te.x,Te.y,b,Q):Le(Te.x,Te.y,Re),nt=V(u.cameraToCenterDistance,$e.signedDistanceFromCamera);let pt=d.ai(m.textSizeData,z,re)*nt/d.ap;s&&(pt*=m.tilePixelRatio/T);const{width:xt,height:ut,anchor:ct,textOffset:St,textBoxScale:ft}=ve,Ke=Hu(ct,xt,ut,St,ft,pt),at=L.getPitchedTextCorrection(u,Te.add(new d.P(O[0],O[1])),q),Xt=za($e.point,Re,e,Ke,u.angle,at),Di=m.allowVerticalPlacement&&re.placedOrientation===d.ah.vertical?Math.PI/2:0;for(let Kt=0;Kt<re.numGlyphs;Kt++)d.aj(ne,Xt,Di);I&&re.associatedIconIndex>=0&&(de[re.associatedIconIndex]={shiftedAnchor:Xt,angle:Di})}else Ot(re.numGlyphs,ne)}if(I){le.clear();const pe=m.icon.placedSymbolArray;for(let re=0;re<pe.length;re++){const ve=pe.get(re);if(ve.hidden)Ot(ve.numGlyphs,le);else{const Te=de[re];if(Te)for(let Re=0;Re<ve.numGlyphs;Re++)d.aj(le,Te.shiftedAnchor,Te.angle);else Ot(ve.numGlyphs,le)}}m.icon.dynamicLayoutVertexBuffer.updateData(le)}m.text.dynamicLayoutVertexBuffer.updateData(ne)}function Hr(m,e,s){return s.iconsInText&&e?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Xl(m,e,s,c,u,p,b,T,z,I,L,O){const q=m.context,Q=q.gl,te=m.transform,ne=Za(),le=T==="map",de=z==="map",pe=T!=="viewport"&&s.layout.get("symbol-placement")!=="point",re=le&&!de&&!pe,ve=!de&&pe,Te=!s.layout.get("symbol-sort-key").isConstant();let Re=!1;const $e=m.depthModeForSublayer(0,oi.ReadOnly),nt=s._unevaluatedLayout.hasValue("text-variable-anchor")||s._unevaluatedLayout.hasValue("text-variable-anchor-offset"),pt=[],xt=ne.getCircleRadiusCorrection(te);for(const ut of c){const ct=e.getTile(ut),St=ct.getBucket(s);if(!St)continue;const ft=u?St.text:St.icon;if(!ft||!ft.segments.get().length||!ft.hasVisibleVertices)continue;const Ke=ft.programConfigurations.get(s.id),at=u||St.sdfIcons,Xt=u?St.textSizeData:St.iconSizeData,Di=de||te.pitch!==0,Kt=m.useProgram(Hr(at,u,St),Ke),si=d.ag(Xt,te.zoom),Pi=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ut);let _n,ma,ti,tr,Yn=[0,0],Kn=null;if(u)ma=ct.glyphAtlasTexture,ti=Q.LINEAR,_n=ct.glyphAtlasTexture.size,St.iconsInText&&(Yn=ct.imageAtlasTexture.size,Kn=ct.imageAtlasTexture,tr=Di||m.options.rotating||m.options.zooming||Xt.kind==="composite"||Xt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{const ui=s.layout.get("icon-size").constantOr(0)!==1||St.iconsNeedLinear;ma=ct.imageAtlasTexture,ti=at||m.options.rotating||m.options.zooming||ui||Di?Q.LINEAR:Q.NEAREST,_n=ct.imageAtlasTexture.size}const ir=ni(ct,1,m.transform.zoom),Ba=ve?ut.posMatrix:es,Ns=Aa(Ba,de,le,m.transform,ir),ol=Rr(Ba,de,le,m.transform,ir),Fs=Rr(ut.posMatrix,de,le,m.transform,ir),Ki=ne.translatePosition(m.transform,ct,p,b),on=nt&&St.hasTextData(),cc=s.layout.get("icon-text-fit")!=="none"&&on&&St.hasIconData();if(pe){const ui=m.style.map.terrain?(co,uo)=>m.style.map.terrain.getElevation(ut,co,uo):null,js=s.layout.get("text-rotation-alignment")==="map";W(St,ut.posMatrix,m,u,Ns,Fs,de,I,js,ne,ut.toUnwrapped(),te.width,te.height,Ki,ui)}const nr=ut.posMatrix,xr=u&&nt||cc,Na=pe||xr?es:Ns,In=ol,zn=at&&s.paint.get(u?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Vn;Vn=at?St.iconsInText?Zc(Xt.kind,si,re,de,pe,xr,m,nr,Na,In,Ki,_n,Yn,xt):As(Xt.kind,si,re,de,pe,xr,m,nr,Na,In,Ki,u,_n,!0,xt):ql(Xt.kind,si,re,de,pe,xr,m,nr,Na,In,Ki,u,_n,xt);const br={program:Kt,buffers:ft,uniformValues:Vn,atlasTexture:ma,atlasTextureIcon:Kn,atlasInterpolation:ti,atlasInterpolationIcon:tr,isSDF:at,hasHalo:zn};if(Te&&St.canOverlap){Re=!0;const ui=ft.segments.get();for(const js of ui)pt.push({segments:new d.a0([js]),sortKey:js.sortKey,state:br,terrainData:Pi})}else pt.push({segments:ft.segments,sortKey:0,state:br,terrainData:Pi})}Re&&pt.sort(((ut,ct)=>ut.sortKey-ct.sortKey));for(const ut of pt){const ct=ut.state;if(q.activeTexture.set(Q.TEXTURE0),ct.atlasTexture.bind(ct.atlasInterpolation,Q.CLAMP_TO_EDGE),ct.atlasTextureIcon&&(q.activeTexture.set(Q.TEXTURE1),ct.atlasTextureIcon&&ct.atlasTextureIcon.bind(ct.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),ct.isSDF){const St=ct.uniformValues;ct.hasHalo&&(St.u_is_halo=1,Yl(ct.buffers,ut.segments,s,m,ct.program,$e,L,O,St,ut.terrainData)),St.u_is_halo=0}Yl(ct.buffers,ut.segments,s,m,ct.program,$e,L,O,ct.uniformValues,ut.terrainData)}}function Yl(m,e,s,c,u,p,b,T,z,I){const L=c.context;u.draw(L,L.gl.TRIANGLES,p,b,T,ki.disabled,z,I,s.id,m.layoutVertexBuffer,m.indexBuffer,e,s.paint,c.transform.zoom,m.programConfigurations.get(s.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function eu(m,e,s,c){const u=m.context,p=u.gl,b=ji.disabled,T=new sn([p.ONE,p.ONE],d.aM.transparent,[!0,!0,!0,!0]),z=e.getBucket(s);if(!z)return;const I=c.key;let L=s.heatmapFbos.get(I);L||(L=Uo(u,e.tileSize,e.tileSize),s.heatmapFbos.set(I,L)),u.bindFramebuffer.set(L.framebuffer),u.viewport.set([0,0,e.tileSize,e.tileSize]),u.clear({color:d.aM.transparent});const O=z.programConfigurations.get(s.id),q=m.useProgram("heatmap",O),Q=m.style.map.terrain.getTerrainData(c);q.draw(u,p.TRIANGLES,oi.disabled,b,T,ki.disabled,fr(c.posMatrix,e,m.transform.zoom,s.paint.get("heatmap-intensity")),Q,s.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,s.paint,m.transform.zoom,O)}function zs(m,e,s){const c=m.context,u=c.gl;c.setColorMode(m.colorModeForRenderPass());const p=Kl(c,e),b=s.key,T=e.heatmapFbos.get(b);T&&(c.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,T.colorAttachment.get()),c.activeTexture.set(u.TEXTURE1),p.bind(u.LINEAR,u.CLAMP_TO_EDGE),m.useProgram("heatmapTexture").draw(c,u.TRIANGLES,oi.disabled,ji.disabled,m.colorModeForRenderPass(),ki.disabled,Bo(m,e,0,1),null,e.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments,e.paint,m.transform.zoom),T.destroy(),e.heatmapFbos.delete(b))}function Uo(m,e,s){var c,u;const p=m.gl,b=p.createTexture();p.bindTexture(p.TEXTURE_2D,b),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR);const T=(c=m.HALF_FLOAT)!==null&&c!==void 0?c:p.UNSIGNED_BYTE,z=(u=m.RGBA16F)!==null&&u!==void 0?u:p.RGBA;p.texImage2D(p.TEXTURE_2D,0,z,e,s,0,p.RGBA,T,null);const I=m.createFramebuffer(e,s,!1,!1);return I.colorAttachment.set(b),I}function Kl(m,e){return e.colorRampTexture||(e.colorRampTexture=new ot(m,e.colorRamp,m.gl.RGBA)),e.colorRampTexture}function Vo(m,e,s,c,u){if(!s||!c||!c.imageAtlas)return;const p=c.imageAtlas.patternPositions;let b=p[s.to.toString()],T=p[s.from.toString()];if(!b&&T&&(b=T),!T&&b&&(T=b),!b||!T){const z=u.getPaintProperty(e);b=p[z],T=p[z]}b&&T&&m.setConstantPatternPositions(b,T)}function Wl(m,e,s,c,u,p,b){const T=m.context.gl,z="fill-pattern",I=s.paint.get(z),L=I&&I.constantOr(1),O=s.getCrossfadeParameters();let q,Q,te,ne,le;b?(Q=L&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=T.LINES):(Q=L?"fillPattern":"fill",q=T.TRIANGLES);const de=I.constantOr(null);for(const pe of c){const re=e.getTile(pe);if(L&&!re.patternsLoaded())continue;const ve=re.getBucket(s);if(!ve)continue;const Te=ve.programConfigurations.get(s.id),Re=m.useProgram(Q,Te),$e=m.style.map.terrain&&m.style.map.terrain.getTerrainData(pe);L&&(m.context.activeTexture.set(T.TEXTURE0),re.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Te.updatePaintBuffers(O)),Vo(Te,z,de,re,s);const nt=$e?pe:null,pt=m.translatePosMatrix(nt?nt.posMatrix:pe.posMatrix,re,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(b){ne=ve.indexBuffer2,le=ve.segments2;const xt=[T.drawingBufferWidth,T.drawingBufferHeight];te=Q==="fillOutlinePattern"&&L?jl(pt,m,O,re,xt):Hd(pt,xt)}else ne=ve.indexBuffer,le=ve.segments,te=L?Sh(pt,m,O,re):Ss(pt);Re.draw(m.context,q,u,m.stencilModeForClipping(pe),p,ki.disabled,te,$e,s.id,ve.layoutVertexBuffer,ne,le,s.paint,m.transform.zoom,Te)}}function tu(m,e,s,c,u,p,b){const T=m.context,z=T.gl,I="fill-extrusion-pattern",L=s.paint.get(I),O=L.constantOr(1),q=s.getCrossfadeParameters(),Q=s.paint.get("fill-extrusion-opacity"),te=L.constantOr(null);for(const ne of c){const le=e.getTile(ne),de=le.getBucket(s);if(!de)continue;const pe=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ne),re=de.programConfigurations.get(s.id),ve=m.useProgram(O?"fillExtrusionPattern":"fillExtrusion",re);O&&(m.context.activeTexture.set(z.TEXTURE0),le.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),re.updatePaintBuffers(q)),Vo(re,I,te,le,s);const Te=m.translatePosMatrix(ne.posMatrix,le,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Re=s.paint.get("fill-extrusion-vertical-gradient"),$e=O?Fl(Te,m,Re,Q,ne,q,le):Oo(Te,m,Re,Q);ve.draw(T,T.gl.TRIANGLES,u,p,b,ki.backCCW,$e,pe,s.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,s.paint,m.transform.zoom,re,m.style.map.terrain&&de.centroidVertexBuffer)}}function qo(m,e,s,c,u,p,b){const T=m.context,z=T.gl,I=s.fbo;if(!I)return;const L=m.useProgram("hillshade"),O=m.style.map.terrain&&m.style.map.terrain.getTerrainData(e);T.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,I.colorAttachment.get()),L.draw(T,z.TRIANGLES,u,p,b,ki.disabled,((q,Q,te,ne)=>{const le=te.paint.get("hillshade-shadow-color"),de=te.paint.get("hillshade-highlight-color"),pe=te.paint.get("hillshade-accent-color");let re=te.paint.get("hillshade-illumination-direction")*(Math.PI/180);te.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=q.transform.angle);const ve=!q.options.moving;return{u_matrix:ne?ne.posMatrix:q.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),ve),u_image:0,u_latrange:Ul(0,Q.tileID),u_light:[te.paint.get("hillshade-exaggeration"),re],u_shadow:le,u_highlight:de,u_accent:pe}})(m,s,c,O?e:null),O,c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function Fn(m,e,s,c,u,p){const b=m.context,T=b.gl,z=e.dem;if(z&&z.data){const I=z.dim,L=z.stride,O=z.getPixels();if(b.activeTexture.set(T.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||m.getTileTexture(L),e.demTexture){const Q=e.demTexture;Q.update(O,{premultiply:!1}),Q.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else e.demTexture=new ot(b,O,T.RGBA,{premultiply:!1}),e.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);b.activeTexture.set(T.TEXTURE0);let q=e.fbo;if(!q){const Q=new ot(b,{width:I,height:I,data:null},T.RGBA);Q.bind(T.LINEAR,T.CLAMP_TO_EDGE),q=e.fbo=b.createFramebuffer(I,I,!0,!1),q.colorAttachment.set(Q.texture)}b.bindFramebuffer.set(q.framebuffer),b.viewport.set([0,0,I,I]),m.useProgram("hillshadePrepare").draw(b,T.TRIANGLES,c,u,p,ki.disabled,((Q,te)=>{const ne=te.stride,le=d.H();return d.aP(le,0,d.X,-d.X,0,0,1),d.J(le,le,[0,-d.X,0]),{u_matrix:le,u_image:1,u_dimension:[ne,ne],u_zoom:Q.overscaledZ,u_unpack:te.getUnpackVector()}})(e.tileID,z),null,s.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function Ho(m,e,s,c,u,p){const b=c.paint.get("raster-fade-duration");if(!p&&b>0){const T=X.now(),z=(T-m.timeAdded)/b,I=e?(T-e.timeAdded)/b:-1,L=s.getSource(),O=u.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),q=!e||Math.abs(e.tileID.overscaledZ-O)>Math.abs(m.tileID.overscaledZ-O),Q=q&&m.refreshedUponExpiration?1:d.ac(q?z:1-I,0,1);return m.refreshedUponExpiration&&z>=1&&(m.refreshedUponExpiration=!1),e?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}const iu=new d.aM(1,0,0,1),yi=new d.aM(0,1,0,1),Ql=new d.aM(0,0,1,1),Oh=new d.aM(1,0,1,1),nu=new d.aM(0,1,1,1);function Zo(m,e,s,c){Go(m,0,e+s/2,m.transform.width,s,c)}function to(m,e,s,c){Go(m,e-s/2,0,s,m.transform.height,c)}function Go(m,e,s,c,u,p){const b=m.context,T=b.gl;T.enable(T.SCISSOR_TEST),T.scissor(e*m.pixelRatio,s*m.pixelRatio,c*m.pixelRatio,u*m.pixelRatio),b.clear({color:p}),T.disable(T.SCISSOR_TEST)}function $o(m,e,s){const c=m.context,u=c.gl,p=s.posMatrix,b=m.useProgram("debug"),T=oi.disabled,z=ji.disabled,I=m.colorModeForRenderPass(),L="$debug",O=m.style.map.terrain&&m.style.map.terrain.getTerrainData(s);c.activeTexture.set(u.TEXTURE0);const q=e.getTileByID(s.key).latestRawTileData,Q=Math.floor((q&&q.byteLength||0)/1024),te=e.getTile(s).tileSize,ne=512/Math.min(te,512)*(s.overscaledZ/m.transform.zoom)*.5;let le=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(le+=` => ${s.overscaledZ}`),(function(de,pe){de.initDebugOverlayCanvas();const re=de.debugOverlayCanvas,ve=de.context.gl,Te=de.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,re.width,re.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(pe,5,5),Te.strokeText(pe,5,5),de.debugOverlayTexture.update(re),de.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)})(m,`${le} ${Q}kB`),b.draw(c,u.TRIANGLES,T,z,sn.alphaBlended,ki.disabled,Ca(p,d.aM.transparent,ne),null,L,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),b.draw(c,u.LINE_STRIP,T,z,I,ki.disabled,Ca(p,d.aM.red),O,L,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function ru(m,e,s){const c=m.context,u=c.gl,p=m.colorModeForRenderPass(),b=new oi(u.LEQUAL,oi.ReadWrite,m.depthRangeFor3D),T=m.useProgram("terrain"),z=e.getTerrainMesh();c.bindFramebuffer.set(null),c.viewport.set([0,0,m.width,m.height]);for(const I of s){const L=m.renderToTexture.getTexture(I),O=e.getTerrainData(I.tileID);c.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,L.texture);const q=m.transform.calculatePosMatrix(I.tileID.toUnwrapped()),Q=e.getMeshFrameDelta(m.transform.zoom),te=m.transform.calculateFogMatrix(I.tileID.toUnwrapped()),ne=Uc(q,Q,te,m.style.sky,m.transform.pitch);T.draw(c,u.TRIANGLES,b,ji.disabled,p,ki.backCCW,ne,O,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class Jl{constructor(e,s,c){this.vertexBuffer=e,this.indexBuffer=s,this.segments=c}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Da{constructor(e,s){this.context=new jo(e),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:d.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=jt.maxUnderzooming+jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new jc}resize(e,s,c){if(this.width=Math.floor(e*c),this.height=Math.floor(s*c),this.pixelRatio=c,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const u of this.style._order)this.style._layers[u].resize()}setup(){const e=this.context,s=new d.aX;s.emplaceBack(0,0),s.emplaceBack(d.X,0),s.emplaceBack(0,d.X),s.emplaceBack(d.X,d.X),this.tileExtentBuffer=e.createVertexBuffer(s,Ga.members),this.tileExtentSegments=d.a0.simpleSegment(0,0,4,2);const c=new d.aX;c.emplaceBack(0,0),c.emplaceBack(d.X,0),c.emplaceBack(0,d.X),c.emplaceBack(d.X,d.X),this.debugBuffer=e.createVertexBuffer(c,Ga.members),this.debugSegments=d.a0.simpleSegment(0,0,4,5);const u=new d.$;u.emplaceBack(0,0,0,0),u.emplaceBack(d.X,0,d.X,0),u.emplaceBack(0,d.X,0,d.X),u.emplaceBack(d.X,d.X,d.X,d.X),this.rasterBoundsBuffer=e.createVertexBuffer(u,_s.members),this.rasterBoundsSegments=d.a0.simpleSegment(0,0,4,2);const p=new d.aX;p.emplaceBack(0,0),p.emplaceBack(1,0),p.emplaceBack(0,1),p.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(p,Ga.members),this.viewportSegments=d.a0.simpleSegment(0,0,4,2);const b=new d.aZ;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(b);const T=new d.aY;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(T);const z=this.context.gl;this.stencilClearMode=new ji({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const e=this.context,s=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const c=d.H();d.aP(c,0,this.width,this.height,0,0,1),d.K(c,c,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,s.TRIANGLES,oi.disabled,this.stencilClearMode,sn.disabled,ki.disabled,Rn(c),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,s){if(this.currentStencilSource===e.source||!e.isTileClipped()||!s||!s.length)return;this.currentStencilSource=e.source;const c=this.context,u=c.gl;this.nextStencilID+s.length>256&&this.clearStencil(),c.setColorMode(sn.disabled),c.setDepthMode(oi.disabled);const p=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const b of s){const T=this._tileClippingMaskIDs[b.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(b);p.draw(c,u.TRIANGLES,oi.disabled,new ji({func:u.ALWAYS,mask:0},T,255,u.KEEP,u.KEEP,u.REPLACE),sn.disabled,ki.disabled,Rn(b.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,s=this.context.gl;return new ji({func:s.NOTEQUAL,mask:255},e,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(e){const s=this.context.gl;return new ji({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(e){const s=this.context.gl,c=e.sort(((b,T)=>T.overscaledZ-b.overscaledZ)),u=c[c.length-1].overscaledZ,p=c[0].overscaledZ-u+1;if(p>1){this.currentStencilSource=void 0,this.nextStencilID+p>256&&this.clearStencil();const b={};for(let T=0;T<p;T++)b[T+u]=new ji({func:s.GEQUAL,mask:255},T+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=p,[b,c]}return[{[u]:ji.disabled},c]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new sn([e.CONSTANT_COLOR,e.ONE],new d.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?sn.unblended:sn.alphaBlended}depthModeForSublayer(e,s,c){if(!this.opaquePassEnabledForLayer())return oi.disabled;const u=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new oi(c||this.context.gl.LEQUAL,s,[u,u])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,s){this.style=e,this.options=s,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(X.now()),this.imageManager.beginFrame();const c=this.style._order,u=this.style.sourceCaches,p={},b={},T={};for(const z in u){const I=u[z];I.used&&I.prepare(this.context),p[z]=I.getVisibleCoordinates(),b[z]=p[z].slice().reverse(),T[z]=I.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<c.length;z++)if(this.style._layers[c[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of c){const I=this.style._layers[z];if(!I.hasOffscreenPass()||I.isHidden(this.transform.zoom))continue;const L=b[I.source];(I.type==="custom"||L.length)&&this.renderLayer(this,u[I.source],I,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?d.aM.black:d.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(z,I){const L=z.context,O=L.gl,q=((de,pe,re)=>({u_sky_color:de.properties.get("sky-color"),u_horizon_color:de.properties.get("horizon-color"),u_horizon:(pe.height/2+pe.getHorizon())*re,u_sky_horizon_blend:de.properties.get("sky-horizon-blend")*pe.height/2*re}))(I,z.style.map.transform,z.pixelRatio),Q=new oi(O.LEQUAL,oi.ReadWrite,[0,1]),te=ji.disabled,ne=z.colorModeForRenderPass(),le=z.useProgram("sky");if(!I.mesh){const de=new d.aX;de.emplaceBack(-1,-1),de.emplaceBack(1,-1),de.emplaceBack(1,1),de.emplaceBack(-1,1);const pe=new d.aY;pe.emplaceBack(0,1,2),pe.emplaceBack(0,2,3),I.mesh=new Jl(L.createVertexBuffer(de,Ga.members),L.createIndexBuffer(pe),d.a0.simpleSegment(0,0,de.length,pe.length))}le.draw(L,O.TRIANGLES,Q,te,ne,ki.disabled,q,void 0,"sky",I.mesh.vertexBuffer,I.mesh.indexBuffer,I.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[c[this.currentLayer]],I=u[z.source],L=p[z.source];this._renderTileClippingMasks(z,L),this.renderLayer(this,I,z,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){const z=this.style._layers[c[this.currentLayer]],I=u[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const L=(z.type==="symbol"?T:b)[z.source];this._renderTileClippingMasks(z,p[z.source]),this.renderLayer(this,I,z,L)}if(this.options.showTileBoundaries){const z=(function(I,L){let O=null;const q=Object.values(I._layers).flatMap((le=>le.source&&!le.isHidden(L)?[I.sourceCaches[le.source]]:[])),Q=q.filter((le=>le.getSource().type==="vector")),te=q.filter((le=>le.getSource().type!=="vector")),ne=le=>{(!O||O.getSource().maxzoom<le.getSource().maxzoom)&&(O=le)};return Q.forEach((le=>ne(le))),O||te.forEach((le=>ne(le))),O})(this.style,this.transform.zoom);z&&(function(I,L,O){for(let q=0;q<O.length;q++)$o(I,L,O[q])})(this,z,z.getVisibleCoordinates())}this.options.showPadding&&(function(z){const I=z.transform.padding;Zo(z,z.transform.height-(I.top||0),3,iu),Zo(z,I.bottom||0,3,yi),to(z,I.left||0,3,Ql),to(z,z.transform.width-(I.right||0),3,Oh);const L=z.transform.centerPoint;(function(O,q,Q,te){Go(O,q-1,Q-10,2,20,te),Go(O,q-10,Q-1,20,2,te)})(z,L.x,z.transform.height-L.y,nu)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const s=this.terrainFacilitator.matrix,c=this.transform.modelViewProjectionMatrix;let u=this.terrainFacilitator.dirty;u||(u=e?!d.a_(s,c):!d.a$(s,c)),u||(u=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),u&&(d.b0(s,c),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(p,b){const T=p.context,z=T.gl,I=sn.unblended,L=new oi(z.LEQUAL,oi.ReadWrite,[0,1]),O=b.getTerrainMesh(),q=b.sourceCache.getRenderableTiles(),Q=p.useProgram("terrainDepth");T.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,p.width/devicePixelRatio,p.height/devicePixelRatio]),T.clear({color:d.aM.transparent,depth:1});for(const te of q){const ne=b.getTerrainData(te.tileID),le={u_matrix:p.transform.calculatePosMatrix(te.tileID.toUnwrapped()),u_ele_delta:b.getMeshFrameDelta(p.transform.zoom)};Q.draw(T,z.TRIANGLES,L,ji.disabled,I,ki.backCCW,le,ne,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,p.width,p.height])})(this,this.style.map.terrain),(function(p,b){const T=p.context,z=T.gl,I=sn.unblended,L=new oi(z.LEQUAL,oi.ReadWrite,[0,1]),O=b.getTerrainMesh(),q=b.getCoordsTexture(),Q=b.sourceCache.getRenderableTiles(),te=p.useProgram("terrainCoords");T.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,p.width/devicePixelRatio,p.height/devicePixelRatio]),T.clear({color:d.aM.transparent,depth:1}),b.coordsIndex=[];for(const ne of Q){const le=b.getTerrainData(ne.tileID);T.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,q.texture);const de={u_matrix:p.transform.calculatePosMatrix(ne.tileID.toUnwrapped()),u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(p.transform.zoom)};te.draw(T,z.TRIANGLES,L,ji.disabled,I,ki.backCCW,de,le,"terrain",O.vertexBuffer,O.indexBuffer,O.segments),b.coordsIndex.push(ne.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,p.width,p.height])})(this,this.style.map.terrain))}renderLayer(e,s,c,u){if(!c.isHidden(this.transform.zoom)&&(c.type==="background"||c.type==="custom"||(u||[]).length))switch(this.id=c.id,c.type){case"symbol":(function(p,b,T,z,I){if(p.renderPass!=="translucent")return;const L=ji.disabled,O=p.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(q,Q,te,ne,le,de,pe,re,ve){const Te=Q.transform,Re=Za(),$e=le==="map",nt=de==="map";for(const pt of q){const xt=ne.getTile(pt),ut=xt.getBucket(te);if(!ut||!ut.text||!ut.text.segments.get().length)continue;const ct=d.ag(ut.textSizeData,Te.zoom),St=ni(xt,1,Q.transform.zoom),ft=Aa(pt.posMatrix,nt,$e,Q.transform,St),Ke=te.layout.get("icon-text-fit")!=="none"&&ut.hasIconData();if(ct){const at=Math.pow(2,Te.zoom-xt.tileID.overscaledZ),Xt=Q.style.map.terrain?(Kt,si)=>Q.style.map.terrain.getElevation(pt,Kt,si):null,Di=Re.translatePosition(Te,xt,pe,re);eo(ut,$e,nt,ve,Te,ft,pt.posMatrix,at,ct,Ke,Re,Di,pt.toUnwrapped(),Xt)}}})(z,p,T,b,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),I),T.paint.get("icon-opacity").constantOr(1)!==0&&Xl(p,b,T,z,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),L,O),T.paint.get("text-opacity").constantOr(1)!==0&&Xl(p,b,T,z,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),L,O),b.map.showCollisionBoxes&&(Ja(p,b,T,z,!0),Ja(p,b,T,z,!1))})(e,s,c,u,this.style.placement.variableOffsets);break;case"circle":(function(p,b,T,z){if(p.renderPass!=="translucent")return;const I=T.paint.get("circle-opacity"),L=T.paint.get("circle-stroke-width"),O=T.paint.get("circle-stroke-opacity"),q=!T.layout.get("circle-sort-key").isConstant();if(I.constantOr(1)===0&&(L.constantOr(1)===0||O.constantOr(1)===0))return;const Q=p.context,te=Q.gl,ne=p.depthModeForSublayer(0,oi.ReadOnly),le=ji.disabled,de=p.colorModeForRenderPass(),pe=[];for(let re=0;re<z.length;re++){const ve=z[re],Te=b.getTile(ve),Re=Te.getBucket(T);if(!Re)continue;const $e=Re.programConfigurations.get(T.id),nt=p.useProgram("circle",$e),pt=Re.layoutVertexBuffer,xt=Re.indexBuffer,ut=p.style.map.terrain&&p.style.map.terrain.getTerrainData(ve),ct={programConfiguration:$e,program:nt,layoutVertexBuffer:pt,indexBuffer:xt,uniformValues:Fu(p,ve,Te,T),terrainData:ut};if(q){const St=Re.segments.get();for(const ft of St)pe.push({segments:new d.a0([ft]),sortKey:ft.sortKey,state:ct})}else pe.push({segments:Re.segments,sortKey:0,state:ct})}q&&pe.sort(((re,ve)=>re.sortKey-ve.sortKey));for(const re of pe){const{programConfiguration:ve,program:Te,layoutVertexBuffer:Re,indexBuffer:$e,uniformValues:nt,terrainData:pt}=re.state;Te.draw(Q,te.TRIANGLES,ne,le,de,ki.disabled,nt,pt,T.id,Re,$e,re.segments,T.paint,p.transform.zoom,ve)}})(e,s,c,u);break;case"heatmap":(function(p,b,T,z){if(T.paint.get("heatmap-opacity")===0)return;const I=p.context;if(p.style.map.terrain){for(const L of z){const O=b.getTile(L);b.hasRenderableParent(L)||(p.renderPass==="offscreen"?eu(p,O,T,L):p.renderPass==="translucent"&&zs(p,T,L))}I.viewport.set([0,0,p.width,p.height])}else p.renderPass==="offscreen"?(function(L,O,q,Q){const te=L.context,ne=te.gl,le=ji.disabled,de=new sn([ne.ONE,ne.ONE],d.aM.transparent,[!0,!0,!0,!0]);(function(pe,re,ve){const Te=pe.gl;pe.activeTexture.set(Te.TEXTURE1),pe.viewport.set([0,0,re.width/4,re.height/4]);let Re=ve.heatmapFbos.get(d.aU);Re?(Te.bindTexture(Te.TEXTURE_2D,Re.colorAttachment.get()),pe.bindFramebuffer.set(Re.framebuffer)):(Re=Uo(pe,re.width/4,re.height/4),ve.heatmapFbos.set(d.aU,Re))})(te,L,q),te.clear({color:d.aM.transparent});for(let pe=0;pe<Q.length;pe++){const re=Q[pe];if(O.hasRenderableParent(re))continue;const ve=O.getTile(re),Te=ve.getBucket(q);if(!Te)continue;const Re=Te.programConfigurations.get(q.id),$e=L.useProgram("heatmap",Re),{zoom:nt}=L.transform;$e.draw(te,ne.TRIANGLES,oi.disabled,le,de,ki.disabled,fr(re.posMatrix,ve,nt,q.paint.get("heatmap-intensity")),null,q.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,q.paint,L.transform.zoom,Re)}te.viewport.set([0,0,L.width,L.height])})(p,b,T,z):p.renderPass==="translucent"&&(function(L,O){const q=L.context,Q=q.gl;q.setColorMode(L.colorModeForRenderPass());const te=O.heatmapFbos.get(d.aU);te&&(q.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,te.colorAttachment.get()),q.activeTexture.set(Q.TEXTURE1),Kl(q,O).bind(Q.LINEAR,Q.CLAMP_TO_EDGE),L.useProgram("heatmapTexture").draw(q,Q.TRIANGLES,oi.disabled,ji.disabled,L.colorModeForRenderPass(),ki.disabled,Bo(L,O,0,1),null,O.id,L.viewportBuffer,L.quadTriangleIndexBuffer,L.viewportSegments,O.paint,L.transform.zoom))})(p,T)})(e,s,c,u);break;case"line":(function(p,b,T,z){if(p.renderPass!=="translucent")return;const I=T.paint.get("line-opacity"),L=T.paint.get("line-width");if(I.constantOr(1)===0||L.constantOr(1)===0)return;const O=p.depthModeForSublayer(0,oi.ReadOnly),q=p.colorModeForRenderPass(),Q=T.paint.get("line-dasharray"),te=T.paint.get("line-pattern"),ne=te.constantOr(1),le=T.paint.get("line-gradient"),de=T.getCrossfadeParameters(),pe=ne?"linePattern":Q?"lineSDF":le?"lineGradient":"line",re=p.context,ve=re.gl;let Te=!0;for(const Re of z){const $e=b.getTile(Re);if(ne&&!$e.patternsLoaded())continue;const nt=$e.getBucket(T);if(!nt)continue;const pt=nt.programConfigurations.get(T.id),xt=p.context.program.get(),ut=p.useProgram(pe,pt),ct=Te||ut.program!==xt,St=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Re),ft=te.constantOr(null);if(ft&&$e.imageAtlas){const Xt=$e.imageAtlas,Di=Xt.patternPositions[ft.to.toString()],Kt=Xt.patternPositions[ft.from.toString()];Di&&Kt&&pt.setConstantPatternPositions(Di,Kt)}const Ke=St?Re:null,at=ne?Es(p,$e,T,de,Ke):Q?Vl(p,$e,T,Q,de,Ke):le?Ma(p,$e,T,nt.lineClipsArray.length,Ke):Ts(p,$e,T,Ke);if(ne)re.activeTexture.set(ve.TEXTURE0),$e.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),pt.updatePaintBuffers(de);else if(Q&&(ct||p.lineAtlas.dirty))re.activeTexture.set(ve.TEXTURE0),p.lineAtlas.bind(re);else if(le){const Xt=nt.gradients[T.id];let Di=Xt.texture;if(T.gradientVersion!==Xt.version){let Kt=256;if(T.stepInterpolant){const si=b.getSource().maxzoom,Pi=Re.canonical.z===si?Math.ceil(1<<p.transform.maxZoom-Re.canonical.z):1;Kt=d.ac(d.aV(nt.maxLineLength/d.X*1024*Pi),256,re.maxTextureSize)}Xt.gradient=d.aW({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:Kt,image:Xt.gradient||void 0,clips:nt.lineClipsArray}),Xt.texture?Xt.texture.update(Xt.gradient):Xt.texture=new ot(re,Xt.gradient,ve.RGBA),Xt.version=T.gradientVersion,Di=Xt.texture}re.activeTexture.set(ve.TEXTURE0),Di.bind(T.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}ut.draw(re,ve.TRIANGLES,O,p.stencilModeForClipping(Re),q,ki.disabled,at,St,T.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,T.paint,p.transform.zoom,pt,nt.layoutVertexBuffer2),Te=!1}})(e,s,c,u);break;case"fill":(function(p,b,T,z){const I=T.paint.get("fill-color"),L=T.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const O=p.colorModeForRenderPass(),q=T.paint.get("fill-pattern"),Q=p.opaquePassEnabledForLayer()&&!q.constantOr(1)&&I.constantOr(d.aM.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===Q){const te=p.depthModeForSublayer(1,p.renderPass==="opaque"?oi.ReadWrite:oi.ReadOnly);Wl(p,b,T,z,te,O,!1)}if(p.renderPass==="translucent"&&T.paint.get("fill-antialias")){const te=p.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,oi.ReadOnly);Wl(p,b,T,z,te,O,!0)}})(e,s,c,u);break;case"fill-extrusion":(function(p,b,T,z){const I=T.paint.get("fill-extrusion-opacity");if(I!==0&&p.renderPass==="translucent"){const L=new oi(p.context.gl.LEQUAL,oi.ReadWrite,p.depthRangeFor3D);if(I!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))tu(p,b,T,z,L,ji.disabled,sn.disabled),tu(p,b,T,z,L,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const O=p.colorModeForRenderPass();tu(p,b,T,z,L,ji.disabled,O)}}})(e,s,c,u);break;case"hillshade":(function(p,b,T,z){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const I=p.context,L=p.depthModeForSublayer(0,oi.ReadOnly),O=p.colorModeForRenderPass(),[q,Q]=p.renderPass==="translucent"?p.stencilConfigForOverlap(z):[{},z];for(const te of Q){const ne=b.getTile(te);ne.needsHillshadePrepare!==void 0&&ne.needsHillshadePrepare&&p.renderPass==="offscreen"?Fn(p,ne,T,L,ji.disabled,O):p.renderPass==="translucent"&&qo(p,te,ne,T,L,q[te.overscaledZ],O)}I.viewport.set([0,0,p.width,p.height])})(e,s,c,u);break;case"raster":(function(p,b,T,z){if(p.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!z.length)return;const I=p.context,L=I.gl,O=b.getSource(),q=p.useProgram("raster"),Q=p.colorModeForRenderPass(),[te,ne]=O instanceof Sa?[{},z]:p.stencilConfigForOverlap(z),le=ne[ne.length-1].overscaledZ,de=!p.options.moving;for(const pe of ne){const re=p.depthModeForSublayer(pe.overscaledZ-le,T.paint.get("raster-opacity")===1?oi.ReadWrite:oi.ReadOnly,L.LESS),ve=b.getTile(pe);ve.registerFadeDuration(T.paint.get("raster-fade-duration"));const Te=b.findLoadedParent(pe,0),Re=b.findLoadedSibling(pe),$e=Ho(ve,Te||Re||null,b,T,p.transform,p.style.map.terrain);let nt,pt;const xt=T.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;I.activeTexture.set(L.TEXTURE0),ve.texture.bind(xt,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),I.activeTexture.set(L.TEXTURE1),Te?(Te.texture.bind(xt,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),nt=Math.pow(2,Te.tileID.overscaledZ-ve.tileID.overscaledZ),pt=[ve.tileID.canonical.x*nt%1,ve.tileID.canonical.y*nt%1]):ve.texture.bind(xt,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),ve.texture.useMipmap&&I.extTextureFilterAnisotropic&&p.transform.pitch>20&&L.texParameterf(L.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax);const ut=p.style.map.terrain&&p.style.map.terrain.getTerrainData(pe),ct=ut?pe:null,St=ct?ct.posMatrix:p.transform.calculatePosMatrix(pe.toUnwrapped(),de),ft=Hc(St,pt||[0,0],nt||1,$e,T);O instanceof Sa?q.draw(I,L.TRIANGLES,re,ji.disabled,Q,ki.disabled,ft,ut,T.id,O.boundsBuffer,p.quadTriangleIndexBuffer,O.boundsSegments):q.draw(I,L.TRIANGLES,re,te[pe.overscaledZ],Q,ki.disabled,ft,ut,T.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}})(e,s,c,u);break;case"background":(function(p,b,T,z){const I=T.paint.get("background-color"),L=T.paint.get("background-opacity");if(L===0)return;const O=p.context,q=O.gl,Q=p.transform,te=Q.tileSize,ne=T.paint.get("background-pattern");if(p.isPatternMissing(ne))return;const le=!ne&&I.a===1&&L===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==le)return;const de=ji.disabled,pe=p.depthModeForSublayer(0,le==="opaque"?oi.ReadWrite:oi.ReadOnly),re=p.colorModeForRenderPass(),ve=p.useProgram(ne?"backgroundPattern":"background"),Te=z||Q.coveringTiles({tileSize:te,terrain:p.style.map.terrain});ne&&(O.activeTexture.set(q.TEXTURE0),p.imageManager.bind(p.context));const Re=T.getCrossfadeParameters();for(const $e of Te){const nt=z?$e.posMatrix:p.transform.calculatePosMatrix($e.toUnwrapped()),pt=ne?Ka(nt,L,p,ne,{tileID:$e,tileSize:te},Re):Xn(nt,L,I),xt=p.style.map.terrain&&p.style.map.terrain.getTerrainData($e);ve.draw(O,q.TRIANGLES,pe,de,re,ki.disabled,pt,xt,T.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}})(e,0,c,u);break;case"custom":(function(p,b,T){const z=p.context,I=T.implementation;if(p.renderPass==="offscreen"){const L=I.prerender;L&&(p.setCustomLayerDefaults(),z.setColorMode(p.colorModeForRenderPass()),L.call(I,z.gl,p.transform.customLayerMatrix()),z.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),z.setColorMode(p.colorModeForRenderPass()),z.setStencilMode(ji.disabled);const L=I.renderingMode==="3d"?new oi(p.context.gl.LEQUAL,oi.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,oi.ReadOnly);z.setDepthMode(L),I.render(z.gl,p.transform.customLayerMatrix(),{farZ:p.transform.farZ,nearZ:p.transform.nearZ,fov:p.transform._fov,modelViewProjectionMatrix:p.transform.modelViewProjectionMatrix,projectionMatrix:p.transform.projectionMatrix}),z.setDirty(),p.setBaseState(),z.bindFramebuffer.set(null)}})(e,0,c)}}translatePosMatrix(e,s,c,u,p){if(!c[0]&&!c[1])return e;const b=p?u==="map"?this.transform.angle:0:u==="viewport"?-this.transform.angle:0;if(b){const I=Math.sin(b),L=Math.cos(b);c=[c[0]*L-c[1]*I,c[0]*I+c[1]*L]}const T=[p?c[0]:ni(s,c[0],this.transform.zoom),p?c[1]:ni(s,c[1],this.transform.zoom),0],z=new Float32Array(16);return d.J(z,e,T),z}saveTileTexture(e){const s=this._tileTextures[e.size[0]];s?s.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const s=this._tileTextures[e];return s&&s.length>0?s.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const s=this.imageManager.getPattern(e.from.toString()),c=this.imageManager.getPattern(e.to.toString());return!s||!c}useProgram(e,s){this.cache=this.cache||{};const c=e+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[c]||(this.cache[c]=new ws(this.context,$a[e],s,No[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[c]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ot(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:s}=this.context.gl;return this.width!==e||this.height!==s}}class ca{constructor(e,s){this.points=e,this.planes=s}static fromInvProjectionMatrix(e,s,c){const u=Math.pow(2,c),p=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((T=>{const z=1/(T=d.af([],T,e))[3]/s*u;return d.b1(T,T,[z,z,1/T[3],z])})),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((T=>{const z=(function(q,Q){var te=Q[0],ne=Q[1],le=Q[2],de=te*te+ne*ne+le*le;return de>0&&(de=1/Math.sqrt(de)),q[0]=Q[0]*de,q[1]=Q[1]*de,q[2]=Q[2]*de,q})([],(function(q,Q,te){var ne=Q[0],le=Q[1],de=Q[2],pe=te[0],re=te[1],ve=te[2];return q[0]=le*ve-de*re,q[1]=de*pe-ne*ve,q[2]=ne*re-le*pe,q})([],it([],p[T[0]],p[T[1]]),it([],p[T[2]],p[T[1]]))),I=-((L=z)[0]*(O=p[T[1]])[0]+L[1]*O[1]+L[2]*O[2]);var L,O;return z.concat(I)}));return new ca(p,b)}}class Ds{constructor(e,s){this.min=e,this.max=s,this.center=(function(c,u,p){return c[0]=.5*u[0],c[1]=.5*u[1],c[2]=.5*u[2],c})([],(function(c,u,p){return c[0]=u[0]+p[0],c[1]=u[1]+p[1],c[2]=u[2]+p[2],c})([],this.min,this.max))}quadrant(e){const s=[e%2==0,e<2],c=Ze(this.min),u=Ze(this.max);for(let p=0;p<s.length;p++)c[p]=s[p]?this.min[p]:this.center[p],u[p]=s[p]?this.center[p]:this.max[p];return u[2]=this.max[2],new Ds(c,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const s=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let c=!0;for(let u=0;u<e.planes.length;u++){const p=e.planes[u];let b=0;for(let T=0;T<s.length;T++)d.b2(p,s[T])>=0&&b++;if(b===0)return 0;b!==s.length&&(c=!1)}if(c)return 2;for(let u=0;u<3;u++){let p=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let T=0;T<e.points.length;T++){const z=e.points[T][u]-this.min[u];p=Math.min(p,z),b=Math.max(b,z)}if(b<0||p>this.max[u]-this.min[u])return 0}return 1}}class io{constructor(e=0,s=0,c=0,u=0){if(isNaN(e)||e<0||isNaN(s)||s<0||isNaN(c)||c<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=s,this.left=c,this.right=u}interpolate(e,s,c){return s.top!=null&&e.top!=null&&(this.top=d.y.number(e.top,s.top,c)),s.bottom!=null&&e.bottom!=null&&(this.bottom=d.y.number(e.bottom,s.bottom,c)),s.left!=null&&e.left!=null&&(this.left=d.y.number(e.left,s.left,c)),s.right!=null&&e.right!=null&&(this.right=d.y.number(e.right,s.right,c)),this}getCenter(e,s){const c=d.ac((this.left+e-this.right)/2,0,e),u=d.ac((this.top+s-this.bottom)/2,0,s);return new d.P(c,u)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new io(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ts=85.051129;class no{constructor(e,s,c,u,p){this.tileSize=512,this._renderWorldCopies=p===void 0||!!p,this._minZoom=e||0,this._maxZoom=s||22,this._minPitch=c??0,this._maxPitch=u??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new d.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new io,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new no(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new d.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const s=-d.b3(e,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=(function(){var c=new d.A(4);return d.A!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c})(),(function(c,u,p){var b=u[0],T=u[1],z=u[2],I=u[3],L=Math.sin(p),O=Math.cos(p);c[0]=b*O+z*L,c[1]=T*O+I*L,c[2]=b*-L+z*O,c[3]=T*-L+I*O})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const s=d.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const s=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.tileZoom=Math.max(0,Math.floor(s)),this.scale=this.zoomScale(s),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,s,c){this._unmodified=!1,this._edgeInsets.interpolate(e,s,c),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const s=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(e){const s=[new d.b4(0,e)];if(this._renderWorldCopies){const c=this.pointCoordinate(new d.P(0,0)),u=this.pointCoordinate(new d.P(this.width,0)),p=this.pointCoordinate(new d.P(this.width,this.height)),b=this.pointCoordinate(new d.P(0,this.height)),T=Math.floor(Math.min(c.x,u.x,p.x,b.x)),z=Math.floor(Math.max(c.x,u.x,p.x,b.x)),I=1;for(let L=T-I;L<=z+I;L++)L!==0&&s.push(new d.b4(L,e))}return s}coveringTiles(e){var s,c;let u=this.coveringZoomLevel(e);const p=u;if(e.minzoom!==void 0&&u<e.minzoom)return[];e.maxzoom!==void 0&&u>e.maxzoom&&(u=e.maxzoom);const b=this.pointCoordinate(this.getCameraPoint()),T=d.Z.fromLngLat(this.center),z=Math.pow(2,u),I=[z*b.x,z*b.y,0],L=[z*T.x,z*T.y,0],O=ca.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,u);let q=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(q=u);const Q=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,te=re=>({aabb:new Ds([re*z,0,0],[(re+1)*z,z,0]),zoom:0,x:0,y:0,wrap:re,fullyVisible:!1}),ne=[],le=[],de=u,pe=e.reparseOverscaled?p:u;if(this._renderWorldCopies)for(let re=1;re<=3;re++)ne.push(te(-re)),ne.push(te(re));for(ne.push(te(0));ne.length>0;){const re=ne.pop(),ve=re.x,Te=re.y;let Re=re.fullyVisible;if(!Re){const ut=re.aabb.intersects(O);if(ut===0)continue;Re=ut===2}const $e=e.terrain?I:L,nt=re.aabb.distanceX($e),pt=re.aabb.distanceY($e),xt=Math.max(Math.abs(nt),Math.abs(pt));if(re.zoom===de||xt>Q+(1<<de-re.zoom)-2&&re.zoom>=q){const ut=de-re.zoom,ct=I[0]-.5-(ve<<ut),St=I[1]-.5-(Te<<ut);le.push({tileID:new d.S(re.zoom===de?pe:re.zoom,re.wrap,re.zoom,ve,Te),distanceSq:Lt([L[0]-.5-ve,L[1]-.5-Te]),tileDistanceToCamera:Math.sqrt(ct*ct+St*St)})}else for(let ut=0;ut<4;ut++){const ct=(ve<<1)+ut%2,St=(Te<<1)+(ut>>1),ft=re.zoom+1;let Ke=re.aabb.quadrant(ut);if(e.terrain){const at=new d.S(ft,re.wrap,ft,ct,St),Xt=e.terrain.getMinMaxElevation(at),Di=(s=Xt.minElevation)!==null&&s!==void 0?s:this.elevation,Kt=(c=Xt.maxElevation)!==null&&c!==void 0?c:this.elevation;Ke=new Ds([Ke.min[0],Ke.min[1],Di],[Ke.max[0],Ke.max[1],Kt])}ne.push({aabb:Ke,zoom:ft,x:ct,y:St,wrap:re.wrap,fullyVisible:Re})}}return le.sort(((re,ve)=>re.distanceSq-ve.distanceSq)).map((re=>re.tileID))}resize(e,s){this.width=e,this.height=s,this.pixelsToGLUnits=[2/e,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const s=d.ac(e.lat,-85.051129,ts);return new d.P(d.O(e.lng)*this.worldSize,d.Q(s)*this.worldSize)}unproject(e){return new d.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const s=this.elevation,c=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,u=this.pointLocation(this.centerPoint,e),p=e.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-p))return;const b=c+s-p,T=Math.cos(this._pitch)*this.cameraToCenterDistance/b/d.b5(1,u.lat),z=this.scaleZoom(T/this.tileSize);this._elevation=p,this._center=u,this.zoom=z}setLocationAtPoint(e,s){const c=this.pointCoordinate(s),u=this.pointCoordinate(this.centerPoint),p=this.locationCoordinate(e),b=new d.Z(p.x-(c.x-u.x),p.y-(c.y-u.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,s){return s?this.coordinatePoint(this.locationCoordinate(e),s.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,s){return this.coordinateLocation(this.pointCoordinate(e,s))}locationCoordinate(e){return d.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,s){if(s){const q=s.pointCoordinate(e);if(q!=null)return q}const c=[e.x,e.y,0,1],u=[e.x,e.y,1,1];d.af(c,c,this.pixelMatrixInverse),d.af(u,u,this.pixelMatrixInverse);const p=c[3],b=u[3],T=c[1]/p,z=u[1]/b,I=c[2]/p,L=u[2]/b,O=I===L?0:(0-I)/(L-I);return new d.Z(d.y.number(c[0]/p,u[0]/b,O)/this.worldSize,d.y.number(T,z,O)/this.worldSize)}coordinatePoint(e,s=0,c=this.pixelMatrix){const u=[e.x*this.worldSize,e.y*this.worldSize,s,1];return d.af(u,u,c),new d.P(u[0]/u[3],u[1]/u[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new Ne().extend(this.pointLocation(new d.P(0,e))).extend(this.pointLocation(new d.P(this.width,e))).extend(this.pointLocation(new d.P(this.width,this.height))).extend(this.pointLocation(new d.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ne([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,ts])}calculateTileMatrix(e){const s=e.canonical,c=this.worldSize/this.zoomScale(s.z),u=s.x+Math.pow(2,s.z)*e.wrap,p=d.an(new Float64Array(16));return d.J(p,p,[u*c,s.y*c,0]),d.K(p,p,[c/d.X,c/d.X,1]),p}calculatePosMatrix(e,s=!1){const c=e.key,u=s?this._alignedPosMatrixCache:this._posMatrixCache;if(u[c])return u[c];const p=this.calculateTileMatrix(e);return d.L(p,s?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,p),u[c]=new Float32Array(p),u[c]}calculateFogMatrix(e){const s=e.key,c=this._fogMatrixCache;if(c[s])return c[s];const u=this.calculateTileMatrix(e);return d.L(u,this.fogMatrix,u),c[s]=new Float32Array(u),c[s]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,s){s=d.ac(+s,this.minZoom,this.maxZoom);const c={center:new d.N(e.lng,e.lat),zoom:s};let u=this.lngRange;if(!this._renderWorldCopies&&u===null){const re=179.9999999999;u=[-re,re]}const p=this.tileSize*this.zoomScale(c.zoom);let b=0,T=p,z=0,I=p,L=0,O=0;const{x:q,y:Q}=this.size;if(this.latRange){const re=this.latRange;b=d.Q(re[1])*p,T=d.Q(re[0])*p,T-b<Q&&(L=Q/(T-b))}u&&(z=d.b3(d.O(u[0])*p,0,p),I=d.b3(d.O(u[1])*p,0,p),I<z&&(I+=p),I-z<q&&(O=q/(I-z)));const{x:te,y:ne}=this.project.call({worldSize:p},e);let le,de;const pe=Math.max(O||0,L||0);if(pe){const re=new d.P(O?(I+z)/2:te,L?(T+b)/2:ne);return c.center=this.unproject.call({worldSize:p},re).wrap(),c.zoom+=this.scaleZoom(pe),c}if(this.latRange){const re=Q/2;ne-re<b&&(de=b+re),ne+re>T&&(de=T-re)}if(u){const re=(z+I)/2;let ve=te;this._renderWorldCopies&&(ve=d.b3(te,re-p/2,re+p/2));const Te=q/2;ve-Te<z&&(le=z+Te),ve+Te>I&&(le=I-Te)}if(le!==void 0||de!==void 0){const re=new d.P(le??te,de??ne);c.center=this.unproject.call({worldSize:p},re).wrap()}return c}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:s,zoom:c}=this.getConstrained(this.center,this.zoom);this.center=s,this.zoom=c,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,s=this.point.x,c=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=d.b5(1,this.center.lat)*this.worldSize;let u=d.an(new Float64Array(16));d.K(u,u,[this.width/2,-this.height/2,1]),d.J(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=d.an(new Float64Array(16)),d.K(u,u,[1,-1,1]),d.J(u,u,[-1,-1,0]),d.K(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u;const p=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),b=Math.min(this.elevation,this.minElevationForCurrentTile),T=p-b*this._pixelPerMeter/Math.cos(this._pitch),z=b<0?T:p,I=Math.PI/2+this._pitch,L=this._fov*(.5+e.y/this.height),O=Math.sin(L)*z/Math.sin(d.ac(Math.PI-I-L,.01,Math.PI-.01)),q=this.getHorizon(),Q=2*Math.atan(q/this.cameraToCenterDistance)*(.5+e.y/(2*q)),te=Math.sin(Q)*z/Math.sin(d.ac(Math.PI-I-Q,.01,Math.PI-.01)),ne=Math.min(O,te);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ne+z),this.nearZ=this.height/50,u=new Float64Array(16),d.b6(u,this._fov,this.width/this.height,this.nearZ,this.farZ),u[8]=2*-e.x/this.width,u[9]=2*e.y/this.height,this.projectionMatrix=d.ae(u),d.K(u,u,[1,-1,1]),d.J(u,u,[0,0,-this.cameraToCenterDistance]),d.b7(u,u,this._pitch),d.ad(u,u,this.angle),d.J(u,u,[-s,-c,0]),this.mercatorMatrix=d.K([],u,[this.worldSize,this.worldSize,this.worldSize]),d.K(u,u,[1,1,this._pixelPerMeter]),this.pixelMatrix=d.L(new Float64Array(16),this.labelPlaneMatrix,u),d.J(u,u,[0,0,-this.elevation]),this.modelViewProjectionMatrix=u,this.invModelViewProjectionMatrix=d.as([],u),this.fogMatrix=new Float64Array(16),d.b6(this.fogMatrix,this._fov,this.width/this.height,p,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,d.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),d.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),d.b7(this.fogMatrix,this.fogMatrix,this._pitch),d.ad(this.fogMatrix,this.fogMatrix,this.angle),d.J(this.fogMatrix,this.fogMatrix,[-s,-c,0]),d.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),d.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=d.L(new Float64Array(16),this.labelPlaneMatrix,u);const le=this.width%2/2,de=this.height%2/2,pe=Math.cos(this.angle),re=Math.sin(this.angle),ve=s-Math.round(s)+pe*le+re*de,Te=c-Math.round(c)+pe*de+re*le,Re=new Float64Array(u);if(d.J(Re,Re,[ve>.5?ve-1:ve,Te>.5?Te-1:Te,0]),this.alignedModelViewProjectionMatrix=Re,u=d.as(new Float64Array(16),this.pixelMatrix),!u)throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new d.P(0,0)),s=[e.x*this.worldSize,e.y*this.worldSize,0,1];return d.af(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new d.P(0,e))}getCameraQueryGeometry(e){const s=this.getCameraPoint();if(e.length===1)return[e[0],s];{let c=s.x,u=s.y,p=s.x,b=s.y;for(const T of e)c=Math.min(c,T.x),u=Math.min(u,T.y),p=Math.max(p,T.x),b=Math.max(b,T.y);return[new d.P(c,u),new d.P(p,u),new d.P(p,b),new d.P(c,b),new d.P(c,u)]}}lngLatToCameraDepth(e,s){const c=this.locationCoordinate(e),u=[c.x*this.worldSize,c.y*this.worldSize,s,1];return d.af(u,u,this.modelViewProjectionMatrix),u[2]/u[3]}}function Xo(m,e){let s,c=!1,u=null,p=null;const b=()=>{u=null,c&&(m.apply(p,s),u=setTimeout(b,e),c=!1)};return(...T)=>(c=!0,p=this,s=T,u||b(),u)}class ec{constructor(e){this._getCurrentHash=()=>{const s=window.location.hash.replace("#","");if(this._hashName){let c;return s.split("&").map((u=>u.split("="))).forEach((u=>{u[0]===this._hashName&&(c=u)})),(c&&c[1]||"").split("/")}return s.split("/")},this._onHashChange=()=>{const s=this._getCurrentHash();if(s.length>=3&&!s.some((c=>isNaN(c)))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:c,pitch:+(s[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const s=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,s)},this._removeHash=()=>{const s=this._getCurrentHash();if(s.length===0)return;const c=s.join("/");let u=c;u.split("&").length>0&&(u=u.split("&")[0]),this._hashName&&(u=`${this._hashName}=${c}`);let p=window.location.hash.replace(u,"");p.startsWith("#&")?p=p.slice(0,1)+p.slice(2):p==="#"&&(p="");let b=window.location.href.replace(/(#.+)?$/,p);b=b.replace("&&","&"),window.history.replaceState(window.history.state,null,b)},this._updateHash=Xo(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const s=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,u=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),p=Math.pow(10,u),b=Math.round(s.lng*p)/p,T=Math.round(s.lat*p)/p,z=this._map.getBearing(),I=this._map.getPitch();let L="";if(L+=e?`/${b}/${T}/${c}`:`${c}/${T}/${b}`,(z||I)&&(L+="/"+Math.round(10*z)/10),I&&(L+=`/${Math.round(I)}`),this._hashName){const O=this._hashName;let q=!1;const Q=window.location.hash.slice(1).split("&").map((te=>{const ne=te.split("=")[0];return ne===O?(q=!0,`${ne}=${L}`):te})).filter((te=>te));return q||Q.push(`${O}=${L}`),`#${Q.join("&")}`}return`#${L}`}}const au={linearity:.3,easing:d.b8(0,0,.3,1)},Zu=d.e({deceleration:2500,maxSpeed:1400},au),Qd=d.e({deceleration:20,maxSpeed:1400},au),Gu=d.e({deceleration:1e3,maxSpeed:360},au),tc=d.e({deceleration:1e3,maxSpeed:90},au);class ic{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:X.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,s=X.now();for(;e.length>0&&s-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new d.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:p}of this._inertiaBuffer)s.zoom+=p.zoomDelta||0,s.bearing+=p.bearingDelta||0,s.pitch+=p.pitchDelta||0,p.panDelta&&s.pan._add(p.panDelta),p.around&&(s.around=p.around),p.pinchAround&&(s.pinchAround=p.pinchAround);const c=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,u={};if(s.pan.mag()){const p=Yo(s.pan.mag(),c,d.e({},Zu,e||{}));u.offset=s.pan.mult(p.amount/s.pan.mag()),u.center=this._map.transform.center,pr(u,p)}if(s.zoom){const p=Yo(s.zoom,c,Qd);u.zoom=this._map.transform.zoom+p.amount,pr(u,p)}if(s.bearing){const p=Yo(s.bearing,c,Gu);u.bearing=this._map.transform.bearing+d.ac(p.amount,-179,179),pr(u,p)}if(s.pitch){const p=Yo(s.pitch,c,tc);u.pitch=this._map.transform.pitch+p.amount,pr(u,p)}if(u.zoom||u.bearing){const p=s.pinchAround===void 0?s.around:s.pinchAround;u.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),d.e(u,{noMoveStart:!0})}}function pr(m,e){(!m.duration||m.duration<e.duration)&&(m.duration=e.duration,m.easing=e.easing)}function Yo(m,e,s){const{maxSpeed:c,linearity:u,deceleration:p}=s,b=d.ac(m*u/(e/1e3),-c,c),T=Math.abs(b)/(p*u);return{easing:s.easing,duration:1e3*T,amount:b*(T/2)}}class Ui extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,s,c,u={}){const p=$.mousePos(s.getCanvas(),c),b=s.unproject(p);super(e,d.e({point:p,lngLat:b,originalEvent:c},u)),this._defaultPrevented=!1,this.target=s}}class jn extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,s,c){const u=e==="touchend"?c.changedTouches:c.touches,p=$.touchPos(s.getCanvasContainer(),u),b=p.map((z=>s.unproject(z))),T=p.reduce(((z,I,L,O)=>z.add(I.div(O.length))),new d.P(0,0));super(e,{points:p,point:T,lngLats:b,lngLat:s.unproject(T),originalEvent:c}),this._defaultPrevented=!1}}class ro extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,s,c){super(e,{originalEvent:c}),this._defaultPrevented=!1}}class su{constructor(e,s){this._map=e,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new ro(e.type,this._map,e))}mousedown(e,s){return this._mousedownPos=s,this._firePreventable(new Ui(e.type,this._map,e))}mouseup(e){this._map.fire(new Ui(e.type,this._map,e))}click(e,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Ui(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Ui(e.type,this._map,e))}mouseover(e){this._map.fire(new Ui(e.type,this._map,e))}mouseout(e){this._map.fire(new Ui(e.type,this._map,e))}touchstart(e){return this._firePreventable(new jn(e.type,this._map,e))}touchmove(e){this._map.fire(new jn(e.type,this._map,e))}touchend(e){this._map.fire(new jn(e.type,this._map,e))}touchcancel(e){this._map.fire(new jn(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Ui(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Ui(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Lr{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(d.P.convert(e),this._map.terrain)}}class mr{constructor(e,s){this._map=e,this._tr=new Lr(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,s){this.isEnabled()&&e.shiftKey&&e.button===0&&($.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(e,s){if(!this._active)return;const c=s;if(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)return;const u=this._startPos;this._lastPos=c,this._box||(this._box=$.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const p=Math.min(u.x,c.x),b=Math.max(u.x,c.x),T=Math.min(u.y,c.y),z=Math.max(u.y,c.y);$.setTransform(this._box,`translate(${p}px,${T}px)`),this._box.style.width=b-p+"px",this._box.style.height=z-T+"px"}mouseupWindow(e,s){if(!this._active||e.button!==0)return;const c=this._startPos,u=s;if(this.reset(),$.suppressClick(),c.x!==u.x||c.y!==u.y)return this._map.fire(new d.k("boxzoomend",{originalEvent:e})),{cameraAnimation:p=>p.fitScreenCoordinates(c,u,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&($.remove(this._box),this._box=null),$.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,s){return this._map.fire(new d.k(e,{originalEvent:s}))}}function Ra(m,e){if(m.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${e.length}`);const s={};for(let c=0;c<m.length;c++)s[m[c].identifier]=e[c];return s}class ou{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,s,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),c.length===this.numTouches&&(this.centroid=(function(u){const p=new d.P(0,0);for(const b of u)p._add(b);return p.div(u.length)})(s),this.touches=Ra(c,s)))}touchmove(e,s,c){if(this.aborted||!this.centroid)return;const u=Ra(c,s);for(const p in this.touches){const b=u[p];(!b||b.dist(this.touches[p])>30)&&(this.aborted=!0)}}touchend(e,s,c){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){const u=!this.aborted&&this.centroid;if(this.reset(),u)return u}}}class ao{constructor(e){this.singleTap=new ou(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,s,c){this.singleTap.touchstart(e,s,c)}touchmove(e,s,c){this.singleTap.touchmove(e,s,c)}touchend(e,s,c){const u=this.singleTap.touchend(e,s,c);if(u){const p=e.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(u)<30;if(p&&b||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=u,this.count===this.numTaps)return this.reset(),u}}}class ua{constructor(e){this._tr=new Lr(e),this._zoomIn=new ao({numTouches:1,numTaps:2}),this._zoomOut=new ao({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,s,c){this._zoomIn.touchstart(e,s,c),this._zoomOut.touchstart(e,s,c)}touchmove(e,s,c){this._zoomIn.touchmove(e,s,c),this._zoomOut.touchmove(e,s,c)}touchend(e,s,c){const u=this._zoomIn.touchend(e,s,c),p=this._zoomOut.touchend(e,s,c),b=this._tr;return u?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(u)},{originalEvent:e})}):p?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(p)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class is{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const s=this._moveFunction(...e);if(s.bearingDelta||s.pitchDelta||s.around||s.panDelta)return this._active=!0,s}dragStart(e,s){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=s.length?s[0]:s,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,s){if(!this.isEnabled())return;const c=this._lastPoint;if(!c)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const u=s.length?s[0]:s;return!this._moved&&u.dist(c)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=u,this._move(c,u))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&$.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const gr={0:1,2:2};class Ko{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const s=$.mouseButton(e);this._eventButton=s}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!(function(s,c){const u=gr[c];return s.buttons===void 0||(s.buttons&u)!==u})(e,this._eventButton)}isValidEndEvent(e){return $.mouseButton(e)===this._eventButton}}class ha{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const nc=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=e=>{e.preventDefault()}},Wo=({enable:m,clickTolerance:e,bearingDegreesPerPixelMoved:s=.8})=>{const c=new Ko({checkCorrectEvent:u=>$.mouseButton(u)===0&&u.ctrlKey||$.mouseButton(u)===2});return new is({clickTolerance:e,move:(u,p)=>({bearingDelta:(p.x-u.x)*s}),moveStateManager:c,enable:m,assignEvents:nc})},ns=({enable:m,clickTolerance:e,pitchDegreesPerPixelMoved:s=-.5})=>{const c=new Ko({checkCorrectEvent:u=>$.mouseButton(u)===0&&u.ctrlKey||$.mouseButton(u)===2});return new is({clickTolerance:e,move:(u,p)=>({pitchDelta:(p.y-u.y)*s}),moveStateManager:c,enable:m,assignEvents:nc})};class rs{constructor(e,s){this._clickTolerance=e.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new d.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,s,c){return this._calculateTransform(e,s,c)}touchmove(e,s,c){if(this._active){if(!this._shouldBePrevented(c.length))return e.preventDefault(),this._calculateTransform(e,s,c);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,s,c){this._calculateTransform(e,s,c),this._active&&this._shouldBePrevented(c.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,s,c){c.length>0&&(this._active=!0);const u=Ra(c,s),p=new d.P(0,0),b=new d.P(0,0);let T=0;for(const I in u){const L=u[I],O=this._touches[I];O&&(p._add(L),b._add(L.sub(O)),T++,u[I]=L)}if(this._touches=u,this._shouldBePrevented(T)||!b.mag())return;const z=b.div(T);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:p.div(T),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,s,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([s[0],s[1]]))}touchmove(e,s,c){if(!this._firstTwoTouches)return;e.preventDefault();const[u,p]=this._firstTwoTouches,b=Ia(c,s,u),T=Ia(c,s,p);if(!b||!T)return;const z=this._aroundCenter?null:b.add(T).div(2);return this._move([b,T],z,e)}touchend(e,s,c){if(!this._firstTwoTouches)return;const[u,p]=this._firstTwoTouches,b=Ia(c,s,u),T=Ia(c,s,p);b&&T||(this._active&&$.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ia(m,e,s){for(let c=0;c<m.length;c++)if(m[c].identifier===s)return e[c]}function Rs(m,e){return Math.log(m/e)/Math.LN2}class Jo extends Qo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,s){const c=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Rs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Rs(this._distance,c),pinchAround:s}}}function el(m,e){return 180*m.angleWith(e)/Math.PI}class Or extends Qo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,s,c){const u=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:el(this._vector,u),pinchAround:s}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const s=25/(Math.PI*this._minDiameter)*360,c=el(e,this._startVector);return Math.abs(c)<s}}function yr(m){return Math.abs(m.y)>Math.abs(m.x)}class da extends Qo{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,s,c){super.touchstart(e,s,c),this._currentTouchCount=c.length}_start(e){this._lastPoints=e,yr(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,s,c){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const u=e[0].sub(this._lastPoints[0]),p=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(u,p,c.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(u.y+p.y)/2*-.5}):void 0}gestureBeginsVertically(e,s,c){if(this._valid!==void 0)return this._valid;const u=e.mag()>=2,p=s.mag()>=2;if(!u&&!p)return;if(!u||!p)return this._firstMove===void 0&&(this._firstMove=c),c-this._firstMove<100&&void 0;const b=e.y>0==s.y>0;return yr(e)&&yr(s)&&b}}const ka={panStep:100,bearingStep:15,pitchStep:10};class Mn{constructor(e){this._tr=new Lr(e);const s=ka;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let s=0,c=0,u=0,p=0,b=0;switch(e.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:e.shiftKey?c=-1:(e.preventDefault(),p=-1);break;case 39:e.shiftKey?c=1:(e.preventDefault(),p=1);break;case 38:e.shiftKey?u=1:(e.preventDefault(),b=-1);break;case 40:e.shiftKey?u=-1:(e.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(c=0,u=0),{cameraAnimation:T=>{const z=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:Jn,zoom:s?Math.round(z.zoom)+s*(e.shiftKey?2:1):z.zoom,bearing:z.bearing+c*this._bearingStep,pitch:z.pitch+u*this._pitchStep,offset:[-p*this._panStep,-b*this._panStep],center:z.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Jn(m){return m*(2-m)}const lu=4.000244140625;class Zr{constructor(e,s){this._onTimeout=c=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},this._map=e,this._tr=new Lr(e),this._triggerRenderFrame=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let s=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const c=X.now(),u=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,s!==0&&s%lu==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":u>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(u*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),e.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=e,this._delta-=s,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=$.mousePos(this._map.getCanvas(),e),c=this._tr;this._around=s.y>c.transform.height/2-c.transform.getHorizon()?d.N.convert(this._aroundCenter?c.center:c.unproject(s)):d.N.convert(c.center),this._aroundPoint=c.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>lu?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&I!==0&&(I=1/I);const L=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(L*I))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,c=this._startZoom,u=this._easing;let p,b=!1;const T=X.now()-this._lastWheelEventTime;if(this._type==="wheel"&&c&&u&&T){const z=Math.min(T/200,1),I=u(z);p=d.y.number(c,s,I),z<1?this._frameId||(this._frameId=!0):b=!0}else p=s,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!b,zoomDelta:p-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let s=d.b9;if(this._prevEase){const c=this._prevEase,u=(X.now()-c.start)/c.duration,p=c.easing(u+.01)-c.easing(u),b=.27/Math.sqrt(p*p+1e-4)*.01,T=Math.sqrt(.0729-b*b);s=d.b8(b,T,.25,1)}return this._prevEase={start:X.now(),duration:e,easing:s},s}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class as{constructor(e,s){this._clickZoom=e,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _r{constructor(e){this._tr=new Lr(e),this.reset()}reset(){this._active=!1}dblclick(e,s){return e.preventDefault(),{cameraAnimation:c=>{c.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(s)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pn{constructor(){this._tap=new ao({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,s,c){if(!this._swipePoint)if(this._tapTime){const u=s[0],p=e.timeStamp-this._tapTime<500,b=this._tapPoint.dist(u)<30;p&&b?c.length>0&&(this._swipePoint=u,this._swipeTouch=c[0].identifier):this.reset()}else this._tap.touchstart(e,s,c)}touchmove(e,s,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;const u=s[0],p=u.y-this._swipePoint.y;return this._swipePoint=u,e.preventDefault(),this._active=!0,{zoomDelta:p/128}}}else this._tap.touchmove(e,s,c)}touchend(e,s,c){if(this._tapTime)this._swipePoint&&c.length===0&&this.reset();else{const u=this._tap.touchend(e,s,c);u&&(this._tapTime=e.timeStamp,this._tapPoint=u)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ei{constructor(e,s,c){this._el=e,this._mousePan=s,this._touchPan=c}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Is{constructor(e,s,c){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=s,this._mousePitch=c}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wr{constructor(e,s,c,u){this._el=e,this._touchZoom=s,this._touchRotate=c,this._tapDragZoom=u,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ks{constructor(e,s){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=s,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=$.create("div","maplibregl-cooperative-gesture-screen",e);let s=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(s=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const c=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),u=document.createElement("div");u.className="maplibregl-desktop-message",u.textContent=s,this._container.appendChild(u);const p=document.createElement("div");p.className="maplibregl-mobile-message",p.textContent=c,this._container.appendChild(p),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&($.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,s){this._enabled&&(this._map.fire(new d.k("cooperativegestureprevented",{gestureType:e,originalEvent:s})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Un=m=>m.zoom||m.drag||m.pitch||m.rotate;class wt extends d.k{}function rc(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class so{constructor(e,s){this.handleWindowEvent=u=>{this.handleEvent(u,`${u.type}Window`)},this.handleEvent=(u,p)=>{if(u.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const b=u.type==="renderFrame"?void 0:u,T={needsRenderFrame:!1},z={},I={},L=u.touches,O=L?this._getMapTouches(L):void 0,q=O?$.touchPos(this._map.getCanvas(),O):$.mousePos(this._map.getCanvas(),u);for(const{handlerName:ne,handler:le,allowed:de}of this._handlers){if(!le.isEnabled())continue;let pe;this._blockedByActive(I,de,ne)?le.reset():le[p||u.type]&&(pe=le[p||u.type](u,q,O),this.mergeHandlerResult(T,z,pe,ne,b),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()),(pe||le.isActive())&&(I[ne]=le)}const Q={};for(const ne in this._previousActiveHandlers)I[ne]||(Q[ne]=b);this._previousActiveHandlers=I,(Object.keys(Q).length||rc(T))&&(this._changes.push([T,z,Q]),this._triggerRenderFrame()),(Object.keys(I).length||rc(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=T;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ic(e),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s);const c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[window,"blur",void 0]];for(const[u,p,b]of this._listeners)$.addEventListener(u,p,u===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(const[e,s,c]of this._listeners)$.removeEventListener(e,s,e===document?this.handleWindowEvent:this.handleEvent,c)}_addDefaultHandlers(e){const s=this._map,c=s.getCanvasContainer();this._add("mapEvent",new su(s,e));const u=s.boxZoom=new mr(s,e);this._add("boxZoom",u),e.interactive&&e.boxZoom&&u.enable();const p=s.cooperativeGestures=new ks(s,e.cooperativeGestures);this._add("cooperativeGestures",p),e.cooperativeGestures&&p.enable();const b=new ua(s),T=new _r(s);s.doubleClickZoom=new as(T,b),this._add("tapZoom",b),this._add("clickZoom",T),e.interactive&&e.doubleClickZoom&&s.doubleClickZoom.enable();const z=new pn;this._add("tapDragZoom",z);const I=s.touchPitch=new da(s);this._add("touchPitch",I),e.interactive&&e.touchPitch&&s.touchPitch.enable(e.touchPitch);const L=Wo(e),O=ns(e);s.dragRotate=new Is(e,L,O),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]),e.interactive&&e.dragRotate&&s.dragRotate.enable();const q=(({enable:pe,clickTolerance:re})=>{const ve=new Ko({checkCorrectEvent:Te=>$.mouseButton(Te)===0&&!Te.ctrlKey});return new is({clickTolerance:re,move:(Te,Re)=>({around:Re,panDelta:Re.sub(Te)}),activateOnStart:!0,moveStateManager:ve,enable:pe,assignEvents:nc})})(e),Q=new rs(e,s);s.dragPan=new Ei(c,q,Q),this._add("mousePan",q),this._add("touchPan",Q,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&s.dragPan.enable(e.dragPan);const te=new Or,ne=new Jo;s.touchZoomRotate=new Wr(c,ne,te,z),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&s.touchZoomRotate.enable(e.touchZoomRotate);const le=s.scrollZoom=new Zr(s,(()=>this._triggerRenderFrame()));this._add("scrollZoom",le,["mousePan"]),e.interactive&&e.scrollZoom&&s.scrollZoom.enable(e.scrollZoom);const de=s.keyboard=new Mn(s);this._add("keyboard",de),e.interactive&&e.keyboard&&s.keyboard.enable(),this._add("blockableMapEvent",new Yi(s))}_add(e,s,c){this._handlers.push({handlerName:e,handler:s,allowed:c}),this._handlersById[e]=s}stop(e){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Un(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,s,c){for(const u in e)if(u!==c&&(!s||s.indexOf(u)<0))return!0;return!1}_getMapTouches(e){const s=[];for(const c of e)this._el.contains(c.target)&&s.push(c);return s}mergeHandlerResult(e,s,c,u,p){if(!c)return;d.e(e,c);const b={handlerName:u,originalEvent:c.originalEvent||p};c.zoomDelta!==void 0&&(s.zoom=b),c.panDelta!==void 0&&(s.drag=b),c.pitchDelta!==void 0&&(s.pitch=b),c.bearingDelta!==void 0&&(s.rotate=b)}_applyChanges(){const e={},s={},c={};for(const[u,p,b]of this._changes)u.panDelta&&(e.panDelta=(e.panDelta||new d.P(0,0))._add(u.panDelta)),u.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+u.zoomDelta),u.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+u.bearingDelta),u.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+u.pitchDelta),u.around!==void 0&&(e.around=u.around),u.pinchAround!==void 0&&(e.pinchAround=u.pinchAround),u.noInertia&&(e.noInertia=u.noInertia),d.e(s,p),d.e(c,b);this._updateMapTransform(e,s,c),this._changes=[]}_updateMapTransform(e,s,c){const u=this._map,p=u._getTransformForUpdate(),b=u.terrain;if(!(rc(e)||b&&this._terrainMovement))return this._fireEvents(s,c,!0);let{panDelta:T,zoomDelta:z,bearingDelta:I,pitchDelta:L,around:O,pinchAround:q}=e;q!==void 0&&(O=q),u._stop(!0),O=O||u.transform.centerPoint;const Q=p.pointLocation(T?O.sub(T):O);I&&(p.bearing+=I),L&&(p.pitch+=L),z&&(p.zoom+=z),b?this._terrainMovement||!s.drag&&!s.zoom?s.drag&&this._terrainMovement?p.center=p.pointLocation(p.centerPoint.sub(T)):p.setLocationAtPoint(Q,O):(this._terrainMovement=!0,this._map._elevationFreeze=!0,p.setLocationAtPoint(Q,O)):p.setLocationAtPoint(Q,O),u._applyUpdatedTransform(p),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(s,c,!0)}_fireEvents(e,s,c){const u=Un(this._eventsInProgress),p=Un(e),b={};for(const O in e){const{originalEvent:q}=e[O];this._eventsInProgress[O]||(b[`${O}start`]=q),this._eventsInProgress[O]=e[O]}!u&&p&&this._fireEvent("movestart",p.originalEvent);for(const O in b)this._fireEvent(O,b[O]);p&&this._fireEvent("move",p.originalEvent);for(const O in e){const{originalEvent:q}=e[O];this._fireEvent(O,q)}const T={};let z;for(const O in this._eventsInProgress){const{handlerName:q,originalEvent:Q}=this._eventsInProgress[O];this._handlersById[q].isActive()||(delete this._eventsInProgress[O],z=s[q]||Q,T[`${O}end`]=z)}for(const O in T)this._fireEvent(O,T[O]);const I=Un(this._eventsInProgress),L=(u||p)&&!I;if(L&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const O=this._map._getTransformForUpdate();O.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(O)}if(c&&L){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!O||!O.essential&&X.prefersReducedMotion?(this._map.fire(new d.k("moveend",{originalEvent:z})),q(this._map.getBearing())&&this._map.resetNorth()):(q(O.bearing||this._map.getBearing())&&(O.bearing=0),O.freezeElevation=!0,this._map.easeTo(O,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(e,s){this._map.fire(new d.k(e,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new wt("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class tl extends d.E{constructor(e,s){super(),this._renderFrameCallback=()=>{const c=Math.min((X.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=s.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new d.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,s){return this.jumpTo({center:e},s)}panBy(e,s,c){return e=d.P.convert(e).mult(-1),this.panTo(this.transform.center,d.e({offset:e},s),c)}panTo(e,s,c){return this.easeTo(d.e({center:e},s),c)}getZoom(){return this.transform.zoom}setZoom(e,s){return this.jumpTo({zoom:e},s),this}zoomTo(e,s,c){return this.easeTo(d.e({zoom:e},s),c)}zoomIn(e,s){return this.zoomTo(this.getZoom()+1,e,s),this}zoomOut(e,s){return this.zoomTo(this.getZoom()-1,e,s),this}getBearing(){return this.transform.bearing}setBearing(e,s){return this.jumpTo({bearing:e},s),this}getPadding(){return this.transform.padding}setPadding(e,s){return this.jumpTo({padding:e},s),this}rotateTo(e,s,c){return this.easeTo(d.e({bearing:e},s),c)}resetNorth(e,s){return this.rotateTo(0,d.e({duration:1e3},e),s),this}resetNorthPitch(e,s){return this.easeTo(d.e({bearing:0,pitch:0,duration:1e3},e),s),this}snapToNorth(e,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,s):this}getPitch(){return this.transform.pitch}setPitch(e,s){return this.jumpTo({pitch:e},s),this}cameraForBounds(e,s){e=Ne.convert(e).adjustAntiMeridian();const c=s&&s.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),c,s)}_cameraForBoxAndBearing(e,s,c,u){const p={top:0,bottom:0,right:0,left:0};if(typeof(u=d.e({padding:p,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const ut=u.padding;u.padding={top:ut,bottom:ut,right:ut,left:ut}}u.padding=d.e(p,u.padding);const b=this.transform,T=b.padding,z=new Ne(e,s),I=b.project(z.getNorthWest()),L=b.project(z.getNorthEast()),O=b.project(z.getSouthEast()),q=b.project(z.getSouthWest()),Q=d.ba(-c),te=I.rotate(Q),ne=L.rotate(Q),le=O.rotate(Q),de=q.rotate(Q),pe=new d.P(Math.max(te.x,ne.x,de.x,le.x),Math.max(te.y,ne.y,de.y,le.y)),re=new d.P(Math.min(te.x,ne.x,de.x,le.x),Math.min(te.y,ne.y,de.y,le.y)),ve=pe.sub(re),Te=(b.width-(T.left+T.right+u.padding.left+u.padding.right))/ve.x,Re=(b.height-(T.top+T.bottom+u.padding.top+u.padding.bottom))/ve.y;if(Re<0||Te<0)return void d.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const $e=Math.min(b.scaleZoom(b.scale*Math.min(Te,Re)),u.maxZoom),nt=d.P.convert(u.offset),pt=new d.P((u.padding.left-u.padding.right)/2,(u.padding.top-u.padding.bottom)/2).rotate(d.ba(c)),xt=nt.add(pt).mult(b.scale/b.zoomScale($e));return{center:b.unproject(I.add(O).div(2).sub(xt)),zoom:$e,bearing:c}}fitBounds(e,s,c){return this._fitInternal(this.cameraForBounds(e,s),s,c)}fitScreenCoordinates(e,s,c,u,p){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(d.P.convert(e)),this.transform.pointLocation(d.P.convert(s)),c,u),u,p)}_fitInternal(e,s,c){return e?(delete(s=d.e(e,s)).padding,s.linear?this.easeTo(s,c):this.flyTo(s,c)):this}jumpTo(e,s){this.stop();const c=this._getTransformForUpdate();let u=!1,p=!1,b=!1;return"zoom"in e&&c.zoom!==+e.zoom&&(u=!0,c.zoom=+e.zoom),e.center!==void 0&&(c.center=d.N.convert(e.center)),"bearing"in e&&c.bearing!==+e.bearing&&(p=!0,c.bearing=+e.bearing),"pitch"in e&&c.pitch!==+e.pitch&&(b=!0,c.pitch=+e.pitch),e.padding==null||c.isPaddingEqual(e.padding)||(c.padding=e.padding),this._applyUpdatedTransform(c),this.fire(new d.k("movestart",s)).fire(new d.k("move",s)),u&&this.fire(new d.k("zoomstart",s)).fire(new d.k("zoom",s)).fire(new d.k("zoomend",s)),p&&this.fire(new d.k("rotatestart",s)).fire(new d.k("rotate",s)).fire(new d.k("rotateend",s)),b&&this.fire(new d.k("pitchstart",s)).fire(new d.k("pitch",s)).fire(new d.k("pitchend",s)),this.fire(new d.k("moveend",s))}calculateCameraOptionsFromTo(e,s,c,u=0){const p=d.Z.fromLngLat(e,s),b=d.Z.fromLngLat(c,u),T=b.x-p.x,z=b.y-p.y,I=b.z-p.z,L=Math.hypot(T,z,I);if(L===0)throw new Error("Can't calculate camera options with same From and To");const O=Math.hypot(T,z),q=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),Q=180*Math.atan2(T,-z)/Math.PI;let te=180*Math.acos(O/L)/Math.PI;return te=I<0?90-te:90+te,{center:b.toLngLat(),zoom:q,pitch:te,bearing:Q}}easeTo(e,s){var c;this._stop(!1,e.easeId),((e=d.e({offset:[0,0],duration:500,easing:d.b9},e)).animate===!1||!e.essential&&X.prefersReducedMotion)&&(e.duration=0);const u=this._getTransformForUpdate(),p=u.zoom,b=u.bearing,T=u.pitch,z=u.padding,I="bearing"in e?this._normalizeBearing(e.bearing,b):b,L="pitch"in e?+e.pitch:T,O="padding"in e?e.padding:u.padding,q=d.P.convert(e.offset);let Q=u.centerPoint.add(q);const te=u.pointLocation(Q),{center:ne,zoom:le}=u.getConstrained(d.N.convert(e.center||te),(c=e.zoom)!==null&&c!==void 0?c:p);this._normalizeCenter(ne,u);const de=u.project(te),pe=u.project(ne).sub(de),re=u.zoomScale(le-p);let ve,Te;e.around&&(ve=d.N.convert(e.around),Te=u.locationPoint(ve));const Re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||le!==p,this._rotating=this._rotating||b!==I,this._pitching=this._pitching||L!==T,this._padding=!u.isPaddingEqual(O),this._easeId=e.easeId,this._prepareEase(s,e.noMoveStart,Re),this.terrain&&this._prepareElevation(ne),this._ease(($e=>{if(this._zooming&&(u.zoom=d.y.number(p,le,$e)),this._rotating&&(u.bearing=d.y.number(b,I,$e)),this._pitching&&(u.pitch=d.y.number(T,L,$e)),this._padding&&(u.interpolatePadding(z,O,$e),Q=u.centerPoint.add(q)),this.terrain&&!e.freezeElevation&&this._updateElevation($e),ve)u.setLocationAtPoint(ve,Te);else{const nt=u.zoomScale(u.zoom-p),pt=le>p?Math.min(2,re):Math.max(.5,re),xt=Math.pow(pt,1-$e),ut=u.unproject(de.add(pe.mult($e*xt)).mult(nt));u.setLocationAtPoint(u.renderWorldCopies?ut.wrap():ut,Q)}this._applyUpdatedTransform(u),this._fireMoveEvents(s)}),($e=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(s,$e)}),e),this}_prepareEase(e,s,c={}){this._moving=!0,s||c.moving||this.fire(new d.k("movestart",e)),this._zooming&&!c.zooming&&this.fire(new d.k("zoomstart",e)),this._rotating&&!c.rotating&&this.fire(new d.k("rotatestart",e)),this._pitching&&!c.pitching&&this.fire(new d.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const s=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&s!==this._elevationTarget){const c=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(c-(s-(c*e+this._elevationStart))/(1-e)),this._elevationTarget=s}this.transform.elevation=d.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const s=e.getCameraPosition(),c=this.terrain.getElevationForLngLatZoom(s.lngLat,e.zoom);if(s.altitude<c){const u=this.calculateCameraOptionsFromTo(s.lngLat,c,e.center,e.elevation);return{pitch:u.pitch,zoom:u.zoom}}return{}}_applyUpdatedTransform(e){const s=[];if(this.terrain&&s.push((u=>this._elevateCameraIfInsideTerrain(u))),this.transformCameraUpdate&&s.push((u=>this.transformCameraUpdate(u))),!s.length)return;const c=e.clone();for(const u of s){const p=c.clone(),{center:b,zoom:T,pitch:z,bearing:I,elevation:L}=u(p);b&&(p.center=b),T!==void 0&&(p.zoom=T),z!==void 0&&(p.pitch=z),I!==void 0&&(p.bearing=I),L!==void 0&&(p.elevation=L),c.apply(p)}this.transform.apply(c)}_fireMoveEvents(e){this.fire(new d.k("move",e)),this._zooming&&this.fire(new d.k("zoom",e)),this._rotating&&this.fire(new d.k("rotate",e)),this._pitching&&this.fire(new d.k("pitch",e))}_afterEase(e,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const c=this._zooming,u=this._rotating,p=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,c&&this.fire(new d.k("zoomend",e)),u&&this.fire(new d.k("rotateend",e)),p&&this.fire(new d.k("pitchend",e)),this.fire(new d.k("moveend",e))}flyTo(e,s){var c;if(!e.essential&&X.prefersReducedMotion){const at=d.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(at,s)}this.stop(),e=d.e({offset:[0,0],speed:1.2,curve:1.42,easing:d.b9},e);const u=this._getTransformForUpdate(),p=u.zoom,b=u.bearing,T=u.pitch,z=u.padding,I="bearing"in e?this._normalizeBearing(e.bearing,b):b,L="pitch"in e?+e.pitch:T,O="padding"in e?e.padding:u.padding,q=d.P.convert(e.offset);let Q=u.centerPoint.add(q);const te=u.pointLocation(Q),{center:ne,zoom:le}=u.getConstrained(d.N.convert(e.center||te),(c=e.zoom)!==null&&c!==void 0?c:p);this._normalizeCenter(ne,u);const de=u.zoomScale(le-p),pe=u.project(te),re=u.project(ne).sub(pe);let ve=e.curve;const Te=Math.max(u.width,u.height),Re=Te/de,$e=re.mag();if("minZoom"in e){const at=d.ac(Math.min(e.minZoom,p,le),u.minZoom,u.maxZoom),Xt=Te/u.zoomScale(at-p);ve=Math.sqrt(Xt/$e*2)}const nt=ve*ve;function pt(at){const Xt=(Re*Re-Te*Te+(at?-1:1)*nt*nt*$e*$e)/(2*(at?Re:Te)*nt*$e);return Math.log(Math.sqrt(Xt*Xt+1)-Xt)}function xt(at){return(Math.exp(at)-Math.exp(-at))/2}function ut(at){return(Math.exp(at)+Math.exp(-at))/2}const ct=pt(!1);let St=function(at){return ut(ct)/ut(ct+ve*at)},ft=function(at){return Te*((ut(ct)*(xt(Xt=ct+ve*at)/ut(Xt))-xt(ct))/nt)/$e;var Xt},Ke=(pt(!0)-ct)/ve;if(Math.abs($e)<1e-6||!isFinite(Ke)){if(Math.abs(Te-Re)<1e-6)return this.easeTo(e,s);const at=Re<Te?-1:1;Ke=Math.abs(Math.log(Re/Te))/ve,ft=()=>0,St=Xt=>Math.exp(at*ve*Xt)}return e.duration="duration"in e?+e.duration:1e3*Ke/("screenSpeed"in e?+e.screenSpeed/ve:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=b!==I,this._pitching=L!==T,this._padding=!u.isPaddingEqual(O),this._prepareEase(s,!1),this.terrain&&this._prepareElevation(ne),this._ease((at=>{const Xt=at*Ke,Di=1/St(Xt);u.zoom=at===1?le:p+u.scaleZoom(Di),this._rotating&&(u.bearing=d.y.number(b,I,at)),this._pitching&&(u.pitch=d.y.number(T,L,at)),this._padding&&(u.interpolatePadding(z,O,at),Q=u.centerPoint.add(q)),this.terrain&&!e.freezeElevation&&this._updateElevation(at);const Kt=at===1?ne:u.unproject(pe.add(re.mult(ft(Xt))).mult(Di));u.setLocationAtPoint(u.renderWorldCopies?Kt.wrap():Kt,Q),this._applyUpdatedTransform(u),this._fireMoveEvents(s)}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(s)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,s){var c;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const u=this._onEaseEnd;delete this._onEaseEnd,u.call(this,s)}return e||(c=this.handlers)===null||c===void 0||c.stop(!1),this}_ease(e,s,c){c.animate===!1||c.duration===0?(e(1),s()):(this._easeStart=X.now(),this._easeOptions=c,this._onEaseFrame=e,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,s){e=d.b3(e,-180,180);const c=Math.abs(e-s);return Math.abs(e-360-s)<c&&(e-=360),Math.abs(e+360-s)<c&&(e+=360),e}_normalizeCenter(e,s){if(!s.renderWorldCopies||s.lngRange)return;const c=e.lng-s.center.lng;e.lng+=c>180?-360:c<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(d.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const oo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Pa{constructor(e=oo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=s=>{!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=$.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=$.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=$.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){$.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,s){const c=this._map._getUIString(`AttributionControl.${s}`);e.title=c,e.setAttribute("aria-label",c)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((u=>typeof u!="string"?"":u))):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const u=this._map.style.stylesheet;this.styleOwner=u.owner,this.styleId=u.id}const s=this._map.style.sourceCaches;for(const u in s){const p=s[u];if(p.used||p.usedForTerrain){const b=p.getSource();b.attribution&&e.indexOf(b.attribution)<0&&e.push(b.attribution)}}e=e.filter((u=>String(u).trim())),e.sort(((u,p)=>u.length-p.length)),e=e.filter(((u,p)=>{for(let b=p+1;b<e.length;b++)if(e[b].indexOf(u)>=0)return!1;return!0}));const c=e.join(" | ");c!==this._attribHTML&&(this._attribHTML=c,e.length?(this._innerContainer.innerHTML=c,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ac{constructor(e={}){this._updateCompact=()=>{const s=this._container.children;if(s.length){const c=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=$.create("div","maplibregl-ctrl");const s=$.create("a","maplibregl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){$.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ri{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const s=++this._id;return this._queue.push({callback:e,id:s,cancelled:!1}),s}remove(e){const s=this._currentlyRunning,c=s?this._queue.concat(s):this._queue;for(const u of c)if(u.id===e)return void(u.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const c of s)if(!c.cancelled&&(c.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var fa=d.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Ps extends d.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,s){this.sourceCache.update(e,s),this._renderableTilesKeys=[];const c={};for(const u of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s}))c[u.key]=!0,this._renderableTilesKeys.push(u.key),this._tiles[u.key]||(u.posMatrix=new Float64Array(16),d.aP(u.posMatrix,0,d.X,0,d.X,0,1),this._tiles[u.key]=new vs(u,this.tileSize));for(const u in this._tiles)c[u]||delete this._tiles[u]}freeRtt(e){for(const s in this._tiles){const c=this._tiles[s];(!e||c.tileID.equals(e)||c.tileID.isChildOf(e)||e.isChildOf(c.tileID))&&(c.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const s={};for(const c of this._renderableTilesKeys){const u=this._tiles[c].tileID;if(u.canonical.equals(e.canonical)){const p=e.clone();p.posMatrix=new Float64Array(16),d.aP(p.posMatrix,0,d.X,0,d.X,0,1),s[c]=p}else if(u.canonical.isChildOf(e.canonical)){const p=e.clone();p.posMatrix=new Float64Array(16);const b=u.canonical.z-e.canonical.z,T=u.canonical.x-(u.canonical.x>>b<<b),z=u.canonical.y-(u.canonical.y>>b<<b),I=d.X>>b;d.aP(p.posMatrix,0,I,0,I,0,1),d.J(p.posMatrix,p.posMatrix,[-T*I,-z*I,0]),s[c]=p}else if(e.canonical.isChildOf(u.canonical)){const p=e.clone();p.posMatrix=new Float64Array(16);const b=e.canonical.z-u.canonical.z,T=e.canonical.x-(e.canonical.x>>b<<b),z=e.canonical.y-(e.canonical.y>>b<<b),I=d.X>>b;d.aP(p.posMatrix,0,d.X,0,d.X,0,1),d.J(p.posMatrix,p.posMatrix,[T*I,z*I,0]),d.K(p.posMatrix,p.posMatrix,[1/2**b,1/2**b,0]),s[c]=p}}return s}getSourceTile(e,s){const c=this.sourceCache._source;let u=e.overscaledZ-this.deltaZoom;if(u>c.maxzoom&&(u=c.maxzoom),u<c.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(u).key);let p=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!p||!p.dem)&&s)for(;u>=c.minzoom&&(!p||!p.dem);)p=this.sourceCache.getTileByID(e.scaledTo(u--).key);return p}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter((s=>s.timeAdded>=e))}}class pa{constructor(e,s,c){this.painter=e,this.sourceCache=new Ps(s),this.options=c,this.exaggeration=typeof c.exaggeration=="number"?c.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,s,c,u=d.X){var p;if(!(s>=0&&s<u&&c>=0&&c<u))return 0;const b=this.getTerrainData(e),T=(p=b.tile)===null||p===void 0?void 0:p.dem;if(!T)return 0;const z=(function(te,ne,le){var de=ne[0],pe=ne[1];return te[0]=le[0]*de+le[4]*pe+le[12],te[1]=le[1]*de+le[5]*pe+le[13],te})([],[s/u*d.X,c/u*d.X],b.u_terrain_matrix),I=[z[0]*T.dim,z[1]*T.dim],L=Math.floor(I[0]),O=Math.floor(I[1]),q=I[0]-L,Q=I[1]-O;return T.get(L,O)*(1-q)*(1-Q)+T.get(L+1,O)*q*(1-Q)+T.get(L,O+1)*(1-q)*Q+T.get(L+1,O+1)*q*Q}getElevationForLngLatZoom(e,s){if(!d.bb(s,e.wrap()))return 0;const{tileID:c,mercatorX:u,mercatorY:p}=this._getOverscaledTileIDFromLngLatZoom(e,s);return this.getElevation(c,u%d.X,p%d.X,d.X)}getElevation(e,s,c,u=d.X){return this.getDEMElevation(e,s,c,u)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const u=this.painter.context,p=new d.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ot(u,p,u.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ot(u,new d.R({width:1,height:1}),u.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=d.an([])}const s=this.sourceCache.getSourceTile(e,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const u=this.painter.context;s.demTexture=this.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new ot(u,s.dem.getPixels(),u.gl.RGBA,{premultiply:!1}),s.demTexture.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const c=s&&s+s.tileID.key+e.key;if(c&&!this._demMatrixCache[c]){const u=this.sourceCache.sourceCache._source.maxzoom;let p=e.canonical.z-s.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=u?p=e.canonical.z-u:d.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const b=e.canonical.x-(e.canonical.x>>p<<p),T=e.canonical.y-(e.canonical.y>>p<<p),z=d.bc(new Float64Array(16),[1/(d.X<<p),1/(d.X<<p),0]);d.J(z,z,[b*d.X,T*d.X,0]),this._demMatrixCache[e.key]={matrix:z,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:c?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getFramebuffer(e){const s=this.painter,c=s.width/devicePixelRatio,u=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===c&&this._fbo.height===u||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ot(s.context,{width:c,height:u,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ot(s.context,{width:c,height:u,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(c,u,!0,!1),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,c,u))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let p=0,b=0;p<this._coordsTextureSize;p++)for(let T=0;T<this._coordsTextureSize;T++,b+=4)s[b+0]=255&T,s[b+1]=255&p,s[b+2]=T>>8<<4|p>>8,s[b+3]=0;const c=new d.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),u=new ot(e,c,e.gl.RGBA,{premultiply:!1});return u.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=u,u}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const s=new Uint8Array(4),c=this.painter.context,u=c.gl,p=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);c.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),u.readPixels(p,T-b-1,1,1,u.RGBA,u.UNSIGNED_BYTE,s),c.bindFramebuffer.set(null);const z=s[0]+(s[2]>>4<<8),I=s[1]+((15&s[2])<<8),L=this.coordsIndex[255-s[3]],O=L&&this.sourceCache.getTileByID(L);if(!O)return null;const q=this._coordsTextureSize,Q=(1<<O.tileID.canonical.z)*q;return new d.Z((O.tileID.canonical.x*q+z)/Q+O.tileID.wrap,(O.tileID.canonical.y*q+I)/Q,this.getElevation(O.tileID,z,I,q))}depthAtPoint(e){const s=new Uint8Array(4),c=this.painter.context,u=c.gl;return c.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),u.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,u.RGBA,u.UNSIGNED_BYTE,s),c.bindFramebuffer.set(null),(s[0]/16777216+s[1]/65536+s[2]/256+s[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,s=new d.bd,c=new d.aY,u=this.meshSize,p=d.X/u,b=u*u;for(let O=0;O<=u;O++)for(let q=0;q<=u;q++)s.emplaceBack(q*p,O*p,0);for(let O=0;O<b;O+=u+1)for(let q=0;q<u;q++)c.emplaceBack(q+O,u+q+O+1,u+q+O+2),c.emplaceBack(q+O,u+q+O+2,q+O+1);const T=s.length,z=T+2*(u+1);for(const O of[0,1])for(let q=0;q<=u;q++)for(const Q of[0,1])s.emplaceBack(q*p,O*d.X,Q);for(let O=0;O<2*u;O+=2)c.emplaceBack(z+O,z+O+1,z+O+3),c.emplaceBack(z+O,z+O+3,z+O+2),c.emplaceBack(T+O,T+O+3,T+O+1),c.emplaceBack(T+O,T+O+2,T+O+3);const I=s.length,L=I+2*(u+1);for(const O of[0,1])for(let q=0;q<=u;q++)for(const Q of[0,1])s.emplaceBack(O*d.X,q*p,Q);for(let O=0;O<2*u;O+=2)c.emplaceBack(I+O,I+O+1,I+O+3),c.emplaceBack(I+O,I+O+3,I+O+2),c.emplaceBack(L+O,L+O+3,L+O+1),c.emplaceBack(L+O,L+O+2,L+O+3);return this._mesh=new Jl(e.createVertexBuffer(s,fa.members),e.createIndexBuffer(c),d.a0.simpleSegment(0,0,s.length,c.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*d.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,s){var c;const{tileID:u}=this._getOverscaledTileIDFromLngLatZoom(e,s);return(c=this.getMinMaxElevation(u).minElevation)!==null&&c!==void 0?c:0}getMinMaxElevation(e){const s=this.getTerrainData(e).tile,c={minElevation:null,maxElevation:null};return s&&s.dem&&(c.minElevation=s.dem.min*this.exaggeration,c.maxElevation=s.dem.max*this.exaggeration),c}_getOverscaledTileIDFromLngLatZoom(e,s){const c=d.Z.fromLngLat(e.wrap()),u=(1<<s)*d.X,p=c.x*u,b=c.y*u,T=Math.floor(p/d.X),z=Math.floor(b/d.X);return{tileID:new d.S(s,0,s,T,z),mercatorX:p,mercatorY:b}}}class $u{constructor(e,s,c){this._context=e,this._size=s,this._tileSize=c,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const s=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),c=new ot(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return c.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),s.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),s.colorAttachment.set(c.texture),{id:e,fbo:s,texture:c,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((s=>e.id!==s)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const s of this._recentlyUsed)if(!this._objects[s].inUse)return this._objects[s];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((e=>!e.inUse))===!1}}const Ls={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class il{constructor(e,s){this.painter=e,this.terrain=s,this.pool=new $u(e.context,30,s.sourceCache.tileSize*s.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,s){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((c=>!e._layers[c].isHidden(s))),this._coordsDescendingInv={};for(const c in e.sourceCaches){this._coordsDescendingInv[c]={};const u=e.sourceCaches[c].getVisibleCoordinates();for(const p of u){const b=this.terrain.sourceCache.getTerrainCoords(p);for(const T in b)this._coordsDescendingInv[c][T]||(this._coordsDescendingInv[c][T]=[]),this._coordsDescendingInv[c][T].push(b[T])}}this._coordsDescendingInvStr={};for(const c of e._order){const u=e._layers[c],p=u.source;if(Ls[u.type]&&!this._coordsDescendingInvStr[p]){this._coordsDescendingInvStr[p]={};for(const b in this._coordsDescendingInv[p])this._coordsDescendingInvStr[p][b]=this._coordsDescendingInv[p][b].map((T=>T.key)).sort().join()}}for(const c of this._renderableTiles)for(const u in this._coordsDescendingInvStr){const p=this._coordsDescendingInvStr[u][c.tileID.key];p&&p!==c.rttCoords[u]&&(c.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const s=e.type,c=this.painter,u=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Ls[s]&&(this._prevType&&Ls[this._prevType]||this._stacks.push([]),this._prevType=s,this._stacks[this._stacks.length-1].push(e.id),!u))return!0;if(Ls[this._prevType]||Ls[s]&&u){this._prevType=s;const p=this._stacks.length-1,b=this._stacks[p]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(ru(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[p]){const I=this.pool.getObjectForId(T.rtt[p].id);if(I.stamp===T.rtt[p].stamp){this.pool.useObject(I);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),T.rtt[p]={id:z.id,stamp:z.stamp},c.context.bindFramebuffer.set(z.fbo.framebuffer),c.context.clear({color:d.aM.transparent,stencil:0}),c.currentStencilSource=void 0;for(let I=0;I<b.length;I++){const L=c.style._layers[b[I]],O=L.source?this._coordsDescendingInv[L.source][T.tileID.key]:[T.tileID];c.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),c._renderTileClippingMasks(L,O),c.renderLayer(c,c.style.sourceCaches[L.source],L,O),L.source&&(T.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][T.tileID.key])}}return ru(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ls[s]}return!1}}const nl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Os=G,er={hash:!1,interactive:!0,bearingSnap:7,attributionControl:oo,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:d.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},rl=m=>{m.touchstart=m.dragStart,m.touchmoveWindow=m.dragMove,m.touchend=m.dragEnd},Bh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Jd{constructor(e,s,c=!1){this.mousedown=b=>{this.startMouse(d.e({},b,{ctrlKey:!0,preventDefault:()=>b.preventDefault()}),$.mousePos(this.element,b)),$.addEventListener(window,"mousemove",this.mousemove),$.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.moveMouse(b,$.mousePos(this.element,b))},this.mouseup=b=>{this.mouseRotate.dragEnd(b),this.mousePitch&&this.mousePitch.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=$.touchPos(this.element,b.targetTouches)[0],this.startTouch(b,this._startPos),$.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=$.touchPos(this.element,b.targetTouches)[0],this.moveTouch(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const u=e.dragRotate._mouseRotate.getClickTolerance(),p=e.dragRotate._mousePitch.getClickTolerance();this.element=s,this.mouseRotate=Wo({clickTolerance:u,enable:!0}),this.touchRotate=(({enable:b,clickTolerance:T,bearingDegreesPerPixelMoved:z=.8})=>{const I=new ha;return new is({clickTolerance:T,move:(L,O)=>({bearingDelta:(O.x-L.x)*z}),moveStateManager:I,enable:b,assignEvents:rl})})({clickTolerance:u,enable:!0}),this.map=e,c&&(this.mousePitch=ns({clickTolerance:p,enable:!0}),this.touchPitch=(({enable:b,clickTolerance:T,pitchDegreesPerPixelMoved:z=-.5})=>{const I=new ha;return new is({clickTolerance:T,move:(L,O)=>({pitchDelta:(O.y-L.y)*z}),moveStateManager:I,enable:b,assignEvents:rl})})({clickTolerance:p,enable:!0})),$.addEventListener(s,"mousedown",this.mousedown),$.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),$.addEventListener(s,"touchcancel",this.reset)}startMouse(e,s){this.mouseRotate.dragStart(e,s),this.mousePitch&&this.mousePitch.dragStart(e,s),$.disableDrag()}startTouch(e,s){this.touchRotate.dragStart(e,s),this.touchPitch&&this.touchPitch.dragStart(e,s),$.disableDrag()}moveMouse(e,s){const c=this.map,{bearingDelta:u}=this.mouseRotate.dragMove(e,s)||{};if(u&&c.setBearing(c.getBearing()+u),this.mousePitch){const{pitchDelta:p}=this.mousePitch.dragMove(e,s)||{};p&&c.setPitch(c.getPitch()+p)}}moveTouch(e,s){const c=this.map,{bearingDelta:u}=this.touchRotate.dragMove(e,s)||{};if(u&&c.setBearing(c.getBearing()+u),this.touchPitch){const{pitchDelta:p}=this.touchPitch.dragMove(e,s)||{};p&&c.setPitch(c.getPitch()+p)}}off(){const e=this.element;$.removeEventListener(e,"mousedown",this.mousedown),$.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),$.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.removeEventListener(window,"touchend",this.touchend),$.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){$.enableDrag(),$.removeEventListener(window,"mousemove",this.mousemove),$.removeEventListener(window,"mouseup",this.mouseup),$.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.removeEventListener(window,"touchend",this.touchend)}}let Gr;function Zi(m,e,s){const c=new d.N(m.lng,m.lat);if(m=new d.N(m.lng,m.lat),e){const u=new d.N(m.lng-360,m.lat),p=new d.N(m.lng+360,m.lat),b=s.locationPoint(m).distSqr(e);s.locationPoint(u).distSqr(e)<b?m=u:s.locationPoint(p).distSqr(e)<b&&(m=p)}for(;Math.abs(m.lng-s.center.lng)>180;){const u=s.locationPoint(m);if(u.x>=0&&u.y>=0&&u.x<=s.width&&u.y<=s.height)break;m.lng>s.center.lng?m.lng-=360:m.lng+=360}return m.lng!==c.lng&&s.locationPoint(m).y>s.height/2-s.getHorizon()?m:c}const en={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function al(m,e,s){const c=m.classList;for(const u in en)c.remove(`maplibregl-${s}-anchor-${u}`);c.add(`maplibregl-${s}-anchor-${e}`)}class Bs extends d.E{constructor(e){if(super(),this._onKeyPress=s=>{const c=s.code,u=s.charCode||s.keyCode;c!=="Space"&&c!=="Enter"&&u!==32&&u!==13||this.togglePopup()},this._onMapClick=s=>{const c=s.originalEvent.target,u=this._element;this._popup&&(c===u||u.contains(c))&&this.togglePopup()},this._update=s=>{var c;if(!this._map)return;const u=this._map.loaded()&&!this._map.isMoving();(s?.type==="terrain"||s?.type==="render"&&!u)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Zi(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||s&&s.type!=="moveend"||(this._pos=this._pos.round()),$.setTransform(this._element,`${en[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${p}`),X.frameAsync(new AbortController).then((()=>{this._updateOpacity(s&&s.type==="moveend")})).catch((()=>{}))},this._onMove=s=>{if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new d.k("dragstart"))),this.fire(new d.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new d.k("dragend")),this._state="inactive"},this._addDragHandler=s=>{this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e?.opacity,e?.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=d.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=$.create("div");const s=$.createNS("http://www.w3.org/2000/svg","svg"),c=41,u=27;s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height",`${c}px`),s.setAttributeNS(null,"width",`${u}px`),s.setAttributeNS(null,"viewBox",`0 0 ${u} ${c}`);const p=$.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"stroke","none"),p.setAttributeNS(null,"stroke-width","1"),p.setAttributeNS(null,"fill","none"),p.setAttributeNS(null,"fill-rule","evenodd");const b=$.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");const T=$.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of z){const pe=$.createNS("http://www.w3.org/2000/svg","ellipse");pe.setAttributeNS(null,"opacity","0.04"),pe.setAttributeNS(null,"cx","10.5"),pe.setAttributeNS(null,"cy","5.80029008"),pe.setAttributeNS(null,"rx",de.rx),pe.setAttributeNS(null,"ry",de.ry),T.appendChild(pe)}const I=$.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill",this._color);const L=$.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),I.appendChild(L);const O=$.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"opacity","0.25"),O.setAttributeNS(null,"fill","#000000");const q=$.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),O.appendChild(q);const Q=$.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const te=$.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ne=$.createNS("http://www.w3.org/2000/svg","circle");ne.setAttributeNS(null,"fill","#000000"),ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"cx","5.5"),ne.setAttributeNS(null,"cy","5.5"),ne.setAttributeNS(null,"r","5.4999962");const le=$.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),te.appendChild(ne),te.appendChild(le),b.appendChild(T),b.appendChild(I),b.appendChild(O),b.appendChild(Q),b.appendChild(te),s.appendChild(b),s.setAttributeNS(null,"height",c*this._scale+"px"),s.setAttributeNS(null,"width",u*this._scale+"px"),this._element.appendChild(s),this._offset=d.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(s=>{s.preventDefault()})),this._element.addEventListener("mousedown",(s=>{s.preventDefault()})),al(this._element,this._anchor,"marker"),e&&e.className)for(const s of e.className.split(" "))this._element.classList.add(s);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),$.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=d.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const u=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[u,-1*(38.1-13.5+u)],"bottom-right":[-u,-1*(38.1-13.5+u)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var s,c;if(!(!((s=this._map)===null||s===void 0)&&s.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const u=this._map,p=u.terrain.depthAtPoint(this._pos),b=u.terrain.getElevationForLngLatZoom(this._lngLat,u.transform.tileZoom);if(u.transform.lngLatToCameraDepth(this._lngLat,b)-p<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/u.transform._pixelPerMeter,z=Math.sin(u.getPitch()*Math.PI/180)*T,I=u.terrain.depthAtPoint(new d.P(this._pos.x,this._pos.y-this._offset.y)),L=u.transform.lngLatToCameraDepth(this._lngLat,b+z)-I>.006;!((c=this._popup)===null||c===void 0)&&c.isOpen()&&L&&this._popup.remove(),this._element.style.opacity=L?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=d.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,s){return e===void 0&&s===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),s!==void 0&&(this._opacityWhenCovered=s),this._map&&this._updateOpacity(!0),this}}const sl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let lo=0,La=!1;const vr={maxWidth:100,unit:"metric"};function sc(m,e,s){const c=s&&s.maxWidth||100,u=m._container.clientHeight/2,p=m.unproject([0,u]),b=m.unproject([c,u]),T=p.distanceTo(b);if(s&&s.unit==="imperial"){const z=3.2808*T;z>5280?zt(e,c,z/5280,m._getUIString("ScaleControl.Miles")):zt(e,c,z,m._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?zt(e,c,T/1852,m._getUIString("ScaleControl.NauticalMiles")):T>=1e3?zt(e,c,T/1e3,m._getUIString("ScaleControl.Kilometers")):zt(e,c,T,m._getUIString("ScaleControl.Meters"))}function zt(m,e,s,c){const u=(function(p){const b=Math.pow(10,`${Math.floor(p)}`.length-1);let T=p/b;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:(function(z){const I=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*I)/I})(T),b*T})(s);m.style.width=e*(u/s)+"px",m.innerHTML=`${u}&nbsp;${c}`}const Ht={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},oc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oa(m){if(m){if(typeof m=="number"){const e=Math.round(Math.abs(m)/Math.SQRT2);return{center:new d.P(0,0),top:new d.P(0,m),"top-left":new d.P(e,e),"top-right":new d.P(-e,e),bottom:new d.P(0,-m),"bottom-left":new d.P(e,-e),"bottom-right":new d.P(-e,-e),left:new d.P(m,0),right:new d.P(-m,0)}}if(m instanceof d.P||Array.isArray(m)){const e=d.P.convert(m);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:d.P.convert(m.center||[0,0]),top:d.P.convert(m.top||[0,0]),"top-left":d.P.convert(m["top-left"]||[0,0]),"top-right":d.P.convert(m["top-right"]||[0,0]),bottom:d.P.convert(m.bottom||[0,0]),"bottom-left":d.P.convert(m["bottom-left"]||[0,0]),"bottom-right":d.P.convert(m["bottom-right"]||[0,0]),left:d.P.convert(m.left||[0,0]),right:d.P.convert(m.right||[0,0])}}return Oa(new d.P(0,0))}const lc=G;M.AJAXError=d.bh,M.Evented=d.E,M.LngLat=d.N,M.MercatorCoordinate=d.Z,M.Point=d.P,M.addProtocol=d.bi,M.config=d.a,M.removeProtocol=d.bj,M.AttributionControl=Pa,M.BoxZoomHandler=mr,M.CanvasSource=Yr,M.CooperativeGesturesHandler=ks,M.DoubleClickZoomHandler=as,M.DragPanHandler=Ei,M.DragRotateHandler=Is,M.EdgeInsets=io,M.FullscreenControl=class extends d.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var e;let s=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=s?.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)s=s.shadowRoot.fullscreenElement;s===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:d.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){$.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const m=this._fullscreenButton=$.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);$.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new d.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new d.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},M.GeoJSONSource=ys,M.GeolocateControl=class extends d.E{constructor(m){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new d.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new d.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const s=new d.N(e.coords.longitude,e.coords.latitude),c=e.coords.accuracy,u=this._map.getBearing(),p=d.e({bearing:u},this.options.fitBoundsOptions),b=Ne.fromLngLat(s,c);this._map.fitBounds(b,p,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const s=new d.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&La)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new d.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=$.create("button","maplibregl-ctrl-geolocate",this._container),$.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){d.w("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Bs({element:this._dotElement}),this._circleElement=$.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new d.k("trackuserlocationend")),this.fire(new d.k("userlocationlostfocus")))}))}},this.options=d.e({},sl,m)}onAdd(m){return this._map=m,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return d._(this,arguments,void 0,(function*(e=!1){if(Gr!==void 0&&!e)return Gr;if(window.navigator.permissions===void 0)return Gr=!!window.navigator.geolocation,Gr;try{Gr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Gr=!!window.navigator.geolocation}return Gr}))})().then((e=>this._finishSetupUI(e))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),$.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lo=0,La=!1}_isOutOfMapMaxBounds(m){const e=this._map.getMaxBounds(),s=m.coords;return e&&(s.longitude<e.getWest()||s.longitude>e.getEast()||s.latitude<e.getSouth()||s.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const m=this._map.getBounds(),e=m.getSouthEast(),s=m.getNorthEast(),c=e.distanceTo(s),u=Math.ceil(this._accuracy/(c/this._map._container.clientHeight)*2);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}trigger(){if(!this._setup)return d.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new d.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lo--,La=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new d.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new d.k("trackuserlocationstart")),this.fire(new d.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),lo++,lo>1?(m={maximumAge:6e5,timeout:0},La=!0):(m=this.options.positionOptions,La=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},M.Hash=ec,M.ImageSource=Sa,M.KeyboardHandler=Mn,M.LngLatBounds=Ne,M.LogoControl=ac,M.Map=class extends tl{constructor(m){d.bf.mark(d.bg.create);const e=Object.assign(Object.assign({},er),m);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new no(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ri,this._controls=[],this._mapId=d.a4(),this._contextLost=s=>{s.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new d.k("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new d.k("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},nl),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Pe.addThrottleControl((()=>this.isMoving())),this._requestManager=new qe(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const c=Xo((u=>{this._trackResize&&!this._removed&&(this.resize(u),this.redraw())}),50);this._resizeObserver=new ResizeObserver((u=>{s?c(u):s=!0})),this._resizeObserver.observe(this._container)}this.handlers=new so(this,e),this._hash=e.hash&&new ec(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,d.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Pa(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new ac,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(s=>{this._update(s.dataType==="style"),this.fire(new d.k(`${s.dataType}data`,s))})),this.on("dataloading",(s=>{this.fire(new d.k(`${s.dataType}dataloading`,s))})),this.on("dataabort",(s=>{this.fire(new d.k("sourcedataabort",s))}))}_getMapId(){return this._mapId}addControl(m,e){if(e===void 0&&(e=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new d.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=m.onAdd(this);this._controls.push(m);const c=this._controlPositions[e];return e.indexOf("bottom")!==-1?c.insertBefore(s,c.firstChild):c.appendChild(s),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new d.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(m);return e>-1&&this._controls.splice(e,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,e,s,c){return c==null&&this.terrain&&(c=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,e,s,c)}resize(m){var e;const s=this._containerDimensions(),c=s[0],u=s[1],p=this._getClampedPixelRatio(c,u);if(this._resizeCanvas(c,u,p),this.painter.resize(c,u,p),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const z=this._getClampedPixelRatio(c,u);this._resizeCanvas(c,u,z),this.painter.resize(c,u,z)}this.transform.resize(c,u),(e=this._requestedCameraState)===null||e===void 0||e.resize(c,u);const b=!this._moving;return b&&(this.stop(),this.fire(new d.k("movestart",m)).fire(new d.k("move",m))),this.fire(new d.k("resize",m)),b&&this.fire(new d.k("moveend",m)),this}_getClampedPixelRatio(m,e){const{0:s,1:c}=this._maxCanvasSize,u=this.getPixelRatio(),p=m*u,b=e*u;return Math.min(p>s?s/p:1,b>c?c/b:1)*u}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(Ne.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(d.N.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.pointLocation(d.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,e,s){if(m==="mouseenter"||m==="mouseover"){let c=!1;return{layers:e,listener:s,delegates:{mousemove:p=>{const b=e.filter((z=>this.getLayer(z))),T=b.length!==0?this.queryRenderedFeatures(p.point,{layers:b}):[];T.length?c||(c=!0,s.call(this,new Ui(m,this,p.originalEvent,{features:T}))):c=!1},mouseout:()=>{c=!1}}}}if(m==="mouseleave"||m==="mouseout"){let c=!1;return{layers:e,listener:s,delegates:{mousemove:b=>{const T=e.filter((z=>this.getLayer(z)));(T.length!==0?this.queryRenderedFeatures(b.point,{layers:T}):[]).length?c=!0:c&&(c=!1,s.call(this,new Ui(m,this,b.originalEvent)))},mouseout:b=>{c&&(c=!1,s.call(this,new Ui(m,this,b.originalEvent)))}}}}{const c=u=>{const p=e.filter((T=>this.getLayer(T))),b=p.length!==0?this.queryRenderedFeatures(u.point,{layers:p}):[];b.length&&(u.features=b,s.call(this,u),delete u.features)};return{layers:e,listener:s,delegates:{[m]:c}}}}_saveDelegatedListener(m,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(e)}_removeDelegatedListener(m,e,s){if(!this._delegatedListeners||!this._delegatedListeners[m])return;const c=this._delegatedListeners[m];for(let u=0;u<c.length;u++){const p=c[u];if(p.listener===s&&p.layers.length===e.length&&p.layers.every((b=>e.includes(b)))){for(const b in p.delegates)this.off(b,p.delegates[b]);return void c.splice(u,1)}}}on(m,e,s){if(s===void 0)return super.on(m,e);const c=this._createDelegatedListener(m,typeof e=="string"?[e]:e,s);this._saveDelegatedListener(m,c);for(const u in c.delegates)this.on(u,c.delegates[u]);return this}once(m,e,s){if(s===void 0)return super.once(m,e);const c=typeof e=="string"?[e]:e,u=this._createDelegatedListener(m,c,s);for(const p in u.delegates){const b=u.delegates[p];u.delegates[p]=(...T)=>{this._removeDelegatedListener(m,c,s),b(...T)}}this._saveDelegatedListener(m,u);for(const p in u.delegates)this.once(p,u.delegates[p]);return this}off(m,e,s){return s===void 0?super.off(m,e):(this._removeDelegatedListener(m,typeof e=="string"?[e]:e,s),this)}queryRenderedFeatures(m,e){if(!this.style)return[];let s;const c=m instanceof d.P||Array.isArray(m),u=c?m:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(c?{}:m)||{},u instanceof d.P||typeof u[0]=="number")s=[d.P.convert(u)];else{const p=d.P.convert(u[0]),b=d.P.convert(u[1]);s=[p,new d.P(b.x,p.y),b,new d.P(p.x,b.y),p]}return this.style.queryRenderedFeatures(s,e,this.transform)}querySourceFeatures(m,e){return this.style.querySourceFeatures(m,e)}setStyle(m,e){return(e=d.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(m,e))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const e=this._locale[m];if(e==null)throw new Error(`Missing UI string '${m}'`);return e}_updateStyle(m,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(m,e)));const s=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new dr(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,e,s):this.style.loadJSON(m,e,s),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,e){if(typeof m=="string"){const s=this._requestManager.transformRequest(m,"Style");d.h(s,new AbortController).then((c=>{this._updateDiff(c.data,e)})).catch((c=>{c&&this.fire(new d.j(c))}))}else typeof m=="object"&&this._updateDiff(m,e)}_updateDiff(m,e){try{this.style.setState(m,e)&&this._update(!0)}catch(s){d.w(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(m,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():d.w("There is no style added to the map.")}addSource(m,e){return this._lazyInitEmptyStyle(),this.style.addSource(m,e),this._update(!0)}isSourceLoaded(m){const e=this.style&&this.style.sourceCaches[m];if(e!==void 0)return e.loaded();this.fire(new d.j(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){const e=this.style.sourceCaches[m.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&e.reload();for(const s in this.style._layers){const c=this.style._layers[s];c.type==="hillshade"&&c.source===m.source&&d.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new pa(this.painter,e,m),this.painter.renderToTexture=new il(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=s=>{s.dataType==="style"?this.terrain.sourceCache.freeRtt():s.dataType==="source"&&s.tile&&(s.sourceId!==m.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(s.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new d.k("terrain",{terrain:m})),this}getTerrain(){var m,e;return(e=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const e in m){const s=m[e]._tiles;for(const c in s){const u=s[c];if(u.state!=="loaded"&&u.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,e,s={}){const{pixelRatio:c=1,sdf:u=!1,stretchX:p,stretchY:b,content:T,textFitWidth:z,textFitHeight:I}=s;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||d.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:L,height:O,data:q}=e,Q=e;return this.style.addImage(m,{data:new d.R({width:L,height:O},new Uint8Array(q)),pixelRatio:c,stretchX:p,stretchY:b,content:T,textFitWidth:z,textFitHeight:I,sdf:u,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,m),this}}{const{width:L,height:O,data:q}=X.getImageData(e);this.style.addImage(m,{data:new d.R({width:L,height:O},q),pixelRatio:c,stretchX:p,stretchY:b,content:T,textFitWidth:z,textFitHeight:I,sdf:u,version:0})}}updateImage(m,e){const s=this.style.getImage(m);if(!s)return this.fire(new d.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const c=e instanceof HTMLImageElement||d.b(e)?X.getImageData(e):e,{width:u,height:p,data:b}=c;if(u===void 0||p===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(u!==s.data.width||p!==s.data.height)return this.fire(new d.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(e instanceof HTMLImageElement||d.b(e));return s.data.replace(b,T),this.style.updateImage(m,s),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new d.j(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return Pe.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,e){return this._lazyInitEmptyStyle(),this.style.addLayer(m,e),this._update(!0)}moveLayer(m,e){return this.style.moveLayer(m,e),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,e,s){return this.style.setLayerZoomRange(m,e,s),this._update(!0)}setFilter(m,e,s={}){return this.style.setFilter(m,e,s),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,e,s,c={}){return this.style.setPaintProperty(m,e,s,c),this._update(!0)}getPaintProperty(m,e){return this.style.getPaintProperty(m,e)}setLayoutProperty(m,e,s,c={}){return this.style.setLayoutProperty(m,e,s,c),this._update(!0)}getLayoutProperty(m,e){return this.style.getLayoutProperty(m,e)}setGlyphs(m,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,e,s={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,e,s,(c=>{c||this._update(!0)})),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,e,(s=>{s||this._update(!0)})),this}setLight(m,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(m){return this._lazyInitEmptyStyle(),this.style.setSky(m),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,e){return this.style.setFeatureState(m,e),this._update()}removeFeatureState(m,e){return this.style.removeFeatureState(m,e),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,e=0;return this._container&&(m=this._container.clientWidth||400,e=this._container.clientHeight||300),[m,e]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map");const e=this._canvasContainer=$.create("div","maplibregl-canvas-container",m);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=$.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const s=this._containerDimensions(),c=this._getClampedPixelRatio(s[0],s[1]);this._resizeCanvas(s[0],s[1],c);const u=this._controlContainer=$.create("div","maplibregl-control-container",m),p=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((b=>{p[b]=$.create("div",`maplibregl-ctrl-${b} `,u)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,e,s){this._canvas.width=Math.floor(s*m),this._canvas.height=Math.floor(s*e),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const m={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",(c=>{e={requestedAttributes:m},c&&(e.statusMessage=c.statusMessage,e.type=c.type)}),{once:!0});const s=this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m);if(!s){const c="Failed to initialize WebGL";throw e?(e.message=c,new Error(JSON.stringify(e))):new Error(c)}this.painter=new Da(s,this.transform),ge.testSupport(s)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let s=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const u=this.transform.zoom,p=X.now();this.style.zoomHistory.update(u,p);const b=new d.z(u,{now:p,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=b.crossFadingFactor();T===1&&T===this._crossFadingFactor||(s=!0,this._crossFadingFactor=T),this.style.update(b)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new d.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,d.bf.mark(d.bg.load),this.fire(new d.k("load"))),this.style&&(this.style.hasTransitions()||s)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const c=this._sourcesDirty||this._styleDirty||this._placementDirty;return c||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new d.k("idle")),!this._loaded||this._fullyLoaded||c||(this._fullyLoaded=!0,d.bf.mark(d.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Pe.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e?.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),$.remove(this._canvasContainer),$.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),d.bf.clearMetrics(),this._removed=!0,this.fire(new d.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,X.frameAsync(this._frameRequest).then((m=>{d.bf.frame(m),this._frameRequest=null,this._render(m)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return Os}getCameraTargetElevation(){return this.transform.elevation}},M.MapMouseEvent=Ui,M.MapTouchEvent=jn,M.MapWheelEvent=ro,M.Marker=Bs,M.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{const e=this._map.getZoom(),s=e===this._map.getMaxZoom(),c=e===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,s)=>{const c=this._map._getUIString(`NavigationControl.${s}`);e.title=c,e.setAttribute("aria-label",c)},this.options=d.e({},Bh,m),this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),$.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),$.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=$.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){$.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,e){const s=$.create("button",m,this._container);return s.type="button",s.addEventListener("click",e),s}},M.Popup=class extends d.E{constructor(m){super(),this.remove=()=>(this._content&&$.remove(this._content),this._container&&($.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new d.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var s;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=$.create("div","maplibregl-popup",this._map.getContainer()),this._tip=$.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Zi(this._lngLat,this._flatPos,this._map.transform):(s=this._lngLat)===null||s===void 0?void 0:s.wrap(),this._trackPointer&&!e)return;const c=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let u=this.options.anchor;const p=Oa(this.options.offset);if(!u){const T=this._container.offsetWidth,z=this._container.offsetHeight;let I;I=c.y+p.bottom.y<z?["top"]:c.y>this._map.transform.height-z?["bottom"]:[],c.x<T/2?I.push("left"):c.x>this._map.transform.width-T/2&&I.push("right"),u=I.length===0?"bottom":I.join("-")}let b=c.add(p[u]);this.options.subpixelPositioning||(b=b.round()),$.setTransform(this._container,`${en[u]} translate(${b.x}px,${b.y}px)`),al(this._container,u,"popup")},this._onClose=()=>{this.remove()},this.options=d.e(Object.create(Ht),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new d.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=d.N.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const e=document.createDocumentFragment(),s=document.createElement("body");let c;for(s.innerHTML=m;c=s.firstChild,c;)e.appendChild(c);return this.setDOMContent(e)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=$.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=$.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(oc);m&&m.focus()}},M.RasterDEMTileSource=Wi,M.RasterTileSource=xi,M.ScaleControl=class{constructor(m){this._onMove=()=>{sc(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,sc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},vr),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){$.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},M.ScrollZoomHandler=Zr,M.Style=dr,M.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=$.create("button","maplibregl-ctrl-terrain",this._container),$.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){$.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},M.TwoFingersTouchPitchHandler=da,M.TwoFingersTouchRotateHandler=Or,M.TwoFingersTouchZoomHandler=Jo,M.TwoFingersTouchZoomRotateHandler=Wr,M.VectorTileSource=Nl,M.VideoSource=ko,M.addSourceType=(m,e)=>d._(void 0,void 0,void 0,(function*(){if(Gn(m))throw new Error(`A source type called "${m}" already exists.`);((s,c)=>{Ha[s]=c})(m,e)})),M.clearPrewarmedResources=function(){const m=Tt;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(bt),Tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},M.getMaxParallelImageRequests=function(){return d.a.MAX_PARALLEL_IMAGE_REQUESTS},M.getRTLTextPluginStatus=function(){return Ta().getRTLTextPluginStatus()},M.getVersion=function(){return lc},M.getWorkerCount=function(){return $t.workerCount},M.getWorkerUrl=function(){return d.a.WORKER_URL},M.importScriptInWorkers=function(m){return Si().broadcast("IS",m)},M.prewarm=function(){Ii().acquire(bt)},M.setMaxParallelImageRequests=function(m){d.a.MAX_PARALLEL_IMAGE_REQUESTS=m},M.setRTLTextPlugin=function(m,e){return Ta().setRTLTextPlugin(m,e)},M.setWorkerCount=function(m){$t.workerCount=m},M.setWorkerUrl=function(m){d.a.WORKER_URL=m}}));var N=C;return N}))})(um)),um.exports}var U1=j1();const wy=xm(U1),Q_=window.location.hostname==="127.0.0.1"||window.location.hostname==="localhost",J_=window.location.port==="5173"||window.location.port==="4173"||window.location.port==="8080",op=Q_&&J_?"http://127.0.0.1:8099/api/v2":"https://api.sodakweather.com/api/v2",V1=Q_&&J_?"http://127.0.0.1:8101":"https://api.sodakweather.com",Do={model:"hrrr",region:"pnw",run:"latest",variable:"tmp2m",center:[47.6,-122.3],zoom:6,overlayOpacity:.85},q1=new Set(["tmp2m","wspd10m","radar_ptype"]),H1={tmp2m:"Surface Temperature",wspd10m:"Wind Speed",radar_ptype:"Composite Reflectivity + P-Type"},Z1='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',G1=["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],$1=["https://a.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png"],X1={pnw:{center:[-120.8,45.6],zoom:6}};function Y1(_,w){return{version:8,sources:{"twf-basemap":{type:"raster",tiles:G1,tileSize:256,attribution:Z1},"twf-overlay":{type:"raster",tiles:[_],tileSize:256},"twf-labels":{type:"raster",tiles:$1,tileSize:256}},layers:[{id:"twf-basemap",type:"raster",source:"twf-basemap"},{id:"twf-overlay",type:"raster",source:"twf-overlay",paint:{"raster-opacity":w,"raster-resampling":"nearest"}},{id:"twf-labels",type:"raster",source:"twf-labels"}]}}function K1({tileUrl:_,region:w,opacity:C}){const A=ee.useRef(null),k=ee.useRef(null),[N,M]=ee.useState(!1),d=ee.useMemo(()=>X1[w]??{center:[Do.center[1],Do.center[0]],zoom:Do.zoom},[w]);return ee.useEffect(()=>{if(!A.current||k.current)return;const G=new wy.Map({container:A.current,style:Y1(_,C),center:d.center,zoom:d.zoom,minZoom:3,maxZoom:11});return G.addControl(new wy.NavigationControl({showCompass:!1}),"top-left"),G.on("load",()=>{M(!0)}),k.current=G,()=>{G.remove(),k.current=null,M(!1)}},[]),ee.useEffect(()=>{const G=k.current;if(!G||!N)return;const H=G.getSource("twf-overlay");H&&typeof H.setTiles=="function"&&H.setTiles([_])},[_,N]),ee.useEffect(()=>{const G=k.current;!G||!N||!G.getLayer("twf-overlay")||G.setPaintProperty("twf-overlay","raster-opacity",C)},[C,N]),ee.useEffect(()=>{const G=k.current;!G||!N||G.easeTo({center:d.center,zoom:d.zoom,duration:600})},[d,N]),be.jsx("div",{ref:A,className:"absolute inset-0","aria-label":"Weather map"})}function W1(_){return Number.isInteger(_)?_.toString():Math.abs(_)<.1?_.toFixed(2):Math.abs(_)<1?_.toFixed(1):_.toFixed(0)}function Q1(){return be.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-border/40 bg-[hsl(var(--toolbar))]/95 px-3 py-2.5 shadow-xl backdrop-blur-md",children:[be.jsx(zg,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground/70"}),be.jsx("span",{className:"text-xs font-medium text-muted-foreground/80",children:"Legend unavailable"})]})}function J1({legend:_,onOpacityChange:w}){const[C,A]=ee.useState(!1),[k,N]=ee.useState(!1),[M,d]=ee.useState(0),G=ee.useRef(_?.title);if(ee.useEffect(()=>{const J=window.matchMedia("(max-width: 640px)"),X=$=>{N($.matches),$.matches&&A(!0)};return X(J),J.addEventListener("change",X),()=>J.removeEventListener("change",X)},[]),ee.useEffect(()=>{_?.title!==G.current&&(d(J=>J+1),G.current=_?.title)},[_?.title]),!_)return be.jsx("div",{className:xa("pointer-events-none fixed z-40",k?"bottom-24 right-4":"right-4 top-20"),children:be.jsx(Q1,{})});const H=Math.round(_.opacity*100);return be.jsxs("div",{className:xa("fixed z-40 flex w-[280px] flex-col overflow-hidden rounded-md border border-border/50 bg-[hsl(var(--toolbar))]/95 shadow-xl backdrop-blur-md transition-all duration-200",k?"bottom-24 right-4":"right-4 top-20"),role:"complementary","aria-label":"Map legend",children:[be.jsxs("button",{type:"button",onClick:()=>A(J=>!J),className:"flex w-full items-center justify-between gap-2 border-b border-border/30 px-3 py-2 text-left transition-all duration-150 hover:bg-secondary/30 active:bg-secondary/50","aria-expanded":!C,"aria-controls":"legend-body",children:[be.jsxs("div",{className:"flex flex-col gap-0.5 overflow-hidden",children:[be.jsx("span",{className:"truncate text-xs font-semibold tracking-tight text-foreground",children:_.title}),_.units&&be.jsx("span",{className:"text-[10px] font-medium text-muted-foreground/80",children:_.units})]}),C?be.jsx(Mg,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground transition-transform duration-150"}):be.jsx(By,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground transition-transform duration-150"})]}),be.jsx("div",{id:"legend-body",className:xa("grid transition-[grid-template-rows] duration-200 ease-out",C?"grid-rows-[0fr]":"grid-rows-[1fr]"),children:be.jsx("div",{className:"overflow-hidden",children:be.jsxs("div",{className:"flex flex-col gap-2.5 px-3 py-2.5 animate-in fade-in duration-200",children:[be.jsx("div",{className:"max-h-[320px] space-y-px overflow-y-auto scroll-smooth",children:_.entries.slice().reverse().map((J,X)=>be.jsxs("div",{className:xa("flex items-center gap-2.5 rounded-[2px] px-1.5 py-1 transition-colors duration-150",X%2===0?"bg-secondary/20":"bg-transparent"),children:[be.jsx("span",{className:"h-3 w-5 shrink-0 rounded-[2px] border border-border/30 shadow-sm",style:{backgroundColor:J.color}}),be.jsx("span",{className:"font-mono text-[11px] font-medium leading-none tabular-nums tracking-tight text-foreground/95",children:W1(J.value)})]},`${J.value}-${J.color}-${X}`))}),be.jsxs("div",{className:"border-t border-border/30 pt-2",children:[be.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[be.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-muted-foreground",children:"Opacity"}),be.jsxs("span",{className:"font-mono text-[10px] font-medium tabular-nums tracking-tight text-foreground/90",children:[H,"%"]})]}),be.jsx(Ig,{value:[H],onValueChange:([J])=>w((J??100)/100),min:0,max:100,step:1,className:"w-full transition-opacity duration-150"})]})]},M)})})]})}var ig=0;function ew(){ee.useEffect(()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??Sy()),document.body.insertAdjacentElement("beforeend",_[1]??Sy()),ig++,()=>{ig===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(w=>w.remove()),ig--}},[])}function Sy(){const _=document.createElement("span");return _.setAttribute("data-radix-focus-guard",""),_.tabIndex=0,_.style.outline="none",_.style.opacity="0",_.style.position="fixed",_.style.pointerEvents="none",_}var ng="focusScope.autoFocusOnMount",rg="focusScope.autoFocusOnUnmount",Ty={bubbles:!1,cancelable:!0},tw="FocusScope",ev=ee.forwardRef((_,w)=>{const{loop:C=!1,trapped:A=!1,onMountAutoFocus:k,onUnmountAutoFocus:N,...M}=_,[d,G]=ee.useState(null),H=Lc(k),J=Lc(N),X=ee.useRef(null),$=Tn(w,ce=>G(ce)),ge=ee.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ee.useEffect(()=>{if(A){let ce=function(Pe){if(ge.paused||!d)return;const qe=Pe.target;d.contains(qe)?X.current=qe:Iu(X.current,{select:!0})},_e=function(Pe){if(ge.paused||!d)return;const qe=Pe.relatedTarget;qe!==null&&(d.contains(qe)||Iu(X.current,{select:!0}))},Me=function(Pe){if(document.activeElement===document.body)for(const Ze of Pe)Ze.removedNodes.length>0&&Iu(d)};document.addEventListener("focusin",ce),document.addEventListener("focusout",_e);const Ie=new MutationObserver(Me);return d&&Ie.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ce),document.removeEventListener("focusout",_e),Ie.disconnect()}}},[A,d,ge.paused]),ee.useEffect(()=>{if(d){Ay.add(ge);const ce=document.activeElement;if(!d.contains(ce)){const Me=new CustomEvent(ng,Ty);d.addEventListener(ng,H),d.dispatchEvent(Me),Me.defaultPrevented||(iw(ow(tv(d)),{select:!0}),document.activeElement===ce&&Iu(d))}return()=>{d.removeEventListener(ng,H),setTimeout(()=>{const Me=new CustomEvent(rg,Ty);d.addEventListener(rg,J),d.dispatchEvent(Me),Me.defaultPrevented||Iu(ce??document.body,{select:!0}),d.removeEventListener(rg,J),Ay.remove(ge)},0)}}},[d,H,J,ge]);const Se=ee.useCallback(ce=>{if(!C&&!A||ge.paused)return;const _e=ce.key==="Tab"&&!ce.altKey&&!ce.ctrlKey&&!ce.metaKey,Me=document.activeElement;if(_e&&Me){const Ie=ce.currentTarget,[Pe,qe]=nw(Ie);Pe&&qe?!ce.shiftKey&&Me===qe?(ce.preventDefault(),C&&Iu(Pe,{select:!0})):ce.shiftKey&&Me===Pe&&(ce.preventDefault(),C&&Iu(qe,{select:!0})):Me===Ie&&ce.preventDefault()}},[C,A,ge.paused]);return be.jsx(En.div,{tabIndex:-1,...M,ref:$,onKeyDown:Se})});ev.displayName=tw;function iw(_,{select:w=!1}={}){const C=document.activeElement;for(const A of _)if(Iu(A,{select:w}),document.activeElement!==C)return}function nw(_){const w=tv(_),C=Ey(w,_),A=Ey(w.reverse(),_);return[C,A]}function tv(_){const w=[],C=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,{acceptNode:A=>{const k=A.tagName==="INPUT"&&A.type==="hidden";return A.disabled||A.hidden||k?NodeFilter.FILTER_SKIP:A.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;C.nextNode();)w.push(C.currentNode);return w}function Ey(_,w){for(const C of _)if(!rw(C,{upTo:w}))return C}function rw(_,{upTo:w}){if(getComputedStyle(_).visibility==="hidden")return!0;for(;_;){if(w!==void 0&&_===w)return!1;if(getComputedStyle(_).display==="none")return!0;_=_.parentElement}return!1}function aw(_){return _ instanceof HTMLInputElement&&"select"in _}function Iu(_,{select:w=!1}={}){if(_&&_.focus){const C=document.activeElement;_.focus({preventScroll:!0}),_!==C&&aw(_)&&w&&_.select()}}var Ay=sw();function sw(){let _=[];return{add(w){const C=_[0];w!==C&&C?.pause(),_=Cy(_,w),_.unshift(w)},remove(w){_=Cy(_,w),_[0]?.resume()}}}function Cy(_,w){const C=[..._],A=C.indexOf(w);return A!==-1&&C.splice(A,1),C}function ow(_){return _.filter(w=>w.tagName!=="A")}var lw=function(_){if(typeof document>"u")return null;var w=Array.isArray(_)?_[0]:_;return w.ownerDocument.body},zd=new WeakMap,rm=new WeakMap,am={},ag=0,iv=function(_){return _&&(_.host||iv(_.parentNode))},cw=function(_,w){return w.map(function(C){if(_.contains(C))return C;var A=iv(C);return A&&_.contains(A)?A:(console.error("aria-hidden",C,"in not contained inside",_,". Doing nothing"),null)}).filter(function(C){return!!C})},uw=function(_,w,C,A){var k=cw(w,Array.isArray(_)?_:[_]);am[C]||(am[C]=new WeakMap);var N=am[C],M=[],d=new Set,G=new Set(k),H=function(X){!X||d.has(X)||(d.add(X),H(X.parentNode))};k.forEach(H);var J=function(X){!X||G.has(X)||Array.prototype.forEach.call(X.children,function($){if(d.has($))J($);else try{var ge=$.getAttribute(A),Se=ge!==null&&ge!=="false",ce=(zd.get($)||0)+1,_e=(N.get($)||0)+1;zd.set($,ce),N.set($,_e),M.push($),ce===1&&Se&&rm.set($,!0),_e===1&&$.setAttribute(C,"true"),Se||$.setAttribute(A,"true")}catch(Me){console.error("aria-hidden: cannot operate on ",$,Me)}})};return J(w),d.clear(),ag++,function(){M.forEach(function(X){var $=zd.get(X)-1,ge=N.get(X)-1;zd.set(X,$),N.set(X,ge),$||(rm.has(X)||X.removeAttribute(A),rm.delete(X)),ge||X.removeAttribute(C)}),ag--,ag||(zd=new WeakMap,zd=new WeakMap,rm=new WeakMap,am={})}},hw=function(_,w,C){C===void 0&&(C="data-aria-hidden");var A=Array.from(Array.isArray(_)?_:[_]),k=lw(_);return k?(A.push.apply(A,Array.from(k.querySelectorAll("[aria-live], script"))),uw(A,k,C,"aria-hidden")):function(){return null}},kl=function(){return kl=Object.assign||function(w){for(var C,A=1,k=arguments.length;A<k;A++){C=arguments[A];for(var N in C)Object.prototype.hasOwnProperty.call(C,N)&&(w[N]=C[N])}return w},kl.apply(this,arguments)};function nv(_,w){var C={};for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&w.indexOf(A)<0&&(C[A]=_[A]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,A=Object.getOwnPropertySymbols(_);k<A.length;k++)w.indexOf(A[k])<0&&Object.prototype.propertyIsEnumerable.call(_,A[k])&&(C[A[k]]=_[A[k]]);return C}function dw(_,w,C){if(C||arguments.length===2)for(var A=0,k=w.length,N;A<k;A++)(N||!(A in w))&&(N||(N=Array.prototype.slice.call(w,0,A)),N[A]=w[A]);return _.concat(N||Array.prototype.slice.call(w))}var hm="right-scroll-bar-position",dm="width-before-scroll-bar",fw="with-scroll-bars-hidden",pw="--removed-body-scroll-bar-size";function sg(_,w){return typeof _=="function"?_(w):_&&(_.current=w),_}function mw(_,w){var C=ee.useState(function(){return{value:_,callback:w,facade:{get current(){return C.value},set current(A){var k=C.value;k!==A&&(C.value=A,C.callback(A,k))}}}})[0];return C.callback=w,C.facade}var gw=typeof window<"u"?ee.useLayoutEffect:ee.useEffect,My=new WeakMap;function yw(_,w){var C=mw(null,function(A){return _.forEach(function(k){return sg(k,A)})});return gw(function(){var A=My.get(C);if(A){var k=new Set(A),N=new Set(_),M=C.current;k.forEach(function(d){N.has(d)||sg(d,null)}),N.forEach(function(d){k.has(d)||sg(d,M)})}My.set(C,_)},[_]),C}function _w(_){return _}function vw(_,w){w===void 0&&(w=_w);var C=[],A=!1,k={read:function(){if(A)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return C.length?C[C.length-1]:_},useMedium:function(N){var M=w(N,A);return C.push(M),function(){C=C.filter(function(d){return d!==M})}},assignSyncMedium:function(N){for(A=!0;C.length;){var M=C;C=[],M.forEach(N)}C={push:function(d){return N(d)},filter:function(){return C}}},assignMedium:function(N){A=!0;var M=[];if(C.length){var d=C;C=[],d.forEach(N),M=C}var G=function(){var J=M;M=[],J.forEach(N)},H=function(){return Promise.resolve().then(G)};H(),C={push:function(J){M.push(J),H()},filter:function(J){return M=M.filter(J),C}}}};return k}function xw(_){_===void 0&&(_={});var w=vw(null);return w.options=kl({async:!0,ssr:!1},_),w}var rv=function(_){var w=_.sideCar,C=nv(_,["sideCar"]);if(!w)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var A=w.read();if(!A)throw new Error("Sidecar medium not found");return ee.createElement(A,kl({},C))};rv.isSideCarExport=!0;function bw(_,w){return _.useMedium(w),rv}var av=xw(),og=function(){},Im=ee.forwardRef(function(_,w){var C=ee.useRef(null),A=ee.useState({onScrollCapture:og,onWheelCapture:og,onTouchMoveCapture:og}),k=A[0],N=A[1],M=_.forwardProps,d=_.children,G=_.className,H=_.removeScrollBar,J=_.enabled,X=_.shards,$=_.sideCar,ge=_.noRelative,Se=_.noIsolation,ce=_.inert,_e=_.allowPinchZoom,Me=_.as,Ie=Me===void 0?"div":Me,Pe=_.gapMode,qe=nv(_,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Ze=$,mt=yw([C,w]),it=kl(kl({},qe),k);return ee.createElement(ee.Fragment,null,J&&ee.createElement(Ze,{sideCar:av,removeScrollBar:H,shards:X,noRelative:ge,noIsolation:Se,inert:ce,setCallbacks:N,allowPinchZoom:!!_e,lockRef:C,gapMode:Pe}),M?ee.cloneElement(ee.Children.only(d),kl(kl({},it),{ref:mt})):ee.createElement(Ie,kl({},it,{className:G,ref:mt}),d))});Im.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Im.classNames={fullWidth:dm,zeroRight:hm};var ww=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Sw(){if(!document)return null;var _=document.createElement("style");_.type="text/css";var w=ww();return w&&_.setAttribute("nonce",w),_}function Tw(_,w){_.styleSheet?_.styleSheet.cssText=w:_.appendChild(document.createTextNode(w))}function Ew(_){var w=document.head||document.getElementsByTagName("head")[0];w.appendChild(_)}var Aw=function(){var _=0,w=null;return{add:function(C){_==0&&(w=Sw())&&(Tw(w,C),Ew(w)),_++},remove:function(){_--,!_&&w&&(w.parentNode&&w.parentNode.removeChild(w),w=null)}}},Cw=function(){var _=Aw();return function(w,C){ee.useEffect(function(){return _.add(w),function(){_.remove()}},[w&&C])}},sv=function(){var _=Cw(),w=function(C){var A=C.styles,k=C.dynamic;return _(A,k),null};return w},Mw={left:0,top:0,right:0,gap:0},lg=function(_){return parseInt(_||"",10)||0},zw=function(_){var w=window.getComputedStyle(document.body),C=w[_==="padding"?"paddingLeft":"marginLeft"],A=w[_==="padding"?"paddingTop":"marginTop"],k=w[_==="padding"?"paddingRight":"marginRight"];return[lg(C),lg(A),lg(k)]},Dw=function(_){if(_===void 0&&(_="margin"),typeof window>"u")return Mw;var w=zw(_),C=document.documentElement.clientWidth,A=window.innerWidth;return{left:w[0],top:w[1],right:w[2],gap:Math.max(0,A-C+w[2]-w[0])}},Rw=sv(),Pd="data-scroll-locked",Iw=function(_,w,C,A){var k=_.left,N=_.top,M=_.right,d=_.gap;return C===void 0&&(C="margin"),`
  .`.concat(fw,` {
   overflow: hidden `).concat(A,`;
   padding-right: `).concat(d,"px ").concat(A,`;
  }
  body[`).concat(Pd,`] {
    overflow: hidden `).concat(A,`;
    overscroll-behavior: contain;
    `).concat([w&&"position: relative ".concat(A,";"),C==="margin"&&`
    padding-left: `.concat(k,`px;
    padding-top: `).concat(N,`px;
    padding-right: `).concat(M,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(A,`;
    `),C==="padding"&&"padding-right: ".concat(d,"px ").concat(A,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hm,` {
    right: `).concat(d,"px ").concat(A,`;
  }
  
  .`).concat(dm,` {
    margin-right: `).concat(d,"px ").concat(A,`;
  }
  
  .`).concat(hm," .").concat(hm,` {
    right: 0 `).concat(A,`;
  }
  
  .`).concat(dm," .").concat(dm,` {
    margin-right: 0 `).concat(A,`;
  }
  
  body[`).concat(Pd,`] {
    `).concat(pw,": ").concat(d,`px;
  }
`)},zy=function(){var _=parseInt(document.body.getAttribute(Pd)||"0",10);return isFinite(_)?_:0},kw=function(){ee.useEffect(function(){return document.body.setAttribute(Pd,(zy()+1).toString()),function(){var _=zy()-1;_<=0?document.body.removeAttribute(Pd):document.body.setAttribute(Pd,_.toString())}},[])},Pw=function(_){var w=_.noRelative,C=_.noImportant,A=_.gapMode,k=A===void 0?"margin":A;kw();var N=ee.useMemo(function(){return Dw(k)},[k]);return ee.createElement(Rw,{styles:Iw(N,!w,k,C?"":"!important")})},bg=!1;if(typeof window<"u")try{var sm=Object.defineProperty({},"passive",{get:function(){return bg=!0,!0}});window.addEventListener("test",sm,sm),window.removeEventListener("test",sm,sm)}catch{bg=!1}var Dd=bg?{passive:!1}:!1,Lw=function(_){return _.tagName==="TEXTAREA"},ov=function(_,w){if(!(_ instanceof Element))return!1;var C=window.getComputedStyle(_);return C[w]!=="hidden"&&!(C.overflowY===C.overflowX&&!Lw(_)&&C[w]==="visible")},Ow=function(_){return ov(_,"overflowY")},Bw=function(_){return ov(_,"overflowX")},Dy=function(_,w){var C=w.ownerDocument,A=w;do{typeof ShadowRoot<"u"&&A instanceof ShadowRoot&&(A=A.host);var k=lv(_,A);if(k){var N=cv(_,A),M=N[1],d=N[2];if(M>d)return!0}A=A.parentNode}while(A&&A!==C.body);return!1},Nw=function(_){var w=_.scrollTop,C=_.scrollHeight,A=_.clientHeight;return[w,C,A]},Fw=function(_){var w=_.scrollLeft,C=_.scrollWidth,A=_.clientWidth;return[w,C,A]},lv=function(_,w){return _==="v"?Ow(w):Bw(w)},cv=function(_,w){return _==="v"?Nw(w):Fw(w)},jw=function(_,w){return _==="h"&&w==="rtl"?-1:1},Uw=function(_,w,C,A,k){var N=jw(_,window.getComputedStyle(w).direction),M=N*A,d=C.target,G=w.contains(d),H=!1,J=M>0,X=0,$=0;do{if(!d)break;var ge=cv(_,d),Se=ge[0],ce=ge[1],_e=ge[2],Me=ce-_e-N*Se;(Se||Me)&&lv(_,d)&&(X+=Me,$+=Se);var Ie=d.parentNode;d=Ie&&Ie.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Ie.host:Ie}while(!G&&d!==document.body||G&&(w.contains(d)||w===d));return(J&&Math.abs(X)<1||!J&&Math.abs($)<1)&&(H=!0),H},om=function(_){return"changedTouches"in _?[_.changedTouches[0].clientX,_.changedTouches[0].clientY]:[0,0]},Ry=function(_){return[_.deltaX,_.deltaY]},Iy=function(_){return _&&"current"in _?_.current:_},Vw=function(_,w){return _[0]===w[0]&&_[1]===w[1]},qw=function(_){return`
  .block-interactivity-`.concat(_,` {pointer-events: none;}
  .allow-interactivity-`).concat(_,` {pointer-events: all;}
`)},Hw=0,Rd=[];function Zw(_){var w=ee.useRef([]),C=ee.useRef([0,0]),A=ee.useRef(),k=ee.useState(Hw++)[0],N=ee.useState(sv)[0],M=ee.useRef(_);ee.useEffect(function(){M.current=_},[_]),ee.useEffect(function(){if(_.inert){document.body.classList.add("block-interactivity-".concat(k));var ce=dw([_.lockRef.current],(_.shards||[]).map(Iy),!0).filter(Boolean);return ce.forEach(function(_e){return _e.classList.add("allow-interactivity-".concat(k))}),function(){document.body.classList.remove("block-interactivity-".concat(k)),ce.forEach(function(_e){return _e.classList.remove("allow-interactivity-".concat(k))})}}},[_.inert,_.lockRef.current,_.shards]);var d=ee.useCallback(function(ce,_e){if("touches"in ce&&ce.touches.length===2||ce.type==="wheel"&&ce.ctrlKey)return!M.current.allowPinchZoom;var Me=om(ce),Ie=C.current,Pe="deltaX"in ce?ce.deltaX:Ie[0]-Me[0],qe="deltaY"in ce?ce.deltaY:Ie[1]-Me[1],Ze,mt=ce.target,it=Math.abs(Pe)>Math.abs(qe)?"h":"v";if("touches"in ce&&it==="h"&&mt.type==="range")return!1;var Lt=window.getSelection(),Nt=Lt&&Lt.anchorNode,Gt=Nt?Nt===mt||Nt.contains(mt):!1;if(Gt)return!1;var ot=Dy(it,mt);if(!ot)return!0;if(ot?Ze=it:(Ze=it==="v"?"h":"v",ot=Dy(it,mt)),!ot)return!1;if(!A.current&&"changedTouches"in ce&&(Pe||qe)&&(A.current=Ze),!Ze)return!0;var lt=A.current||Ze;return Uw(lt,_e,ce,lt==="h"?Pe:qe)},[]),G=ee.useCallback(function(ce){var _e=ce;if(!(!Rd.length||Rd[Rd.length-1]!==N)){var Me="deltaY"in _e?Ry(_e):om(_e),Ie=w.current.filter(function(Ze){return Ze.name===_e.type&&(Ze.target===_e.target||_e.target===Ze.shadowParent)&&Vw(Ze.delta,Me)})[0];if(Ie&&Ie.should){_e.cancelable&&_e.preventDefault();return}if(!Ie){var Pe=(M.current.shards||[]).map(Iy).filter(Boolean).filter(function(Ze){return Ze.contains(_e.target)}),qe=Pe.length>0?d(_e,Pe[0]):!M.current.noIsolation;qe&&_e.cancelable&&_e.preventDefault()}}},[]),H=ee.useCallback(function(ce,_e,Me,Ie){var Pe={name:ce,delta:_e,target:Me,should:Ie,shadowParent:Gw(Me)};w.current.push(Pe),setTimeout(function(){w.current=w.current.filter(function(qe){return qe!==Pe})},1)},[]),J=ee.useCallback(function(ce){C.current=om(ce),A.current=void 0},[]),X=ee.useCallback(function(ce){H(ce.type,Ry(ce),ce.target,d(ce,_.lockRef.current))},[]),$=ee.useCallback(function(ce){H(ce.type,om(ce),ce.target,d(ce,_.lockRef.current))},[]);ee.useEffect(function(){return Rd.push(N),_.setCallbacks({onScrollCapture:X,onWheelCapture:X,onTouchMoveCapture:$}),document.addEventListener("wheel",G,Dd),document.addEventListener("touchmove",G,Dd),document.addEventListener("touchstart",J,Dd),function(){Rd=Rd.filter(function(ce){return ce!==N}),document.removeEventListener("wheel",G,Dd),document.removeEventListener("touchmove",G,Dd),document.removeEventListener("touchstart",J,Dd)}},[]);var ge=_.removeScrollBar,Se=_.inert;return ee.createElement(ee.Fragment,null,Se?ee.createElement(N,{styles:qw(k)}):null,ge?ee.createElement(Pw,{noRelative:_.noRelative,gapMode:_.gapMode}):null)}function Gw(_){for(var w=null;_!==null;)_ instanceof ShadowRoot&&(w=_.host,_=_.host),_=_.parentNode;return w}const $w=bw(av,Zw);var uv=ee.forwardRef(function(_,w){return ee.createElement(Im,kl({},_,{ref:w,sideCar:$w}))});uv.classNames=Im.classNames;var Xw=[" ","Enter","ArrowUp","ArrowDown"],Yw=[" ","Enter"],lp="Select",[km,Pm,Kw]=Qy(lp),[Vd]=rp(lp,[Kw,Cm]),Lm=Cm(),[Ww,Lu]=Vd(lp),[Qw,Jw]=Vd(lp),hv=_=>{const{__scopeSelect:w,children:C,open:A,defaultOpen:k,onOpenChange:N,value:M,defaultValue:d,onValueChange:G,dir:H,name:J,autoComplete:X,disabled:$,required:ge,form:Se}=_,ce=Lm(w),[_e,Me]=ee.useState(null),[Ie,Pe]=ee.useState(null),[qe,Ze]=ee.useState(!1),mt=Yy(H),[it=!1,Lt]=pm({prop:A,defaultProp:k,onChange:N}),[Nt,Gt]=pm({prop:M,defaultProp:d,onChange:G}),ot=ee.useRef(null),lt=_e?Se||!!_e.closest("form"):!0,[Ft,Rt]=ee.useState(new Set),qt=Array.from(Ft).map(De=>De.props.value).join(";");return be.jsx(O_,{...ce,children:be.jsxs(Ww,{required:ge,scope:w,trigger:_e,onTriggerChange:Me,valueNode:Ie,onValueNodeChange:Pe,valueNodeHasChildren:qe,onValueNodeHasChildrenChange:Ze,contentId:wm(),value:Nt,onValueChange:Gt,open:it,onOpenChange:Lt,dir:mt,triggerPointerDownPosRef:ot,disabled:$,children:[be.jsx(km.Provider,{scope:w,children:be.jsx(Qw,{scope:_.__scopeSelect,onNativeOptionAdd:ee.useCallback(De=>{Rt(Ge=>new Set(Ge).add(De))},[]),onNativeOptionRemove:ee.useCallback(De=>{Rt(Ge=>{const Qe=new Set(Ge);return Qe.delete(De),Qe})},[]),children:C})}),lt?be.jsxs(Lv,{"aria-hidden":!0,required:ge,tabIndex:-1,name:J,autoComplete:X,value:Nt,onChange:De=>Gt(De.target.value),disabled:$,form:Se,children:[Nt===void 0?be.jsx("option",{value:""}):null,Array.from(Ft)]},qt):null]})})};hv.displayName=lp;var dv="SelectTrigger",fv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,disabled:A=!1,...k}=_,N=Lm(C),M=Lu(dv,C),d=M.disabled||A,G=Tn(w,M.onTriggerChange),H=Pm(C),J=ee.useRef("touch"),[X,$,ge]=Ov(ce=>{const _e=H().filter(Pe=>!Pe.disabled),Me=_e.find(Pe=>Pe.value===M.value),Ie=Bv(_e,ce,Me);Ie!==void 0&&M.onValueChange(Ie.value)}),Se=ce=>{d||(M.onOpenChange(!0),ge()),ce&&(M.triggerPointerDownPosRef.current={x:Math.round(ce.pageX),y:Math.round(ce.pageY)})};return be.jsx(B_,{asChild:!0,...N,children:be.jsx(En.button,{type:"button",role:"combobox","aria-controls":M.contentId,"aria-expanded":M.open,"aria-required":M.required,"aria-autocomplete":"none",dir:M.dir,"data-state":M.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":Pv(M.value)?"":void 0,...k,ref:G,onClick:Fi(k.onClick,ce=>{ce.currentTarget.focus(),J.current!=="mouse"&&Se(ce)}),onPointerDown:Fi(k.onPointerDown,ce=>{J.current=ce.pointerType;const _e=ce.target;_e.hasPointerCapture(ce.pointerId)&&_e.releasePointerCapture(ce.pointerId),ce.button===0&&ce.ctrlKey===!1&&ce.pointerType==="mouse"&&(Se(ce),ce.preventDefault())}),onKeyDown:Fi(k.onKeyDown,ce=>{const _e=X.current!=="";!(ce.ctrlKey||ce.altKey||ce.metaKey)&&ce.key.length===1&&$(ce.key),!(_e&&ce.key===" ")&&Xw.includes(ce.key)&&(Se(),ce.preventDefault())})})})});fv.displayName=dv;var pv="SelectValue",e2=ee.forwardRef((_,w)=>{const{__scopeSelect:C,className:A,style:k,children:N,placeholder:M="",...d}=_,G=Lu(pv,C),{onValueNodeHasChildrenChange:H}=G,J=N!==void 0,X=Tn(w,G.onValueNodeChange);return ba(()=>{H(J)},[H,J]),be.jsx(En.span,{...d,ref:X,style:{pointerEvents:"none"},children:Pv(G.value)?be.jsx(be.Fragment,{children:M}):N})});e2.displayName=pv;var t2="SelectIcon",mv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,children:A,...k}=_;return be.jsx(En.span,{"aria-hidden":!0,...k,ref:w,children:A||""})});mv.displayName=t2;var i2="SelectPortal",gv=_=>be.jsx(j_,{asChild:!0,..._});gv.displayName=i2;var wh="SelectContent",yv=ee.forwardRef((_,w)=>{const C=Lu(wh,_.__scopeSelect),[A,k]=ee.useState();if(ba(()=>{k(new DocumentFragment)},[]),!C.open){const N=A;return N?ap.createPortal(be.jsx(_v,{scope:_.__scopeSelect,children:be.jsx(km.Slot,{scope:_.__scopeSelect,children:be.jsx("div",{children:_.children})})}),N):null}return be.jsx(vv,{..._,ref:w})});yv.displayName=wh;var zo=10,[_v,Ou]=Vd(wh),n2="SelectContentImpl",vv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,position:A="item-aligned",onCloseAutoFocus:k,onEscapeKeyDown:N,onPointerDownOutside:M,side:d,sideOffset:G,align:H,alignOffset:J,arrowPadding:X,collisionBoundary:$,collisionPadding:ge,sticky:Se,hideWhenDetached:ce,avoidCollisions:_e,...Me}=_,Ie=Lu(wh,C),[Pe,qe]=ee.useState(null),[Ze,mt]=ee.useState(null),it=Tn(w,Tt=>qe(Tt)),[Lt,Nt]=ee.useState(null),[Gt,ot]=ee.useState(null),lt=Pm(C),[Ft,Rt]=ee.useState(!1),qt=ee.useRef(!1);ee.useEffect(()=>{if(Pe)return hw(Pe)},[Pe]),ew();const De=ee.useCallback(Tt=>{const[Ct,...Ii]=lt().map(Ti=>Ti.ref.current),[pi]=Ii.slice(-1),Si=document.activeElement;for(const Ti of Tt)if(Ti===Si||(Ti?.scrollIntoView({block:"nearest"}),Ti===Ct&&Ze&&(Ze.scrollTop=0),Ti===pi&&Ze&&(Ze.scrollTop=Ze.scrollHeight),Ti?.focus(),document.activeElement!==Si))return},[lt,Ze]),Ge=ee.useCallback(()=>De([Lt,Pe]),[De,Lt,Pe]);ee.useEffect(()=>{Ft&&Ge()},[Ft,Ge]);const{onOpenChange:Qe,triggerPointerDownPosRef:Mt}=Ie;ee.useEffect(()=>{if(Pe){let Tt={x:0,y:0};const Ct=pi=>{Tt={x:Math.abs(Math.round(pi.pageX)-(Mt.current?.x??0)),y:Math.abs(Math.round(pi.pageY)-(Mt.current?.y??0))}},Ii=pi=>{Tt.x<=10&&Tt.y<=10?pi.preventDefault():Pe.contains(pi.target)||Qe(!1),document.removeEventListener("pointermove",Ct),Mt.current=null};return Mt.current!==null&&(document.addEventListener("pointermove",Ct),document.addEventListener("pointerup",Ii,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ct),document.removeEventListener("pointerup",Ii,{capture:!0})}}},[Pe,Qe,Mt]),ee.useEffect(()=>{const Tt=()=>Qe(!1);return window.addEventListener("blur",Tt),window.addEventListener("resize",Tt),()=>{window.removeEventListener("blur",Tt),window.removeEventListener("resize",Tt)}},[Qe]);const[se,je]=Ov(Tt=>{const Ct=lt().filter(Si=>!Si.disabled),Ii=Ct.find(Si=>Si.ref.current===document.activeElement),pi=Bv(Ct,Tt,Ii);pi&&setTimeout(()=>pi.ref.current.focus())}),Je=ee.useCallback((Tt,Ct,Ii)=>{const pi=!qt.current&&!Ii;(Ie.value!==void 0&&Ie.value===Ct||pi)&&(Nt(Tt),pi&&(qt.current=!0))},[Ie.value]),st=ee.useCallback(()=>Pe?.focus(),[Pe]),bt=ee.useCallback((Tt,Ct,Ii)=>{const pi=!qt.current&&!Ii;(Ie.value!==void 0&&Ie.value===Ct||pi)&&ot(Tt)},[Ie.value]),$t=A==="popper"?wg:xv,Et=$t===wg?{side:d,sideOffset:G,align:H,alignOffset:J,arrowPadding:X,collisionBoundary:$,collisionPadding:ge,sticky:Se,hideWhenDetached:ce,avoidCollisions:_e}:{};return be.jsx(_v,{scope:C,content:Pe,viewport:Ze,onViewportChange:mt,itemRefCallback:Je,selectedItem:Lt,onItemLeave:st,itemTextRefCallback:bt,focusSelectedItem:Ge,selectedItemText:Gt,position:A,isPositioned:Ft,searchRef:se,children:be.jsx(uv,{as:Ld,allowPinchZoom:!0,children:be.jsx(ev,{asChild:!0,trapped:Ie.open,onMountAutoFocus:Tt=>{Tt.preventDefault()},onUnmountAutoFocus:Fi(k,Tt=>{Ie.trigger?.focus({preventScroll:!0}),Tt.preventDefault()}),children:be.jsx(kg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:N,onPointerDownOutside:M,onFocusOutside:Tt=>Tt.preventDefault(),onDismiss:()=>Ie.onOpenChange(!1),children:be.jsx($t,{role:"listbox",id:Ie.contentId,"data-state":Ie.open?"open":"closed",dir:Ie.dir,onContextMenu:Tt=>Tt.preventDefault(),...Me,...Et,onPlaced:()=>Rt(!0),ref:it,style:{display:"flex",flexDirection:"column",outline:"none",...Me.style},onKeyDown:Fi(Me.onKeyDown,Tt=>{const Ct=Tt.ctrlKey||Tt.altKey||Tt.metaKey;if(Tt.key==="Tab"&&Tt.preventDefault(),!Ct&&Tt.key.length===1&&je(Tt.key),["ArrowUp","ArrowDown","Home","End"].includes(Tt.key)){let pi=lt().filter(Si=>!Si.disabled).map(Si=>Si.ref.current);if(["ArrowUp","End"].includes(Tt.key)&&(pi=pi.slice().reverse()),["ArrowUp","ArrowDown"].includes(Tt.key)){const Si=Tt.target,Ti=pi.indexOf(Si);pi=pi.slice(Ti+1)}setTimeout(()=>De(pi)),Tt.preventDefault()}})})})})})})});vv.displayName=n2;var r2="SelectItemAlignedPosition",xv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,onPlaced:A,...k}=_,N=Lu(wh,C),M=Ou(wh,C),[d,G]=ee.useState(null),[H,J]=ee.useState(null),X=Tn(w,it=>J(it)),$=Pm(C),ge=ee.useRef(!1),Se=ee.useRef(!0),{viewport:ce,selectedItem:_e,selectedItemText:Me,focusSelectedItem:Ie}=M,Pe=ee.useCallback(()=>{if(N.trigger&&N.valueNode&&d&&H&&ce&&_e&&Me){const it=N.trigger.getBoundingClientRect(),Lt=H.getBoundingClientRect(),Nt=N.valueNode.getBoundingClientRect(),Gt=Me.getBoundingClientRect();if(N.dir!=="rtl"){const Si=Gt.left-Lt.left,Ti=Nt.left-Si,an=it.left-Ti,Bn=it.width+an,wa=Math.max(Bn,Lt.width),Ne=window.innerWidth-zo,An=fm(Ti,[zo,Math.max(zo,Ne-wa)]);d.style.minWidth=Bn+"px",d.style.left=An+"px"}else{const Si=Lt.right-Gt.right,Ti=window.innerWidth-Nt.right-Si,an=window.innerWidth-it.right-Ti,Bn=it.width+an,wa=Math.max(Bn,Lt.width),Ne=window.innerWidth-zo,An=fm(Ti,[zo,Math.max(zo,Ne-wa)]);d.style.minWidth=Bn+"px",d.style.right=An+"px"}const ot=$(),lt=window.innerHeight-zo*2,Ft=ce.scrollHeight,Rt=window.getComputedStyle(H),qt=parseInt(Rt.borderTopWidth,10),De=parseInt(Rt.paddingTop,10),Ge=parseInt(Rt.borderBottomWidth,10),Qe=parseInt(Rt.paddingBottom,10),Mt=qt+De+Ft+Qe+Ge,se=Math.min(_e.offsetHeight*5,Mt),je=window.getComputedStyle(ce),Je=parseInt(je.paddingTop,10),st=parseInt(je.paddingBottom,10),bt=it.top+it.height/2-zo,$t=lt-bt,Et=_e.offsetHeight/2,Tt=_e.offsetTop+Et,Ct=qt+De+Tt,Ii=Mt-Ct;if(Ct<=bt){const Si=ot.length>0&&_e===ot[ot.length-1].ref.current;d.style.bottom="0px";const Ti=H.clientHeight-ce.offsetTop-ce.offsetHeight,an=Math.max($t,Et+(Si?st:0)+Ti+Ge),Bn=Ct+an;d.style.height=Bn+"px"}else{const Si=ot.length>0&&_e===ot[0].ref.current;d.style.top="0px";const an=Math.max(bt,qt+ce.offsetTop+(Si?Je:0)+Et)+Ii;d.style.height=an+"px",ce.scrollTop=Ct-bt+ce.offsetTop}d.style.margin=`${zo}px 0`,d.style.minHeight=se+"px",d.style.maxHeight=lt+"px",A?.(),requestAnimationFrame(()=>ge.current=!0)}},[$,N.trigger,N.valueNode,d,H,ce,_e,Me,N.dir,A]);ba(()=>Pe(),[Pe]);const[qe,Ze]=ee.useState();ba(()=>{H&&Ze(window.getComputedStyle(H).zIndex)},[H]);const mt=ee.useCallback(it=>{it&&Se.current===!0&&(Pe(),Ie?.(),Se.current=!1)},[Pe,Ie]);return be.jsx(s2,{scope:C,contentWrapper:d,shouldExpandOnScrollRef:ge,onScrollButtonChange:mt,children:be.jsx("div",{ref:G,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:qe},children:be.jsx(En.div,{...k,ref:X,style:{boxSizing:"border-box",maxHeight:"100%",...k.style}})})})});xv.displayName=r2;var a2="SelectPopperPosition",wg=ee.forwardRef((_,w)=>{const{__scopeSelect:C,align:A="start",collisionPadding:k=zo,...N}=_,M=Lm(C);return be.jsx(N_,{...M,...N,ref:w,align:A,collisionPadding:k,style:{boxSizing:"border-box",...N.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wg.displayName=a2;var[s2,Hg]=Vd(wh,{}),Sg="SelectViewport",bv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,nonce:A,...k}=_,N=Ou(Sg,C),M=Hg(Sg,C),d=Tn(w,N.onViewportChange),G=ee.useRef(0);return be.jsxs(be.Fragment,{children:[be.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:A}),be.jsx(km.Slot,{scope:C,children:be.jsx(En.div,{"data-radix-select-viewport":"",role:"presentation",...k,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...k.style},onScroll:Fi(k.onScroll,H=>{const J=H.currentTarget,{contentWrapper:X,shouldExpandOnScrollRef:$}=M;if($?.current&&X){const ge=Math.abs(G.current-J.scrollTop);if(ge>0){const Se=window.innerHeight-zo*2,ce=parseFloat(X.style.minHeight),_e=parseFloat(X.style.height),Me=Math.max(ce,_e);if(Me<Se){const Ie=Me+ge,Pe=Math.min(Se,Ie),qe=Ie-Pe;X.style.height=Pe+"px",X.style.bottom==="0px"&&(J.scrollTop=qe>0?qe:0,X.style.justifyContent="flex-end")}}}G.current=J.scrollTop})})})]})});bv.displayName=Sg;var wv="SelectGroup",[o2,l2]=Vd(wv),c2=ee.forwardRef((_,w)=>{const{__scopeSelect:C,...A}=_,k=wm();return be.jsx(o2,{scope:C,id:k,children:be.jsx(En.div,{role:"group","aria-labelledby":k,...A,ref:w})})});c2.displayName=wv;var Sv="SelectLabel",Tv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,...A}=_,k=l2(Sv,C);return be.jsx(En.div,{id:k.id,...A,ref:w})});Tv.displayName=Sv;var vm="SelectItem",[u2,Ev]=Vd(vm),Av=ee.forwardRef((_,w)=>{const{__scopeSelect:C,value:A,disabled:k=!1,textValue:N,...M}=_,d=Lu(vm,C),G=Ou(vm,C),H=d.value===A,[J,X]=ee.useState(N??""),[$,ge]=ee.useState(!1),Se=Tn(w,Ie=>G.itemRefCallback?.(Ie,A,k)),ce=wm(),_e=ee.useRef("touch"),Me=()=>{k||(d.onValueChange(A),d.onOpenChange(!1))};if(A==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return be.jsx(u2,{scope:C,value:A,disabled:k,textId:ce,isSelected:H,onItemTextChange:ee.useCallback(Ie=>{X(Pe=>Pe||(Ie?.textContent??"").trim())},[]),children:be.jsx(km.ItemSlot,{scope:C,value:A,disabled:k,textValue:J,children:be.jsx(En.div,{role:"option","aria-labelledby":ce,"data-highlighted":$?"":void 0,"aria-selected":H&&$,"data-state":H?"checked":"unchecked","aria-disabled":k||void 0,"data-disabled":k?"":void 0,tabIndex:k?void 0:-1,...M,ref:Se,onFocus:Fi(M.onFocus,()=>ge(!0)),onBlur:Fi(M.onBlur,()=>ge(!1)),onClick:Fi(M.onClick,()=>{_e.current!=="mouse"&&Me()}),onPointerUp:Fi(M.onPointerUp,()=>{_e.current==="mouse"&&Me()}),onPointerDown:Fi(M.onPointerDown,Ie=>{_e.current=Ie.pointerType}),onPointerMove:Fi(M.onPointerMove,Ie=>{_e.current=Ie.pointerType,k?G.onItemLeave?.():_e.current==="mouse"&&Ie.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fi(M.onPointerLeave,Ie=>{Ie.currentTarget===document.activeElement&&G.onItemLeave?.()}),onKeyDown:Fi(M.onKeyDown,Ie=>{G.searchRef?.current!==""&&Ie.key===" "||(Yw.includes(Ie.key)&&Me(),Ie.key===" "&&Ie.preventDefault())})})})})});Av.displayName=vm;var ip="SelectItemText",Cv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,className:A,style:k,...N}=_,M=Lu(ip,C),d=Ou(ip,C),G=Ev(ip,C),H=Jw(ip,C),[J,X]=ee.useState(null),$=Tn(w,Me=>X(Me),G.onItemTextChange,Me=>d.itemTextRefCallback?.(Me,G.value,G.disabled)),ge=J?.textContent,Se=ee.useMemo(()=>be.jsx("option",{value:G.value,disabled:G.disabled,children:ge},G.value),[G.disabled,G.value,ge]),{onNativeOptionAdd:ce,onNativeOptionRemove:_e}=H;return ba(()=>(ce(Se),()=>_e(Se)),[ce,_e,Se]),be.jsxs(be.Fragment,{children:[be.jsx(En.span,{id:G.textId,...N,ref:$}),G.isSelected&&M.valueNode&&!M.valueNodeHasChildren?ap.createPortal(N.children,M.valueNode):null]})});Cv.displayName=ip;var Mv="SelectItemIndicator",zv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,...A}=_;return Ev(Mv,C).isSelected?be.jsx(En.span,{"aria-hidden":!0,...A,ref:w}):null});zv.displayName=Mv;var Tg="SelectScrollUpButton",Dv=ee.forwardRef((_,w)=>{const C=Ou(Tg,_.__scopeSelect),A=Hg(Tg,_.__scopeSelect),[k,N]=ee.useState(!1),M=Tn(w,A.onScrollButtonChange);return ba(()=>{if(C.viewport&&C.isPositioned){let d=function(){const H=G.scrollTop>0;N(H)};const G=C.viewport;return d(),G.addEventListener("scroll",d),()=>G.removeEventListener("scroll",d)}},[C.viewport,C.isPositioned]),k?be.jsx(Iv,{..._,ref:M,onAutoScroll:()=>{const{viewport:d,selectedItem:G}=C;d&&G&&(d.scrollTop=d.scrollTop-G.offsetHeight)}}):null});Dv.displayName=Tg;var Eg="SelectScrollDownButton",Rv=ee.forwardRef((_,w)=>{const C=Ou(Eg,_.__scopeSelect),A=Hg(Eg,_.__scopeSelect),[k,N]=ee.useState(!1),M=Tn(w,A.onScrollButtonChange);return ba(()=>{if(C.viewport&&C.isPositioned){let d=function(){const H=G.scrollHeight-G.clientHeight,J=Math.ceil(G.scrollTop)<H;N(J)};const G=C.viewport;return d(),G.addEventListener("scroll",d),()=>G.removeEventListener("scroll",d)}},[C.viewport,C.isPositioned]),k?be.jsx(Iv,{..._,ref:M,onAutoScroll:()=>{const{viewport:d,selectedItem:G}=C;d&&G&&(d.scrollTop=d.scrollTop+G.offsetHeight)}}):null});Rv.displayName=Eg;var Iv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,onAutoScroll:A,...k}=_,N=Ou("SelectScrollButton",C),M=ee.useRef(null),d=Pm(C),G=ee.useCallback(()=>{M.current!==null&&(window.clearInterval(M.current),M.current=null)},[]);return ee.useEffect(()=>()=>G(),[G]),ba(()=>{d().find(J=>J.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),be.jsx(En.div,{"aria-hidden":!0,...k,ref:w,style:{flexShrink:0,...k.style},onPointerDown:Fi(k.onPointerDown,()=>{M.current===null&&(M.current=window.setInterval(A,50))}),onPointerMove:Fi(k.onPointerMove,()=>{N.onItemLeave?.(),M.current===null&&(M.current=window.setInterval(A,50))}),onPointerLeave:Fi(k.onPointerLeave,()=>{G()})})}),h2="SelectSeparator",kv=ee.forwardRef((_,w)=>{const{__scopeSelect:C,...A}=_;return be.jsx(En.div,{"aria-hidden":!0,...A,ref:w})});kv.displayName=h2;var Ag="SelectArrow",d2=ee.forwardRef((_,w)=>{const{__scopeSelect:C,...A}=_,k=Lm(C),N=Lu(Ag,C),M=Ou(Ag,C);return N.open&&M.position==="popper"?be.jsx(F_,{...k,...A,ref:w}):null});d2.displayName=Ag;function Pv(_){return _===""||_===void 0}var Lv=ee.forwardRef((_,w)=>{const{value:C,...A}=_,k=ee.useRef(null),N=Tn(w,k),M=Ky(C);return ee.useEffect(()=>{const d=k.current,G=window.HTMLSelectElement.prototype,J=Object.getOwnPropertyDescriptor(G,"value").set;if(M!==C&&J){const X=new Event("change",{bubbles:!0});J.call(d,C),d.dispatchEvent(X)}},[M,C]),be.jsx(Vg,{asChild:!0,children:be.jsx("select",{...A,ref:N,defaultValue:C})})});Lv.displayName="BubbleSelect";function Ov(_){const w=Lc(_),C=ee.useRef(""),A=ee.useRef(0),k=ee.useCallback(M=>{const d=C.current+M;w(d),(function G(H){C.current=H,window.clearTimeout(A.current),H!==""&&(A.current=window.setTimeout(()=>G(""),1e3))})(d)},[w]),N=ee.useCallback(()=>{C.current="",window.clearTimeout(A.current)},[]);return ee.useEffect(()=>()=>window.clearTimeout(A.current),[]),[C,k,N]}function Bv(_,w,C){const k=w.length>1&&Array.from(w).every(H=>H===w[0])?w[0]:w,N=C?_.indexOf(C):-1;let M=f2(_,Math.max(N,0));k.length===1&&(M=M.filter(H=>H!==C));const G=M.find(H=>H.textValue.toLowerCase().startsWith(k.toLowerCase()));return G!==C?G:void 0}function f2(_,w){return _.map((C,A)=>_[(w+A)%_.length])}var p2=hv,Nv=fv,m2=mv,g2=gv,Fv=yv,y2=bv,jv=Tv,Uv=Av,_2=Cv,v2=zv,Vv=Dv,qv=Rv,Hv=kv;const x2=p2,Zv=ee.forwardRef(({className:_,children:w,...C},A)=>be.jsxs(Nv,{ref:A,className:xa("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_),...C,children:[w,be.jsx(m2,{asChild:!0,children:be.jsx(Mg,{className:"h-4 w-4 opacity-50"})})]}));Zv.displayName=Nv.displayName;const Gv=ee.forwardRef(({className:_,...w},C)=>be.jsx(Vv,{ref:C,className:xa("flex cursor-default items-center justify-center py-1",_),...w,children:be.jsx(By,{className:"h-4 w-4"})}));Gv.displayName=Vv.displayName;const $v=ee.forwardRef(({className:_,...w},C)=>be.jsx(qv,{ref:C,className:xa("flex cursor-default items-center justify-center py-1",_),...w,children:be.jsx(Mg,{className:"h-4 w-4"})}));$v.displayName=qv.displayName;const Xv=ee.forwardRef(({className:_,children:w,position:C="popper",...A},k)=>be.jsx(g2,{children:be.jsxs(Fv,{ref:k,className:xa("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",C==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_),position:C,...A,children:[be.jsx(Gv,{}),be.jsx(y2,{className:xa("p-1",C==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:w}),be.jsx($v,{})]})}));Xv.displayName=Fv.displayName;const b2=ee.forwardRef(({className:_,...w},C)=>be.jsx(jv,{ref:C,className:xa("py-1.5 pl-8 pr-2 text-sm font-semibold",_),...w}));b2.displayName=jv.displayName;const Yv=ee.forwardRef(({className:_,children:w,...C},A)=>be.jsxs(Uv,{ref:A,className:xa("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),...C,children:[be.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:be.jsx(v2,{children:be.jsx(gx,{className:"h-4 w-4"})})}),be.jsx(_2,{children:w})]}));Yv.displayName=Uv.displayName;const w2=ee.forwardRef(({className:_,...w},C)=>be.jsx(Hv,{ref:C,className:xa("-mx-1 my-1 h-px bg-muted",_),...w}));w2.displayName=Hv.displayName;function lm(_){const{label:w,icon:C,value:A,onValueChange:k,options:N,disabled:M,placeholder:d}=_,G=N.find(H=>H.value===A)?.label??d;return be.jsxs("div",{className:"flex flex-col gap-1",children:[be.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium uppercase tracking-wider text-muted-foreground/80",children:[be.jsx(C,{className:"h-3 w-3 opacity-70"}),w]}),be.jsxs(x2,{value:A,onValueChange:k,disabled:M||N.length===0,children:[be.jsx(Zv,{className:"h-8 w-[140px] border-border/50 bg-secondary/40 text-xs font-medium text-foreground shadow-sm transition-all duration-150 hover:border-border hover:bg-secondary/60 focus:border-primary/50 focus:ring-1 focus:ring-primary/30",children:be.jsx("span",{className:"truncate",children:G})}),be.jsx(Xv,{children:N.map(H=>be.jsx(Yv,{value:H.value,className:"text-xs font-medium",children:H.label},H.value))})]})]})}function S2(_){const{region:w,onRegionChange:C,model:A,onModelChange:k,run:N,onRunChange:M,variable:d,onVariableChange:G,regions:H,models:J,runs:X,variables:$,disabled:ge=!1}=_;return be.jsx("header",{role:"toolbar","aria-label":"Weather model controls",className:"sticky top-0 z-50 w-full border-b border-border/40 bg-[hsl(var(--toolbar))]/95 shadow-sm backdrop-blur-md",children:be.jsxs("div",{className:"flex flex-wrap items-end gap-2.5 px-4 py-2.5",children:[be.jsx(lm,{label:"Region",icon:Sx,value:w,onValueChange:C,options:H,disabled:ge,placeholder:"Region"}),be.jsx(lm,{label:"Model",icon:iy,value:A,onValueChange:k,options:J,disabled:ge,placeholder:"Model"}),be.jsx(lm,{label:"Run",icon:Ny,value:N,onValueChange:M,options:X,disabled:ge,placeholder:"Run"}),be.jsx(lm,{label:"Variable",icon:iy,value:d,onValueChange:G,options:$,disabled:ge,placeholder:"Variable"})]})})}async function cp(_){const w=await fetch(_,{credentials:"omit"});if(!w.ok)throw new Error(`Request failed: ${w.status} ${w.statusText}`);return w.json()}async function T2(){return cp(`${op}/models`)}async function E2(_){return cp(`${op}/${encodeURIComponent(_)}/regions`)}async function A2(_,w){return cp(`${op}/${encodeURIComponent(_)}/${encodeURIComponent(w)}/runs`)}async function C2(_,w,C){const A=C||"latest";return cp(`${op}/${encodeURIComponent(_)}/${encodeURIComponent(w)}/${encodeURIComponent(A)}/vars`)}async function ky(_,w,C,A){const k=C||"latest",N=await cp(`${op}/${encodeURIComponent(_)}/${encodeURIComponent(w)}/${encodeURIComponent(k)}/${encodeURIComponent(A)}/frames`);return Array.isArray(N)?N.filter(M=>M&&M.has_cog&&Number.isFinite(Number(M.fh))).sort((M,d)=>Number(M.fh)-Number(d.fh)):[]}function Kv(){return V1.replace(/\/?(api\/v2|tiles\/v2)\/?$/i,"")}function M2(_){return _.replace(/\/tiles\/(?!v2\/)/,"/tiles/v2/")}function z2(_){const w=M2(_);if(w.startsWith("http://")||w.startsWith("https://"))return w;const C=Kv().replace(/\/$/,""),A=w.startsWith("/")?w:`/${w}`;return`${C}${A}`}function D2(_){const w=Kv().replace(/\/$/,""),C=encodeURIComponent;return`${w}/tiles/v2/${C(_.model)}/${C(_.region)}/${C(_.run)}/${C(_.varKey)}/${C(_.fh)}/{z}/{x}/{y}.png`}function R2(_){return _.frameRow?.tile_url_template?z2(_.frameRow.tile_url_template):D2(_)}function cg(_,w){return _.includes(w)?w:_[0]??""}function I2(_){return _.toUpperCase()}function k2(_){return H1[_]??_}function P2(_){if(!_)return"Latest";const w=_.match(/_(\d{2})z$/i);return w?`Latest (${w[1]}z)`:"Latest"}function Py(_,w){return _.length===0?0:_.includes(w)?w:_.reduce((C,A)=>{const k=Math.abs(C-w);return Math.abs(A-w)<k?A:C},_[0])}function L2(_){if(!_)return null;const w=_.match(/^(\d{4})(\d{2})(\d{2})_(\d{2})z$/i);if(!w)return null;const[,C,A,k,N]=w;return new Date(Date.UTC(Number(C),Number(A)-1,Number(k),Number(N),0,0)).toISOString()}function O2(_,w){if(!_)return null;if(Array.isArray(_.legend_stops)&&_.legend_stops.length>0){const C=_.legend_stops.map(([A,k])=>({value:Number(A),color:k})).filter(A=>Number.isFinite(A.value));return C.length===0?null:{title:_.legend_title??"Legend",units:_.units,entries:C,opacity:w}}if(Array.isArray(_.colors)&&_.colors.length>1&&Array.isArray(_.range)&&_.range.length===2){const[C,A]=_.range,k=_.colors.map((N,M)=>{const d=Math.max(1,_.colors.length-1);return{value:C+(A-C)*M/d,color:N}});return{title:_.legend_title??"Legend",units:_.units,entries:k,opacity:w}}return null}function B2(){const[_,w]=ee.useState([]),[C,A]=ee.useState([]),[k,N]=ee.useState([]),[M,d]=ee.useState([]),[G,H]=ee.useState([]),[J,X]=ee.useState(Do.model),[$,ge]=ee.useState(Do.region),[Se,ce]=ee.useState(Do.run),[_e,Me]=ee.useState(Do.variable),[Ie,Pe]=ee.useState(0),[qe,Ze]=ee.useState(!1),[mt,it]=ee.useState(Do.overlayOpacity),[Lt,Nt]=ee.useState(!0),[Gt,ot]=ee.useState(null),lt=ee.useMemo(()=>G.map(se=>Number(se.fh)).filter(Number.isFinite),[G]),Rt=ee.useMemo(()=>new Map(G.map(se=>[Number(se.fh),se])),[G]).get(Ie)??G[0]??null,qt=ee.useMemo(()=>[{value:"latest",label:P2(k[0]??null)},...k.map(se=>({value:se,label:se}))],[k]),De=ee.useMemo(()=>{const se=lt[0]??0;return R2({model:J,region:$,run:Se,varKey:_e,fh:Number.isFinite(Ie)?Ie:se,frameRow:Rt})},[J,$,Se,_e,Ie,lt,Rt]),Ge=ee.useMemo(()=>{const se=Rt?.meta?.meta??G[0]?.meta?.meta??null;return O2(se,mt)},[Rt,G,mt]),Qe=Rt?.run??(Se!=="latest"?Se:k[0]??null),Mt=L2(Qe);return ee.useEffect(()=>{let se=!1;async function je(){Nt(!0),ot(null);try{const Je=await T2();if(se)return;const st=Je.map(Et=>({value:Et.id,label:Et.name||Et.id}));w(st);const bt=st.map(Et=>Et.value),$t=cg(bt,Do.model);X($t)}catch(Je){if(se)return;ot(Je instanceof Error?Je.message:"Failed to load models")}finally{se||Nt(!1)}}return je(),()=>{se=!0}},[]),ee.useEffect(()=>{if(!J)return;let se=!1;async function je(){ot(null);try{const Je=await E2(J);if(se)return;const st=Je.map(Et=>({value:Et,label:I2(Et)}));A(st);const bt=st.map(Et=>Et.value),$t=cg(bt,Do.region);ge(Et=>bt.includes(Et)?Et:$t)}catch(Je){if(se)return;ot(Je instanceof Error?Je.message:"Failed to load regions")}}return je(),()=>{se=!0}},[J]),ee.useEffect(()=>{if(!J||!$)return;let se=!1;async function je(){ot(null);try{const[Je,st]=await Promise.all([A2(J,$),C2(J,$,Se)]);if(se)return;N(Je);const $t=st.filter(Ct=>q1.has(Ct)).map(Ct=>({value:Ct,label:k2(Ct)}));d($t),ce(Ct=>Ct==="latest"?"latest":Je.includes(Ct)?Ct:"latest");const Et=$t.map(Ct=>Ct.value),Tt=cg(Et,Do.variable);Me(Ct=>Et.includes(Ct)?Ct:Tt)}catch(Je){if(se)return;ot(Je instanceof Error?Je.message:"Failed to load runs/variables")}}return je(),()=>{se=!0}},[J,$,Se]),ee.useEffect(()=>{if(!J||!$||!_e)return;let se=!1;async function je(){ot(null);try{const Je=await ky(J,$,Se,_e);if(se)return;H(Je);const st=Je.map(bt=>Number(bt.fh)).filter(Number.isFinite);Pe(bt=>Py(st,bt))}catch(Je){if(se)return;ot(Je instanceof Error?Je.message:"Failed to load frames"),H([])}}return je(),()=>{se=!0}},[J,$,Se,_e]),ee.useEffect(()=>{const se=window.setInterval(()=>{document.hidden||!J||!$||!_e||ky(J,$,Se,_e).then(je=>{H(je);const Je=je.map(st=>Number(st.fh)).filter(Number.isFinite);Pe(st=>Py(Je,st))}).catch(()=>{})},3e4);return()=>window.clearInterval(se)},[J,$,Se,_e]),ee.useEffect(()=>{if(!qe||lt.length===0)return;const se=window.setInterval(()=>{Pe(je=>{const Je=lt.indexOf(je);return Je<0?lt[0]:lt[(Je+1)%lt.length]})},700);return()=>window.clearInterval(se)},[qe,lt]),ee.useEffect(()=>{lt.length===0&&qe&&Ze(!1)},[lt,qe]),be.jsxs("div",{className:"flex h-full flex-col",children:[be.jsx(S2,{region:$,onRegionChange:ge,model:J,onModelChange:X,run:Se,onRunChange:ce,variable:_e,onVariableChange:Me,regions:C,models:_,runs:qt,variables:M,disabled:Lt||_.length===0}),be.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[be.jsx(K1,{tileUrl:De,region:$,opacity:mt}),Gt&&be.jsxs("div",{className:"absolute left-4 top-4 z-40 flex items-center gap-2 rounded-md border border-destructive/50 bg-destructive/10 px-3 py-2 text-xs text-destructive shadow-lg backdrop-blur-md",children:[be.jsx(zg,{className:"h-3.5 w-3.5"}),Gt]}),be.jsx(J1,{legend:Ge,onOpacityChange:it}),be.jsx(N1,{forecastHour:Ie,availableFrames:lt,onForecastHourChange:Pe,isPlaying:qe,setIsPlaying:Ze,runDateTimeISO:Mt,disabled:Lt})]})]})}cx.createRoot(document.getElementById("root")).render(be.jsx(Pc.StrictMode,{children:be.jsx(B2,{})}));
